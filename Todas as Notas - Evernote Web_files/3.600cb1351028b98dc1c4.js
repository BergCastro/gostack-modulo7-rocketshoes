(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{360:function(n,e,t){"use strict";t.r(e);var o=t(371),r=t(21),a=t(466),i=t(446),c=function(n){"undefined"!=typeof window&&"undefined"!=typeof document&&function(n,e,t,o,r,a,i){n.GoogleAnalyticsObject=r,n[r]=n[r]||function(){(n[r].q=n[r].q||[]).push(arguments)},n[r].l=1*new Date,a=e.createElement(t),i=e.getElementsByTagName(t)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(a,i)}(window,document,"script",0,n)},u=t(42),s=t.n(u);function d(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}t.d(e,"getEvernoteRegion",function(){return w}),t.d(e,"createProperty",function(){return p}),t.d(e,"requirePlugins",function(){return _}),t.d(e,"setDimensions",function(){return E}),t.d(e,"sendEvent",function(){return N}),t.d(e,"sendCEEvents",function(){return O}),t.d(e,"sendException",function(){return y}),t.d(e,"sendJourneyEvent",function(){return k}),t.d(e,"setup",function(){return R}),t.d(e,"sendPageView",function(){return A}),t.d(e,"trackExperimentAllocation",function(){return T});var f,l=s.a.GA,v=Object(r.default)("client:utils:analytics"),g=Object({BRANCH_NAME:void 0,NODE_ENV:"production",BASE_URL:"https://www.evernote.com/",CORP_BASE_URL:"https://evernote.com/",BORON:!1,SERVICE_ID:"ion"}),m=g.NODE_ENV,b=g.BORON;"test"===m||b||c(l.name);var w=function(){return o.a.isChinaService()?"YX":"EN"},p=function(n,e){n("create",e,"auto")},_=function(n,e){e.forEach(function(e){return n("require",e)})},E=function(n,e){void 0!==n&&Object.keys(e).forEach(function(t){var o=e[t];n("set",t,o)})},h=function(n,e,t){if(void 0!==n){var o=e.category,r=e.action,a=e.label,i=e.value,c=e.isInteraction,u=e.noteGuid,s=t.dimensions;if(!o||!r||null==a)throw new Error("Category, Action, and Label are required for GA Events");var l={eventCategory:o,eventAction:r,eventLabel:a};if(i&&(l.eventValue=i),null!=c&&(l.notInteraction=c),s&&(null!=f||null!=u)){var v=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),o.forEach(function(e){d(n,e,t[e])})}return n}({},s);null!=f&&(v.dimension5="".concat(w()).concat(f)),null!=u&&(v.dimension23=u),E(n,v)}n("send","event",l)}},N=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(v.log("Sending GA events: ",n),v.log("dimensions: ",e),"undefined"!=typeof window){if(b)return window.electron.ipcRenderer.send("Analytics.Event",n);var t=window[l.name];0===Object.keys(e).length&&e.constructor===Object||E(t,e),h(t,n,l)}},O=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("undefined"!=typeof window&&!b&&Array.isArray(n)){var e=window[l.name];n.forEach(function(n){return e("send","event",n)}),v.log("Sending GA CE events:",n)}},y=function(n){if("undefined"!=typeof window)return b?window.electron.ipcRenderer.send("Analytics.Exception",n):void function(n,e,t){if(void 0!==n){var o=t.dimensions;if(!e.message)throw new Error("Exception message is required for GA Exceptions");var r={exDescription:e.message,exFatal:e.fatal},a={exDescription:e.callstack,exFatal:e.fatal};if(o&&null!=f){var i=Object.assign(o,{dimension5:"".concat(w()).concat(f)});E(n,i)}n("send","exception",r),n("send","exception",a)}}(window[l.name],n,l)},k=function(n){if("undefined"!=typeof window){if(b)return window.electron.ipcRenderer.send("Analytics.Event",n);!function(n,e,t){if(void 0!==n){var o=e.category,r=e.action,a=e.label,i=e.journeyId,c=e.messageId,u=e.linkUrl,s=e.timezoneOffset,d=t.dimensions;if(!o||!r||null==a||null==i||null==c)throw new Error("Category, Action, Label, Journey Id, and Message Id are required for Customer Journey GA events");var l={eventCategory:o,eventAction:r,eventLabel:a};if(d&&null!=f){var v=Object.assign(d,{dimension1:s,dimension5:"".concat(w()).concat(f),dimension26:i,dimension27:c,dimension28:u});E(n,v)}n("send","event",l)}}(window[l.name],n,l),v.log("Sending GA Journey event:",n)}},R=function(n,e){var t=e.require,o=e.dimensions;"www.evernote.com"===window.location.host?p(n,"UA-285778-5"):p(n,"UA-285778-74"),t&&_(n,t),o&&E(n,o),n("set","location",a.a.sanitizeAnalyticsUrl()),n("set","transport","beacon"),n("send","pageview")},A=function(n){if("undefined"!=typeof window){var e=window[l.name];e&&(e("send","pageview",n),v.log("Sending GA pageview:",n))}};Object(i.setSendEventFn)(N),Object(i.setSendExceptionFn)(y),"undefined"==typeof window||b||R(window[l.name],l),"undefined"!=typeof window&&window.addEventListener("error",function(n){y({message:n.message,callstack:n.error?n.error.stack:"no stack",fatal:!0})});e.default=function(n){f=n};function T(n){n&&n.armName&&n.experimentName&&N({label:n.armName,action:n.experimentName,category:"split_test"})}},367:function(n,e,t){"use strict";var o=t(574),r=t(71),a=t(21),i=t(446),c=t(823),u=t(383),s=t(103),d=t(363),f=t(485),l=t(675);function v(n,e,t,o,r,a,i){try{var c=n[a](i),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(o,r)}function g(n,e){var t=s.a.register("business.sso.start",function(n){return function(){var e=this,t=arguments;return new Promise(function(o,r){var a=n.apply(e,t);function i(n){v(a,o,r,i,c,"next",n)}function c(n){v(a,o,r,i,c,"throw",n)}i(void 0)})}}(regeneratorRuntime.mark(function o(){var r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a=function(){s.a.publish("business.sso.invalid"),e(new Error("BusinessSecurityLoginFailure")),t()},r=function(){s.a.publish("business.sso.valid"),Object(f.b)(n,e),t()},Object(l.a)(r,a),o.abrupt("return",Promise.resolve());case 4:case"end":return o.stop()}},o,this)})))}var m=function(n){if(!(n instanceof u.EDAMUserException))return!0;switch(n.errorCode){case u.EDAMErrorCode.AUTH_EXPIRED:case u.EDAMErrorCode.INVALID_AUTH:return Object(d.e)(),!1;case u.EDAMErrorCode.BUSINESS_SECURITY_LOGIN_REQUIRED:return g(function(n){var e=n.shardId,t=n.id;s.a.publish("user","setvaultuser",t),s.a.publish("user","setBusinessShard",e)},function(n,e){return e===f.a.INACTIVE_BUSINESS&&s.a.publish("app.validuser","isValidUser",!1),!1}),!0;default:return!0}};t.d(e,"b",function(){return p});var b=new c.Mutex,w={getFilteredSyncChunk:b,updateNoteIfUsnMatches:b},p={},_={success:0,failure:0};p.total=_;e.a=function(n,e,t){var c=Object(a.default)("ion:rpc:".concat(n,":").concat(e)),u="".concat(n,"#").concat(e),s=p[u]||{success:0,failure:0};p[u]=s;var d=function(){return new Promise(function(n,a){t(function(t,d){t?(c.error(t),s.failure++,_.failure++,Object(i.sendThriftErrorEvent)(u,t),t instanceof r.Exceptions.TransportException&&Object(o.a)(t),m(t)&&a(t)):(c.log(d),s.success++,_.success++,Object(o.c)(200),i.RPC_LOG_USAGE_BLACKLIST.includes(e)||Object(i.logUsageSession)(),n(d))})})};return w[e]?w[e].runExclusive(d):d()}},388:function(n,e,t){"use strict";var o=t(21),r=Object(o.default)("client:utils:TimestampPrinter"),a={now:function(){return 0}};e.a={setTimestampGenerator:function(n){"now"in n?a=n:r.error('invalid timestamp generator! It has no "now" function')},startSelectingNote:function(){var n=a.now();return r.automation("select_note_started: ".concat(n)),n},endRenderingNote:function(){var n=a.now();return r.automation("rendering_note_ended: ".concat(n)),n},startCreatingNote:function(){var n=a.now();return r.automation("create_note_started: ".concat(n)),n},endCreatingNote:function(){var n=a.now();return r.automation("create_note_ended: ".concat(n)),n},markCreatingNoteFailure:function(){r.automation("create_note_ended: -1")},startAddingAttachments:function(){var n=a.now();r.automation("add_attachment_started: ".concat(n))},endAddingAttachments:function(){var n=a.now();r.automation("add_attachment_ended: ".concat(n))},markAddingAttachmentsFailure:function(){r.automation("add_attachment_ended: -1")},startSearchingNotes:function(){var n=a.now();return r.automation("search_note_started: ".concat(n)),n},endSearchingNotes:function(){var n=a.now();return r.automation("search_note_ended: ".concat(n)),n},startDeletingNote:function(){var n=a.now();r.automation("delete_note_started: ".concat(n))},endDeletingNote:function(){var n=a.now();r.automation("delete_note_ended: ".concat(n))},markDeletingNoteFailure:function(){r.automation("delete_note_ended: -1")},startRenderingIon:function(){var n=a.now();return r.automation("rendering_ion_started: ".concat(n)),n},endRenderingIon:function(){var n=a.now();r.automation("rendering_ion_ended: ".concat(n))},endRenderingNoteListView:function(){var n=a.now();return r.automation("navigate_to_notelist_view_started: ".concat(n)),n},startGoingToAllNotebooks:function(){var n=a.now();r.automation("navigate_to_notebook_kingdom_started: ".concat(n))},endGoingToAllNotebooks:function(){var n=a.now();r.automation("navigate_to_notebook_kingdom_ended: ".concat(n))},startSharingNote:function(){var n=a.now();r.automation("share_note_started: ".concat(n))},endSharingNote:function(){var n=a.now();r.automation("share_note_ended: ".concat(n))},markSharingNoteFailure:function(){r.automation("share_note_ended: -1")},startMovingNotebooktoBusiness:function(){var n=a.now();return r.automation("moving_notebook_to_business_start: ".concat(n)),n},endMovingNotebooktoBusiness:function(){var n=a.now();return r.automation("moving_notebook_to_business_end: ".concat(n)),n},startShowingFirstNote:function(){var n=a.now();return r.automation("start_showing_first_note: ".concat(n)),n},endRenderingFirstNote:function(){var n=a.now();return r.automation("end_rendering_first_note: ".concat(n)),n},startRenderingNoteInAllNotesView:function(){var n=a.now();return r.automation("start_rendering_all_notes_view: ".concat(n)),n},endRenderingNoteInAllNotesView:function(){var n=a.now();return r.automation("end_rendering_note_in_all_notes_view: ".concat(n)),n},beginRenderingAllNotebooks:function(){var n=a.now();return r.automation("start_rendering_all_notebooks_view: ".concat(n)),n},endRenderingAllNotebooks:function(){var n=a.now();return r.automation("end_rendering_all_notebooks_view: ".concat(n)),n},beginRenderingSharedWithMe:function(){var n=a.now();return r.automation("start_rendering_shared_with_me: ".concat(n)),n},endRenderingSharedWithMe:function(){var n=a.now();return r.automation("end_rendering_shared_with_me: ".concat(n)),n},startRenderingTagDuchy:function(){var n=a.now();return r.automation("start_rendering_tag_duchy: ".concat(n)),n},endRenderingTagDuchy:function(){var n=a.now();return r.automation("end_rendering_tag_duchy: ".concat(n)),n},startRenderingTagsKingdomView:function(){var n=a.now();return r.automation("start_rendering_tags_kingdom: ".concat(n)),n},endRenderingTagsKingdomView:function(){var n=a.now();return r.automation("end_rendering_tags_kingdom: ".concat(n)),n},startFocusOnSearchView:function(){var n=a.now();return r.automation("start_focus_search_view: ".concat(n)),n},endFocusOnSearchView:function(){var n=a.now();return r.automation("end_focus_search_view: ".concat(n)),n},startUpdatingNoteToService:function(){var n=a.now();return r.automation("start_update_note_to_service: ".concat(n)),n},endUpdatingNoteToService:function(){var n=a.now();return r.automation("end_update_note_to_service: ".concat(n)),n},startDownSync:function(n){var e=a.now();return r.automation("start_down_sync: ".concat(e," from USN ").concat(n||0)),e},endDownSync:function(){var n=a.now();return r.automation("end_down_sync: ".concat(n)),n}}},406:function(n,e,t){"use strict";t.d(e,"i",function(){return u}),t.d(e,"b",function(){return s}),t.d(e,"g",function(){return d}),t.d(e,"h",function(){return f}),t.d(e,"a",function(){return l}),t.d(e,"f",function(){return v}),t.d(e,"j",function(){return g}),t.d(e,"c",function(){return m}),t.d(e,"k",function(){return b}),t.d(e,"d",function(){return w}),t.d(e,"e",function(){return p});var o=t(29),r=t(360),a={APP:"app",NOTE:"note",NOTEBOOK:"notebook",NOTELIST:"notelist",REGISTRATION:"registration",SEARCH:"search"},i={CLICK:"click",CREATE:"create",EXECUTE:"execute",FLE:"fle_render",LAUNCH:"launch",MOVE:"move",RENDER:"render"};function c(){switch(Object(o.b)().applicationRole){case"web":return"";case"BoronPopupNote":return"single_note_view";case"BoronMain":return"in_app";default:return Object(o.b)().applicationRole}}function u(){Object(r.sendEvent)({category:a.NOTE,action:i.CREATE,label:c()})}function s(){Object(r.sendEvent)({category:a.NOTE,action:i.CREATE,label:c()})}function d(){Object(r.sendEvent)({category:a.SEARCH,action:i.EXECUTE,label:c()})}function f(){Object(r.sendEvent)({category:a.SEARCH,action:i.RENDER,label:c()})}function l(){Object(r.sendEvent)({category:a.APP,action:i.LAUNCH,label:c()})}function v(){Object(r.sendEvent)({category:a.REGISTRATION,action:i.FLE,label:c()})}function g(){Object(r.sendEvent)({category:a.NOTEBOOK,action:i.MOVE,label:c()})}function m(){Object(r.sendEvent)({category:a.NOTEBOOK,action:i.MOVE,label:c()})}function b(){Object(r.sendEvent)({category:a.NOTE,action:i.CLICK,label:c()})}function w(){Object(r.sendEvent)({category:a.NOTE,action:i.RENDER,label:c()})}function p(){Object(r.sendEvent)({category:a.NOTELIST,action:i.RENDER,label:c()})}},407:function(n,e,t){"use strict";t.d(e,"h",function(){return m}),t.d(e,"g",function(){return b}),t.d(e,"i",function(){return w}),t.d(e,"j",function(){return p}),t.d(e,"a",function(){return E}),t.d(e,"b",function(){return N}),t.d(e,"f",function(){return O}),t.d(e,"e",function(){return y}),t.d(e,"d",function(){return k}),t.d(e,"c",function(){return R});var o=t(103),r=t(365),a=t(55),i=t(386),c=t(360),u=(t(406),t(382)),s=t(380),d=t(377);function f(n,e,t,o,r,a,i){try{var c=n[a](i),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(o,r)}function l(n){return function(){var e=this,t=arguments;return new Promise(function(o,r){var a=n.apply(e,t);function i(n){f(a,o,r,i,c,"next",n)}function c(n){f(a,o,r,i,c,"throw",n)}i(void 0)})}}var v=function(){var n=l(regeneratorRuntime.mark(function n(e,t){var a,u,s,d,f,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(a=e.notebookGuid,i.a.isFullySynced()){n.next=4;break}return n.next=4,o.a.call("notebook.actions.get",t);case 4:return n.next=6,r.a.updateNote({guid:e.guid,notebookGuid:t});case 6:return n.next=8,o.a.call("note.datasource.getnote",e.guid);case 8:if(u=n.sent,s=u.notebookGuid,Object(c.sendEvent)({category:"note",action:"move",label:""}),t!==s){n.next=22;break}return d=JSON.stringify(["Note",e.guid,a]),n.next=15,o.a.call("preference.actions.getshortcutsarray");case 15:if(f=n.sent,!((l=f.indexOf(d))>0)){n.next=22;break}return f[l]=JSON.stringify(["Note",e.guid,s]),f[0]=JSON.stringify({updated:Date.now()}),n.next=22,r.a.updatePreferences({"evernote.shortcuts":f},["evernote.shortcuts"]);case 22:case"end":return n.stop()}},n,this)}));return function(e,t){return n.apply(this,arguments)}}();function g(n,e){d.b("Message.moveNoteToNotebook.success",{NAME:Object(u.c)(n,15),TO_NOTEBOOK:Object(u.d)(e.name||"",15)},{TO_NOTEBOOK:{action:"selectNotebook",params:{notebook:e}}})}var m=function(){var n=l(regeneratorRuntime.mark(function n(e,t,o){var r,a,i=arguments;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=!(i.length>3&&void 0!==i[3])||i[3],a=o[t],n.prev=2,n.next=5,v(e,t);case 5:r&&g(e.title||"",a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),d.a("Message.moveNoteToNotebook.failure");case 11:case"end":return n.stop()}},n,this,[[2,8]])}));return function(e,t,o){return n.apply(this,arguments)}}(),b=function(){var n=l(regeneratorRuntime.mark(function n(e){var t,a,i,c,s,f,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.note,a=e.space,i=t.guid,c=t.notebookGuid,s=t.title,f=a.backingNotebookGuid,n.next=5,o.a.call("notebook.actions.getnotebook",c);case 5:return l=n.sent,n.prev=6,n.next=9,r.a.updateNote({guid:i,notebookGuid:f});case 9:d.b("Message.makeNoteFloating.success",{NOTE_TITLE:Object(u.c)(s||"",15),PREV_NOTEBOOK_NAME:l.name||""},{PREV_NOTEBOOK_NAME:{action:"selectNotebook",params:{notebook:l}}}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),d.a("Message.makeNoteFloating.failure",{NOTE_TITLE:s||"",PREV_NOTEBOOK_NAME:l.name||""});case 15:case"end":return n.stop()}},n,this,[[6,12]])}));return function(e){return n.apply(this,arguments)}}(),w=function(){var n=l(regeneratorRuntime.mark(function n(e){var t,a,i,f,l,v,g,m,b,w,p,_,E;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.isFullscreen,a=e.isShared,i=e.note,f=e.notebook,l=e.setFullscreen,v=e.space,g=e.user,m=e.i18n,b=null!=v&&null!=f&&f.guid===v.backingNotebookGuid,n.t0=f,!n.t0){n.next=12;break}return n.t1=s.y,n.t2=g,n.t3=f,n.t4=v,n.next=10,o.a.call("identity.actions.getidentities");case 10:n.t5=n.sent,n.t0=(0,n.t1)(n.t2,n.t3,n.t4,n.t5);case 12:if(!n.t0){n.next=29;break}return w=(v||{}).guid,!(p=v&&v.name||"")&&a&&(p=m.t("Shared.label")),n.prev=17,_=i.guid,E=i.title,n.next=21,r.a.updateNote({guid:_,active:!0,deleted:null});case 21:d.b("Message.restoreNote.success",{NAME:Object(u.c)(E||"",15),TO_DESTINATION:b?p:f&&f.name||""},{TO_DESTINATION:{action:"selectRestoredNoteDest",params:{isFloating:b,spaceGuid:w,isShared:a,notebook:f}}}),t&&l(!t),Object(c.sendEvent)({category:"note",action:"restore",label:""}),n.next=29;break;case 26:n.prev=26,n.t6=n.catch(17),d.a("Message.restoreNote.failure");case 29:case"end":return n.stop()}},n,this,[[17,26]])}));return function(e){return n.apply(this,arguments)}}();function p(n){return _.apply(this,arguments)}function _(){return(_=l(regeneratorRuntime.mark(function n(e){var t,o,a,i,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.note,o=e.showToast,n.prev=1,a=t.guid,i=t.title,n.next=5,r.a.shareNote(a);case 5:return c=n.sent,o&&d.b("Message.generatePublicNoteLink.success",{NOTE_TITLE:Object(u.c)(i||"",15)}),n.abrupt("return",c);case 10:throw n.prev=10,n.t0=n.catch(1),n.t0;case 13:case"end":return n.stop()}},n,this,[[1,10]])}))).apply(this,arguments)}function E(n){return h.apply(this,arguments)}function h(){return(h=l(regeneratorRuntime.mark(function n(e){var t,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.note,n.prev=1,o=t.title,d.b("Message.copyPublicNoteLink.success",{NOTE_TITLE:Object(u.c)(o||"",15)}),n.next=9;break;case 6:throw n.prev=6,n.t0=n.catch(1),n.t0;case 9:case"end":return n.stop()}},n,this,[[1,6]])}))).apply(this,arguments)}function N(n,e,t){if(!n.notebookGuid)return"1";return function(){var e=t[n.guid],o=t[n.notebookGuid],r=e?e.userId:null,a=o?o.userId:null;return r||a}()||function(){var t=e[n.notebookGuid];if(t){var o=t.sharedNotebooks;return o&&o.length>0?o[0].userId:null}return null}()||"1"}function O(n){return!(!n||!n.attributes||null==n.attributes.shareDate)}var y=function(){var n=l(regeneratorRuntime.mark(function n(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.call("attachments.actions.getattachment",e);case 2:if(null!=(t=n.sent)){n.next=5;break}return n.abrupt("return",!1);case 5:return n.abrupt("return",!!t.external);case 6:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),k=function(n,e){var t=null!=n&&(null==n.sharedNotes||n.sharedNotes.length<1),o=null!=e&&null==e.workspaceGuid&&(null==e.sharedNotebooks||e.sharedNotebooks.length<1);return t&&o},R=function(n){var e=n.noteDisplayOrder,t=n.notebook,o=n.notebooks,r=n.setNoteDisplayOrder,i=n.sourceItem,u=n.targetNote,s=Object(a.cloneDeep)(e),d=i.note,f=s[d.notebookGuid],l=s[t.guid],v=f.indexOf(d.guid),g=l.indexOf(u.guid);Object(c.sendEvent)({category:"note",action:"drag",label:"board"}),f.splice(v,1),l.splice(g,0,d.guid),r(s),t.guid!==d.notebookGuid&&m(d,t.guid,o,!1)}}}]);