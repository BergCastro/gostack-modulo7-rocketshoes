/*!
 * ce-81.0.9857 b2a083890dd996c75ec72f08cb7e9770a2aba3a7
 * Copyright 2013-2019 Evernote Corp. All rights reserved.
 * http://www.evernote.com
 * 
 */
(this.webpackJsonp=this.webpackJsonp||[]).push([[6],{1679:function(e,t,n){"use strict";n(137);var r=n(201),o=n.n(r),a=n(83),i=n.n(a);n(424);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=function e(t){return t.reduce(function(t,n){return t.concat(Array.isArray(n)?e(n):n)},[])},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(t).filter(Boolean).join(" ")},u=(o()(function(){return{transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}[u("transition")]}),i()(function(e){if("string"!=typeof e)return null;var t=e.substring(0,1).toUpperCase()+e.substring(1),n=[e,"O".concat(t),"Moz".concat(t),"Webkit".concat(t)],r=document.createElement("div");return n.find(function(e){return void 0!==r.style[e]})||null})),d=function(e){return l(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'))},f=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,p=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,h=/^rgba?\((\d+)\,\s?(\d+)\,\s?(\d+)(?:\,\s?([\d\.]+)\s?)?\)$/;function m(e){if(e>=255)return"ff";if(e<=0)return"00";var t=e.toString(16);return t.length<2?"0"+t:t}function g(e){return"string"!=typeof e?e:function(e){return e.match(f)}(e)?e:function(e){return e.match(p)}(e)?function(e){var t=p.exec(e);if(p.lastIndex=0,t.length<4)return!1;var n=t[1],r=t[2],o=t[3];return"#".concat(n).concat(n).concat(r).concat(r).concat(o).concat(o)}(e):function(e){return e.match(h)}(e)?function(e){var t=h.exec(e);if(h.lastIndex=0,t.length<4)return!1;var n=parseInt(t[1],10),r=parseInt(t[2],10),o=parseInt(t[3],10);return"#".concat(m(n)).concat(m(r)).concat(m(o))}(e):e}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"b",function(){return v}),n.d(t,"d",function(){return b}),n.d(t,"e",function(){return i.a}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return d}),n.d(t,"f",function(){return g});var v=function e(t,n){if(t===n)return!0;var r,o=Array.isArray(t),a=Array.isArray(n);if(o&&a){if(t.length!==n.length)return!1;for(r=0;r<t.length;r++)if(!e(t[r],n[r]))return!1;return!0}if(o!=a)return!1;if(t&&n&&"object"===y(t)&&"object"===y(n)){var i=Object.keys(t);if(i.length!==Object.keys(n).length)return!1;var l=t instanceof Date,s=n instanceof Date;if(l&&s)return t.getTime()==n.getTime();if(l!=s)return!1;var c=t instanceof RegExp,u=n instanceof RegExp;if(c&&u)return t.toString()==n.toString();if(c!=u)return!1;for(r=0;r<i.length;r++)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=0;r<i.length;r++)if(!e(t[i[r]],n[i[r]]))return!1;return!0}return!1},b=function(e){var t=navigator.language||navigator.userLanguage||"en",n=new Date,r=new Date(e),o=n.getTime(),a=r.getTime();if(isNaN(a))return"Invalid Date";if(a>o)return"From the Future";if("object"!==("undefined"==typeof Intl?"undefined":y(Intl))||"function"!=typeof Intl.DateTimeFormat)return"".concat(r.getHours(),":").concat(r.getMinutes()," ").concat(r.toLocaleDateString());if(a>o-1728e5){var i=new Date(Date.now()-864e5),l="".concat(r.getMonth(),"-").concat(r.getDate()),s="".concat(n.getMonth(),"-").concat(n.getDate()),c="".concat(i.getMonth(),"-").concat(i.getDate()),u=new Intl.DateTimeFormat(t,{minute:"numeric",hour:"numeric"}).format(r);if(l===s)return"".concat(u," Today");if(l===c)return"".concat(u," Yesterday")}return new Intl.DateTimeFormat(t,{minute:"numeric",hour:"numeric",day:"numeric",month:"short",year:r.getFullYear()===n.getFullYear()?void 0:"numeric"}).format(r)}},1703:function(e,t,n){e.exports={comments:"_1-hUy",adder:"_39TU4",thread:"_3-QR6",floating:"_1f1It",collapsed:"_3kNMS",compact:"Uh1Tr",bubble:"_1q64F",active:"_36g1u",toolbar:"_3fj7o",resolve:"_17cfy",reopen:"_1XeLI",highlight:"_2QBtV",comment:"_2Ytkt",new:"_1wRrN",edit:"aSB3o",avatar:"Uu06f",header:"_2NDPe",name:"_3rzyq",time:"_1mXxM",options:"_3ue1J",wrapper:"_6qB0O",body:"_34uPy",text:"_3OZHe",controls:"_26Hsp",primary:"_1kvf6",destroy:"_3QxAb"}},1706:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(1756),i=n.n(a);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){return o.a.createElement("svg",l({className:i.a.spinner,width:"60px",height:"60px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"},e),o.a.createElement("circle",{className:i.a.path,fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"}))}},1707:function(e,t,n){e.exports={preview:"_3c3CQ","btn-next":"U2iO-",btnNext:"U2iO-","btn-prev":"_261H_",btnPrev:"_261H_",toolbar:"_2jwWz","lbl-flex":"UOUQM",lblFlex:"UOUQM","lbl-title":"atW8U",lblTitle:"atW8U","btn-close":"AgbdQ",btnClose:"AgbdQ","zoom-control":"_35GPP",zoomControl:"_35GPP","lbl-zoom":"_3AgQZ",lblZoom:"_3AgQZ","btn-zoom-in":"_3Z5Sp",btnZoomIn:"_3Z5Sp","btn-zoom-out":"_14zxG",btnZoomOut:"_14zxG",disabled:"_13wA0",item:"_2Gyay",positioner:"_2JY-w",scaler:"_3TYJV",nonav:"oN_mk",animated:"_3c-RR",active:"_2Clft","zoom-in":"_1p2F4",zoomIn:"_1p2F4","zoom-out":"_3ptw1",zoomOut:"_3ptw1",dragging:"omy8S",animating:"_2Z1A2",opaque:"Ca5tM"}},1715:function(e,t,n){e.exports={sansSerifCssFontFamilyValue:'-apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',serifCssFontFamilyValue:'"Source Serif Pro", serif',slabSerifCssFontFamilyValue:'"Zilla Slab", serif, slab-serif',monospaceCssFontFamilyValue:'"Source Code Pro", monospace',scriptCssFontFamilyValue:'"Dancing Script", cursive, script',handwrittenCssFontFamilyValue:"Kalam, cursive, handwritten",inlineCode:"_2tDNm",fontFamilySerif:"_3UbK5",fontFamilySlabSerif:"_1jYeZ",fontFamilyMonospace:"LUa17",fontFamilyScript:"htrHQ",fontFamilyHandwritten:"_2MnU4",highlight:"_2lvaj",yellow:"_2Yni6",red:"_3paj2",green:"_2G2sx",blue:"_3oouW",purple:"_2wy0C",orange:"_3ksOT"}},1717:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",noteHeader:"_2DDGm",titleInput:"_2GuZI",placeholder:"_1SFlg"}},1718:function(e,t,n){e.exports={errorBoundary:"_3C8xR",errorBoundary__inline:"_1NxWB",errorBoundaryInline:"_1NxWB",errorBoundary__block:"_29L5z",errorBoundaryBlock:"_29L5z",errorBoundary__selected:"UnY3T",errorBoundarySelected:"UnY3T",loading__inline:"cIUC9",loadingInline:"cIUC9",loading__block:"_3lSUX",loadingBlock:"_3lSUX"}},1719:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",ghost__MixedSelection:"_2vm6F",ghostMixedSelection:"_2vm6F",ghost__TextBlocks:"N4EkE",ghostTextBlocks:"N4EkE","ghost__TextBlocks--overflow":"_2iXtk",ghostTextBlocksOverflow:"_2iXtk",dropCursor:"_1XP1r"}},1720:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",cellBtn:"_2c6us",tableBtn:"_2G_zw",columns:"_2rWq9",rows:"ox0lH",handlesContainer:"_1DRYz",handles:"kaAGM",handle:"_34WsT",selected:"_3nnup",draggable:"yJbMd",insertionsContainer:"gW0mj",insertions:"yotXa",insertion:"_2q5om",first:"_3Fu4N",insertionShape:"_23N0b",contentContainer:"_2buAs",rowline:"_3Bahd",colline:"_3IUT0",active:"ofBbS",lscroll:"_1407s",rscroll:"_165og",scrollbar:"-QF4S",dragging:"_3gyhu",scrollbarThumb:"_1ogTR"}},1721:function(e,t,n){e.exports={crypt:"_3XrQj",revealed:"_3HowY",selected:"_2S39F",svgbox:"_3eGlT",svgarrow:"_3D86J",rightarrow:"E__tz"}},1722:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",enmediafile:"_2Pzo",loading:"_2QUZL",title:"i7OF3",error:"_170xJ",header:"_2dl-T",headerIcon:"_1LPfs",headerIcon__error:"_2DxKi",headerIconError:"_2DxKi",progress:"_1chmj",filesize:"_2fwYj",viewFile:"_374et",viewer:"_1ib7v",ghost__Attachments:"_2FNAg",ghostAttachments:"_2FNAg",ghost__AttachmentsCount:"axMhR",ghostAttachmentsCount:"axMhR"}},1725:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",container:"_3chs6",editPopover:"_1wBpi",infoPopover:"u6Nli",popoverBackground:"_505P6",popoverAnchorTip:"_2E922",popoverAnchorShadow:"ARBuU",popoverBelow:"qBUW1",popoverAbove:"ACAQN",popoverToRight:"_2vDWy",popoverToLeft:"jyxDT",inputLabel:"_27QmJ",input:"_1t-8r",invalid:"_1Htj3",inputRow:"-wm7N",button:"_3Yjtr",primary:"_2H1NU",disabled:"_1373d",secondary:"_1Q3w9",buttonGroup:"_2dPyO",linkPreview:"v9C-4",linkAction:"_2w5aE",linkActionDivider:"_2Nd8i"}},1726:function(e,t,n){e.exports={container:"_1aYOs",menu:"NorkW",menu_enter:"_2gDhd",menuEnter:"_2gDhd",menu_enter_active:"_2bYn-",menuEnterActive:"_2bYn-",menu_exit:"fd8hN",menuExit:"fd8hN",menu_exit_active:"_1h6_x",menuExitActive:"_1h6_x",divider:"_3brjQ"}},1727:function(e,t,n){e.exports={container:"_2Jf4M",popovermenu:"tr-kv",popovermenu_enter:"_1sLxZ",popovermenuEnter:"_1sLxZ",popovermenu_enter_active:"_1p7f4",popovermenuEnterActive:"_1p7f4",popovermenu_exit:"_2aZBI",popovermenuExit:"_2aZBI",popovermenu_exit_active:"_37OEk",popovermenuExitActive:"_37OEk"}},1749:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1753:function(e,t,n){},1754:function(e,t,n){"use strict";var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e){throw e}var i=void 0,l=!1,s={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};function c(e,t,n){4!==t.length&&a(new s.exception.invalid("invalid aes block size"));var r=e.b[n],o=t[0]^r[0],i=t[n?3:1]^r[1],l=t[2]^r[2];t=t[n?1:3]^r[3];var c,u,d,f,p=r.length/4-2,h=4,m=[0,0,0,0];e=(c=e.o[n])[0];var g=c[1],y=c[2],v=c[3],b=c[4];for(f=0;f<p;f++)c=e[o>>>24]^g[i>>16&255]^y[l>>8&255]^v[255&t]^r[h],u=e[i>>>24]^g[l>>16&255]^y[t>>8&255]^v[255&o]^r[h+1],d=e[l>>>24]^g[t>>16&255]^y[o>>8&255]^v[255&i]^r[h+2],t=e[t>>>24]^g[o>>16&255]^y[i>>8&255]^v[255&l]^r[h+3],h+=4,o=c,i=u,l=d;for(f=0;4>f;f++)m[n?3&-f:f]=b[o>>>24]<<24^b[i>>16&255]<<16^b[l>>8&255]<<8^b[255&t]^r[h++],c=o,o=i,i=l,l=t,t=c;return m}function u(e,t){var n,r=s.random.D[e],o=[];for(n in r)r.hasOwnProperty(n)&&o.push(r[n]);for(n=0;n<o.length;n++)o[n](t)}function d(e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?s.random.addEntropy(window.performance.now(),e,"loadtime"):s.random.addEntropy((new Date).valueOf(),e,"loadtime")}function f(e){e.b=p(e).concat(p(e)),e.F=new s.cipher.aes(e.b)}function p(e){for(var t=0;4>t&&(e.j[t]=e.j[t]+1|0,!e.j[t]);t++);return e.F.encrypt(e.j)}function h(e,t){return function(){t.apply(e,arguments)}}e.exports&&(e.exports=s),void 0===(r=function(){return s}.apply(t,[]))||(e.exports=r),s.cipher.aes=function(e){this.o[0][0][0]||this.t();var t,n,r,o,i=this.o[0][4],l=this.o[1],c=1;for(4!==(t=e.length)&&6!==t&&8!==t&&a(new s.exception.invalid("invalid aes key size")),this.b=[r=e.slice(0),o=[]],e=t;e<4*t+28;e++)n=r[e-1],(0==e%t||8===t&&4==e%t)&&(n=i[n>>>24]<<24^i[n>>16&255]<<16^i[n>>8&255]<<8^i[255&n],0==e%t&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),r[e]=r[e-t]^n;for(t=0;e;t++,e--)n=r[3&t?e:e-4],o[t]=4>=e||4>t?n:l[0][i[n>>>24]]^l[1][i[n>>16&255]]^l[2][i[n>>8&255]]^l[3][i[255&n]]},s.cipher.aes.prototype={encrypt:function(e){return c(this,e,0)},decrypt:function(e){return c(this,e,1)},o:[[[],[],[],[],[]],[[],[],[],[],[]]],t:function(){var e,t,n,r,o,a,i,l=this.o[0],s=this.o[1],c=l[4],u=s[4],d=[],f=[];for(e=0;256>e;e++)f[(d[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=r||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,c[t]=a,u[a]=t,i=16843009*(o=d[e=d[r=d[t]]])^65537*e^257*r^16843008*t,o=257*d[a]^16843008*a,e=0;4>e;e++)l[e][t]=o=o<<24^o>>>8,s[e][a]=i=i<<24^i>>>8;for(e=0;5>e;e++)l[e]=l[e].slice(0),s[e]=s[e].slice(0)}},s.bitArray={bitSlice:function(e,t,n){return e=s.bitArray.R(e.slice(t/32),32-(31&t)).slice(1),n===i?e:s.bitArray.clamp(e,n-t)},extract:function(e,t,n){var r=Math.floor(-t-n&31);return(-32&(t+n-1^t)?e[t/32|0]<<32-r^e[t/32+1|0]>>>r:e[t/32|0]>>>r)&(1<<n)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],r=s.bitArray.getPartial(n);return 32===r?e.concat(t):s.bitArray.R(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+s.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,0<n&&t&&(e[n-1]=s.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(s.bitArray.bitLength(e)!==s.bitArray.bitLength(t))return l;var n,r=0;for(n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},R:function(e,t,n,r){var o;for(o=0,r===i&&(r=[]);32<=t;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(o=0;o<e.length;o++)r.push(n|e[o]>>>t),n=e[o]<<32-t;return o=e.length?e[e.length-1]:0,e=s.bitArray.getPartial(o),r.push(s.bitArray.partial(t+e&31,32<t+e?n:r.pop(),1)),r},g:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,n;for(t=0;t<e.length;++t)n=e[t],e[t]=n>>>24|n>>>8&65280|(65280&n)<<8|n<<24;return e}},s.codec.utf8String={fromBits:function(e){var t,n,r="",o=s.bitArray.bitLength(e);for(t=0;t<o/8;t++)0==(3&t)&&(n=e[t/4]),r+=String.fromCharCode(n>>>24),n<<=8;return decodeURIComponent(escape(r))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e.charCodeAt(t),3==(3&t)&&(n.push(r),r=0);return 3&t&&n.push(s.bitArray.partial(8*(3&t),r)),n}},s.codec.hex={fromBits:function(e){var t,n="";for(t=0;t<e.length;t++)n+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return n.substr(0,s.bitArray.bitLength(e)/4)},toBits:function(e){var t,n,r=[];for(n=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",t=0;t<e.length;t+=8)r.push(0^parseInt(e.substr(t,8),16));return s.bitArray.clamp(r,4*n)}},s.codec.base64={M:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r="",o=0,a=s.codec.base64.M,i=0,l=s.bitArray.bitLength(e);for(n&&(a=a.substr(0,62)+"-_"),n=0;6*r.length<l;)r+=a.charAt((i^e[n]>>>o)>>>26),6>o?(i=e[n]<<6-o,o+=26,n++):(i<<=6,o-=6);for(;3&r.length&&!t;)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n,r,o=[],i=0,l=s.codec.base64.M,c=0;for(t&&(l=l.substr(0,62)+"-_"),n=0;n<e.length;n++)0>(r=l.indexOf(e.charAt(n)))&&a(new s.exception.invalid("this isn't base64!")),26<i?(i-=26,o.push(c^r>>>i),c=r<<32-i):c^=r<<32-(i+=6);return 56&i&&o.push(s.bitArray.partial(56&i,c,1)),o}},s.codec.base64url={fromBits:function(e){return s.codec.base64.fromBits(e,1,1)},toBits:function(e){return s.codec.base64.toBits(e,1)}},s.codec.bytes={fromBits:function(e){var t,n,r=[],o=s.bitArray.bitLength(e);for(t=0;t<o/8;t++)0==(3&t)&&(n=e[t/4]),r.push(n>>>24),n<<=8;return r},toBits:function(e){var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e[t],3==(3&t)&&(n.push(r),r=0);return 3&t&&n.push(s.bitArray.partial(8*(3&t),r)),n}},s.hash.sha256=function(e){this.b[0]||this.t(),e?(this.e=e.e.slice(0),this.d=e.d.slice(0),this.c=e.c):this.reset()},s.hash.sha256.hash=function(e){return(new s.hash.sha256).update(e).finalize()},s.hash.sha256.prototype={blockSize:512,reset:function(){return this.e=this.l.slice(0),this.d=[],this.c=0,this},update:function(e){"string"==typeof e&&(e=s.codec.utf8String.toBits(e));var t,n=this.d=s.bitArray.concat(this.d,e);for(t=this.c,e=this.c=t+s.bitArray.bitLength(e),t=512+t&-512;t<=e;t+=512)this.r(n.splice(0,16));return this},finalize:function(){var e,t=this.d,n=this.e;for(e=(t=s.bitArray.concat(t,[s.bitArray.partial(1,1)])).length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.c/4294967296)),t.push(0|this.c);t.length;)this.r(t.splice(0,16));return this.reset(),n},l:[],b:[],t:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,n=0,r=2;e:for(;64>n;r++){for(t=2;t*t<=r;t++)if(0==r%t)continue e;8>n&&(this.l[n]=e(Math.pow(r,.5))),this.b[n]=e(Math.pow(r,1/3)),n++}},r:function(e){var t,n,r=e.slice(0),o=this.e,a=this.b,i=o[0],l=o[1],s=o[2],c=o[3],u=o[4],d=o[5],f=o[6],p=o[7];for(e=0;64>e;e++)16>e?t=r[e]:(t=r[e+1&15],n=r[e+14&15],t=r[15&e]=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+r[15&e]+r[e+9&15]|0),t=t+p+(u>>>6^u>>>11^u>>>25^u<<26^u<<21^u<<7)+(f^u&(d^f))+a[e],p=f,f=d,d=u,u=c+t|0,c=s,s=l,i=t+((l=i)&s^c&(l^s))+(l>>>2^l>>>13^l>>>22^l<<30^l<<19^l<<10)|0;o[0]=o[0]+i|0,o[1]=o[1]+l|0,o[2]=o[2]+s|0,o[3]=o[3]+c|0,o[4]=o[4]+u|0,o[5]=o[5]+d|0,o[6]=o[6]+f|0,o[7]=o[7]+p|0}},s.hash.sha512=function(e){this.b[0]||this.t(),e?(this.e=e.e.slice(0),this.d=e.d.slice(0),this.c=e.c):this.reset()},s.hash.sha512.hash=function(e){return(new s.hash.sha512).update(e).finalize()},s.hash.sha512.prototype={blockSize:1024,reset:function(){return this.e=this.l.slice(0),this.d=[],this.c=0,this},update:function(e){"string"==typeof e&&(e=s.codec.utf8String.toBits(e));var t,n=this.d=s.bitArray.concat(this.d,e);for(t=this.c,e=this.c=t+s.bitArray.bitLength(e),t=1024+t&-1024;t<=e;t+=1024)this.r(n.splice(0,32));return this},finalize:function(){var e,t=this.d,n=this.e;for(e=(t=s.bitArray.concat(t,[s.bitArray.partial(1,1)])).length+4;31&e;e++)t.push(0);for(t.push(0),t.push(0),t.push(Math.floor(this.c/4294967296)),t.push(0|this.c);t.length;)this.r(t.splice(0,32));return this.reset(),n},l:[],ca:[12372232,13281083,9762859,1914609,15106769,4090911,4308331,8266105],b:[],ea:[2666018,15689165,5061423,9034684,4764984,380953,1658779,7176472,197186,7368638,14987916,16757986,8096111,1480369,13046325,6891156,15813330,5187043,9229749,11312229,2818677,10937475,4324308,1135541,6741931,11809296,16458047,15666916,11046850,698149,229999,945776,13774844,2541862,12856045,9810911,11494366,7844520,15576806,8533307,15795044,4337665,16291729,5553712,15684120,6662416,7413802,12308920,13816008,4303699,9366425,10176680,13195875,4295371,6546291,11712675,15708924,1519456,15772530,6568428,6495784,8568297,13007125,7492395,2515356,12632583,14740254,7262584,1535930,13146278,16321966,1853211,294276,13051027,13221564,1051980,4080310,6651434,14088940,4675607],t:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}function t(e){return 1099511627776*(e-Math.floor(e))&255}var n,r=0,o=2;e:for(;80>r;o++){for(n=2;n*n<=o;n++)if(0==o%n)continue e;8>r&&(this.l[2*r]=e(Math.pow(o,.5)),this.l[2*r+1]=t(Math.pow(o,.5))<<24|this.ca[r]),this.b[2*r]=e(Math.pow(o,1/3)),this.b[2*r+1]=t(Math.pow(o,1/3))<<24|this.ea[r],r++}},r:function(e){var t,n,r=e.slice(0),o=this.e,a=this.b,i=o[0],l=o[1],s=o[2],c=o[3],u=o[4],d=o[5],f=o[6],p=o[7],h=o[8],m=o[9],g=o[10],y=o[11],v=o[12],b=o[13],w=o[14],k=o[15],_=i,O=l,C=s,S=c,x=u,E=d,P=f,j=p,M=h,A=m,T=g,N=y,D=v,L=b,R=w,I=k;for(e=0;80>e;e++){if(16>e)t=r[2*e],n=r[2*e+1];else{n=r[2*(e-15)];K=r[2*(e-15)+1];t=(K<<31|n>>>1)^(K<<24|n>>>8)^n>>>7;var z=(n<<31|K>>>1)^(n<<24|K>>>8)^(n<<25|K>>>7);n=r[2*(e-2)];K=((B=r[2*(e-2)+1])<<13|n>>>19)^(n<<3|B>>>29)^n>>>6;var B=(n<<13|B>>>19)^(B<<3|n>>>29)^(n<<26|B>>>6),F=r[2*(e-7)],W=r[2*(e-16)],H=r[2*(e-16)+1];t=t+F+((n=z+r[2*(e-7)+1])>>>0<z>>>0?1:0),t+=K+((n+=B)>>>0<B>>>0?1:0),t+=W+((n+=H)>>>0<H>>>0?1:0)}r[2*e]=t|=0,r[2*e+1]=n|=0;F=M&T^~M&D;var $=A&N^~A&L,q=(B=_&C^_&x^C&x,O&S^O&E^S&E),V=(W=(O<<4|_>>>28)^(_<<30|O>>>2)^(_<<25|O>>>7),H=(_<<4|O>>>28)^(O<<30|_>>>2)^(O<<25|_>>>7),a[2*e]),U=a[2*e+1],K=(K=I+((M<<18|A>>>14)^(M<<14|A>>>18)^(A<<23|M>>>9)),z=R+((A<<18|M>>>14)^(A<<14|M>>>18)^(M<<23|A>>>9))+(K>>>0<I>>>0?1:0),K=K+$,z=z+(F+(K>>>0<$>>>0?1:0)),K=K+U,z=z+(V+(K>>>0<U>>>0?1:0)),K+n|0);R=D,I=L,D=T,L=N,T=M,N=A,M=P+(z=z+(t+(K>>>0<n>>>0?1:0)))+((A=j+K|0)>>>0<j>>>0?1:0)|0,P=x,j=E,x=C,E=S,C=_,S=O,_=z+(t=W+B+((n=H+q)>>>0<H>>>0?1:0))+((O=K+n|0)>>>0<K>>>0?1:0)|0}l=o[1]=l+O|0,o[0]=i+_+(l>>>0<O>>>0?1:0)|0,c=o[3]=c+S|0,o[2]=s+C+(c>>>0<S>>>0?1:0)|0,d=o[5]=d+E|0,o[4]=u+x+(d>>>0<E>>>0?1:0)|0,p=o[7]=p+j|0,o[6]=f+P+(p>>>0<j>>>0?1:0)|0,m=o[9]=m+A|0,o[8]=h+M+(m>>>0<A>>>0?1:0)|0,y=o[11]=y+N|0,o[10]=g+T+(y>>>0<N>>>0?1:0)|0,b=o[13]=b+L|0,o[12]=v+D+(b>>>0<L>>>0?1:0)|0,k=o[15]=k+I|0,o[14]=w+R+(k>>>0<I>>>0?1:0)|0}},s.mode.ccm={name:"ccm",w:[],listenProgress:function(e){s.mode.ccm.w.push(e)},unListenProgress:function(e){-1<(e=s.mode.ccm.w.indexOf(e))&&s.mode.ccm.w.splice(e,1)},X:function(e){var t,n=s.mode.ccm.w.slice();for(t=0;t<n.length;t+=1)n[t](e)},encrypt:function(e,t,n,r,o){var i,l=t.slice(0),c=s.bitArray,u=c.bitLength(n)/8,d=c.bitLength(l)/8;for(o=o||64,r=r||[],7>u&&a(new s.exception.invalid("ccm: iv must be at least 7 bytes")),i=2;4>i&&d>>>8*i;i++);return i<15-u&&(i=15-u),n=c.clamp(n,8*(15-i)),t=s.mode.ccm.O(e,t,n,r,o,i),l=s.mode.ccm.s(e,l,n,t,o,i),c.concat(l.data,l.tag)},decrypt:function(e,t,n,r,o){o=o||64,r=r||[];var i=s.bitArray,l=i.bitLength(n)/8,c=i.bitLength(t),u=i.clamp(t,c-o),d=i.bitSlice(t,c-o);c=(c-o)/8;for(7>l&&a(new s.exception.invalid("ccm: iv must be at least 7 bytes")),t=2;4>t&&c>>>8*t;t++);return t<15-l&&(t=15-l),n=i.clamp(n,8*(15-t)),u=s.mode.ccm.s(e,u,n,d,o,t),e=s.mode.ccm.O(e,u.data,n,r,o,t),i.equal(u.tag,e)||a(new s.exception.corrupt("ccm: tag doesn't match")),u.data},ga:function(e,t,n,r,o,a){var i=[],l=s.bitArray,c=l.g;if(r=[l.partial(8,(t.length?64:0)|r-2<<2|a-1)],(r=l.concat(r,n))[3]|=o,r=e.encrypt(r),t.length)for(65279>=(n=l.bitLength(t)/8)?i=[l.partial(16,n)]:4294967295>=n&&(i=l.concat([l.partial(16,65534)],[n])),i=l.concat(i,t),t=0;t<i.length;t+=4)r=e.encrypt(c(r,i.slice(t,t+4).concat([0,0,0])));return r},O:function(e,t,n,r,o,i){var l=s.bitArray,c=l.g;for(((o/=8)%2||4>o||16<o)&&a(new s.exception.invalid("ccm: invalid tag length")),(4294967295<r.length||4294967295<t.length)&&a(new s.exception.bug("ccm: can't deal with 4GiB or more data")),n=s.mode.ccm.ga(e,r,n,o,l.bitLength(t)/8,i),r=0;r<t.length;r+=4)n=e.encrypt(c(n,t.slice(r,r+4).concat([0,0,0])));return l.clamp(n,8*o)},s:function(e,t,n,r,o,a){var i,l=s.bitArray;i=l.g;var c=t.length,u=l.bitLength(t),d=c/50,f=d;if(n=l.concat([l.partial(8,a-1)],n).concat([0,0,0]).slice(0,4),r=l.bitSlice(i(r,e.encrypt(n)),0,o),!c)return{tag:r,data:[]};for(i=0;i<c;i+=4)i>d&&(s.mode.ccm.X(i/c),d+=f),n[3]++,o=e.encrypt(n),t[i]^=o[0],t[i+1]^=o[1],t[i+2]^=o[2],t[i+3]^=o[3];return{tag:r,data:l.clamp(t,u)}}},s.beware===i&&(s.beware={}),s.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){s.mode.cbc={name:"cbc",encrypt:function(e,t,n,r){r&&r.length&&a(new s.exception.invalid("cbc can't authenticate data")),128!==s.bitArray.bitLength(n)&&a(new s.exception.invalid("cbc iv must be 128 bits"));var o=s.bitArray,i=o.g,l=o.bitLength(t),c=0,u=[];for(7&l&&a(new s.exception.invalid("pkcs#5 padding only works for multiples of a byte")),r=0;c+128<=l;r+=4,c+=128)n=e.encrypt(i(n,t.slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]);return l=16843009*(16-(l>>3&15)),n=e.encrypt(i(n,o.concat(t,[l,l,l,l]).slice(r,r+4))),u.splice(r,0,n[0],n[1],n[2],n[3]),u},decrypt:function(e,t,n,r){r&&r.length&&a(new s.exception.invalid("cbc can't authenticate data")),128!==s.bitArray.bitLength(n)&&a(new s.exception.invalid("cbc iv must be 128 bits")),(127&s.bitArray.bitLength(t)||!t.length)&&a(new s.exception.corrupt("cbc ciphertext must be a positive multiple of the block size"));var o,i=s.bitArray,l=i.g,c=[];for(r=0;r<t.length;r+=4)o=t.slice(r,r+4),n=l(n,e.decrypt(o)),c.splice(r,0,n[0],n[1],n[2],n[3]),n=o;return(0===(o=255&c[r-1])||16<o)&&a(new s.exception.corrupt("pkcs#5 padding corrupt")),n=16843009*o,i.equal(i.bitSlice([n,n,n,n],0,8*o),i.bitSlice(c,32*c.length-8*o,32*c.length))||a(new s.exception.corrupt("pkcs#5 padding corrupt")),i.bitSlice(c,0,32*c.length-8*o)}}},s.mode.ocb2={name:"ocb2",encrypt:function(e,t,n,r,o,i){128!==s.bitArray.bitLength(n)&&a(new s.exception.invalid("ocb iv must be 128 bits"));var l,c=s.mode.ocb2.K,u=s.bitArray,d=u.g,f=[0,0,0,0];n=c(e.encrypt(n));var p,h=[];for(r=r||[],o=o||64,l=0;l+4<t.length;l+=4)f=d(f,p=t.slice(l,l+4)),h=h.concat(d(n,e.encrypt(d(n,p)))),n=c(n);return p=t.slice(l),t=u.bitLength(p),l=e.encrypt(d(n,[0,0,0,t])),p=u.clamp(d(p.concat([0,0,0]),l),t),f=d(f,d(p.concat([0,0,0]),l)),f=e.encrypt(d(f,d(n,c(n)))),r.length&&(f=d(f,i?r:s.mode.ocb2.pmac(e,r))),h.concat(u.concat(p,u.clamp(f,o)))},decrypt:function(e,t,n,r,o,i){128!==s.bitArray.bitLength(n)&&a(new s.exception.invalid("ocb iv must be 128 bits")),o=o||64;var l,c,u=s.mode.ocb2.K,d=s.bitArray,f=d.g,p=[0,0,0,0],h=u(e.encrypt(n)),m=s.bitArray.bitLength(t)-o,g=[];for(r=r||[],n=0;n+4<m/32;n+=4)l=f(h,e.decrypt(f(h,t.slice(n,n+4)))),p=f(p,l),g=g.concat(l),h=u(h);return c=m-32*n,l=e.encrypt(f(h,[0,0,0,c])),l=f(l,d.clamp(t.slice(n),c).concat([0,0,0])),p=f(p,l),p=e.encrypt(f(p,f(h,u(h)))),r.length&&(p=f(p,i?r:s.mode.ocb2.pmac(e,r))),d.equal(d.clamp(p,o),d.bitSlice(t,m))||a(new s.exception.corrupt("ocb: tag doesn't match")),g.concat(d.clamp(l,c))},pmac:function(e,t){var n,r=s.mode.ocb2.K,o=s.bitArray,a=o.g,i=[0,0,0,0],l=a(l=e.encrypt([0,0,0,0]),r(r(l)));for(n=0;n+4<t.length;n+=4)l=r(l),i=a(i,e.encrypt(a(l,t.slice(n,n+4))));return n=t.slice(n),128>o.bitLength(n)&&(l=a(l,r(l)),n=o.concat(n,[-2147483648,0,0,0])),i=a(i,n),e.encrypt(a(r(a(l,r(l))),i))},K:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},s.mode.gcm={name:"gcm",encrypt:function(e,t,n,r,o){var a=t.slice(0);return t=s.bitArray,r=r||[],e=s.mode.gcm.s(!0,e,a,r,n,o||128),t.concat(e.data,e.tag)},decrypt:function(e,t,n,r,o){var i=t.slice(0),c=s.bitArray,u=c.bitLength(i);return r=r||[],(o=o||128)<=u?(t=c.bitSlice(i,u-o),i=c.bitSlice(i,0,u-o)):(t=i,i=[]),e=s.mode.gcm.s(l,e,i,r,n,o),c.equal(e.tag,t)||a(new s.exception.corrupt("gcm: tag doesn't match")),e.data},ba:function(e,t){var n,r,o,a,i,l=s.bitArray.g;for(o=[0,0,0,0],a=t.slice(0),n=0;128>n;n++){for((r=0!=(e[Math.floor(n/32)]&1<<31-n%32))&&(o=l(o,a)),i=0!=(1&a[3]),r=3;0<r;r--)a[r]=a[r]>>>1|(1&a[r-1])<<31;a[0]>>>=1,i&&(a[0]^=-520093696)}return o},k:function(e,t,n){var r,o=n.length;for(t=t.slice(0),r=0;r<o;r+=4)t[0]^=4294967295&n[r],t[1]^=4294967295&n[r+1],t[2]^=4294967295&n[r+2],t[3]^=4294967295&n[r+3],t=s.mode.gcm.ba(t,e);return t},s:function(e,t,n,r,o,a){var i,l,c,u,d,f,p,h,m=s.bitArray;for(f=n.length,p=m.bitLength(n),h=m.bitLength(r),l=m.bitLength(o),i=t.encrypt([0,0,0,0]),96===l?(o=o.slice(0),o=m.concat(o,[1])):(o=s.mode.gcm.k(i,[0,0,0,0],o),o=s.mode.gcm.k(i,o,[0,0,Math.floor(l/4294967296),4294967295&l])),l=s.mode.gcm.k(i,[0,0,0,0],r),d=o.slice(0),r=l.slice(0),e||(r=s.mode.gcm.k(i,l,n)),u=0;u<f;u+=4)d[3]++,c=t.encrypt(d),n[u]^=c[0],n[u+1]^=c[1],n[u+2]^=c[2],n[u+3]^=c[3];return n=m.clamp(n,p),e&&(r=s.mode.gcm.k(i,l,n)),e=[Math.floor(h/4294967296),4294967295&h,Math.floor(p/4294967296),4294967295&p],r=s.mode.gcm.k(i,r,e),c=t.encrypt(o),r[0]^=c[0],r[1]^=c[1],r[2]^=c[2],r[3]^=c[3],{tag:m.bitSlice(r,0,a),data:n}}},s.misc.hmac=function(e,t){this.P=t=t||s.hash.sha256;var n,r=[[],[]],o=t.prototype.blockSize/32;for(this.q=[new t,new t],e.length>o&&(e=t.hash(e)),n=0;n<o;n++)r[0][n]=909522486^e[n],r[1][n]=1549556828^e[n];this.q[0].update(r[0]),this.q[1].update(r[1]),this.J=new t(this.q[0])},s.misc.hmac.prototype.encrypt=s.misc.hmac.prototype.mac=function(e){return this.S&&a(new s.exception.invalid("encrypt on already updated hmac called!")),this.update(e),this.digest(e)},s.misc.hmac.prototype.reset=function(){this.J=new this.P(this.q[0]),this.S=l},s.misc.hmac.prototype.update=function(e){this.S=!0,this.J.update(e)},s.misc.hmac.prototype.digest=function(){var e=this.J.finalize();e=new this.P(this.q[1]).update(e).finalize();return this.reset(),e},s.misc.pbkdf2=function(e,t,n,r,o){n=n||1e3,(0>r||0>n)&&a(s.exception.invalid("invalid params to pbkdf2")),"string"==typeof e&&(e=s.codec.utf8String.toBits(e)),"string"==typeof t&&(t=s.codec.utf8String.toBits(t)),e=new(o=o||s.misc.hmac)(e);var i,l,c,u,d=[],f=s.bitArray;for(u=1;32*d.length<(r||1);u++){for(o=i=e.encrypt(f.concat(t,[u])),l=1;l<n;l++)for(i=e.encrypt(i),c=0;c<i.length;c++)o[c]^=i[c];d=d.concat(o)}return r&&(d=f.clamp(d,r)),d},s.prng=function(e){this.f=[new s.hash.sha256],this.m=[0],this.I=0,this.A={},this.H=0,this.N={},this.Q=this.h=this.n=this.Z=0,this.b=[0,0,0,0,0,0,0,0],this.j=[0,0,0,0],this.F=i,this.G=e,this.u=l,this.D={progress:{},seeded:{}},this.p=this.Y=0,this.B=1,this.C=2,this.U=65536,this.L=[0,48,64,96,128,192,256,384,512,768,1024],this.V=3e4,this.T=80},s.prng.prototype={randomWords:function(e,t){var n,r,o=[];if((n=this.isReady(t))===this.p&&a(new s.exception.notReady("generator isn't seeded")),n&this.C){n=!(n&this.B),r=[];var i,l=0;for(this.Q=r[0]=(new Date).valueOf()+this.V,i=0;16>i;i++)r.push(4294967296*Math.random()|0);for(i=0;i<this.f.length&&(r=r.concat(this.f[i].finalize()),l+=this.m[i],this.m[i]=0,n||!(this.I&1<<i));i++);for(this.I>=1<<this.f.length&&(this.f.push(new s.hash.sha256),this.m.push(0)),this.h-=l,l>this.n&&(this.n=l),this.I++,this.b=s.hash.sha256.hash(this.b.concat(r)),this.F=new s.cipher.aes(this.b),n=0;4>n&&(this.j[n]=this.j[n]+1|0,!this.j[n]);n++);}for(n=0;n<e;n+=4)0==(n+1)%this.U&&f(this),r=p(this),o.push(r[0],r[1],r[2],r[3]);return f(this),o.slice(0,e)},setDefaultParanoia:function(e,t){0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t&&a("Setting paranoia=0 will ruin your security; use it only for testing"),this.G=e},addEntropy:function(e,t,n){n=n||"user";var r,l,c=(new Date).valueOf(),d=this.A[n],f=this.isReady(),p=0;switch((r=this.N[n])===i&&(r=this.N[n]=this.Z++),d===i&&(d=this.A[n]=0),this.A[n]=(this.A[n]+1)%this.f.length,o(e)){case"number":t===i&&(t=1),this.f[d].update([r,this.H++,1,t,c,1,0|e]);break;case"object":if("[object Uint32Array]"===(n=Object.prototype.toString.call(e))){for(l=[],n=0;n<e.length;n++)l.push(e[n]);e=l}else for("[object Array]"!==n&&(p=1),n=0;n<e.length&&!p;n++)"number"!=typeof e[n]&&(p=1);if(!p){if(t===i)for(n=t=0;n<e.length;n++)for(l=e[n];0<l;)t++,l>>>=1;this.f[d].update([r,this.H++,2,t,c,e.length].concat(e))}break;case"string":t===i&&(t=e.length),this.f[d].update([r,this.H++,3,t,c,e.length]),this.f[d].update(e);break;default:p=1}p&&a(new s.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.m[d]+=t,this.h+=t,f===this.p&&(this.isReady()!==this.p&&u("seeded",Math.max(this.n,this.h)),u("progress",this.getProgress()))},isReady:function(e){return e=this.L[e!==i?e:this.G],this.n&&this.n>=e?this.m[0]>this.T&&(new Date).valueOf()>this.Q?this.C|this.B:this.B:this.h>=e?this.C|this.p:this.p},getProgress:function(e){return e=this.L[e||this.G],this.n>=e?1:this.h>e?1:this.h/e},startCollectors:function(){this.u||(this.a={loadTimeCollector:h(this,this.fa),mouseCollector:h(this,this.ha),keyboardCollector:h(this,this.da),accelerometerCollector:h(this,this.W),touchCollector:h(this,this.ja)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,l),window.addEventListener("mousemove",this.a.mouseCollector,l),window.addEventListener("keypress",this.a.keyboardCollector,l),window.addEventListener("devicemotion",this.a.accelerometerCollector,l),window.addEventListener("touchmove",this.a.touchCollector,l)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):a(new s.exception.bug("can't attach event")),this.u=!0)},stopCollectors:function(){this.u&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,l),window.removeEventListener("mousemove",this.a.mouseCollector,l),window.removeEventListener("keypress",this.a.keyboardCollector,l),window.removeEventListener("devicemotion",this.a.accelerometerCollector,l),window.removeEventListener("touchmove",this.a.touchCollector,l)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.u=l)},addEventListener:function(e,t){this.D[e][this.Y++]=t},removeEventListener:function(e,t){var n,r,o=this.D[e],a=[];for(r in o)o.hasOwnProperty(r)&&o[r]===t&&a.push(r);for(n=0;n<a.length;n++)delete o[r=a[n]]},da:function(){d(1)},ha:function(e){var t,n;try{t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0}catch(e){n=t=0}0!=t&&0!=n&&s.random.addEntropy([t,n],2,"mouse"),d(0)},ja:function(e){e=e.touches[0]||e.changedTouches[0],s.random.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),d(0)},fa:function(){d(2)},W:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&s.random.addEntropy(t,1,"accelerometer")}e&&s.random.addEntropy(e,2,"accelerometer"),d(0)}},s.random=new s.prng(6);e:try{var m,g,y,v;if(v=void 0!==e){var b;if(b=e.exports){var w;try{w=n(!function(){var e=new Error("Cannot find module 'crypto'");throw e.code="MODULE_NOT_FOUND",e}())}catch(e){w=null}b=(g=w)&&g.randomBytes}v=b}if(v)m=g.randomBytes(128),m=new Uint32Array(new Uint8Array(m).buffer),s.random.addEntropy(m,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(y=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(y);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(y)}s.random.addEntropy(y,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}s.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},aa:function(e,t,n,r){n=n||{},r=r||{};var o,i=s.json,l=i.i({iv:s.random.randomWords(4,0)},i.defaults);return i.i(l,n),n=l.adata,"string"==typeof l.salt&&(l.salt=s.codec.base64.toBits(l.salt)),"string"==typeof l.iv&&(l.iv=s.codec.base64.toBits(l.iv)),(!s.mode[l.mode]||!s.cipher[l.cipher]||"string"==typeof e&&100>=l.iter||64!==l.ts&&96!==l.ts&&128!==l.ts||128!==l.ks&&192!==l.ks&&256!==l.ks||2>l.iv.length||4<l.iv.length)&&a(new s.exception.invalid("json encrypt: invalid parameters")),"string"==typeof e?(e=(o=s.misc.cachedPbkdf2(e,l)).key.slice(0,l.ks/32),l.salt=o.salt):s.ecc&&e instanceof s.ecc.elGamal.publicKey&&(o=e.kem(),l.kemtag=o.tag,e=o.key.slice(0,l.ks/32)),"string"==typeof t&&(t=s.codec.utf8String.toBits(t)),"string"==typeof n&&(l.adata=n=s.codec.utf8String.toBits(n)),o=new s.cipher[l.cipher](e),i.i(r,l),r.key=e,l.ct="ccm"===l.mode&&s.arrayBuffer&&s.arrayBuffer.ccm&&t instanceof ArrayBuffer?s.arrayBuffer.ccm.encrypt(o,t,l.iv,n,l.ts):s.mode[l.mode].encrypt(o,t,l.iv,n,l.ts),l},encrypt:function(e,t,n,r){var o=s.json,a=o.aa.apply(o,arguments);return o.encode(a)},$:function(e,t,n,r){n=n||{},r=r||{};var o,i,l=s.json;return o=(t=l.i(l.i(l.i({},l.defaults),t),n,!0)).adata,"string"==typeof t.salt&&(t.salt=s.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=s.codec.base64.toBits(t.iv)),(!s.mode[t.mode]||!s.cipher[t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)&&a(new s.exception.invalid("json decrypt: invalid parameters")),"string"==typeof e?(e=(i=s.misc.cachedPbkdf2(e,t)).key.slice(0,t.ks/32),t.salt=i.salt):s.ecc&&e instanceof s.ecc.elGamal.secretKey&&(e=e.unkem(s.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof o&&(o=s.codec.utf8String.toBits(o)),i=new s.cipher[t.cipher](e),o="ccm"===t.mode&&s.arrayBuffer&&s.arrayBuffer.ccm&&t.ct instanceof ArrayBuffer?s.arrayBuffer.ccm.decrypt(i,t.ct,t.iv,t.tag,o,t.ts):s.mode[t.mode].decrypt(i,t.ct,t.iv,o,t.ts),l.i(r,t),r.key=e,1===n.raw?o:s.codec.utf8String.fromBits(o)},decrypt:function(e,t,n,r){var o=s.json;return o.$(e,o.decode(t),n,r)},encode:function(e){var t,n="{",r="";for(t in e)if(e.hasOwnProperty(t))switch(t.match(/^[a-z0-9]+$/i)||a(new s.exception.invalid("json encode: invalid property name")),n+=r+'"'+t+'":',r=",",o(e[t])){case"number":case"boolean":n+=e[t];break;case"string":n+='"'+escape(e[t])+'"';break;case"object":n+='"'+s.codec.base64.fromBits(e[t],0)+'"';break;default:a(new s.exception.bug("json encode: unsupported type"))}return n+"}"},decode:function(e){(e=e.replace(/\s/g,"")).match(/^\{.*\}$/)||a(new s.exception.invalid("json decode: this isn't json!")),e=e.replace(/^\{|\}$/g,"").split(/,/);var t,n,r={};for(t=0;t<e.length;t++)(n=e[t].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i))||a(new s.exception.invalid("json decode: this isn't json!")),null!=n[3]?r[n[2]]=parseInt(n[3],10):null!=n[4]?r[n[2]]=n[2].match(/^(ct|adata|salt|iv)$/)?s.codec.base64.toBits(n[4]):unescape(n[4]):null!=n[5]&&(r[n[2]]="true"===n[5]);return r},i:function(e,t,n){if(e===i&&(e={}),t===i)return e;for(var r in t)t.hasOwnProperty(r)&&(n&&e[r]!==i&&e[r]!==t[r]&&a(new s.exception.invalid("required parameter overridden")),e[r]=t[r]);return e},la:function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&e[n]!==t[n]&&(r[n]=e[n]);return r},ka:function(e,t){var n,r={};for(n=0;n<t.length;n++)e[t[n]]!==i&&(r[t[n]]=e[t[n]]);return r}},s.encrypt=s.json.encrypt,s.decrypt=s.json.decrypt,s.misc.ia={},s.misc.cachedPbkdf2=function(e,t){var n,r=s.misc.ia;return n=(t=t||{}).iter||1e3,(n=(r=r[e]=r[e]||{})[n]=r[n]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):s.random.randomWords(2,0)})[r=t.salt===i?n.firstSalt:t.salt]=n[r]||s.misc.pbkdf2(e,r,t.iter),{key:n[r].slice(0),salt:r.slice(0)}}},1755:function(e,t,n){e.exports={container:"_3J7w5",textArea:"_2Q2je",sizingBlock:"_21eUY"}},1756:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333",spinner:"BhacK",rotator:"RAYJl",path:"xqXQ_",dash:"_3-BIM"}},1757:function(e,t,n){e.exports={container:"_2BwwB",copyText:"_2ZewB",button:"_3dUXZ",icon:"_3Zap3"}},1758:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1759:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1760:function(e,t,n){e.exports={wrapper:"XECZ4"}},1761:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1762:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1763:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1764:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1765:function(e,t,n){},1766:function(e,t,n){},1767:function(e,t,n){},1768:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTQgMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNMyA3Ljg1NzE0TDUuMzc1IDEwTDExIDQiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwQTgyRCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg=="},1769:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1770:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1771:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1772:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1773:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHJ4PSIzIiBzdHJva2U9Im5vbmUiIGZpbGw9IiMyNmI1NGMiLz4KICAgIDxwYXRoIGQ9Ik01IDExTDExIDUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+CiAgICA8cGF0aCBkPSJNNSA1TDExIDExIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K"},1774:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cmVjdCB4PSIwLjUiIHk9IjAuNSIgd2lkdGg9IjE1IiBoZWlnaHQ9IjE1IiByeD0iMyIgc3Ryb2tlPSIjMjZiNTRjIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiLz4KPC9zdmc+Cg=="},1775:function(e,t,n){e.exports={indentWidth:"30",mainCopyColor:"#333333"}},1776:function(e,t,n){e.exports={avatar:"OS7OB",photo:"_1SwYr",group:"_1O5lu",wrapper:"_1kcQq"}},1777:function(e,t,n){e.exports={suggestbox:"_3_atw",cell:"_2k3dT",selected:"_1mPqD",title:"spj5S",subtitle:"_2kCXw",avatar:"_35qwQ"}},1778:function(e,t,n){e.exports={tooltip:"_1yBW9",arrow:"Vb8i3",flipped:"_1kgb5"}},1779:function(e,t,n){e.exports={tooltip:"_1UUnV",title:"_3klqZ",subtitle:"_3hNXm",dim:"MXNin",avatar:"RGH1V"}},1780:function(e,t,n){e.exports={archive:"_1umI7",header:"_3XhY5",wrapper:"_2zknC","btn-close":"wLoLS",btnClose:"wLoLS",content:"_3FAzA",overlay:"_2JRre"}},1781:function(e,t,n){e.exports={item:"_2wikj",submenu:"_2hVUj",focused:"_3ywiA",submenuindicator:"iZuC9",option:"_2zKF5",checked:"_1TKeq",valueindicator:"_3mCeA"}},1782:function(e,t,n){e.exports={colorpicker:"_1U7-P",title:"_2NWgm",colors:"_127DC",colorwrapper:"_1xdAe",color:"_3qisk",bordered:"_3tKoY",focused:"_2iA98",selected:"_2Dyep"}},1783:function(e,t,n){e.exports={actionbutton:"_1XYzZ",icon:"_2ftCn",hover:"_3bAoI"}},1784:function(e,t,n){e.exports={container:"_3zsQZ",focus:"_1YiC0",field:"_1CG2q"}},1785:function(e,t,n){e.exports={container:"_2HA6f",notransition:"J_P-2",intro:"_33U_e",active:"gZ1pM",title:"_1YgN1",warning:"QcBbX",icon:"_1QQIY",message:"_1_U5J",fieldlabel:"_1w4CW",buttonsContainer:"-CztN",button:"SQmfV",primary:"_2lNmg",focusbumper:"r6XNW"}},1822:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"queryCommandValue",function(){return Ke});var o={};n.r(o),n.d(o,"isCodeblock",function(){return Aa}),n.d(o,"inCodeblock",function(){return Ta}),n.d(o,"indent",function(){return Na}),n.d(o,"outdent",function(){return Da}),n.d(o,"allPlaintextPosFromRange",function(){return La});var a={};n.r(a),n.d(a,"activeWhenUneditable",function(){return Ai}),n.d(a,"execCommand",function(){return Ti}),n.d(a,"queryCommandValue",function(){return Ni}),n.d(a,"copy",function(){return Di});var i={};n.r(i),n.d(i,"execCommand",function(){return Ml});var l={};n.r(l),n.d(l,"activeOnlyInPMSelection",function(){return Tl}),n.d(l,"execCommand",function(){return Nl}),n.d(l,"queryCommandValue",function(){return Dl});var s={};n.r(s),n.d(s,"activeWhenUneditable",function(){return Ql}),n.d(s,"execCommand",function(){return es}),n.d(s,"queryCommandValue",function(){return ts});var c={};n.r(c),n.d(c,"queryCommandValue",function(){return ns});var u={};n.r(u),n.d(u,"activeWhenUneditable",function(){return rs}),n.d(u,"execCommand",function(){return os});var d={};n.r(d),n.d(d,"activeWhenUneditable",function(){return Ss}),n.d(d,"execCommand",function(){return xs});var f={};n.r(f),n.d(f,"isParagraph",function(){return Ks}),n.d(f,"atStartOfParagraph",function(){return Ys}),n.d(f,"paragraphFor",function(){return Xs}),n.d(f,"inParagraph",function(){return Zs}),n.d(f,"allParPosFromRange",function(){return Gs}),n.d(f,"indent",function(){return Js}),n.d(f,"outdent",function(){return Qs}),n.d(f,"startsWithTodo",function(){return tc}),n.d(f,"addTodo",function(){return nc}),n.d(f,"removeTodo",function(){return rc}),n.d(f,"isEmpty",function(){return oc}),n.d(f,"getTodo",function(){return ac});var p={};n.r(p),n.d(p,"activeWhenUneditable",function(){return Wc}),n.d(p,"execCommand",function(){return Uc}),n.d(p,"queryCommandValue",function(){return Kc});var h={};n.r(h),n.d(h,"queryCommandValue",function(){return Gc});var m={};n.r(m),n.d(m,"execCommand",function(){return tu}),n.d(m,"queryCommandValue",function(){return nu});var g={};n.r(g),n.d(g,"activeOnlyInPMSelection",function(){return au}),n.d(g,"execCommand",function(){return iu}),n.d(g,"queryCommandValue",function(){return lu});var y={};n.r(y),n.d(y,"activeWhenUneditable",function(){return su}),n.d(y,"execCommand",function(){return cu});var v={};n.r(v),n.d(v,"execCommand",function(){return uu}),n.d(v,"queryCommandValue",function(){return du});var b={};n.r(b),n.d(b,"execCommand",function(){return _u}),n.d(b,"queryCommandValue",function(){return Ou});var w={};n.r(w),n.d(w,"activeWhenUneditable",function(){return Cu}),n.d(w,"execCommand",function(){return Su});var k={};n.r(k),n.d(k,"activeOnlyInPMSelection",function(){return xu}),n.d(k,"execCommand",function(){return Eu}),n.d(k,"queryCommandValue",function(){return Pu});var _={};n.r(_),n.d(_,"queryCommandValue",function(){return Lu});var O={};n.r(O),n.d(O,"execCommand",function(){return Bu}),n.d(O,"queryCommandValue",function(){return Fu});var C={};n.r(C),n.d(C,"activeWhenUneditable",function(){return od}),n.d(C,"execCommand",function(){return ad}),n.d(C,"queryCommandEnabled",function(){return id}),n.d(C,"queryCommandValue",function(){return ld});var S={};n.r(S),n.d(S,"execCommand",function(){return Fd});var x={};n.r(x),n.d(x,"execCommand",function(){return Wd});var E={};n.r(E),n.d(E,"execCommand",function(){return Hd});var P={};n.r(P),n.d(P,"execCommand",function(){return $d});var j={};n.r(j),n.d(j,"execCommand",function(){return qd});var M={};n.r(M),n.d(M,"execCommand",function(){return Vd});var A={};n.r(A),n.d(A,"headingMapping",function(){return Yd}),n.d(A,"activeOnlyInPMSelection",function(){return Xd}),n.d(A,"execCommand",function(){return Zd}),n.d(A,"queryCommandValue",function(){return Gd});var T={};n.r(T),n.d(T,"execCommand",function(){return Jd});var N={};n.r(N),n.d(N,"execCommand",function(){return Qd});var D={};n.r(D),n.d(D,"activeOnlyInPMSelection",function(){return tf}),n.d(D,"execCommand",function(){return nf});var L={};n.r(L),n.d(L,"allLiPosFromRange",function(){return lf}),n.d(L,"indent",function(){return sf}),n.d(L,"outdent",function(){return cf}),n.d(L,"removeListAttrsAfterSplit",function(){return uf}),n.d(L,"flattenLi",function(){return df}),n.d(L,"applyIndent",function(){return ff});var R={};n.r(R),n.d(R,"activeOnlyInPMSelection",function(){return pf}),n.d(R,"execCommand",function(){return hf});var I={};n.r(I),n.d(I,"activeOnlyInPMSelection",function(){return bf}),n.d(I,"execCommand",function(){return wf}),n.d(I,"queryCommandValue",function(){return kf});var z={};n.r(z),n.d(z,"activeOnlyInPMSelection",function(){return _f}),n.d(z,"execCommand",function(){return Of});var B={};n.r(B),n.d(B,"activeOnlyInPMSelection",function(){return Pf}),n.d(B,"execCommand",function(){return jf}),n.d(B,"queryCommandValue",function(){return Mf});var F={};n.r(F),n.d(F,"execCommand",function(){return Df}),n.d(F,"queryCommandValue",function(){return Lf});var W={};n.r(W),n.d(W,"activeWhenUneditable",function(){return If}),n.d(W,"execCommand",function(){return zf}),n.d(W,"queryCommandEnabled",function(){return Bf}),n.d(W,"queryCommandValue",function(){return Ff});var H={};n.r(H),n.d(H,"activeWhenUneditable",function(){return qf}),n.d(H,"execCommand",function(){return Vf}),n.d(H,"queryCommandValue",function(){return Uf});var $={};n.r($),n.d($,"activeOnlyInPMSelection",function(){return Kf}),n.d($,"execCommand",function(){return Yf}),n.d($,"queryCommandEnabled",function(){return Xf});var q={};n.r(q),n.d(q,"activeOnlyInPMSelection",function(){return Zf}),n.d(q,"execCommand",function(){return Gf}),n.d(q,"queryCommandEnabled",function(){return Jf});var V={};n.r(V),n.d(V,"activeOnlyInPMSelection",function(){return Qf}),n.d(V,"execCommand",function(){return ep}),n.d(V,"queryCommandEnabled",function(){return tp});var U={};n.r(U),n.d(U,"activeOnlyInPMSelection",function(){return np}),n.d(U,"execCommand",function(){return rp});var K={};n.r(K),n.d(K,"activeOnlyInPMSelection",function(){return op}),n.d(K,"execCommand",function(){return ap}),n.d(K,"queryCommandEnabled",function(){return ip});var Y={};n.r(Y),n.d(Y,"activeOnlyInPMSelection",function(){return lp}),n.d(Y,"execCommand",function(){return sp}),n.d(Y,"queryCommandEnabled",function(){return cp});var X={};n.r(X),n.d(X,"execCommand",function(){return up}),n.d(X,"queryCommandEnabled",function(){return dp});var Z={};n.r(Z),n.d(Z,"execCommand",function(){return hp}),n.d(Z,"queryCommandValue",function(){return mp});var G={};n.r(G),n.d(G,"execCommand",function(){return bp}),n.d(G,"queryCommandValue",function(){return wp}),n.d(G,"queryCommandEnabled",function(){return kp});var J={};n.r(J),n.d(J,"execCommand",function(){return Sp}),n.d(J,"queryCommandValue",function(){return xp}),n.d(J,"queryCommandEnabled",function(){return Ep});var Q={};n.r(Q),n.d(Q,"execCommand",function(){return Mp}),n.d(Q,"queryCommandValue",function(){return Ap});var ee={};n.r(ee),n.d(ee,"execCommand",function(){return Tp}),n.d(ee,"queryCommandEnabled",function(){return Np});var te={};n.r(te),n.d(te,"execCommand",function(){return Dp}),n.d(te,"queryCommandEnabled",function(){return Lp});var ne={};n.r(ne),n.d(ne,"execCommand",function(){return zp}),n.d(ne,"queryCommandEnabled",function(){return Bp});var re={};n.r(re),n.d(re,"activeOnlyInPMSelection",function(){return Fp}),n.d(re,"execCommand",function(){return Wp}),n.d(re,"queryCommandValue",function(){return Hp});var oe={};n.r(oe),n.d(oe,"activeOnlyInPMSelection",function(){return $p}),n.d(oe,"execCommand",function(){return qp}),n.d(oe,"queryCommandValue",function(){return Vp});var ae={};n.r(ae),n.d(ae,"execCommand",function(){return Kp}),n.d(ae,"queryCommandValue",function(){return Yp});var ie={};n.r(ie),n.d(ie,"execCommand",function(){return Xp}),n.d(ie,"queryCommandValue",function(){return Zp});var le={};n.r(le),n.d(le,"activeOnlyInPMSelection",function(){return Jp}),n.d(le,"execCommand",function(){return Qp}),n.d(le,"queryCommandValue",function(){return eh});var se={};n.r(se),n.d(se,"activeOnlyInPMSelection",function(){return th}),n.d(se,"execCommand",function(){return nh}),n.d(se,"queryCommandValue",function(){return rh});var ce={};n.r(ce),n.d(ce,"execCommand",function(){return ih});var ue={};n.r(ue),n.d(ue,"execCommand",function(){return lh});var de={};n.r(de),n.d(de,"execCommand",function(){return sh});var fe={};n.r(fe),n.d(fe,"activeWhenUneditable",function(){return ch}),n.d(fe,"execCommand",function(){return uh}),n.d(fe,"queryCommandValue",function(){return dh});var pe={};n.r(pe),n.d(pe,"activeWhenUneditable",function(){return wm}),n.d(pe,"execCommand",function(){return km}),n.d(pe,"queryCommandValue",function(){return _m}),n.d(pe,"queryCommandEnabled",function(){return Om});var he={};n.r(he),n.d(he,"execCommand",function(){return Sm});var me={};n.r(me),n.d(me,"execCommand",function(){return hv}),n.d(me,"queryCommandEnabled",function(){return mv});var ge={};n.r(ge),n.d(ge,"transformMicrosoftWordListsWithMap",function(){return hb}),n.d(ge,"transformTableCaptions",function(){return gb}),n.d(ge,"transformWikipediaLinks",function(){return yb});var ye=n(137),ve=n.n(ye),be=n(51),we=n.n(be),ke=n(1702),_e=n.n(ke),Oe=n(57),Ce=n.n(Oe),Se=n(1677),xe=n(1681),Ee=n(1713),Pe=n(34),je=n(155),Me=n(26),Ae=n(423),Te=null;function Ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Te)throw new Error("notify: Peso API not initialized");return Te.notifyAsync(e,t)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re=new Se.PluginKey("changes"),Ie=function(){return new Se.Plugin({key:Re,state:{init:function(e,t){var n=t.doc,r=we()(e,"props.config.eagerContentChanged");return new ze(n,r)},apply:function(e,t,n){var r=e.docChanged&&"skip"!==e.getMeta(Re);return t.useEagerContentChanged?r?(t.isPendingContentChanged||($e(n),t.isPendingContentChanged=!0),qe(n,function(){t.isPendingContentChanged=!1})):"reset"===e.getMeta(Re)&&(qe.cancel(),t.isPendingContentChanged=!1):r?function e(t){var n=Date.now();0===Ve&&(Ve=n);var r=Math.min(n+Fe,Ve+We);if(null==Ue){var o=r-n;Ue=setTimeout(function(){var n=Date.now();if(Ue=null,n>=r){Ve=0;var o=t.doc;Ne("contentChanged",{isEmpty:1===o.childCount&&o.firstChild&&0===o.firstChild.childCount,module:"content"})}else e(t)},o)}}(n):"reset"===e.getMeta(Re)&&(clearTimeout(Ue),Ue=null),t}}})},ze=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Le(this,"doc",void 0),Le(this,"useEagerContentChanged",void 0),Le(this,"isPendingContentChanged",void 0),this.doc=t,this.useEagerContentChanged=n,this.isPendingContentChanged=!1}var t,n,r;return t=e,(n=[{key:"hasChanges",value:function(e){var t=!this.doc.eq(e.doc);return this.doc=e.doc,t}}])&&De(t.prototype,n),r&&De(t,r),e}();function Be(e,t){return!(!Re.getState(e)||!t)&&(t(e.tr.setMeta(Re,"reset")),!0)}var Fe=500,We=15e3;function He(e,t,n){var r=t.doc;Ne("contentChanged",{isEmpty:1===r.childCount&&r.firstChild&&0===r.firstChild.childCount,isSettled:e,module:"content"}),n&&n()}var $e=He.bind(null,!1),qe=ve()(He.bind(null,!0),Fe,{leading:!1,trailing:!0,maxWait:We}),Ve=0,Ue=null;var Ke=function(e,t,n){var r=Re.getState(n);return!!r&&r.hasChanges(n)};function Ye(e){Xe(e,!0)}function Xe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Array.from(e.querySelectorAll('ul[style*="--en-todo:"]')).forEach(function(r){if(e.contains(r)){if(n){var o=r.cloneNode(!0);r.parentNode.replaceChild(o,r),r=o}r.style.removeProperty("--en-todo"),Array.from(r.childNodes).forEach(function(e){if("LI"===e.tagName){var n="true"===e.style.getPropertyValue("--en-checked")||!1;e.style.removeProperty("--en-checked");var r=e.firstChild;r||(function(e){throw new Error('"'+e+'" is read-only')}("firstChild"),r=document.createElement("div"),e.appendChild(r));var o=r.firstChild,a=t?function(e){var t=document.createElement("en-todo");return t.setAttribute("checked",e),t}(n):function(e){var t=document.createElement("span");return t.setAttribute("data-en-todo","true"),t.setAttribute("style","--en-todo: true;"),t.textContent=e?"[x]":"[]",t}(n);r.insertBefore(a,o)}}),n&&Xe(r,t,!1)}})}var Ze=n(154),Ge=n.n(Ze),Je=n(1678);function Qe(e,t){return!!e&&e.type.groups.includes(t)}function et(e){var t=e instanceof Je.ResolvedPos?e.nodeAfter:e;if(!e)return"";var n=[];return t.isTextblock?n.push(t.textContent):t.descendants(function(e){e.isTextblock&&n.push(e.textContent)}),n.join("\n")}function tt(e){var t=[];return e.content.forEach(function(e){!e||e.isTextblock&&!e.textContent.trim()||t.push(e)}),t}function nt(e,t,n){var r=e.$from,o=e.$to,a=[],i=r.node(0);if(i!==o.node(0))throw Error("Range positions are not resolved from the same root");i.nodesBetween(r.pos,o.pos,function(e,n,l,s){var c=i.resolve(n);if(n>=r.pos&&n<o.pos&&t(e,c))a.push(c);else if(e.isText&&r.pos!==o.pos){var u=e;e===i.nodeAt(o.pos)&&(u=e.type.schema.text(e.text.substring(0,o.pos-n),e.marks)),e===i.nodeAt(r.pos)&&(u=e.type.schema.text(u.text.substring(r.pos-n),e.marks),n=r.pos);var d=i.resolve(n);t(u,d)&&a.push(d)}});var l=lt(r,t);return l&&a.unshift(l),a}var rt=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.shallow,a=void 0!==o&&o,i=r.includeEndpoints,l=void 0!==i&&i,s=function(r){var o=void 0,i=void 0,s=e[r];if(s instanceof Se.SelectionRange?(o=s.$from.pos,i=s.$to.pos):(o=s.from,i=s.to),a)for(var c=t.resolve(o),u=c.sharedDepth(i),d=c.node(u),f=c.indexAfter(u),p=c.after(u+1);p<=i;++f){var h=d.maybeChild(f);if((h&&f||l)&&n(t.resolve(p)),!h)break;p+=h.nodeSize}else t.nodesBetween(o,i,function(e,r,a,s){(r>=o&&r<i||l)&&n(t.resolve(r))})},c=0;c<e.length;c++)s(c)},ot=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=[];return rt(e,t,function(e){n(e)&&!o.find(function(t){return t.pos===e.pos})&&o.push(e)},r),o};function at(e,t,n,r){return ot(e.ranges,t,n,r)}function it(e,t,n){var r=t.from,o=t.to,a=null;return e.nodesBetween(r,o,function(t,r,o){return!a&&(n(t,o)?(a=e.resolve(r),!1):null)}),a}function lt(e,t){var n,r=e.doc;if(null==e)return n;for(var o=e.depth;o>0;o--){var a=e.node(o),i=r.resolve(e.before(o)),l=t(a,i);if(l){n=i;break}if(null==l)break}return n}function st(e,t){var n=lt(e,t);return n&&n.nodeAfter}function ct(e,t){var n;return e.descendants(function(r,o,a){return!n&&t(r,a)&&(n=e.resolve(o)),!n}),n}function ut(e,t){var n=[];return e.descendants(function(r,o,a){var i=t(r,a);return i&&n.push(e.resolve(o)),!i}),n}function dt(e,t){for(var n=0;n<e.childCount;n++)if(Qe(e.child(n),t))return!0;return!1}var ft=function(e,t,n){return e.doc.resolve(e.mapping.map(t,n))},pt=function(e,t,n,r){return e.doc.resolve(e.mapping.slice(t).map(n,r))},ht=function(e,t){for(var n=e.openStart,r=e.openEnd,o=e.content,a=[];1===o.childCount&&n>0&&r>0&&(!t||!t(o.firstChild,n,r));){var i=o.firstChild;a.push(i.type),o=i.content,n--,r--}return{slice:new Je.Slice(o,n,r),extraContext:a}},mt=function(e){var t=e.content.size,n=e.type.schema.nodes,r="",o=!0;return e.nodesBetween(0,t,function(e,a){e.isText?(r+=e.text.slice(Math.max(0,a)-a,t-a),o=!0):e.type===n.todo?(r+=String.fromCodePoint(9744+(e.attrs.checked?1:0)),o=!0):!o&&e.isBlock&&(r+="",o=!0)},0),r},gt=function e(t,n,r,o){var a=[];return t.forEach(function(t){t.childCount>0&&r&&!r(t,o)||(t=t.copy(e(t.content,n,r,o))),n&&(t=n(t,o)),a.push(t)}),Je.Fragment.from(a)},yt=n(802),vt=n(1683),bt=n.n(vt);var wt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.x,r=void 0===n?0:n,o=t.y,a=void 0===o?0:o,i=e.getClientRects();if(!i.length)return{x:0,y:0,width:0,height:0};var l=kt(Array.from(i));return{x:window.scrollX+l.left+r,y:window.scrollY+l.top+a,width:Math.abs(l.right-l.left),height:Math.abs(l.bottom-l.top)}},kt=function(e){return e.reduce(function(e,t){return{left:Math.min(e.left,t.left),top:Math.min(e.top,t.top),bottom:Math.max(e.bottom,t.bottom),right:Math.max(e.right,t.right)}},{left:1/0,top:1/0,bottom:-1/0,right:-1/0})};function _t(e,t){var n=e.domAtPos(t);return n&&n.node&&!isNaN(n.offset)&&n.node.childNodes&&n.offset<n.node.childNodes.length?n.node.childNodes[n.offset]:null}function Ot(e,t){var n=e.getBoundingClientRect(),r=t.scrollTop,o=t.scrollLeft,a=(t.scrollHeight,Math.round(n.top+r)),i=Math.round(n.left+o);Math.round(a+n.height);return{left:i,top:a,width:n.width,height:n.height}}function Ct(e,t){var n,r,o=e.getBoundingClientRect();return t instanceof TouchEvent?(n=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY):(n=t.pageX,r=t.pageY),{x:n-o.left-window.pageXOffset,y:r-o.top-window.pageYOffset}}function St(e,t){var n=e.domAtPos(t);return(n.node instanceof HTMLElement?n.node:n.node.parentElement).getBoundingClientRect()}function xt(e,t,n){return!!Et(e,t,n,arguments.length>3&&void 0!==arguments[3]&&arguments[3])}function Et(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EN-NOTE",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?e:e.parentElement;for(Array.isArray(r)||(r=[r]);o;)jt(o)&&r.includes(o.tagName)?o=null:(t(o)&&(n=o),o=n?null:o.parentElement);return n}function Pt(e){return!(!e||e.nodeType!==Node.TEXT_NODE)}function jt(e){return!(!e||e.nodeType!==Node.ELEMENT_NODE)}function Mt(e){if(!e)return 0;switch(e.nodeType){case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.COMMENT_NODE:return e.textContent.length;default:return e.childNodes.length}}function At(e,t){if(!e||!t)return!1;var n={};Array.from(e.attributes).forEach(function(e){n[e.name]=e.value});var r=bt()(t,n,Array.from(e.childNodes));return function(e,t){var n=t.parentNode;n&&n.replaceChild(e,t)}(r,e),r}function Tt(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Nt(e){switch(e.nodeType){case Node.TEXT_NODE:var t=e;/\u200b/.test(t.data)&&(t.data=t.data.replace(/\u200b/g,""));break;case Node.ELEMENT_NODE:case Node.DOCUMENT_FRAGMENT_NODE:for(var n=e.firstChild;n;)Nt(n),n=n.nextSibling}}function Dt(e){var t=e.parentElement;if(t){for(var n=e.firstChild;n;)t.insertBefore(n,e),n=e.firstChild;e.remove()}}var Lt=/&/g,Rt=/</g,It=/>/g,zt=/"/g,Bt=/'/g,Ft=/\x00/g,Wt=/e/g,Ht=!1,$t=Ht?/[\x00&<>"'e]/:/[\x00&<>"']/;function qt(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(e=e.replace(Lt,"&amp;").replace(Rt,"&lt;").replace(It,"&gt;").replace(zt,"&quot;").replace(Bt,"&#39;").replace(Ft,"&#0;"),Ht&&(e=e.replace(Wt,"&#101;")),e):$t.test(e)?(-1!=e.indexOf("&")&&(e=e.replace(Lt,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(Rt,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(It,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(zt,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(Bt,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(Ft,"&#0;")),Ht&&-1!==e.indexOf("e")&&(e=e.replace(Wt,"&#101;")),e):e}function Vt(e,t){if(null==e||null==t)return null;try{if(document.caretPositionFromPoint){var n,r=document.caretPositionFromPoint(e,t),o=r.offsetNode,a=r.offset;return{collapsed:!0,commonAncestorContainer:n=Pt(o)?o:!jt(o)||"TEXTAREA"!==o.tagName&&"INPUT"!==o.tagName||0!==o.childNodes.length?o.firstChild:o,startContainer:n,startOffset:a,endContainer:n,endOffset:a}}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(e,t)}catch(e){Ce.a.error("Error getting range from point"),Ce.a.error(e)}return null}var Ut=new Se.PluginKey("caretlocation"),Kt=function(){return new Se.Plugin({key:Ut,state:{init:function(){return{coords:null}},apply:function(e,t){var n=e.getMeta(this);return n||(!0===e.getMeta("paste")||!0===e.getMeta("resources-updated")||"drop"===e.getMeta("uiEvent")?this.spec.state.init():t)}},props:{handleDOMEvents:{focus:function(e){return Ut.getState(e.state).coords&&e.dispatch(e.state.tr.setMeta(Ut,{coords:null})),!1}}},view:function(e){return{update:function(e,t){var n=Ut.getState(t).coords,r=Ut.getState(e.state).coords;n!==r&&Me.default.dispatch(Object(Pe.setDropCoordinates)(r))},destroy:function(){Me.default.dispatch(Object(Pe.setDropCoordinates)(null))}}}})};function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zt={default:null};function Gt(e,t){return t.reduce(function(t,n){var r=e.getAttribute(n);return null!==r&&(t[n]=r),t},{})}function Jt(e,t){return null==t&&(t=Object.keys(e)),t.reduce(function(t,n){var r=e[n];return"style"===n&&r&&(r=(r=r.replace(/((^|;)\s*)-en-/g,"$1--en-")).replace(/^.*--en-codeblock:.*$/,"--en-codeblock:true;")),null!=r&&""!==r&&(t[n]=r),t},{})}function Qt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return void 0===n.group&&(n.group="any"),void 0===n.content&&(n.content="any*"),void 0===n.marks&&(n.marks="_"),r[e.replace("-","")]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(n,!0).forEach(function(t){Xt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({attrs:t,parseDOM:[{tag:e,getAttrs:function(e){return Gt(e,Object.keys(t))}}],toDOM:function(t){var n=[e,Jt(t.attrs)];return""!==t.type.spec.content&&n.push(0),n}},n),r}function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nn={style:Zt,title:Zt},rn={dir:Zt,lang:Zt,"xml: lang":Zt},on={coreattrs:nn,i18n:rn,focus:{accesskey:Zt,tabindex:Zt},attrs:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(n,!0).forEach(function(t){tn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},nn,{},rn),TextAlign:{align:Zt},cellhalign:{align:Zt,char:Zt,charoff:Zt},cellvalign:{valign:Zt}};function an(e){return(an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){return!t||"object"!==an(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(n,!0).forEach(function(t){pn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hn=fn({doc:{content:"any*"},entext:{content:"text*",group:"any",defaultsToInline:!0,parseDOM:[{tag:"en-text"}],toDOM:function(e){return["span",0]}}},Qt("en-crypt",{hint:Zt,cipher:Zt,length:Zt},{content:"text*",marks:"",defaultsToInline:!0}),{},Qt("en-todo",{checked:{default:!1}},{content:null,marks:"",defaultsToInline:!0,toDOM:function(e){return["en-todo",Jt(e.attrs)]}}),{},Qt("en-media",fn({},on.attrs,{type:{},hash:{},height:Zt,width:Zt,usemap:Zt,align:Zt,border:Zt,hspace:Zt,vspace:Zt,longdesc:Zt,alt:Zt}),{content:null,marks:"",defaultsToInline:!0,toDOM:function(e){return["en-media",Jt(e.attrs)]}}),{},Qt("address",on.attrs),{},Qt("blockquote",fn({},on.attrs,{cite:Zt})),{},Qt("caption",fn({},on.attrs,{align:Zt})),{},Qt("center",fn({},on.attrs)),{},Qt("col",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign,{span:Zt,width:Zt})),{},Qt("colgroup",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign,{span:Zt,width:Zt})),{},Qt("dd",fn({},on.attrs)),{},Qt("div",fn({},on.attrs,{},on.TextAlign)),{},Qt("dl",fn({},on.attrs,{compact:Zt})),{},Qt("dt",fn({},on.attrs)),{h:{group:"any",content:"any*",marks:"_",attrs:fn({},on.attrs,{},on.TextAlign,{level:Zt}),parseDOM:[{tag:"h1,h2,h3,h4,h5,h6",getAttrs:function(e){var t=Gt(e,[].concat(un(Object.keys(on.attrs)),un(Object.keys(on.TextAlign))));return t.level=parseInt(e.tagName.substr(1),10),t}}],toDOM:function(e){var t=Jt(fn({},e.attrs,{level:null}));return["h"+e.attrs.level,t,0]}}},Qt("hr",fn({},on.attrs,{align:Zt,noshade:Zt,size:Zt,width:Zt})),{},Qt("li",fn({},on.attrs,{type:Zt,value:Zt})),{},Qt("ol",fn({},on.attrs,{type:Zt,compact:Zt,start:Zt})),{},Qt("p",fn({},on.attrs,{},on.TextAlign)),{},Qt("pre",fn({},on.attrs,{width:Zt,"xml:space":Zt})),{},Qt("table",fn({},on.attrs,{summary:Zt,width:Zt,border:Zt,cellspacing:Zt,cellpadding:Zt,align:Zt,bgcolor:Zt})),{},Qt("tbody",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign)),{},Qt("td",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign,{abbr:Zt,rowspan:Zt,colspan:Zt,nowrap:Zt,bgcolor:Zt,width:Zt,height:Zt}),{isolating:!0}),{},Qt("tfoot",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign)),{},Qt("th",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign,{abbr:Zt,rowspan:Zt,colspan:Zt,nowrap:Zt,bgcolor:Zt,width:Zt,height:Zt}),{isolating:!0}),{},Qt("thead",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign)),{},Qt("tr",fn({},on.attrs,{},on.cellhalign,{},on.cellvalign,{bgcolor:Zt})),{},Qt("ul",fn({},on.attrs,{type:Zt,compact:Zt})),{text:{inline:!0,defaultsToInline:!0},foreigncontent:{group:"any",marks:"_",attrs:{content:Zt,resources:Zt,webClipType:Zt},parseDOM:[{tag:"foreign-content"}],toDOM:function(e){return["foreign-content",{content:e.attrs.content,webClipType:e.attrs.webClipType}]}}}),mn=fn({},Qt("a",fn({},on.attrs,{},on.focus,{charset:Zt,type:Zt,name:Zt,href:Zt,hreflang:Zt,rel:Zt,rev:Zt,shape:Zt,coords:Zt,target:Zt})),{},Qt("abbr",fn({},on.attrs)),{},Qt("acronym",fn({},on.attrs)),{},Qt("area",fn({},on.attrs,{},on.focus,{shape:Zt,coords:Zt,href:Zt,nohref:Zt,alt:Zt,target:Zt})),{},Qt("b",fn({},on.attrs)),{},Qt("bdo",fn({},on.coreattrs,{lang:Zt,"xml:lang":Zt,dir:Zt})),{},Qt("big",fn({},on.attrs)),{},Qt("br",fn({},on.coreattrs,{clear:Zt}),{content:null,toDOM:function(e){return["br",Jt(e.attrs)]}}),{},Qt("cite",fn({},on.attrs)),{},Qt("code",fn({},on.attrs)),{},Qt("del",fn({},on.attrs,{cite:Zt,datetime:Zt})),{},Qt("dfn",fn({},on.attrs)),{},Qt("em",fn({},on.attrs)),{},Qt("font",fn({},on.coreattrs,{},on.i18n,{size:Zt,color:Zt,face:Zt})),{},Qt("i",fn({},on.attrs)),{},Qt("img",fn({},on.attrs,{src:Zt,alt:Zt,name:Zt,longdesc:Zt,height:Zt,width:Zt,usemap:Zt,ismap:Zt,align:Zt,border:Zt,hspace:Zt,vspace:Zt})),{},Qt("ins",fn({},on.attrs,{cite:Zt,datetime:Zt})),{},Qt("kbd",fn({},on.attrs)),{},Qt("map",fn({},on.i18n,{title:Zt,name:Zt})),{},Qt("q",fn({},on.attrs,{cite:Zt})),{},Qt("s",fn({},on.attrs)),{},Qt("samp",fn({},on.attrs)),{},Qt("small",fn({},on.attrs)),{},Qt("span",fn({},on.attrs)),{},Qt("strike",fn({},on.attrs)),{},Qt("strong",fn({},on.attrs)),{},Qt("sub",fn({},on.attrs)),{},Qt("sup",fn({},on.attrs)),{},Qt("tt",fn({},on.attrs)),{},Qt("u",fn({},on.attrs)),{},Qt("var",fn({},on.attrs)));Object.keys(mn).forEach(function(e){mn[e].defaultsToInline=!0});var gn=new(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ln(this,sn(t).call(this,{nodes:fn({},hn,{},mn),marks:{}}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(t,Je["Schema"]),t}());function yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t,n){return t&&vn(e.prototype,t),n&&vn(e,n),e}var wn={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},kn={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_n={ol:!0,ul:!0},On=1,Cn=2,Sn=4;function xn(e){return(e?On:0)|("full"===e?Cn:0)}var En=function(){function e(t,n,r,o,a,i){yn(this,e),this.type=t,this.attrs=n,this.solid=o,this.match=a||(i&Sn?null:t.contentMatch),this.options=i,this.content=[],this.marks=r,this.activeMarks=Je.Mark.none}return bn(e,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.type.contentMatch.fillBefore(Je.Fragment.from(e));if(!t){var n,r=this.type.contentMatch;return(n=r.findWrapping(e.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(t)}return this.match.findWrapping(e.type)}},{key:"finish",value:function(e){if(!(this.options&On)){var t,n=this.content[this.content.length-1];n&&n.isText&&(t=/\s+$/.exec(n.text))&&(n.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length)))}var r=Je.Fragment.from(this.content);return!e&&this.match&&(r=r.append(this.match.fillBefore(Je.Fragment.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r}}]),e}(),Pn=function(){function e(t,n,r){yn(this,e),this.parser=t,this.options=n,this.isOpen=r,this.pendingMarks=[];var o,a=n.topNode,i=xn(n.preserveWhitespace)|(r?Sn:0);o=a?new En(a.type,a.attrs,Je.Mark.none,!0,n.topMatch||a.type.contentMatch,i):new En(r?null:t.schema.topNodeType,null,Je.Mark.none,!0,null,i),this.nodes=[o],this.open=0,this.find=n.findPositions,this.needsBlock=!1}return bn(e,[{key:"addDOM",value:function(e){if(3==e.nodeType)this.addTextNode(e);else if(1==e.nodeType){var t=e.getAttribute("style"),n=t?this.readStyles(function(e){var t,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;t=n.exec(e);)r.push(t[1],t[2].trim());return r}(t)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(e),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o])}}},{key:"addTextNode",value:function(e){var t=e.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/(\S|\xa0)/.test(t)){if(n.options&On)n.options&Cn||(t=t.replace(/\r?\n|\r/g," "));else if(t=t.replace(/\s+/g," "),/^\s/.test(t)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=e.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/\s$/.test(r.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t)),this.findInText(e)}else this.findInside(e)}},{key:"addElement",value:function(e){var t=e.nodeName.toLowerCase();_n.hasOwnProperty(t)&&function(e){for(var t=e.firstChild,n=null;t;t=t.nextSibling){var r=1==t.nodeType?t.nodeName.toLowerCase():null;r&&_n.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):"li"==r?n=t:r&&(n=null)}}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:kn.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,a=this.needsBlock;wn.hasOwnProperty(t)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(e),r&&this.sync(o),this.needsBlock=a}else this.addElementByRule(e,n)}},{key:"readStyles",value:function(e){for(var t=Je.Mark.none,n=0;n<e.length;n+=2){var r=this.parser.matchStyle(e[n],e[n+1],this);if(r){if(r.ignore)return null;t=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(t)}}return t}},{key:"addElementByRule",value:function(e,t){var n,r,o,a=this;t.node?(r=this.parser.schema.nodes[t.node]).isLeaf?this.insertNode(r.create(t.attrs)):n=this.enter(r,t.attrs,t.preserveWhitespace):(o=this.parser.schema.marks[t.mark].create(t.attrs),this.addPendingMark(o));var i=this.top;if(r&&r.isLeaf)this.findInside(e);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(function(e){return a.insertNode(e)});else{var l=t.contentElement;"string"==typeof l?l=e.querySelector(l):"function"==typeof l&&(l=l(e)),l||(l=e),this.findAround(e,l,!0),this.addAll(l,n)}return n&&(this.sync(i),this.open--),o&&this.removePendingMark(o),!0}},{key:"addAll",value:function(e,t,n,r){for(var o=n||0,a=n?e.childNodes[n]:e.firstChild,i=null==r?null:e.childNodes[r];a!=i;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a),t&&wn.hasOwnProperty(a.nodeName.toLowerCase())&&this.sync(t);this.findAtPoint(e,o)}},{key:"findPlace",value:function(e){for(var t,n,r=this.open;r>=0;r--){var o=this.nodes[r],a=o.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,n=o,!a.length))break;if(o.solid)break}if(!t)return!1;this.sync(n);for(var i=0;i<t.length;i++)this.enterInner(t[i],null,!1);return!0}},{key:"insertNode",value:function(e){if(e.isInline&&this.needsBlock&&!this.top.type){var t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(e)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(e.type));for(var r=n.activeMarks,o=0;o<e.marks.length;o++)n.type&&!n.type.allowsMarkType(e.marks[o].type)||(r=e.marks[o].addToSet(r));n.content.push(e.mark(r))}}},{key:"applyPendingMarks",value:function(e){for(var t=0;t<this.pendingMarks.length;t++){var n=this.pendingMarks[t];e.type&&!e.type.allowsMarkType(n.type)||n.type.isInSet(e.activeMarks)||(e.activeMarks=n.addToSet(e.activeMarks),this.pendingMarks.splice(t--,1))}}},{key:"enter",value:function(e,t,n){var r=this.findPlace(e.create(t));return r&&(this.applyPendingMarks(this.top),this.enterInner(e,t,!0,n)),r}},{key:"enterInner",value:function(e,t,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(e,t);var a=null==r?o.options&~Sn:xn(r);o.options&Sn&&0==o.content.length&&(a|=Sn),this.nodes.push(new En(e,t,o.activeMarks,n,null,a)),this.open++}},{key:"closeExtra",value:function(e){var t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}},{key:"finish",value:function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}},{key:"sync",value:function(e){for(var t=this.open;t>=0;t--)if(this.nodes[t]==e)return void(this.open=t)}},{key:"addPendingMark",value:function(e){this.pendingMarks.push(e)}},{key:"removePendingMark",value:function(e){var t=this.pendingMarks.lastIndexOf(e);if(t>-1)this.pendingMarks.splice(t,1);else{var n=this.top;n.activeMarks=e.removeFromSet(n.activeMarks)}}},{key:"findAtPoint",value:function(e,t){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}},{key:"findInside",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)null==this.find[t].pos&&1==e.nodeType&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}},{key:"findAround",value:function(e,t,n){if(e!=t&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==e.nodeType&&e.contains(this.find[r].node))t.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}}},{key:"findInText",value:function(e){if(this.find)for(var t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}},{key:"matchesContext",value:function(e){var t=this;if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);var n=e.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),a=-(r?r.depth+1:0)+(o?0:1);return function e(i,l){for(;i>=0;i--){var s=n[i];if(""==s){if(i==n.length-1||0==i)continue;for(;l>=a;l--)if(e(i-1,l))return!0;return!1}var c=l>0||0==l&&o?t.nodes[l].type:r&&l>=a?r.node(l-a).type:null;if(!c||c.name!=s&&-1==c.groups.indexOf(s))return!1;l--}return!0}(n.length-1,this.open)}},{key:"textblockFromContext",value:function(){var e=this.options.context;if(e)for(var t=e.depth;t>=0;t--){var n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}}},{key:"top",get:function(){return this.nodes[this.open]}},{key:"currentPos",get:function(){this.closeExtra();for(var e=0,t=this.open;t>=0;t--){for(var n=this.nodes[t].content,r=n.length-1;r>=0;r--)e+=n[r].nodeSize;t&&e++}return e}}]),e}();function jn(e){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tn(e,t,n){return t&&An(e.prototype,t),n&&An(e,n),e}function Nn(e,t){return!t||"object"!==jn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dn(e){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var In=1,zn=2,Bn=4,Fn=65536;function Wn(e){return(e?In:0)|("full"===e?zn:0)}var Hn=function(e){function t(e,n,r,o,a,i){var l;return Mn(this,t),(l=Nn(this,Dn(t).call(this,e,n,r,o,a,i))).match=a||(i&Bn?null:i&Fn?e.strictContentMatch:e.contentMatch),l}return Ln(t,En),Tn(t,[{key:"findWrapping",value:function(e){if(!this.match){if(!this.type)return[];var t=this.options&Fn?this.type.strictContentMatch:this.type.contentMatch,n=t.fillBefore(Je.Fragment.from(e));if(!n){var r,o=t;return(r=o.findWrapping(e.type))?(this.match=o,r):null}this.match=t.matchFragment(n)}return this.match.findWrapping(e.type)}}]),t}(),$n=function(e){function t(e,n,r){var o;Mn(this,t),o=Nn(this,Dn(t).call(this,e,n,r));var a,i=n.topNode,l=Wn(n.preserveWhitespace)|(r?Bn:0)|(n.strict?Fn:0);return a=i?new Hn(i.type,i.attrs,Je.Mark.none,!0,n.topMatch||(n.strict?i.type.strictContentMatch:i.type.contentMatch),l):new Hn(r?null:e.schema.topNodeType,null,Je.Mark.none,!0,null,l),o.nodes=[a],o}return Ln(t,Pn),Tn(t,[{key:"addElement",value:function(e){var t=e.nodeName.toLowerCase();_n.hasOwnProperty(t)&&function(e){return t=e,n=t.querySelectorAll("ul, ol","todolist"),void Array.from(n).reverse().forEach(function(e){if(e.parentNode&&"LI"===e.parentNode.tagName){for(var t=e.parentNode,n=e.parentNode,r=e;r;){var o=r.nextSibling;"DIV"===r.tagName&&(r=At(r,"li")),a=r,(i=n).parentNode&&i.parentNode.insertBefore(a,i.nextSibling),n=r,r=o}t.firstChild||Tt(t)}var a,i});var t,n}(e);var n=this.options.ruleFromNode&&this.options.ruleFromNode(e)||this.parser.matchTag(e,this);if(n?n.ignore:kn.hasOwnProperty(t))this.findInside(e);else if(!n||n.skip){n&&n.skip.nodeType&&(e=n.skip);var r,o=this.top,a=this.needsBlock;wn.hasOwnProperty(t)&&(r=!0,o.type||(this.needsBlock=!0)),this.addAll(e),r&&this.sync(o),this.needsBlock=a}else this.addElementByRule(e,n)}},{key:"enterInner",value:function(e,t,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(e,t);var a=null==r?o.options&~Bn:Wn(r);o.options&Bn&&0==o.content.length&&(a|=Bn),this.nodes.push(new Hn(e,t,o.activeMarks,n,null,a)),this.open++}}]),t}();function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return!t||"object"!==qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kn(e){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yn(e,t){return(Yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Un(this,Kn(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yn(e,t)}(t,Je["DOMParser"]),n=t,(r=[{key:"setResourcesOnRules",value:function(e){this.rules.forEach(function(t){t.needsResourceData&&(t.resources=e)})}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setResourcesOnRules(t.resources||{}),void 0===t.preserveWhitespace&&(t.preserveWhitespace=!0);var n=new $n(this,t,!1);return n.addAll(e,null,t.from,t.to),Zn(n.finish())}},{key:"parseSlice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setResourcesOnRules(t.resources||{});var n=new $n(this,t,!0);return n.addAll(e,null,t.from,t.to),Je.Slice.maxOpen(n.finish())}}])&&Vn(n.prototype,r),o&&Vn(n,o),t}();function Zn(e){return e.descendants(function(e,t,n){e.type.isBlock&&e.marks&&e.marks.length&&(e.marks.length=0)}),e}function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(n,!0).forEach(function(t){ar(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tr(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nr(e,t,n){return(nr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=rr(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function rr(e){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ir=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tr(this,rr(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(t,Xn),n=t,o=[{key:"fromSchema",value:function(e){return e.cached.enmlParser||(e.cached.enmlParser=new t(e,t.schemaRules(e)))}},{key:"schemaRules",value:function(e){var t=[],n=function(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)},r=function(t){var r=e.marks[t].spec.parseENML||e.marks[t].spec.parseDOM;r&&r.forEach(function(e){n(e=lr(e)),e.mark=t})};for(var o in e.marks)r(o);var a=function(t){var r=e.nodes[t].spec.parseENML||e.nodes[t].spec.parseDOM;r&&r.forEach(function(e){n(e=lr(e)),e.node=t})};for(var o in e.nodes)a(o);return t}}],(r=[{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return nr(rr(t.prototype),"parse",this).call(this,e,Qn({},n,{resources:t.resources}))}}])&&er(n.prototype,r),o&&er(n,o),t}();function lr(e){var t={};for(var n in e)t[n]=e[n];return t}ar(ir,"resources",{});var sr=n(1680),cr=n(83),ur=n.n(cr);function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var fr={},pr=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;function hr(e){return e instanceof RegExp?e.source:e.replace(pr,"\\$&")}function mr(e,t,n){var r=fr[t?"".concat(e,":").concat(t):e];return r?r.lastIndex=0:(r=new RegExp((n?"(^|[\"';])":"(^|;)")+"\\s*("+hr(e)+")\\s*\\:\\s*"+(t?hr(t):"(.*?)")+"(\\s+!important\\s*)?($|;)+","gi"),mr[e]=r),r}function gr(e){return String(e).replace(/([A-Z])/g,"-$1").toLowerCase()}var yr=null;function vr(e){return yr||(yr=document.createElement("div")),yr.setAttribute("style",e),yr.style}function br(e,t){if(null==e||0===e.trim().length)return null;var n=mr(t=gr(t)).exec(e);return null==n?null:n[3].trim()}function wr(e,t,n){return e=kr(e=e||"",t=gr(t)),null==n?e:((e=e.trim()).length&&";"!==e[e.length-1]&&(e+=";"),e=e+t+":"+n+";")}function kr(e,t){return t=gr(t),null==e||0===e.length?"":e=e.replace(mr(t),"$1").trim()}function _r(e,t){return e=String(e),{value:parseFloat(e),unit:e.match(/[\d.\-\+]*\s*(.*)/)[1]||t||""}}function Or(e,t){var n;switch(dr(e)){case"number":n=e+t;break;case"string":n=e.indexOf(t)>-1?e:e+t;break;case"undefined":n=null;break;default:n=e}return n}function Cr(e){return Object.keys(e).filter(function(t){return null!=e[t]}).map(function(t){return"".concat(t,": ").concat(e[t])}).join("; ")}var Sr=function(e){return e*Math.max(document.documentElement.clientHeight,window.innerHeight||0)/100},xr=function(e){return e*Math.max(document.documentElement.clientWidth,window.innerWidth||0)/100},Er=ur()(function(e){var t,n,r=_r(e),o=r.value;switch(r.unit){case"px":t=o;break;case"rem":case"em":t=16*o;break;case"%":t=o/100*600;break;case"vw":t=xr(o);break;case"vh":t=Sr(o);break;case"vmin":n=o,t=Math.min(Sr(n),xr(n));break;case"vmax":t=function(e){return Math.max(Sr(e),xr(e))}(o);break;case"in":t=100*o;break;case"pt":t=1.3333*o;break;case"cm":t=40*o;break;case"mm":t=4*o;break;default:t=o}return Math.round(t)});function Pr(e,t){var n=e.doc,r=e.schema,o=e.tr;return n.forEach(function(e,n){var a=function(e){return br(e.attrs.style,"--en-clipped-content")||null}(e);if(a||t||function(e){return!!ct(e,function(e){return jr(e)&&ct(e,jr)})}(e)||function(e){return!!ct(e,function(e){return(Mr(e)||Ar(e))&&ct(e,jr)})}(e)||function(e){return!!ct(e,function(e){return Dr(e.attrs.style)})}(e)){var i=Je.DOMSerializer.fromSchema(gn).serializeNode(e).outerHTML,l=r.node(r.nodes.foreigncontent,{content:i,webClipType:a}),s=o.mapping.map(n),c=s+e.nodeSize;o.replaceRangeWith(s,c,l)}}),Dr.cache.clear(),e.apply(o)}var jr=function(e){return e.type===e.type.schema.nodes.table},Mr=function(e){return e.type===e.type.schema.nodes.ul||e.type===e.type.schema.nodes.ol},Ar=function(e){return e.type===e.type.schema.nodes.li},Tr={position:["absolute","fixed","sticky"],float:["left","right"],"box-shadow":"any","align-content":"any","align-items":"any","align-self":"any",flex:"any","flex-basis":"any","flex-direction":"any","flex-flow":"any","flex-grow":"any","flex-shrink":"any","flex-wrap":"any","justify-content":"any",order:"any","place-content":"any","column-gap":"any",gap:"any",grid:"any","grid-area":"any","grid-auto-columns":"any","grid-auto-flow":"any","grid-auto-rows":"any","grid-column":"any","grid-column-end":"any","grid-column-start":"any","grid-row":"any","grid-row-end":"any","grid-row-start":"any","grid-template":"any","grid-template-areas":"any","grid-template-columns":"any","grid-template-rows":"any","row-gap":"any"},Nr=Object.keys(Tr),Dr=ur()(function(e){return Nr.find(function(t){var n=Tr[t],r=br(e,t);return r&&("any"===n||n.indexOf(r)>=0)})});function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(n,!0).forEach(function(t){Ir(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zr=/^[\uFFFC\u200B]$/;function Br(e,t){var n=e;return n=Fr(n=Pr(n,t))}function Fr(e){var t=e;return t=function(e){var t=e.doc,n=e.tr;return t.descendants(function(e,t){if(e.attrs.style&&e.attrs.style.length&&Hr.test(br(e.attrs.style,"text-decoration"))){var r=ft(n,t);n.setNodeMarkup(r.pos,e.type,Rr({},e.attrs,{style:wr(e.attrs.style,"text-decoration","underline")}),e.marks);var o=$r(n.doc,r);n.wrap(o,[{type:e.type,attrs:{style:wr("","text-decoration","line-through")}}])}}),e.apply(n)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr;return t.descendants(function(e,t){if(e.type===n.nodes.font)for(var o=ft(r,t),a=Wr.filter(function(t){return null!=e.attrs[t]});a.length>1;){var i=a.pop(),l=o.nodeAfter.attrs[i];r.setNodeMarkup(o.pos,e.type,Rr({},o.nodeAfter.attrs,Ir({},i,null)),e.marks);var s=$r(r.doc,o);r.wrap(s,[{type:n.nodes.font,attrs:Ir({},i,l)}]),o=ft(r,t)}}),e.apply(r)}(t=function(e){var t=e.doc,n=e.tr;return ut(t,function(e){return br(e.attrs.style,"--en-fontfamily")}).forEach(function(e){n.setNodeMarkup(e.pos,e.nodeAfter.type,Rr({},e.nodeAfter.attrs,{style:kr(e.nodeAfter.attrs.style,"font-family")}),e.nodeAfter.marks)}),e.apply(n)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr,o=function(e){return e&&e.type===n.nodes.ol},a=function(e){return e&&(e.type===n.nodes.ol||e.type===n.nodes.ul)},i=function(e){return e&&(a(e)||e.type===n.nodes.li)},l=function(e){var t=e.parent;if(!o(t))return null;var a=r.doc.resolve(e.pos+e.nodeAfter.nodeSize);if(!i(a.nodeAfter))return null;for(var l=t.attrs.start?t.attrs.start:1,s=a.indexAfter(),c=0;c<s;c++)t.child(c).type===n.nodes.li&&l++;return l};return ut(t,function(e,t){return a(t)&&!i(e)||void 0}).reverse().forEach(function(e){if(e.nodeBefore&&e.nodeBefore.type===n.nodes.li)return r.delete(e.pos,e.pos+e.nodeAfter.nodeSize),void r.insert(e.pos-1,e.nodeAfter);for(var t=e;a(t.parent);){var i=l(t),s=$r(r.doc,t);if(r.lift(s,t.depth-1),t=r.doc.resolve(r.mapping.map(e.pos)),i&&1!==i){var c=r.doc.resolve(t.pos+t.nodeAfter.nodeSize);o(c.nodeAfter)&&r.setNodeMarkup(c.pos,null,Rr({},c.nodeAfter.attrs,{start:i}))}}}),e.apply(r)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr;return ut(t,function(t){return t.type===e.schema.nodes.enmedia||t.type===e.schema.nodes.img}).reverse().forEach(function(e){var t=null,o=e.parent;if(!o.attrs.style||"none"!==br(o.attrs.style,"display")){for(;o!==r.doc&&!o.type.spec.isolating;){var a=$r(r.doc,e);r.lift(a,Object(sr.liftTarget)(a)),e=r.doc.resolve(r.mapping.slice(r.mapping.maps.length-1).map(e.pos)),o.type===n.nodes.a&&""===o.textContent&&o.attrs.href&&o.attrs.href.length&&(t=n.node("a",o.attrs,n.node("entext",null,n.text(o.attrs.href)))),o=e.parent}t&&r.insert(e.pos+e.nodeAfter.nodeSize,t)}}),e.apply(r)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr,o=function(e){for(var t=null,r=e.firstChild,o=1;r;){if(r&&r.type===n.nodes.entodo){t=r;break}if(r&&(r.type===n.nodes.ul||r.type===n.nodes.ol))break;o++,r=r.firstChild}return{node:t,offset:t?o:null}};return t.descendants(function(e,t){if(e.type===n.nodes.ul){for(var a=!0,i=0;i<e.childCount;i++){var l=e.child(i);if(l.type===n.nodes.li&&!o(l).node){a=!1;break}}if(a){var s=ft(r,t),c=(e.attrs.style||"")+"--en-todo: 1";r.setNodeMarkup(s.pos,null,Rr({},e.attrs,{style:c}));var u=r.mapping.maps.length;e.forEach(function(t,a,i){if(t.type===n.nodes.li){var l=pt(r,u,s.pos+a+1),c=o(t),d=c.node,f=c.offset,p=d.attrs.checked,h=(e.attrs.style||"")+"--en-checked:"+p;r.setNodeMarkup(l.pos,null,Rr({},e.attrs,{style:h})),r.delete(l.pos+f,l.pos+f+1)}})}}}),e.apply(r)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr,o={},a=[n.nodes.div,n.nodes.p,n.nodes.span];return t.descendants(function(e,t,n){if(!a.includes(e.type))return null;var i=o[e.type.name];if(i||(i=e.type.create(),o[e.type.name]=i),!e.sameMarkup(i))return null;if(!e.type.spec.defaultsToInline&&e.firstChild&&e.firstChild.type.spec.defaultsToInline&&(n.type!==e.type||n.childCount>1))return null;var l=r.doc.resolve(r.mapping.map(t)),s=r.doc.resolve(l.pos+1),c=r.doc.resolve(l.pos+(l.nodeAfter.nodeSize-1)),u=s.blockRange(c);return r.lift(u,s.depth-1),null}),e.apply(r)}(t=function(e){var t=e.apply(e.tr.replaceRange(0,e.doc.nodeSize-2,new Je.Slice(Je.Fragment.from(e.schema.nodes.div.create({},e.doc.content)),0,0))),n=t.doc,r=t.schema,o=t.tr;return n.descendants(function(e,t,n){if(e.type!==r.nodes.br)return null;for(var a=o.doc.resolve(o.mapping.map(t)),i=lt(a,function(e){return!e.type.spec.defaultsToInline}),l=i.pos+i.nodeAfter.nodeSize,s=null;!s;)l--,s=o.doc.nodeAt(l);if(l===a.pos)return null;if(i.nodeAfter.type.spec.isolating){var c=o.doc.resolve(i.pos+1),u=o.doc.resolve(i.pos+i.nodeAfter.nodeSize-1),d=new Je.NodeRange(c,u,c.depth);o.wrap(d,[{type:r.nodes.div}]),a=o.doc.resolve(a.pos+1),i=o.doc.resolve(i.pos+1)}var f=o.doc.resolve(i.pos+1),p=o.doc.resolve(i.pos+i.nodeAfter.nodeSize-1),h=new Je.NodeRange(f,p,f.depth);return o.wrap(h,[{type:r.nodes.div}]),o.delete(a.pos+1,a.pos+1+a.nodeAfter.nodeSize),o.split(a.pos+1,a.depth-i.depth),null}),o.replaceRange(0,o.doc.nodeSize-2,new Je.Slice(o.doc.firstChild.content,0,0)),t.apply(o)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr;return t.descendants(function(e,t,o){var a=r.mapping.mapResult(t);if(!a.deleted){var i=a.pos,l=r.mapping.maps.length;if(!(e.isLeaf||e.childCount<2)){var s={nodes:[],start:i+1,end:i+1,hasNonInline:null},c=[s],u=!1;e.forEach(function(e,t){var n=!e.type.spec.defaultsToInline;u=u||n,null==s.hasNonInline||n===s.hasNonInline?(s.nodes.push(e),s.end+=e.nodeSize,s.hasNonInline=n):(s={nodes:[e],start:s.end,end:s.end+e.nodeSize,hasNonInline:n},c.push(s))}),c.length>1&&u&&c.forEach(function(e){if(!e.hasNonInline){var t=n.nodes.div.create({},Je.Fragment.from(e.nodes)),o=r.mapping.slice(l);r.replaceWith(o.map(e.start),o.map(e.end),t)}})}}}),e.apply(r)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr;return t.descendants(function(e,t){(e.isLeaf||e.type!==n.nodes.div||0!==e.childCount||e.attrs.style)&&(e.type!==n.nodes.text||0!==e.text.length&&!e.text.match(zr))||r.delete(r.mapping.map(t),r.mapping.map(t+e.nodeSize))}),e.apply(r)}(t=function(e){var t=e.doc,n=e.schema,r=e.tr;return t.descendants(function(e,t){var o=br(e.attrs.style,"display");if("none"!==o)if(e.type.spec.defaultsToInline&&o&&"inline"!==o){var a=r.doc.resolve(r.mapping.map(t)),i=kr(e.attrs.style,"display");r.setNodeMarkup(a.pos,e.type,Rr({},e.attrs,{style:null}));var l=$r(r.doc,a);r.wrap(l,[{type:n.nodes.div,attrs:{style:i}}])}else if(e.type.spec.defaultsToInline||"inline"!==o)e.type===n.nodes.span&&br(e.attrs.style,"float")&&r.setNodeMarkup(r.mapping.map(t),n.nodes.div,Rr({},e.attrs));else{var s=kr(e.attrs.style,"display");r.setNodeMarkup(r.mapping.map(t),n.nodes.span,Rr({},e.attrs,{style:s}))}}),e.apply(r)}(t)))))))))))}var Wr=["color","face","size","style"];var Hr=/^(?:underline\s*line-through)|(?:line-through\s*underline)$/;function $r(e,t){return new Je.NodeRange(t,e.resolve(t.pos+t.nodeAfter.nodeSize),t.depth)}function qr(e,t){if(!e||null==t)return null;var n=ft(e,t,-1),r=n&&n.nodeAfter;if(!r||"foreigncontent"!==r.type.name)return null;var o=document.createElement("div");o.innerHTML=r.attrs.content;var a=ir.fromSchema(gn).parse(o),i=Fr(Se.EditorState.create({doc:a,schema:gn})),l=Je.DOMSerializer.fromSchema(gn).serializeFragment(i.doc);Nt(l);var s=ir.fromSchema(e.doc.type.schema).parse(l,{resources:r.attrs.resources,strict:!0});return e.replaceRange(n.pos,n.pos+n.nodeAfter.nodeSize,s.slice(0,s.nodeSize-2)),e}function Vr(e){return nt(e,function(e){return"foreigncontent"===e.type.name})}function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e){return(Yr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zr(e,t){return(Zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jr=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=!(a=Yr(t).call(this))||"object"!==Ur(a)&&"function"!=typeof a?Xr(o):a,Gr(Xr(r),"pos",void 0),Gr(Xr(r),"attrs",void 0),r.pos=e,r.attrs=n,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zr(e,t)}(t,sr["Step"]),n=t,o=[{key:"fromJSON",value:function(e,n){if("number"!=typeof n.pos||null!=n.attrs&&"object"!=Ur(n.attrs))throw new RangeError("Invalid input for SetAttrsStep.fromJSON");return new t(n.pos,n.attrs)}}],(r=[{key:"apply",value:function(e){var t=e.nodeAt(this.pos);if(!t)return sr.StepResult.fail("No node at given position");var n=t.type.create(this.attrs,Je.Fragment.empty,t.marks),r=new Je.Slice(Je.Fragment.from(n),0,t.isLeaf?0:1);return sr.StepResult.fromReplace(e,this.pos,this.pos+1,r)}},{key:"invert",value:function(e){var n=e.nodeAt(this.pos);return new t(this.pos,n?n.attrs:null)}},{key:"map",value:function(e){var n=e.mapResult(this.pos,1);return n.deleted?null:new t(n.pos,this.attrs)}},{key:"toJSON",value:function(){return{stepType:"setAttrs",pos:this.pos,attrs:this.attrs}}}])&&Kr(n.prototype,r),o&&Kr(n,o),t}();sr.Step.jsonID("setAttrs",Jr);var Qr=n(1738),eo=n.n(Qr);function to(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function no(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ro(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(e){Array.isArray(e)||(e=[e]);var t=[];return e.forEach(function(e){for(var n=0;n<e.mapping.maps.length;n++){for(var r=e.mapping.maps[n],o=0;o<t.length;o++)t[o].from=r.map(t[o].from),t[o].to=r.map(t[o].to);r.forEach(function(e,n,r,o){return t.push({from:r,to:o})})}}),eo()(t,function(e){return"".concat(e.from,"-").concat(e.to)})}function ao(e,t){var n=[];return oo(e).forEach(function(r){var o=r.from,a=r.to;e.doc.nodesBetween(o,a,function(e,r,o){t(e,r,o)&&n.push(r)})}),n}function io(e,t){return e.selection,t.selection,e.doc=t.doc,e.time=t.time,e.steps=e.steps.concat(t.steps),e.docs=e.docs.concat(t.docs),e.meta=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?no(n,!0).forEach(function(t){ro(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):no(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.meta,{},t.meta),e.mapping.appendMapping(t.mapping),e.setSelection(t.selection),e.setStoredMarks(t.storedMarks),t.scrolledIntoView&&e.scrollIntoView(),e}var lo=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ro(this,"$",void 0),ro(this,"state",void 0),ro(this,"view",void 0),ro(this,"_tr",void 0),ro(this,"dispatched",!1),ro(this,"done",!1),ro(this,"dispatch",function(e){n.update({done:!1,dispatched:!0}),Object.keys(n.$).forEach(function(t){n.$[t]=ft(e,n.$[t].pos)}),io(n._tr,e),n.state=n.state.apply(e)}),ro(this,"commit",function(e){return n.update({done:!0}),n.dispatched&&n.view.dispatch(n._tr),e}),this.view=t,this.state=t.state,this.$=r,this._tr=this.state.tr}var t,n,r;return t=e,(n=[{key:"update",value:function(e){var t=e.done,n=e.dispatched;if(this.done)throw new Error("VirtualView: invalid use after done");void 0!==t&&(this.done=t),void 0!==n&&(this.dispatched=n)}},{key:"tr",get:function(){return this.update({done:!0}),this._tr}}])&&to(t.prototype,n),r&&to(t,r),e}(),so=new Se.PluginKey("resource"),co=function(){return new Se.Plugin({key:so,state:{init:function(e,t){return{resources:mo(t).map(function(e){return e.pos}),foreignBlocks:Vr(new Se.AllSelection(t.doc)).map(function(e){return e.pos})}},apply:function(e,t){var n=t.resources.map(function(t){var n=e.mapping.mapResult(t);return n.deleted?null:n.pos}).filter(function(e){return null!==e});ao(e,function(e){return Qe(e,"resource")}).forEach(function(e){-1===n.indexOf(e)&&n.push(e)});var r=t.foreignBlocks.map(function(t){var n=e.mapping.mapResult(t);return n.deleted?null:n.pos}).filter(function(e){return null!==e});return ao(e,function(e){return"foreigncontent"===e.type.name}).forEach(function(e){-1===r.indexOf(e)&&r.push(e)}),{resources:n,foreignBlocks:r}}}})};function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ho(e){return nt(e,function(e){return Qe(e,"resource")})}function mo(e){return ho(new Se.AllSelection(e.doc).ranges[0])}var go=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{state:e.state,hash:e.hash,reference:e.reference||Ge()(),filename:e.filename,mime:e.mime,filesize:e.filesize,url:e.url,progress:e.progress,thumbnailURL:e.thumbnailURL,contextURL:e.contextURL,defaultActionURL:e.defaultActionURL,overlayColor:e.overlayColor,overlayOpacity:parseInt(e.overlayOpacity,10),overlayImageURL:e.overlayImageURL,id:e.elementId,downloaded:e.downloaded,height:e.height,width:e.width,hidden:!0===e.hidden}};function yo(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fo(n,!0).forEach(function(t){po(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return Object.keys(t).forEach(function(e){void 0!==t[e]&&(n[e]=t[e])}),n}function vo(e){return function(t){if(Qe(t,"resource")){if(e.reference&&e.reference===t.attrs.reference)return!0;if(e.originalURL&&e.originalURL===t.attrs.url)return!0;if(e.hash&&e.hash===t.attrs.hash)return!0}return null}}function bo(e,t,n){return ko(e,n,ho(t),Vr(t))}function wo(e,t){var n=function(e){var t=e.state.doc,n=so.getState(e.state),r=n.resources,o=n.foreignBlocks;return{$resources:r.map(function(e){return t.resolve(e)}),$foreignContentBlocks:o.map(function(e){return t.resolve(e)})}}(e);return ko(e,t,n.$resources,n.$foreignContentBlocks)}function ko(e,t,n,r){var o=e.state,a=o.doc,i=o.selection,l=n.map(function(n){var r,o=_o(n,Ot(_t(e,n.pos),e.dom.parentElement),i);if(t){if(n.nodeBefore&&Qe(n.nodeBefore,"resource")){var l=a.resolve(n.pos-n.nodeBefore.nodeSize),s=Ot(_t(e,l.pos),e.dom.parentElement);o.prevNeighbour=_o(l,s,i)}var c=(r=n)&&r.nodeAfter&&r.parent.childAfter(r.parentOffset+r.nodeAfter.nodeSize)&&r.doc.resolve(r.pos+r.nodeAfter.nodeSize);if(c&&c.nodeAfter&&Qe(c.nodeAfter,"resource")){var u=Ot(_t(e,c.pos),e.dom.parentElement);o.nextNeighbour=_o(c,u,i)}}return o}),s=r.map(function(t){var n=t&&t.nodeAfter;if(!n)return[];var r=n.attrs.resources;if(!r)return[];var o=i.from<=t.pos&&t.pos<i.to,a=_t(e,t.pos);return Object.keys(r).map(function(t){var n=r[t];return function(e,t,n){var r={hash:e.hash,mime:e.mime,rect:t,reference:e.reference,selected:n,url:e.url};e.filesize&&(r.filesize=e.filesize);e.filename&&(r.filename=e.filename);return r}(n,Ot(a.querySelector('[hash="'.concat(n.hash,'"]')),e.dom.parentElement),o)})}).filter(function(e){return e&&e.length});return Array.prototype.concat.apply(l,s)}function _o(e,t,n){var r=e.nodeAfter.attrs,o={hash:r.hash,mime:r.mime,rect:t,reference:r.reference,selected:n.from<=e.pos&&e.pos<n.to,url:r.url};return r.filesize&&(o.filesize=r.filesize),r.filename&&(o.filename=r.filename),o}function Oo(e,t,n){var r=t.attrs,o=r.url,a=r.mime,i=r.hash,l=r.reference;return e.props.notify("openLink",{module:"resource",action:"open",eventType:n,href:o,mime:a,hash:i,reference:l}),!0}function Co(e){if(!Qe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"resource"))return null;var t=e.attrs,n=t.hash,r=t.mime,o=t.reference,a=t.url,i=t.filesize,l=t.filename,s={type:So(r),mime:r,hash:n,reference:o,url:a};return i&&(s.filesize=i),l&&(s.filename=l),s}function So(e){var t=uo(e.toLowerCase().split("/"),2),n=t[0];t[1];if("image"===n)return"image";switch(e){case"application/pdf":return"pdf";default:return"resource"}}var xo=n(1747),Eo=n.n(xo),Po=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|xxx|evernote):|[^a-z]|[a-z+.-]+(?:[^a-z+.\-:]|$))/i,jo=["a","abbr","acronym","address","area","b","bdo","big","blockquote","br","caption","center","cite","code","col","colgroup","dd","del","dfn","div","dl","dt","em","font","h1","h2","h3","h4","h5","h6","hr","i","img","ins","kbd","li","map","ol","p","pre","q","s","samp","small","span","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","title","tr","tt","u","ul","var","xmp","en-media","en-crypt","en-todo"],Mo=["class","id","tabindex","accesskey","dynsrc","data"];function Ao(e){return Eo.a.sanitize(e,{ALLOWED_TAGS:jo,ALLOW_DATA_ATTR:!1,FORBID_ATTR:Mo,ALLOWED_URI_REGEXP:Po})}function To(e){return e.type.groups.includes("section")}function No(e,t){return To(e)&&t.parent===t.doc}function Do(e){return nt(e,To)}function Lo(e){return nt(e,No)}function Ro(e,t,n){if(t instanceof Je.Fragment){var r=!0;return t.forEach(function(t){r=r&&Ro(e,t.type,t.attrs)}),r}return null!=e.strictContentMatch.findWrapping(t)}function Io(e,t,n,r){return!e.ranges.some(function(e){return!Ro(e.$from.node(Math.max(-e.$from.depth,t)).type,n)||!Ro(e.$to.node(Math.max(-e.$to.depth,t)).type,n)})}function zo(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){for(var n=e.depth;n>0;n--)switch(e.node(n).type.name){case"codeblock":return t;case"table":return!1}return!0};return n(e.$anchor)&&n(e.$head)}var Bo=/(^|;)\s*-en-/g,Fo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"string";if("string"===t)return e||null;if("boolean"===t)return"true"===e||"1"===e||"false"!==e&&"0"!==e&&null;if("number"===t)return e||0===e?parseInt(e,10):null;if("object"===t)try{return e?JSON.parse(e):null}catch(t){return Ce.a.error("Could not parse json for ".concat(e,". Returning as a string")),Ce.a.error(t),e}return Ce.a.warn("Invalid type of ".concat(t," used for ").concat(e,". Returning val as a string or null")),e||null};function Wo(e,t){e.setAttribute("style",(e.getAttribute("style")||"").replace(Bo,"$1--en-"));var n=Array.from(e.style).reduce(function(t,n){var r=e.style.getPropertyValue(n).trim();return 0===n.indexOf("--en-")?t[n.replace("--en-","")]=r:t.style+="".concat(n,":").concat(r,"; "),t},{style:""});return n.style=n.style.trim(),n.style||delete n.style,Object.keys(t).reduce(function(r,o){return n[o]?r[o]=Fo(n[o],t[o].type):e.getAttribute(o)?r[o]=Fo(e.getAttribute(o),t[o].type):e.dataset[o]&&(r[o]=Fo(e.dataset[o],t[o].type)),r},{})}function Ho(e,t){var n=Object.keys(t).reduce(function(n,r){if(!t[r].enml)return n;var o=e[r];return null==o||""===o?n:("object"===t[r].type&&(o=JSON.stringify(o)),t[r].enStyleAttr?n.style+="--en-".concat(r,":").concat(o,"; "):n[r]=o,n)},{style:""});return n.style=n.style&&n.style.trim(),n.style||delete n.style,n}var $o=function(e){return"data-"+e.replace(/([A-Z])/g,function(e){return"-"+e[0].toLowerCase()})};function qo(e,t){return Object.keys(t).reduce(function(n,r){var o=e[r];return null==o||""===o?n:("object"===t[r].type&&(o=JSON.stringify(o)),t[r].dataAttr?n[$o(r)]=o:n[r]=o,n)},{})}var Vo=n(1682),Uo=n(825),Ko=n.n(Uo),Yo=new Se.PluginKey("note-width"),Xo=function(){return new Se.Plugin({key:Yo,props:{decorations:function(e){return Yo.getState(e).decos},handleDOMEvents:{mousedown:function(e,t){return this.spec.noResize=!0,!1},mouseup:function(e,t){return this.spec.noResize=!1,this.spec.resizePending&&(this.spec.resizePending=!1,e.dispatch(e.state.tr.setMeta(Yo,e.props.getNoteWidth()))),!1}},handleResize:function(e,t,n){return this.spec.noResize?this.spec.resizePending=!0:(this.spec.resizePending=!1,e.dispatch(e.state.tr.setMeta(Yo,e.props.getNoteWidth()))),!1}},state:{init:function(){return{noteWidth:760,fullWidth:760}},apply:function(e,t){var n=e.getMeta(Yo);if(!(e.docChanged||n&&n.noteWidth))return t;var r=[];return e.doc.content.forEach(function(e,t){if(e.type.spec.resizing){var o=t+e.nodeSize;r.push(xe.Decoration.node(t,o,{},n))}}),{decos:r.length>0?xe.DecorationSet.create(e.doc,r):xe.DecorationSet.empty,noteWidth:n&&n.noteWidth||t.noteWidth,fullWidth:n&&n.fullWidth||t.fullWidth}}},view:function(e){return e.dispatch(e.state.tr.setMeta(Yo,e.props.getNoteWidth())),this.noResize=!1,this.resizePending=!1,{update:function(){},destroy:function(){}}}})};function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Go(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(n,!0).forEach(function(t){Jo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Jo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Qo=24,ea=48,ta=190,na=8;function ra(e){return e&&e.type===e.type.schema.nodes.table}function oa(e){return e&&("cell"===e.type.spec.tableRole||"header_cell"===e.type.spec.tableRole||"row"===e.type.spec.tableRole||"table"===e.type.spec.tableRole)}function aa(e,t){return!!e&&!!ia(e,t)}function ia(e,t){if(t&&ra(e.nodeAfter))return{node:e.nodeAfter,pos:e.pos};for(var n=e.depth;n>=0;){if(ra(e.node(n)))return{node:e.node(n),pos:e.before(n)};n-=1}return null}function la(e,t){if(t&&sa(e.nodeAfter))return{node:e.nodeAfter,pos:e.pos};for(var n=e.depth;n>=0;){if(sa(e.node(n)))return{node:e.node(n),pos:e.before(n)};n-=1}return null}function sa(e){return e&&("header_cell"===e.type.spec.tableRole||"cell"===e.type.spec.tableRole)}function ca(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Go({rows:2,columns:2,align:"left"},t);for(var n=[],r=0;r<t.rows;r++){for(var o=[],a=0;a<t.columns;a++)o.push(e.nodes.td.create({width:ta},e.nodes.p.create()));n.push(e.nodes.tr.create(null,o))}for(var i=[],l=0;l<t.columns;l++)i.push({width:ta});return e.nodes.table.create({cols:i},n)}function ua(e,t){if(e instanceof Vo.CellSelection)e.forEachCell(t);else{var n=lt(e.$from,ra);if(n&&n===lt(e.$to,ra)){var r=lt(e.$from,sa);r&&t(r.nodeAfter,r.pos)}}}function da(e){var t={rows:new Set,cols:new Set},n=lt(e.$from,ra),r=Vo.TableMap.get(n.nodeAfter),o=n.pos+1,a=lt(e.$head,sa),i=r.findCell(a.pos-o),l=i?i.top*r.width+(i.right-1):-1;ua(e,function(e,n){for(var a=r.findCell(n-o),i=a.left;i<a.right;i++)t.cols.add(i);for(var l=a.top;l<a.bottom;l++)t.rows.add(l)});var s=e instanceof Vo.CellSelection&&e.isColSelection();return{draggable:{rows:e instanceof Vo.CellSelection&&e.isRowSelection()?t.rows:new Set,cols:s?t.cols:new Set},selected:t,headCell:l}}function fa(e,t){return ya(e).map(function(e,n){return void 0===t||t===n?ea:null})}var pa=function(e,t,n){var r=ya(t).map(function(e){return Go({},e)}),o=n/r.reduce(function(e,t){return e+t.width},0);return fa(t).map(function(e,t){return{index:t,minWidth:e,width:r[t].width}}).sort(function(e,t){return t.minWidth-e.minWidth}).forEach(function(e){var t=e.width*o-0;t<e.minWidth&&(t=e.minWidth),r[e.index].width=Math.floor(t)}),r};function ha(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ta,o=e.doc.nodeAt(t),a=Vo.TableMap.get(o);Object(Vo.addColumn)(e,{map:a,tableStart:t+1,table:o},n);var i=Array.from(ya(o));return i.splice(n,0,{width:r}),ga(e,t,i),e}function ma(e,t,n){var r=e.doc.nodeAt(t),o=Vo.TableMap.get(r);return Object(Vo.addRow)(e,{map:o,tableStart:t+1,table:r},n),e}function ga(e,t,n){var r=e.doc.nodeAt(t),o=n.reduce(function(e,t){return e+t.width},0)+"px";_e()(n,r.attrs.cols)&&_e()(o,r.attrs.width)||e.setNodeMarkup(t,null,Go({},r.attrs,{cols:n,width:o}))}function ya(e){for(var t=Vo.TableMap.get(e),n=[],r=-1,o=0,a=0;a<t.width;a++){var i=t.positionAt(0,a,e),l=e.resolve(i).nodeAfter.attrs,s=l.colspan,c=l.colwidth;r!==i&&(o=0);var u=c&&c[o];s>1&&(o+=1),r=i;var d=e.attrs.cols[a];u=u||d&&d.width||ta,n.push({width:Ko()(u)?parseInt(u,10):u})}return n}function va(e,t){ut(t.nodeAfter,sa).forEach(function(n){var r=n.nodeAfter.attrs;void 0!==r.colwidth&&e.setNodeMarkup(t.pos+n.pos+1,null,Go({},r,{colwidth:void 0}))})}function ba(e,t){var n=Vo.TableMap.get(t.nodeAfter),r=e.doc.resolve(t.pos+1+n.map[0]),o=e.doc.resolve(t.pos+1+n.map[n.map.length-1]);return e.setSelection(new Vo.CellSelection(r,o)),e}var wa=function(e,t){var n=e.selection;if(!(n instanceof Vo.CellSelection))return!1;if(t){var r=e.tr,o=e.schema.nodes.td.createAndFill().content;n.forEachCell(function(e,t){e.content.eq(o)||r.replace(r.mapping.map(t+1),r.mapping.map(t+e.nodeSize-1),new Je.Slice(o,0,0))}),r.docChanged&&t(r)}return!0};function ka(e){return function(t,n){if(!Object(Vo.isInTable)(t))return!1;var r=function(e,t){if(t<0){var n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(var r=e.index(-1)-1,o=e.before();r>=0;r--){var a=e.node(-1).child(r);if(a.childCount)return o-1-a.lastChild.nodeSize;o-=a.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var i=e.node(-1),l=e.indexAfter(-1),s=e.after();l<i.childCount;l++){var c=i.child(l);if(c.childCount)return s+1;s+=c.nodeSize}}}(Object(Vo.selectionCell)(t),e);if(null==r)return!1;var o,a=t.tr,i=a.doc.resolve(r),l=a.doc.resolve(i.pos+1),s=a.doc.resolve(i.pos+i.nodeAfter.nodeSize-1);return o=1===i.nodeAfter.childCount&&Se.NodeSelection.isSelectable(i.nodeAfter.firstChild)?new Se.NodeSelection(l):i.nodeAfter.childCount>1&&(l.nodeAfter&&!l.nodeAfter.isTextblock||s.nodeBefore&&!s.nodeBefore.isTextblock)?e>=1?new Se.TextSelection(l,s):new Se.TextSelection(s,l):e>=1?Se.TextSelection.between(l,s):Se.TextSelection.between(s,l),a.setSelection(o).scrollIntoView(),n&&n(a),!0}}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(n,!0).forEach(function(t){Ca(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sa=["style","dir","lang","color","backgroundColor","borderColor","lineHeight","listStyleType","marginTop","marginBottom","marginLeft","borderWidth","textAlign","indent"],xa=["link"];function Ea(e,t,n,r,o){if(!e||"number"!=typeof r||"number"!=typeof o||r<0||o>e.doc.nodeSize-2)return null;var a=ft(e,r,-1),i=a.depth>0&&a.nodeBefore;i&&e.split(a.pos);var l=ft(e,o,1),s=l.depth>0&&l.nodeAfter;s&&e.split(l.pos);e.mapping.maps.length;nt({$from:ft(e,r,-1),$to:ft(e,o,1)},function(n,r){var o,a=n.attrs,i=n.marks,l=n.type;l.spec.attrs&&(t.forEach(function(e){var t=l.spec.attrs[e];if(t){var n=t.default;a[e]!==n&&(o||(o=Oa({},a)),o[e]=n)}}),o&&e.setNodeMarkup(r.pos,l,o,i));return i.forEach(function(o){var a;"link"===o.type.name&&(t.forEach(function(e){o.attrs[e]&&(a||(a=Oa({},o.attrs)),a[e]=null)}),a&&(e.removeMark(r.pos,r.pos+n.nodeSize,o.type),e.addMark(r.pos,r.pos+n.nodeSize,o.type.create(a))))}),!0});var c=e.mapping.map(r,-1),u=e.mapping.map(o,1),d=e.doc.type.schema.marks;return Object.keys(d).forEach(function(t){-1===n.indexOf(d[t].name)&&e.removeMark(c,u,d[t])}),e.mapping.maps.length,i&&e.join(ft(e,r,-1).after()),s&&e.join(ft(e,o,1).before()),e}var Pa=["style","dir","lang","color","backgroundColor","borderColor","lineHeight","listStyleType","marginTop","marginBottom","marginLeft","borderWidth"],ja=["bold","highlight","italic","link","strikethrough","subscript","superscript","underline"];function Ma(e,t,n){return Ea(e,Pa,ja,t,n)}function Aa(e){return null!=e&&"codeblock"===e.type.name}function Ta(e){if(!e)return!1;for(var t=e.depth;t>=0;){if(Aa(e.node(t)))return!0;t-=1}return!1}function Na(e,t){return"codeblock"===t.parent.type.name&&(e.insertText("    ",t.pos+1),!0)}function Da(e,t){if("codeblock"===t.parent.type.name){for(var n=t.nodeAfter.textContent,r=0;r<4&&" "===n[r];r++);return r>0&&e.replace(t.pos+1,t.pos+1+r),!0}return!1}function La(e){return nt(e,function(e){return"plaintext"===e.type.name})}var Ra=n(1749),Ia=n.n(Ra),za=8,Ba=Number(Ia.a.indentWidth),Fa=Ia.a.mainCopyColor,Wa="￾BR",Ha={light:["#ffffff","#eaeaea","#d4d4d4","#ddd1f3","#f0d1f6","#fbcfd6","#fedec1","#ffe697","#cdedd8","#cdeef0","#cde6f9","#ccd7ea","#3f3f3f","#737373","#979797","#8b65e0","#c064d1","#fc5356","#fd7b39","#ffc200","#00a82d","#57bfc4","#0081c2","#426bb3"],dark:["#333333","#656565","#535353","#5F4A8B","#7A4A83","#994242","#99572F","#967334","#1A6D30","#42797C","#1A5A7A","#3A4E74","#D9D9D9","#979797","#737373","#8B61E3","#C160D3","#FF5151","#FF7B2C","#FAB435","#00A82D","#52BFC5","#0081C2","#4069B5"]},$a=840,qa=48,Va=40,Ua=40,Ka="center",Ya=!1,Xa="​",Za="yellow",Ga={yellow:"#ffef9e",red:"#fec1d0",green:"#b7f7d1",blue:"#adecf4",purple:"#cbcaff",orange:"#ffd1b0"},Ja=["#fffaa5","#ffcc66","#f6ee96"];function Qa(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ei(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ni(e,t){var n=!lt(t.context,function(e){return!!e.type.spec.unsplittable});if(function(e){var t=e&&e.querySelector("[data-pm-slice]");return!(!t||!/^(\d+) (\d+) (.*)/.exec(t.getAttribute("data-pm-slice")))}(e)||!n)return e;!function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r;switch(t.nodeType){case Node.TEXT_NODE:var o=t;n&&!/\S/.test(o.data)&&(o.data+=Xa),!n&&/\xa0/.test(o.data)&&(o.data+=Xa);break;case Node.ELEMENT_NODE:var a=t;if(!a.style)break;switch(a.style.whiteSpace){case"pre":case"pre-wrap":case"pre-line":n=!0;break;case"normal":case"nowrap":n=!1}for(r=a.firstChild;r;)e(r,n),r=r.nextSibling}}(e);var r=document.createElement("div");r.appendChild(e);var o=t.resources;o&&Array.isArray(o)&&(o=o.reduce(function(e,t){return e[t.hash]=t,delete t.reference,e},{}));var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ei(n,!0).forEach(function(t){ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ei(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{resources:o,preserveWhitespace:!0}),i=Xn.fromSchema(gn).parse(r,a),l=Br(Se.EditorState.create({doc:i,schema:gn}),!1),s=e;return ct(l.doc,function(e){return"foreigncontent"===e.type.name})&&(s=Je.DOMSerializer.fromSchema(gn).serializeFragment(l.doc)),Nt(s),s}var ri=function(e,t,n){return[oi,ai,ui,di,ii,li,si,ci].reduce(function(e,r){return r(e,t,n)},e)},oi=function(e,t,n){return ht(e,function(e,t,n){return!!e.isTextblock||!(!Qe(e,"list")||!(e.childCount>1||1===t||1===n))}).slice},ai=function(e,t,n){return new Je.Slice(gt(e.content,function(e,t){return e=function(e,t){if(0===e.marks.length)return e;if(t||e.isBlock&&!e.isTextblock)return e.mark(Je.Mark.none);if(e.isTextblock){var n=[];return e.forEach(function(t){n.push(t.mark([].concat(Qa(e.marks),Qa(t.marks))))}),e.copy(Je.Fragment.from(n)).mark(Je.Mark.none)}return e}(e,t.matchStyle)},null,n),e.openStart,e.openEnd)},ii=function(e,t,n){if(n.enclipboard)return e;var r=t.schema,o=[r.marks.fontsize,r.marks.fontname],a=["style","backgroundColor","color"],i=r.nodes.p.create(null,e.content);return i.descendants(function(e,t,n){if(e.attrs&&a.forEach(function(t){e.attrs[t]&&delete e.attrs[t]}),0!==e.marks.length){var r=e.marks.filter(function(e){return!o.includes(e.type)});if(r.length!==e.marks.length){var l=Je.Fragment.from(e.mark(r));i=i.replace(t,t+e.nodeSize,new Je.Slice(l,0,0))}}}),new Je.Slice(i.content,e.openStart,e.openEnd)},li=function(e,t,n){if(0===e.openStart)return e;e.content.firstChild;var r=e.content.firstChild.nodeAt(e.openStart-1);if(!r||!r.isText)return e;var o=t.selection.$from,a=n.$context||o,i=t.schema,l=a.nodeBefore||a.nodeAfter;if(!l||l.isTextblock)return e;var s=t.storedMarks||l.marks;s=s.filter(function(e){return!1!==e.type.spec.inclusive});var c=i.nodes.p.create(null,e.content);if(n.enclipboard&&!n.matchStyle){var u=c.rangeHasMark(0,c.nodeSize-2,i.marks.fontname),d=c.rangeHasMark(0,c.nodeSize-2,i.marks.fontsize);s=s.filter(function(e){return!u&&e.type===i.marks.fontname||!d&&e.type===i.marks.fontsize})}return 0===s.length?e:(c.descendants(function(e,t,n){if(e.isText){var r,o,a,i=Je.Mark.setFrom((r=s,o=e.marks,a=o.map(function(e){return e.type}),(r=r.filter(function(e){return!a.includes(e.type)})).concat(o))),l=Je.Fragment.from(e.mark(i));c=c.replace(t,t+e.nodeSize,new Je.Slice(l,0,0))}}),new Je.Slice(c.content,e.openStart,e.openEnd))};var si=function(e,t,n){var r=n.$context||t.selection.$from;if(!lt(r,function(e){return!!e.type.spec.unsplittable}))return e;if(!Ro(r.node(null==n.depth?-1:n.depth).type,e.content))if(aa(r))e=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var r=t instanceof Je.Slice?t.content:Je.Fragment.from(t);var o=1===r.childCount;var a=[];r.forEach(function(r){if(Qe(r,"tablecontent"))a.push(r);else switch(r.type.name){case"foreigncontent":var i=r.type.schema.nodes.doc.create(null,r),l=Se.EditorState.create({doc:i,schema:r.type.schema}),s=qr(l.tr,0);s=Ma(s,0,1),l=l.apply(s);var c=e(l.doc.content,!1);c.content.forEach(function(e){return a.push(e)});break;case"table":n&&o&&t instanceof Je.Slice&&t.openStart<3?a.push(r.copy(e(r.content,!1).content)):r.descendants(function(t){if("cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole){var n=e(t.content,!1),r=2===n.size&&"p"===n.content.firstChild.type.name;r||n.content.forEach(function(e){return a.push(e)})}});break;case"tr":case"td":case"th":a.push(r.copy(e(r.content,!1).content));break;case"h":var u=r.toJSON();u.type="p",a.push(r.type.schema.nodeFromJSON(u));break;case"codeblock":var d=e(r.content,!1);d.content.forEach(function(e){return a.push(e)});break;case"hr":case"sectionbreak":break;case"li":a.push(r);break;case"plaintext":a.push(r.type.schema.nodes.p.create(null,r.content));break;default:Oe.error("unexpected unacceptable pasted content for table: "+r.type.name)}});return new Je.Slice(Je.Fragment.from(a),0,0)}(e);else if(Ta(r))e=function(e){var t=function e(t){var n=[];t.forEach(function(t){switch(t.type.name){case"codeblock":var r=e(Je.Fragment.from(t.content));r.forEach(function(e){return n.push(e)});break;default:var o=et(t);t=t.type.schema.nodes.plaintext.create(null,o.length?t.type.schema.text(o):null);case"p":case"h":case"plaintext":t.textContent.split("\n").forEach(function(e){n.push(t.type.schema.nodes.plaintext.create(null,e.length?t.type.schema.text(e):null))})}});return n}(e.content);return new Je.Slice(Je.Fragment.from(t),1,1)}(e);else{var o=[];e.content.forEach(function(e){return o.push(et(e))});var a=o.join("\n");e=new Je.Slice(a?Je.Fragment.from(t.schema.text(a)):Je.Fragment.empty,0,0)}return e},ci=function(e,t,n){return new Je.Slice(gt(e.content,function(e,t){return oa(e)&&0===e.childCount&&(e=e.copy(Je.Fragment.from(e.type.schema.nodes.p.create()))),e},oa,n),e.openStart,e.openEnd)};var ui=function(e,t,n){if(!n.drop)return e;var r=e.content;if(r.firstChild&&"tr"===r.firstChild.type.name){var o=t.schema.nodes.table.create({},r);return new Je.Slice(Je.Fragment.from(o),0,0)}return e},di=function(e,t,n){if(!n.drop)return e;var r=t.selection;if(!Qe(r.$from.parent,"list"))return e;var o=n.$context&&lt(n.$context,function(e){return Qe(e,"list")}),a=lt(r.$from,function(e){return Qe(e,"list")}),i=o&&a&&o.pos===a.pos&&o.nodeAfter&&1===o.nodeAfter.childCount;if(o&&!i)return e;var l=[];return e.content.forEach(function(e){if("li"===e.type.name){var t=r.$from.parent,n={};1===t.childCount&&t.type===t.type.schema.nodes.ol&&t.attrs.start&&(n.start=t.attrs.start),l.push(t.type.create(n,e))}else l.push(e)}),new Je.Slice(Je.Fragment.from(l),0,0)};var fi=function(e,t){var n=t.parentNode;n&&n.replaceChild(e,t)};function pi(e){var t=document.createElement("div");if(t.innerHTML=e,Array.from(t.getElementsByTagName("a")).forEach(function(e){fi(document.createTextNode(e.textContent),e)}),"en-todo"===t.tagName.toLowerCase())return"true"===t.getAttribute("checked")?"[x] ":"[ ] ";Array.from(t.getElementsByTagName("en-todo")).forEach(function(e){var n=document.createTextNode("true"===t.getAttribute("checked")?"[x] ":"[ ] ");fi(n,e)}),Array.from(t.querySelectorAll("img,en-media")).forEach(function(e){fi(document.createElement("br"),e)}),Array.from(t.getElementsByTagName("table")).forEach(function(e){var t=e.parentNode;Array.from(e.rows).forEach(function(n){Array.from(n.children).forEach(function(n){t.insertBefore(n,e)})}),e.remove()});for(var n,r=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);n=r.nextNode();)n.data=n.data.replace(/ /g," ");Array.from(t.querySelectorAll("div > br")).forEach(function(e){e.parentNode.childNodes.length>1?e.remove():e.parentNode.innerText=Wa}),document.body.appendChild(t);var o=t.innerText;return t.remove(),o=o.replace(new RegExp(Wa,"g"),"").replace(/<br>/g,"\n").replace(/-----PLACEHOLDER_TAB-----/g,"    ").replace(/\u00A0/g," ").replace(/\n\n$/,"\n")}function hi(e){return e&&xt(e,mi,["BODY","EN-NOTE"],!0)}function mi(e){return e&&("TEXTAREA"===e.tagName||"INPUT"===e.tagName)}function gi(e){return e?(Pt(e)&&(e=e.parentElement),mi(e)?e:e.querySelector("input, textarea")):null}function yi(e,t){if(!e||"string"!=typeof t)return null;var n=e.selectionEnd>=0&&e.selectionEnd<=e.value.length?e.selectionEnd:e.value.length,r=e.selectionStart>=0&&e.selectionStart<=e.value.length?e.selectionStart:n,o="TEXTAREA"===e.tagName,a=Object.getOwnPropertyDescriptor((o?window.HTMLTextAreaElement:window.HTMLInputElement).prototype,"value").set,i=e.value.substring(0,r)+t+e.value.substring(n);return a.call(e,i),e.selectionStart=r+t.length,e.selectionEnd=e.selectionStart,e.dispatchEvent(new Event("change",{bubbles:!0})),!0}var vi=n(273),bi=new Se.PluginKey("analytics"),wi=function(){return new Se.Plugin({key:bi,state:{init:function(){return null},apply:function(e){var t=e.getMeta(bi);t&&vi.analytics.trackMany(t)}}})},ki=n(813),_i=n(49),Oi=function(e,t,n,r){var o=e.getMeta(bi)||[],a={eventCategory:t,eventAction:n,eventLabel:r};return o.push(a),e.setMeta(bi,o)};function Ci(e){if(e.$from.pos===e.$to.pos)return e;for(var t=e.$from,n=e.$to,r=e.$from.doc;!t.nodeAfter;){for(var o=0,a=0;a<t.depth;a++){if(t.after(t.depth-a)>t.pos+a+1){o=a-1;break}}t=r.resolve(t.after(t.depth-o))}for(;0===n.parentOffset&&n.pos>0;){for(var i=0,l=0;l<n.depth;l++){if(n.index(n.depth-l)>0){i=l-1;break}}(n=r.resolve(Math.max(0,n.before(n.depth-i)))).nodeBefore&&!n.nodeBefore.isAtom&&(n=r.resolve(n.pos-1))}return new Se.SelectionRange(t,n)}function Si(e){if(e instanceof Se.TextSelection){var t=Ci(e.ranges[0]);return new Se.TextSelection(t.$from,t.$to)}return e}function xi(e){if(e.$from.pos===e.$to.pos)return e;for(var t=e.$from,n=e.$to;t.depth>=1&&t.start()===t.pos;)t=t.doc.resolve(t.before());for(;n.depth>=1&&n.end()===n.pos;)n=n.doc.resolve(n.after());return new Se.SelectionRange(t,n)}function Ei(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Array.isArray(e)||(e=[e]);for(var r=n?1:-1,o=[],a=0;a<e.length;a++){var i=e[a];i.from<=i.to&&o.push({from:t.map(i.from,1*r),to:t.map(i.to,-1*r)})}return o}function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ai=!0,Ti=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ni.apply(void 0,Mi(t))},Ni=function(e,t,n,r,o){var a,i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(n,!0).forEach(function(t){ji(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({html:!0,resources:!0,plain:!0},t),l=window.getSelection(),s=function(e){if(!e)return null;var t=e.anchorNode,n=e.anchorOffset;return jt(t)&&n<t.childNodes.length?t.childNodes[n]:t}(l);if(hi(s)){var c=gi(s),u=function(e){var t={resources:[],html:"",plain:""};if(!e||!e.value)return t;var n=e.selectionStart>=0&&e.selectionStart<=e.value.length?e.selectionStart:0,r=e.selectionEnd>=0&&e.selectionEnd<=e.value.length?e.selectionEnd:e.value.length;return t.plain=e.value.substring(n,r),t}(c);return"cut"===e&&r&&function(e){yi(e,"")}(c),u}if((a=s)&&xt(a,function(e){return e instanceof HTMLElement&&e.classList.contains("nestedSelectable")})&&!l.isCollapsed){var d=function(e){var t=e.getRangeAt(0),n=document.createElement("DIV");n.appendChild(t.cloneContents());var r=n.innerHTML,o=t.commonAncestorContainer,a=o.nodeType===Node.ELEMENT_NODE?o:o.parentNode;if(0===r.indexOf("<")||!t.collapsed&&-1===r.indexOf("<")||(r=a.cloneNode(!1).outerHTML).replace(">",">"+r),r.match(/^\s*<td\b/i))r="<table><tbody><tr>".concat(r,"</tr></tbody></table>");else if(r.match(/^\s*<tr\b/i))r="<table><tbody>".concat(r,"</tbody></table>");else if(r.match(/^\s*<tbody\b/i))r="<table>".concat(r,"</table>");else if(r.match(/^\s*<li\b/i)){for(var i="UL";a;){if("OL"===a.tagName.toUpperCase()){i="OL";break}if("UL"===a.tagName.toUpperCase())break;a=a.parentNode}r="<".concat(i,">").concat(r,"</").concat(i,">")}return r}(l),f=pi(d);return r&&xt(s,function(e){return e instanceof HTMLElement&&"FOREIGN-CONTENT"===e.tagName})&&Object(vi.track)(_i.b.NoteElementClip,_i.a.CopyClip),{html:i.html?d:"",plain:i.plain?f:"",resources:[]}}var p=Di(i,n,o);return"cut"===e&&r&&r(n.tr.deleteSelection().scrollIntoView()),r&&Object(vi.track)(_i.b.NoteElementText,"cut"===e?_i.a.CopyCut:_i.a.CopyNormal),p};function Di(e,t,n){var r,o=t.selection,a={resources:[],html:"",plain:""};if(o.empty)return a;var i=Si(o).content(),l=Object(xe.__serializeForClipboard)(n,i),s=l.dom,c=l.text;return function(e){var t=e&&e.querySelector("[data-pm-slice]"),n=t&&/^(\d+) (\d+) (.*)/.exec(t.getAttribute("data-pm-slice"));if(!n)return;var r=+n[1],o=+n[2],a=JSON.parse(n[3]),i=e.firstElementChild,l=i.tagName.toLowerCase();for(;i&&i.childNodes.length&&void 0!==Li[l];){var s=Li[l];if(s){if(s!==a[0])break;a=a.slice(2),r+=1,o+=1}i=i.firstElementChild,l=i.tagName.toLowerCase()}e.contains(t)||(t=e.firstElementChild);t&&(t.hasAttribute("style")&&(r=0,o=0),t.setAttribute("data-pm-slice","".concat(r," ").concat(o," ").concat(JSON.stringify(a))))}(s),Xe(s,!1),s.firstChild instanceof HTMLElement&&s.firstChild.setAttribute("data-en-clipboard","true"),e.resources&&(a.resources=(r=[]).concat.apply(r,Mi(o.ranges.map(function(e){return bo(n,e)})))),e.html&&(a.html=s.innerHTML),e.plain&&(a.plain=c||s.innerText),a}var Li={table:"table",colgroup:!1,tbody:!1,tr:"tr"};function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(n,!0).forEach(function(t){qi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fi(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e,t,n){return(Wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $i(e,t){return($i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vi={},Ui=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fi(this,Hi(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$i(e,t)}(t,Xn),n=t,o=[{key:"fromSchema",value:function(e){return e.cached.clipboardParser||(e.cached.clipboardParser=new t(e,t.schemaRules(e)))}},{key:"schemaRules",value:function(e){var t=[],n=function(e){for(var n=null==e.priority?50:e.priority,r=0;r<t.length;r++){var o=t[r];if((null==o.priority?50:o.priority)<n)break}t.splice(r,0,e)},r=function(t){var r=e.marks[t].spec.parseClipboard;r&&r.forEach(function(e){n(e=Ki(e)),e.mark=t})};for(var o in e.marks)r(o);var a=function(t){var r=e.nodes[t].spec.parseClipboard;r&&r.forEach(function(e){n(e=Ki(e)),e.node=t})};for(var o in e.nodes)a(o);return t}}],(r=[{key:"parse",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Wi(Hi(t.prototype),"parse",this).call(this,e,zi({},n,{resources:t.resources}))}},{key:"parseSlice",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(e=ni(e,n)).querySelector("[data-pm-slice]");return r||(Vi=Yi(e)),Wi(Hi(t.prototype),"parseSlice",this).call(this,e,zi({},n,{resources:t.resources}))}}])&&Bi(n.prototype,r),o&&Bi(n,o),t}();function Ki(e){var t={};for(var n in e)t[n]=e[n];return t}qi(Ui,"resources",{});function Yi(e){var t,n,r=e.firstChild,o=e.lastChild,a=0,i=0;if(r.nodeType!==Node.ELEMENT_NODE)return{openStart:a,openEnd:i};if((n=r).nodeType!==Node.ELEMENT_NODE||-1!==["H1","H2","H3","H4","H5","H6","OL","TABLE","UL"].indexOf(n.tagName)||"true"===n.getAttribute("data-en-codeblock")||"true"===n.getAttribute("data-en-todo"))a=0;else for(t=r;t;)t=t.firstChild,a++;if(r===o&&0===a)i=0;else for(t=o;t;)t=t.lastChild,i++;return{openStart:a,openEnd:i}}var Xi=n(1750),Zi=n.n(Xi),Gi=n(82),Ji=n(101),Qi=n.n(Ji);function el(e,t){var n=Qi()(e),r=Qi()(t),o=100-n.lightness(),a=r.lightness(),i=o/100*(100-a)+a;return n.lightness(i).hex()}function tl(e){return Qi()(e).rgb().string()}function nl(e){return Qi()(e).hex().toLowerCase()}function rl(e){return(rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function il(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ll(e,t){return(ll=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sl=function(e){function t(e){var n,r,o,a,i,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(o=al(t).call(this))||"object"!==rl(o)&&"function"!=typeof o?il(r):o,a=il(n),l=void 0,(i="attrs")in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,n.attrs=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ll(e,t)}(t,sr["Step"]),n=t,o=[{key:"fromJSON",value:function(e,n){if(null!=n.attrs&&"object"!=rl(n.attrs))throw new RangeError("Invalid input for SetAttrsStep.fromJSON");return new t(n.attrs)}}],(r=[{key:"apply",value:function(e){var t=e.type.create(this.attrs,e.content);return sr.StepResult.ok(t)}},{key:"invert",value:function(e){return new t(e?e.attrs:null)}},{key:"map",value:function(e){return this}},{key:"toJSON",value:function(){return{stepType:"setDocAttrs",attrs:this.attrs}}}])&&ol(n.prototype,r),o&&ol(n,o),t}();sr.Step.jsonID("setDocAttrs",sl);var cl=n(1715),ul=n.n(cl);function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(n,!0).forEach(function(t){pl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hl="body.peso-activated en-note.peso",ml={"sans-serif":ul.a.sansSerifCssFontFamilyValue,serif:ul.a.serifCssFontFamilyValue,"slab-serif":ul.a.slabSerifCssFontFamilyValue,monospace:ul.a.monospaceCssFontFamilyValue,script:ul.a.scriptCssFontFamilyValue,handwritten:ul.a.handwrittenCssFontFamilyValue},gl={fontFamily:"inherit",fontSize:"inherit",color:"inherit",fontWeight:"inherit",fontStyle:"inherit",textDecoration:"inherit",lineHeight:"inherit"},yl={h1:fl({},gl,{fontSize:"30px",fontWeight:500,lineHeight:"40px"}),h2:fl({},gl,{fontSize:"24px",fontWeight:400,lineHeight:"32px"}),h3:fl({},gl,{fontSize:"18px",fontWeight:600,lineHeight:"24px"}),p:fl({},gl)};function vl(e){var t,n,r=(t=Object(Gi.getCustomHeadingStyles)(),n={},Object.keys(yl).forEach(function(e){var r=t[e];if(r){var o=!1,a=yl[e],i={};Object.keys(a).forEach(function(e){r[e]!==a[e]&&(i[e]=r[e],o=!0)}),o&&(n[e]=i)}}),JSON.stringify(n));if("{}"!==r){var o=bt()("div",{style:'display:none;--en-chs:"'.concat(btoa(r),'"')}," ");e.insertBefore(o,e.firstChild)}}function bl(e){var t=null;try{var n=e.querySelector("[style*=display][style*=none][style*=--en-chs]");if(!(n instanceof HTMLElement))return;if("none"!==n.style.display)return;var r=n.style.getPropertyValue("--en-chs");if(!r)return;n.remove();try{t=atob(JSON.parse(r))}catch(e){}}finally{!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={};try{n=JSON.parse(e)||{}}catch(e){}Object.keys(yl).forEach(function(e){Me.default.dispatch(Object(Pe.setCustomHeadingStyles)(e,fl({},yl[e],{},n[e]||{default:!0})))}),Ol(t)}(t,!0),Array.from(e.querySelectorAll('[style*="--en-chs: true"]')).forEach(Dt)}}function wl(e){e.attrs.customheadingstyles=Object(Gi.getCustomHeadingStyles)()}function kl(e,t,n){var r=yl[t];if(r){var o={};if(n){var a=getComputedStyle(n);if(Object.keys(r).forEach(function(e){void 0!==a[e]&&(o[e]=a[e])}),o.fontFamily){var i=o.fontFamily.split(",").pop().trim();ml[i]&&(o.fontFamily=i)}for(var l,s=n;s;){var c=getComputedStyle(s);l||(l="none"!==c.textDecorationLine?c.textDecorationLine:null),s=s.parentElement}l&&(o.textDecoration=l)}else o.default=!0;Me.default.dispatch(Object(Pe.setCustomHeadingStyles)(t,fl({},r,{},o)));var u=e.state.tr;e.dispatch(u.step(new sl(fl({},u.doc.attrs,{customheadingstyles:Object(Gi.getCustomHeadingStyles)()})))),Ol()}}function _l(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(Gi.getCustomHeadingStyles)(e),r=bt()("div"),o=yl[e]||{};return Object.keys(n).forEach(function(e){if(t||o[e]!==n[e])if("lineHeight"===e&&n.fontSize)r.style.lineHeight=Math.round(5*parseInt(n.fontSize,10)/3)+"px";else if("fontFamily"===e&&ml[n[e]]){if(!t&&"sans-serif"===n[e])return;r.style.fontFamily=ml[n[e]]}else r.style[e]=n[e]}),r.getAttribute("style")}function Ol(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(Gi.getCustomHeadingStyles)(),n=[];Object.keys(yl).forEach(function(e){var t,r=_l(e,!0);switch(e){case"h1":case"h2":case"h3":t="".concat(hl," ").concat(e);break;case"p":t="".concat(hl," .para");break;default:return}n.push("".concat(t," { ").concat(r," }"))});var r=document.querySelector("style#chs")||bt()("style",{type:"text/css",id:"chs"});r.textContent=n.join("\n"),document.head.appendChild(r),e?setTimeout(function(){return Ne("customHeadingStyles",t)}):Ne("customHeadingStyles",t)}function Cl(e){return e}var Sl={bold:"fontWeight",italic:"fontStyle",underline:"textDecoration",strikethrough:"textDecoration",subscript:"verticalAlign",superscript:"verticalAlign",fontsize:"fontSize",fontfamily:"fontFamily",fontname:"fontFamily",forecolor:"color",highlight:"backgroundColor"},xl={bold:function(e){return e>500},italic:function(e){return e.indexOf("italic")>-1},underline:function(e){return e.indexOf("underline")>-1},strikethrough:function(e){return e.indexOf("line-through")>-1},subscript:function(e){return"sub"===e},superscript:function(e){return"super"===e},fontsize:function(e){return _r(e,"px")},fontfamily:Cl,fontname:Cl,forecolor:function(e){return null==e?e:tl(e)},highlight:function(e){var t=nl(e);return Zi()(Ga,function(e){return e===t})||null}};function El(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Sl[t],o=xl[t],a=Object(Gi.getCustomHeadingStyles)(e)[r];return"inherit"!==a&&null!=a||(a=n),o(a)}function Pl(e){return(Pl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var jl={HTML:"text/html",PLAIN:"text/plain",XML:"text/xml",RICHTEXT:"text/richtext"},Ml=function(e,t,n,r,o){var a=n.schema,i=(n.selection,n.doc),l=function(e){var t={values:[],matchStyle:e.matchStyle||!1,retainStyle:e.retainStyle||!1,select:!1,enclipboard:!1,pasteValue:"",type:"",resources:[]},n=!("string"!=typeof e||!e),r=!("object"!==Pl(e)||!e.value),o=!!("object"===Pl(e)&&e.values instanceof Array&&e.values.find(function(e){return!!e.value&&(e.type===jl.HTML||e.type===jl.PLAIN)}));if(!n&&!r&&!o)return t;if(n)t.values.push({type:jl.HTML,value:e}),t.pasteValue=e,t.type=jl.HTML;else if(o){for(var a=e.values.length-1;a>=0;a--){var i=e.values[a];i.type&&i.value&&(t.values.push(i),i.type===jl.HTML&&(t.pasteValue=i.value,t.type=jl.HTML))}if(e.resources instanceof Array&&(t.resources=e.resources),!t.pasteValue){var l=Al(t,jl.PLAIN);t.pasteValue=l}}else r&&(t.values.push({type:"plain"===e.type?jl.PLAIN:jl.HTML,value:e.value}),e.resources instanceof Array&&(t.resources=e.resources),t.pasteValue=e.value,t.type="plain"===e.type?jl.PLAIN:jl.HTML);return t.enclipboard=/data-en-clipboard="true"|-en-clipboard:\s*true;/g.test(t.pasteValue),t}(t||{});if(!l.pasteValue)return!0;var s=l.type===jl.HTML?"":l.pasteValue,c=l.type===jl.HTML?l.pasteValue.trim():"";c=function(e){var t=bt()("div");return t.innerHTML=e,Array.from(t.querySelectorAll('[style*="--en-chs: true"]')).forEach(Dt),t.innerHTML}(c=function(e){return Eo.a.sanitize(e,{ALLOWED_URI_REGEXP:Po})}(c));var u,d=window.getSelection();if(hi(function(e){if(!e)return null;var t=e.focusNode,n=e.focusOffset;return jt(t)&&n<t.childNodes.length?t.childNodes[n]:t}(d))){var f=gi(d.anchorNode);return r&&function(e,t){yi(e,t)}(f,s||Al(l,jl.PLAIN)),!0}var p=bo(o,{$from:i.resolve(0),$to:i.resolve(i.nodeSize-2)}).concat(l.resources||[]);p&&p.length>0&&(u=p.reduce(function(e,t){return e[t.hash]=t,delete t.reference,e},{})),Ui.resources=u;var h=Object(xe.__parseFromClipboard)(o,s,c,o.shiftKey,o.state.selection.$from);if(!h)return!1;if(o.someProp("transformPastedSlice",function(e){h=e(h,o,l)}),o.someProp("handlePaste",function(e){return e(o,null,h,l,r)}))return!0;var m=o.state.tr,g=function(e){return 0===e.openStart&&0===e.openEnd&&1===e.content.childCount?e.content.firstChild:null}(h),y=Ut.getState(n).coords,v=y&&o.posAtCoords({left:y.x,top:y.y});v?g?m.replaceWith(v.pos,v.pos,g):m.replace(v.pos,v.pos,h):g?m.replaceSelectionWith(g,o.shiftKey):m.replaceSelection(h);var b=!1;if(h.content.descendants(function(e){return!b&&!(b=e.type===a.nodes.table)}),m.scrollIntoView().setMeta("paste",!0).setMeta("pastedtable",b).setMeta("naturalizePasting",!l.retainStyle),r){var w=l.retainStyle?_i.a.PasteRetain:l.matchStyle?_i.a.PasteMatch:_i.a.PasteNormal;r(Oi(m,_i.b.NoteElementText,w))}return!0};function Al(e,t){var n=e.values.find(function(e){return e.type===t});return n?n.value:""}var Tl=!0,Nl=function(e,t,n,r,o){var a,i,l,s,c,u,d=n.tr,f=n.schema,p=n.doc;if(a=d.selection,i=!1,l=f.nodes.codeblock,s=void 0,c=!0,u=[],a.ranges.forEach(function(e){u.push.apply(u,Lo(e))}),u.some(function(e){var t=e.nodeAfter,n=e.node();return t.type!==l&&!((c||Ro(l,i?t.content:t.type))&&n.type.strictContentMatch.matchType(l,s))}))return!1;if(!zo(d.selection,!0))return!1;if(at(d.selection,d.doc,function(e){return e.nodeAfter&&"crypt"===e.nodeAfter.type.name}).length>0)return!1;if(!r)return!0;if(Dl(e,t,n))d.selection.ranges.forEach(function(e){d.doc.nodesBetween(e.$from.pos,e.$to.pos,function(e,t){if("codeblock"===e.type.name){var n=t,r=p.resolve(t).nodeBefore;r&&r.type===f.nodes.p&&0===r.childCount&&(n-=2);var o=t+e.nodeSize,a=p.resolve(o).nodeAfter;a&&a.type===f.nodes.p&&0===a.childCount&&(o+=2);var i=e.content.content.map(function(e){return f.nodes.p.create(null,e.content)});return d.replaceWith(d.mapping.map(n),d.mapping.map(o),i),!1}return!0})});else{!function(e){for(;e.selection.$to.depth>1&&e.selection.$to.parent.content.size===e.selection.$to.parentOffset;)e.setSelection(Se.TextSelection.create(e.doc,e.selection.to+1,e.selection.from));for(;e.selection.$from.depth>1&&0===e.selection.$from.parentOffset;)e.setSelection(Se.TextSelection.create(e.doc,e.selection.to,e.selection.from-1))}(d);var h=[],m=d.selection.from,g=d.selection.to;null!=d.selection.$from.nodeBefore&&h.push(f.nodes.p.create());var y=null;null!=d.selection.$to.nodeAfter?y=f.nodes.p.create():g=Math.min(g+1,d.doc.nodeSize-2);var v,b=d.selection.content(),w=o.someProp("clipboardTextSerializer",function(e){return e(b)});if(w){var k=w.split("\n");k[k.length-1]||k.pop(),v=k.map(function(e){return f.nodes.plaintext.create(null,e?Je.Fragment.from(f.text(e)):null)})}else v=[f.nodes.plaintext.create()];var _=Je.Fragment.from(v);h.push(f.nodes.codeblock.create(null,_)),y&&h.push(y),d.replaceRange(m,g,new Je.Slice(Je.Fragment.from(h),1,1));var O=it(d.doc,{from:d.mapping.map(m,-1),to:d.mapping.map(g,1)},function(e,t){return"codeblock"===e.type.name});if(O){var C=O.pos+2,S=C+_.size-2;d.setSelection(Se.TextSelection.create(d.doc,C,S)),d.scrollIntoView()}}return r(Oi(d,_i.b.NoteElementText,_i.a.Codeblock)),!0},Dl=function(e,t,n,r){return n.selection.ranges.some(function(e){var t=e.$from,r=e.$to,o=!1;return lt(e.$from,function(e){return"codeblock"===e.type.name})||lt(e.$to,function(e){return"codeblock"===e.type.name})?o=!0:n.doc.nodesBetween(t.pos,r.pos,function(e){return!(o=o||"codeblock"===e.type.name)}),o})};function Ll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.env=e.env||{},e.env.margin=e.env.margin||{},e.env.margin.note=e.env.margin.note||{},e.env.margin.scroll=e.env.margin.scroll||{},e.env.margin.offset=e.env.margin.offset||{},e.global.locale=e.global.locale||"en_US",e.realtime=e.realtime||{},e.rte=e.rte||{},e.rte.darkmode=e.rte.darkmode||{},e.rte.imageConfig=e.rte.imageConfig||{},e.rte.resourceConfig=e.rte.resourceConfig||{},e.rte.layoutManager=e.rte.layoutManager||{},e.rte.resources=e.rte.resources||{},e.rte.trackStateChanges=e.rte.trackStateChanges||[],e.rte.trackValueChanges=e.rte.trackValueChanges||[],e.rte.trackEnabledChanges=e.rte.trackEnabledChanges||[],e.rte.typebehind=e.rte.typebehind||{},e.note=e.note||{},e.noteLayout=e.noteLayout||{},e}var Rl=new Se.PluginKey("features");var Il=function(){return new Se.Plugin({key:Rl,state:{init:function(e,t){return e.props.features},apply:function(e,t,n,r){var o=e.getMeta(this);return o&&(t.realtime.undo!==o.realtime.undo&&Fl("realtimeundo",o.realtime.undo),t.typebehind.undo!==o.typebehind.undo&&Fl("typebehindundo",o.typebehind.undo),t=o),t}}})},zl="featureflagsv2";function Bl(e){try{return!!(JSON.parse(localStorage.getItem(zl))||{})[e]}catch(e){console.error(e)}return!1}function Fl(e,t){try{var n=JSON.parse(localStorage.getItem(zl))||{};n[e]=t,localStorage.setItem(zl,JSON.stringify(n))}catch(e){console.error(e)}}var Wl=n(170);function Hl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hl(n,!0).forEach(function(t){ql(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vl=new Se.PluginKey("statusbar"),Ul=function(){return new Se.Plugin({key:Vl,state:{init:function(e,t){var n=e.props.config,r=e.props.features,o=this;return{actions:{debug:r.realtime.enabled?function(){Ne("openLink",{href:window.YINFO.debugURL,kind:"debug",sharing:!1})}:null,archive:r.realtime.enabled?function(){}:null,switch:function(){EN.run("switch-editor")}},users:[],features:[{name:"Backspace Undo Typebehind",checked:r.typebehind.undo,handler:function(e){var t=$l({},Rl.getState(o.view.state),{typebehind:$l({},r.typebehind,{undo:e})}),n=Vl.getState(o.view.state),a=$l({},n,{features:n.features.map(function(t){return"Backspace Undo Typebehind"===t.name?$l({},t,{checked:e}):t})});o.view.dispatch(o.view.state.tr.setMeta(Rl,t).setMeta(Vl,a))}},r.realtime.enabled?{name:"RTE Undo/Redo",checked:r.realtime.undo,handler:function(e){var t=$l({},Rl.getState(o.view.state),{realtime:$l({},r.realtime,{undo:e})}),n=Vl.getState(o.view.state),a=$l({},n,{features:n.features.map(function(t){return"RTE Undo/Redo"===t.name?$l({},t,{checked:e}):t})});o.view.dispatch(o.view.state.tr.setMeta(Rl,t).setMeta(Vl,a))}}:null].filter(Boolean),realtime:!!r.realtime.enabled,loading:!r.realtime.enabled,error:!1,dirty:!1,focus:!1,readonly:!1===n.activeAfterSetup||null!=r.realtime.enabled,version:n.version}},apply:function(e,t,n,r){var o=e.getMeta(this);if(o){var a=$l({},t),i=!1;Object.keys(o).forEach(function(e){t[e]!==o[e]&&(a[e]=o[e],i=!0)}),i&&(t=a,Object(Wl.renderStatusBar)(t))}return t}},props:{renderStatusBar:function(e){e?Object(Wl.renderStatusBar)(Vl.getState(e)):console.warn('Missing required "state" param for statusbar plugin prop: renderStatusBar')}},view:function(e){var t=e.state.plugins.find(function(e){return e.spec.key===Vl});return t?(t.view=e,{destroy:function(){t.view=null}}):{}}})};function Kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xl=new Se.PluginKey("editor"),Zl=function(){return new Se.Plugin({key:Xl,props:{handleDOMEvents:{keydown:function(e,t){var n=t.metaKey,r=t.ctrlKey,o=t.keyCode,a=t.shiftKey;if(!n&&!r&&(37===o||38===o||a&&9===o)){var i=e.state.selection,l=i.empty,s=i.anchor;if(l&&s<=1&&e.state.selection instanceof Se.TextSelection){var c=e.state.doc.resolve(s);if(c&&c.parent&&c.parent.attrs.indent&&c.parent.attrs.indent>0)return!1;var u=gi(document.querySelector(".peso-activated en-noteheader"));if(u&&u.focus)return u.focus(),u.selectionStart=u.value.length,t.preventDefault(),!0}}if(!t.metaKey&&!t.ctrlKey)return!1;if(t.ctrlKey&&t.altKey)return t.preventDefault(),!0;var d=t.keyCode;return 66===d||73===d||89===d||90===d},click:function(e,t){e.props.editable()||Ne("actionDenied",{readOnly:!0})}}},state:{init:function(e){return{editable:!1,loaded:!1}},apply:function(e,t){return e.getMeta(this)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kl(n,!0).forEach(function(t){Yl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},e.getMeta(this)):t}}})};function Gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ql=!0,es=function(e,t,n,r,o){if(!r)return!0;var a="true"===t||!0===t,i=Xl.getState(n),l=n.tr.setMeta(Xl,{editable:a,loaded:!0});return i.editable!==a?(o.update(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gl(n,!0).forEach(function(t){Jl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gl(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o.props,{editable:function(){return a}})),a&&Ae.isFirefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false")),r(l.setMeta(Vl,{readonly:!a})),Object(Me.dispatch)(Pe.setEditable(a))):!0!==i.loaded&&r(l),o.dom.classList.toggle("editable",a),!0},ts=function(e,t,n,r,o){return o&&o.editable},ns=function(e,t,n,r,o){var a=o.dom.getBoundingClientRect(),i=o.dom.parentElement,l=i.scrollTop,s=i.scrollLeft,c=i.scrollHeight,u=Math.round(a.top+l),d=Math.round(a.left+s),f=Math.round(u+a.height);return{left:d,top:u,right:Math.round(d+a.width),bottom:f,x:d,y:Math.round(c-f)}},rs=!0,os=function(e,t,n,r,o){var a=n.tr,i=n.doc;if(!t)return!1;var l=parseInt(t.x,10),s=parseInt(t.y,10);if(Number.isNaN(l)||Number.isNaN(s))return!1;var c=o.posAtCoords({left:l,top:s});return c&&a.setSelection(Se.TextSelection.create(i,c.pos)),a.setMeta(Ut,{coords:{x:l,y:s}}),r&&r(a),!0},as=n(1700);function is(e){return(is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ss,cs=Symbol("Mixed");function us(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;Array.isArray(e)||(e=[e]);var r=e.find(function(e){return e.type===t});return r&&(n?r.attrs[n]:r.attrs)}function ds(e,t){if(!e.parent||e.parent.childCount<1)return null;var n=e.index(),r=n,o=function(t){return e.parent.child(t).marks.indexOf(a)>-1};n===e.parent.childCount&&(n--,r--);var a=t.isInSet(e.parent.child(n).marks);if(!a)return null;for(;n>0&&o(n-1);)n--;for(;r+1<e.parent.childCount&&o(r+1);)r++;for(var i=e.start(),l=i,s=0;s<=r;s++){var c=e.parent.child(s).nodeSize;s<n&&(i+=c),l+=c}return{from:i,to:l,mark:a}}function fs(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=[],a=void 0;if(e.forEach(function(e){var t=nt(e,function(e){return"text"===e.type.name});o.push.apply(o,ls(t))}),!o.length){var i=new Set;if(e.forEach(function(e){nt(e,function(e){return"p"===e.type.name||"h"===e.type.name}).forEach(function(e){var t=e.nodeAfter,n="h"===t.type.name?"h"+t.attrs.level:"p";i.add(n)})}),0===i.size)return function(e,t){return xl[e](t)}(t.name,r);i.forEach(function(e){var n=El(e,t.name,r);void 0===a?a=n:_e()(a,n)||(a=cs)})}for(var l=0;l<o.length&&a!==cs;l++){var s=o[l].nodeAfter,c=o[l].parent,u=El("h"===c.type.name?"h"+c.attrs.level:c.type.name,t.name,r),d=us(s.marks,t,n)||u;void 0===a?a=d:_e()(a,d)||(a=cs)}return a}function ps(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.type.name;return El("h"===r?"h"+e.attrs.level:r,t,n)}function hs(e,t,n,r){var o=r.selection,a=o.$from,i=o.empty,l=o.ranges,s=r.storedMarks,c=r.schema.marks[e];if(i){if(s&&c.isInSet(s))return us(s,c,t);var u=a.marks();return u&&c.isInSet(u)?us(u,c,t):ps(a.parent,e,n)}return fs(l,c,t,n)}function ms(e){if(!Ae.isFirefox){switch(!Number.isNaN(e.which)&&e.which){case 0:return ss.None;case 1:return ss.Left;case 2:return ss.Middle;case 3:return ss.Right}switch(e.button){case 0:return ss.Left;case 1:return ss.Middle;case 2:return ss.Right;case 3:case 4:return ss.Other}}return 1&e.buttons?ss.Left:2&e.buttons?ss.Right:4&e.buttons?ss.Middle:8&e.buttons?ss.Other:16&e.buttons?ss.Other:ss.None}function gs(e){var t,n,r=e.doc.type.schema.marks.link;return e.selection.ranges.forEach(function(o){var a=o.$from,i=o.$to;t=ds(a,r),n=ds(i,r),function(e,t,n){!e||Number.isNaN(t)||Number.isNaN(n)||e.removeMark(t,n,e.doc.type.schema.marks.link)}(e,t&&t.mark?t.from:a.pos,n&&n.mark?n.to:i.pos)}),e}function ys(e,t,n){var r,o=e.doc.type.schema.marks.link,a=e.mapping.maps.length;return e.selection.ranges.forEach(function(i){var l=i.$from,s=i.$to,c=e.doc.resolve(e.mapping.slice(a).map(l.pos,-1)),u=e.doc.resolve(e.mapping.slice(a).map(s.pos,1));(r=ds(c,o)||ds(u,o))?vs(e,r.from,r.to,t,n):vs(e,c.pos,u.pos,t,n)}),e}function vs(e,t,n,r,o){if(!e||Number.isNaN(t)||Number.isNaN(n))return e;var a=ws(r);if(!a||!a.full)return e;var i=e.doc.type.schema,l=e.mapping.maps.length,s=i.marks.link,c=e.mapping.slice(l).map(t,-1),u=e.mapping.slice(l).map(n,1),d=ds(e.doc.resolve(c),s);if(d&&d.mark){var f=ws(d.mark.attrs.href);!f||o!==f.path&&o!==f.full||f.full===a.full||(o=f&&o===f.full?a.full:a.path)}if(o&&o.length){var p=e.doc.nodeAt(c);e.replaceWith(c,u,i.text(o,p?p.marks:[]))}else if(!e.doc.textBetween(c,u).length){var h=e.doc.nodeAt(c);e.replaceWith(c,u,i.text(r,h?h.marks:[]))}return c=e.mapping.slice(l).map(t,-1),u=e.mapping.slice(l).map(n,1),d&&d.mark||e.removeMark(c,u,i.marks.forecolor),e.removeMark(c,u,s),e.addMark(c,u,s.create({href:a.full})),e}!function(e){e[e.None=-1]="None",e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Other=3]="Other"}(ss||(ss={}));var bs=/^([a-z]+:(?:\/\/)?)?([\s\S]+)/i;function ws(e){if(!e.length)return null;var t=bs.exec(e)||["","",""],n={full:t[0]||"",protocol:t[1]||"",path:t[2]||""};return n.path&&!n.protocol&&(n.protocol="http://",n.full=n.protocol+n.path),n}function ks(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Os=new Se.PluginKey("link"),Cs=function(){return new Se.Plugin({key:Os,props:{decorations:function(e){return Os.getState(e).decos},handleDOMEvents:{click:function(e,t){if(!e.editable||t.metaKey||t.ctrlKey){var n=ms(t);n!==ss.Left&&n!==ss.Middle||t.preventDefault()}}},handleClickOn:function(e,t,n,r,o,a){if(!a)return null;if(e.editable&&!o.metaKey&&!o.ctrlKey)return null;var i=ms(o);if(i!==ss.Left&&i!==ss.Middle)return null;var l=function(e){if(null==e||!e.isText)return null;var t=e.type.schema.marks.link,n=e.marks.find(function(e){return e.type===t});return n&&n.attrs.href}(e.state.doc.nodeAt(t));return l?(e.props.notify("openLink",{action:"open",module:"link",href:l}),!0):null}},state:{init:function(){return{displayMode:"hidden",decos:xe.DecorationSet.empty}},apply:function(e,t,n,r){if(!Xl.getState(r).editable||!Object(Gi.getInteraction)().link)return t;var o=e.getMeta(Os),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ks(n,!0).forEach(function(t){_s(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ks(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t),i=[];if(o&&o.clearSelection||r.selection instanceof Se.NodeSelection)Object(Me.dispatch)(Pe.dismissLinkPopover()),a.displayMode="hidden";else if(o&&o.createLink&&"LINK_EDIT_EXISTING"!==o.createLink)"LINK_CREATE_TEXT_AND_HREF"===o.createLink?Object(Me.dispatch)(Pe.showCreateLinkPopover({modifyText:!0,text:e.doc.textBetween(e.selection.from,e.selection.to),href:"",from:e.selection.from,to:e.selection.to})):Object(Me.dispatch)(Pe.showCreateLinkPopover({modifyText:!1,href:"",from:e.selection.from,to:e.selection.to})),a.displayMode="create",e.selection.ranges.forEach(function(e){var t=e.$from,n=e.$to;i.push(xe.Decoration.inline(t.pos,n.pos,{class:"selectionDecoration"}))});else{if(e.docChanged||n.selection.from!==e.selection.from||n.selection.to!==e.selection.to||o&&(o.closePopover||o.enterEdit||o.createLink&&"LINK_EDIT_EXISTING"===o.createLink)){var l=e.selection,s=l.$from,c=l.$to,u=ds(s,e.doc.type.schema.marks.link);u&&u.from<=c.pos&&c.pos<=u.to?o&&o.enterEdit||o&&o.createLink&&"LINK_EDIT_EXISTING"===o.createLink?(Object(Me.dispatch)(Pe.showLinkEditPopover({modifyText:!0,text:e.doc.textBetween(u.from,u.to),href:u.mark.attrs.href,from:e.selection.from,to:e.selection.to})),a.displayMode="edit",i.push(xe.Decoration.inline(u.from,u.to,{class:"selectionDecoration"}))):(Object(Me.dispatch)(Pe.showLinkInfoPopover({href:u.mark.attrs.href,from:e.selection.from,to:e.selection.to})),a.displayMode="create"):"hidden"!==t.displayMode&&(Object(Me.dispatch)(Pe.dismissLinkPopover()),a.displayMode="hidden")}}return a.decos=i.length?xe.DecorationSet.create(e.doc,i):xe.DecorationSet.empty,a}}})};var Ss=!0,xs=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;if(n){var o=t.doc.content.size-1,a=r.state.tr;a.setMeta(Os,{clearSelection:!0}),a.setSelection(Se.TextSelection.create(t.doc,o,o)),n(a)}return!0};function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var js=new Se.PluginKey("darkmode"),Ms=function(){return new Se.Plugin({key:js,props:{decorations:function(e){return js.getState(e).decoSet}},state:{init:function(e,t){return{enabled:Object(Gi.isDarkmodeEnabled)(),decoSet:xe.DecorationSet.empty}},apply:function(e,t,n,r){var o=e.getMeta(this);if(!o&&!t.enabled)return t;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(n,!0).forEach(function(t){Ps(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);if(o&&(a.enabled=o.enabled),!a.enabled||t.enabled&&e.doc.eq(n.doc))t.enabled&&!a.enabled&&(a.decoSet=xe.DecorationSet.empty);else{var i=e.doc.type.schema.marks.forecolor,l=[];e.doc.descendants(function(e,t){if(e.attrs.backgroundColor)return l.push(xe.Decoration.node(t,t+e.nodeSize,{style:"color: black;"})),!1;var n=e.attrs.color;return n||(n=us(e.marks,i,"color")),n&&l.push(xe.Decoration.node(t,t+e.nodeSize,{style:"color: ".concat(el(n,a.backgroundColor),";")})),!0}),a.decoSet=l.length>0?xe.DecorationSet.create(e.doc,l):xe.DecorationSet.empty}return a}}})};function As(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?As(n,!0).forEach(function(t){Ns(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):As(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ds=new Se.PluginKey("tableColumnResizing"),Ls=5,Rs=function(){return new Se.Plugin({key:Ds,props:{decorations:function(e){return Ds.getState(e).decos},attributes:function(e){return Ds.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,t){return function(e,t){if(!e.editable)return!1;var n=Ds.getState(e.state);if(n.dragging){if(!t.which)return Is(e,t);var r=Ds.getState(e.state),o=Hs(r.dragging,t),a=o.width,i=o.nextWidth;e.dispatch(e.state.tr.setMeta(Ds,{resizingWidth:a,resizingNextWidth:i}))}else{if(t.buttons)return!1;var l=Et(t.target,function(e){return e&&("TD"===e.nodeName||"TH"===e.nodeName)},null,!0),s=-1;if(l){var c=l.getBoundingClientRect(),u=c.left,d=c.right;t.clientX-u<=Ls?s=zs(e,t,"left"):d-t.clientX<=Ls&&(s=zs(e,t,"right"))}s!==n.activeHandle&&e.dispatch(e.state.tr.setMeta(Ds,{setHandle:s}))}return!1}(e,t)},mouseleave:function(e,t){return function(e){if(!e.editable)return!1;var t=Ds.getState(e.state);t.activeHandle>-1&&!t.dragging&&e.dispatch(e.state.tr.setMeta(Ds,{setHandle:-1}));return!1}(e)},mousedown:function(e,t){return function(e,t){if(!e.editable)return!1;var n=Ds.getState(e.state);if(-1===n.activeHandle||n.dragging)return!1;var r=e.state.tr,o=Bs(e,n.activeHandle),a=function(e,t){var n=e.state.doc.resolve(t),r=n.node(-1),o=Vo.TableMap.get(r),a=n.start(-1),i=bt()("en-note",{class:"peso"},bt()("en-table",bt()("table",{style:"position:absolute;width:1px;height:1px;top:0;left:-9999px;word-break: break-word"},bt()("tr",bt()("td"))))),l=i.querySelector("td");document.body.append(i);for(var s=o.colCount(n.pos-a)+n.nodeAfter.attrs.colspan-1,c=ea,u=!1,d=0;d<o.height;d++){var f=d*o.width+s,p=o.map[f],h=e.state.doc.resolve(p+a).nodeAfter,m=h.attrs.colspan,g=o.colCount(p)+m-1;if(g===s){l.innerHTML=e.nodeDOM(a+p).innerHTML;var y=l.scrollWidth,v=h.attrs.colwidth;if(v&&v.length)for(var b=0;b<v.length-1;b++)y-=v[b]||ta;c=Math.max(c,y)}else u=!0}return c+=1,i.remove(),{minWidth:c,nextCell:u?o.nextCell(t-a,"horiz",1)+a:null}}(e,n.activeHandle),i=a.minWidth,l=a.nextCell;return r.setMeta(Ds,{setDragging:{startX:t.clientX,startWidth:o,nextStartWidth:l&&Bs(e,l),minWidth:i}}),e.dispatch(r),t.preventDefault(),!0}(e,t)},mouseup:function(e,t){return Is(e,t)}}},state:{init:function(){return{decos:xe.DecorationSet.empty,activeHandle:-1,dragging:!1}},apply:function(e,t){var n=e.getMeta(Ds),r=Ts({},t);if(n&&null!=n.setHandle)r.activeHandle=n.setHandle,r.dragging=null;else if(n&&void 0!==n.setDragging)r.activeHandle=t.activeHandle,r.dragging=n.setDragging;else if(t.activeHandle>-1&&e.docChanged){var o=e.mapping.map(t.activeHandle,-1);sa(e.doc.resolve(o).nodeAfter)||(o=null),r.activeHandle=o,r.dragging=t.dragging}var a=[];if(r.activeHandle>-1){var i=lt(e.doc.resolve(r.activeHandle),ra);if(i){var l=i.pos,s=l+i.nodeAfter.nodeSize,c={resizing:!0,column:Vo.TableMap.get(i.nodeAfter).findCell(r.activeHandle-i.pos-1).right-1,width:null,nextWidth:null};n&&n.resizingWidth&&(c.width=n.resizingWidth,n.resizingNextWidth&&(c.nextWidth=n.resizingNextWidth)),a.push(xe.Decoration.node(l,s,{class:"resizing"},c))}}return r.decos=xe.DecorationSet.create(e.doc,a),r}},appendTransaction:function(e,t,n){var r=n.tr;return e.forEach(function(e){var t=e.getMeta(Ds);t&&void 0!==t.setColumnSizeChanges&&function(e,t,n){var r=e.doc.resolve(n);Fs(e,r,t)}(r,t.setColumnSizeChanges,t.pos)}),r.docChanged?r:null}})};function Is(e,t){if(!e.editable)return!1;var n=Ds.getState(e.state);if(n.dragging){var r=Hs(n.dragging,t),o=r.width,a=r.nextWidth;!function(e,t,n,r){var o=e.state.doc.resolve(t),a=e.state.doc.resolve(o.before(-1)),i=a.nodeAfter,l=Vo.TableMap.get(i),s=o.start(-1),c=l.colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,u=[{col:c,width:n}];r&&u.push({col:c+1,width:r});var d=e.state.tr;Fs(d,a,u),d.docChanged&&e.dispatch(d)}(e,n.activeHandle,o,a),e.dispatch(Oi(e.state.tr.setMeta(Ds,{setDragging:null}),_i.b.NoteElementTable,_i.a.ChangeColumnWidth,"drag"))}return!1}function zs(e,t,n){var r=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,o=Object(Vo.cellAround)(e.state.doc.resolve(r));if(!o)return-1;if("right"===n)return o.pos;var a=Vo.TableMap.get(o.node(-1)),i=o.start(-1),l=a.map.indexOf(o.pos-i);return l%a.width==0?-1:i+a.map[l-1]}function Bs(e,t){var n=e.state.doc.resolve(t).nodeAfter.attrs,r=n.colspan,o=n.colwidth,a=o&&o[o.length-1];if(a)return a;var i=e.domAtPos(t),l=i.node,s=i.offset,c=l.childNodes[s].offsetWidth,u=r;if(o)for(var d=0;d<r;d++)o[d]&&(c-=o[d],u--);return c/u}function Fs(e,t,n){var r=Vo.TableMap.get(t.nodeAfter),o=e.storedMarks;n.forEach(function(n){for(var o=n.col,a=n.width,i=0;i<r.height;i++){var l=i*r.width+o;if(!i||r.map[l]!==r.map[l-r.width]){var s=e.doc.resolve(t.pos).nodeAfter,c=r.map[l],u=s.nodeAt(c).attrs,d=1===u.colspan?0:o-r.colCount(c);if(!u.colwidth||u.colwidth[d]!==a){var f=u.colwidth?u.colwidth.slice():$s(u.colspan);f[d]=a,_e()(f,u.colwidth)||e.setNodeMarkup(t.pos+c+1,null,Ts({},u,{colwidth:f}))}}}});var a=e.doc.resolve(t.pos).nodeAfter;ga(e,t.pos,ya(a)),o&&e.setStoredMarks(o)}function Ws(e,t){var n=[],r=e.selection,o=e.mapping.maps.length;return ya(t.nodeAfter).forEach(function(e,t){var r=e.width;n.push({col:t,width:r})}),Fs(e,t,n),r!==e.selection&&e.setSelection(r.map(e.doc,e.mapping.slice(o))),e}var Hs=function(e,t){var n=e.startX,r=e.startWidth,o=e.nextStartWidth,a=e.minWidth,i=Math.max(a,r+(t.clientX-n)),l=r-i;return{width:i,nextWidth:o?Math.max(o,o+l):null}},$s=function(e){for(var t=[],n=0;n<e;n++)t.push(0);return t};function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Us=["p","div"];function Ks(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Us;return null!=e&&(Array.isArray(t)||(t=[t]),(t=t.map(function(e){return"string"==typeof e?e:e.name})).includes(e.type.name))}function Ys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.depth;if(e.nodeBefore){var r=e.nodeBefore.text;if(null==r)return!1;if(t&&(r=r.trim()),""!==r)return!1}for(;n>0;){if("p"===e.node(n).type.name)return!0;n-=1}return!1}function Xs(e){for(var t=e.depth;t>=0;){if(Ks(e.node(t)))return{node:e.node(t),pos:e.before(t)};t-=1}return null}function Zs(e){for(var t=e.depth;t>=0;){if(Ks(e.node(t)))return!0;t-=1}return!1}function Gs(e){return nt(e,function(e){return"p"===e.type.name})}function Js(e,t){ec(e,t,1)}function Qs(e,t){ec(e,t,-1)}function ec(e,t,n){var r=t.nodeAfter;if(r&&"p"===r.type.name){var o=Math.max(r.attrs.indent+n,0);if(o<=za){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(n,!0).forEach(function(t){Vs(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r.attrs,{indent:o});e.setNodeMarkup(t.pos,null,a)}}}function tc(e){return e&&e.nodeAfter&&e.nodeAfter.firstChild&&"todo"===e.nodeAfter.firstChild.type.name}function nc(e,t,n){e.insert(e.mapping.map(t.pos+1),n)}function rc(e,t){var n=t.pos+1,r=n+t.nodeAfter.firstChild.nodeSize;e.delete(e.mapping.map(n),e.mapping.map(r))}function oc(e){return 0===e.nodeAfter.childCount}function ac(e){throw new Error("not implemented")}function ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ic(n,!0).forEach(function(t){sc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ic(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var uc={"list-item-deleted":"list-item-deleted","list-item-changed":"list-item-changed","list-item-mixed-deleted":"list-item-mixed-deleted"};function dc(e){return e&&Qe(e,"list")}function fc(e){for(var t=e.depth,n=!1;t>=0;){if(dc(e.node(t)))n=!0;else if(n)return e.before(t+1);t-=1}return null}function pc(e){for(var t=e.depth;t>=0;){if(dc(e.node(t)))return e.node(t);t-=1}return null}function hc(e){for(var t=e.depth;t>=0;){if(dc(e.node(t)))return!0;t-=1}return!1}function mc(e,t,n){var r=Se.Selection.findFrom(n,1,!0);if(t.node().textContent||hc(t)){var o=r.$cursor,a=o.before(),i=o.after(),l=e.doc.slice(a+1,i-1),s=0;return hc(o)&&(1===o.node().childCount&&(s+=1),s&&1===o.node(-1).childCount&&(s+=1)),e.delete(a-s,i+s),e.replace(t.pos,t.pos,l),e.setSelection(Se.TextSelection.create(e.doc,t.pos)),!0}return e.setSelection(r),e.delete(t.before(),t.after()),!0}function gc(e,t){for(var n=Gs(t),r=[],o=0;o<n.length;o++){var a=n[o];if(dc(a.node(-1))){var i=a.before();n.splice(o,1),-1===r.indexOf(i)&&r.push(i),o-=1}}return{listItems:r.map(function(t){return e.resolve(t)}),paragraphs:n}}var yc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(t=vc(e,t,n)).docChanged&&(e=Ei(e,t.mapping)),(t=bc(e,t,n)).setMeta("fixLists",!0),t},vc=function e(t,n,r){for(var o=r.shallow,a=void 0===o||o,i=ot(t,n.doc,function(e){return e.nodeBefore&&e.nodeAfter&&Qe(e.nodeBefore,"list")&&Qe(e.nodeAfter,"list")},{shallow:a,includeEndpoints:!0}).sort(function(e,t){return e.pos-t.pos}),l=i.length-1;l>=0;l--){var s=ft(n,i[l].pos);if(s.nodeBefore&&s.nodeAfter){var c=dt(s.nodeBefore,"listitem"),u=dt(s.nodeAfter,"listitem");s.nodeBefore.type.name!==s.nodeAfter.type.name&&c&&u||!Object(sr.canJoin)(n.doc,s.pos)||(s.nodeBefore.type.name!==s.nodeAfter.type.name&&u&&!c&&n.setNodeMarkup(s.pos-s.nodeBefore.nodeSize,s.nodeAfter.type),n.join(s.pos),n=e([{from:(s=ft(n,s.pos)).pos,to:s.pos}],n,{shallow:a}))}}return n},bc=function(e,t,n){var r=n.shallow,o=void 0===r||r,a=n.checkChangedListTypes,i=void 0!==a&&a,l=n.checkAncestorList,s=void 0!==l&&l,c=t.doc.type.schema,u=function(e){return e.type===c.nodes.ol},d=function(e){return!!e&&(i?Qe(e,"list"):u(e))},f=new Set([]);return rt(e,t.doc,function(e){if(d(e.parent)&&(Qe(e.nodeAfter,"listitem")||Qe(e.nodeBefore,"listitem"))||s){var t=lt(e,d);t&&f.add(t.pos)}d(e.nodeBefore)&&f.add(e.pos-e.nodeBefore.nodeSize),d(e.nodeAfter)&&f.add(e.pos)},{shallow:o,includeEndpoints:!0}),0===f.size?t:(cc(f).forEach(function(e){var n=t.doc.resolve(e);n&&n.nodeAfter&&(Qe(n.nodeAfter,"list")?u(n.nodeAfter)?kc(t,n):wc(t,n):Ce.a.warn("Non-list node added to listPositions on setListItemIndexValues. This indicates an issue with the position gathering",{$pos:n}))}),t)},wc=function(e,t){t&&t.nodeAfter&&t.nodeAfter.forEach(function(n,r,o){if(Qe(n,"listitem")){var a=e.doc.resolve(t.pos+1+r);if(n.attrs.displayValue){var i=lc({},n.attrs);delete i.displayValue,e.step(new Jr(a.pos,i))}}})},kc=function(e,t){if(t&&t.nodeAfter){var n=we()(t,"nodeAfter.attrs.start")||1;t.nodeAfter.forEach(function(r,o,a){if(Qe(r,"listitem")){var i=e.doc.resolve(t.pos+1+o);i.nodeAfter&&(null!=r.attrs.value&&(n=r.attrs.value),r.attrs.displayValue!==n&&e.step(new Jr(i.pos,lc({},r.attrs,{displayValue:n}))),n++)}})}};function _c(e){var t=e;return t=function(e){var t=new Se.AllSelection(e.doc),n=yc([{from:t.from,to:t.to}],e.tr,{shallow:!1});return n&&n.docChanged?e.apply(n):e}(t=function(e){var t=e.doc,n=e.tr;return ut(t,ra).forEach(function(e){return Ws(n,e)}),e.apply(n)}(t))}function Oc(e){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xc(e,t){return(xc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ec(e,t,n){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Pc(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jc(e){var t={};for(var n in e){var r=e[n].spec.toENML||e[n].spec.toDOM;r&&(t[n]=r)}return t}var Mc=function(e){function t(){var e,n,r,o,a,i,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return r=this,o=(e=Pc(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==Oc(o)&&"function"!=typeof o?Sc(r):o,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Sc(n),"serializeNode",(a=new WeakMap,i=0,l=new Set,function(e){if(a.has(e)){var r=a.get(e);if(r instanceof DocumentFragment||l.has(e))return r.cloneNode(!0);l.add(e)}i+=1;var o=Ec(Pc(t.prototype),"serializeNode",Sc(n)).call(Sc(n),e);0==--i?l.clear():l.add(e);var s=o instanceof DocumentFragment?o.cloneNode(!0):o;return a.set(e,s),o})),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xc(e,t)}(t,Je["DOMSerializer"]),n=t,o=[{key:"fromSchema",value:function(e){return e.cached.enmlSerializer||(e.cached.enmlSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(e){var t=jc(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return jc(e.marks)}}],(r=null)&&Cc(n.prototype,r),o&&Cc(n,o),t}();function Ac(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nc=new Se.PluginKey("notification"),Dc=function(){return new Se.Plugin({key:Nc,state:{init:function(e){return this.notify=e.props.notify,{imagesCount:0,imagesLoaded:0}},apply:function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ac(n,!0).forEach(function(t){Tc(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ac(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t);switch(e.getMeta(this)){case"content_loading":n.imagesCount=0,n.imagesLoaded=0;break;case"image_loading":n.imagesCount++;break;case"image_loaded":n.imagesLoaded++,n.imagesCount===n.imagesLoaded&&(this.notify("contentLoaded",{module:"content"}),n.imagesCount=0,n.imagesLoaded=0);break;case"content_loaded":0===n.imagesCount&&this.notify("contentLoaded",{module:"content"})}return n}},props:{handleTextInput:function(e){}}})},Lc='<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">',Rc=/ +xmlns="(http:\/\/www.w3.org\/1999\/xhtml)?"/g,Ic=/<en-todo([^>]*?)>.*?<\/en-todo>/g,zc=/<en-media([^>]*?)>.*?<\/en-media>/g,Bc=/<(?!area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)([\w-]+)([^>]*)\/>/g,Fc="",Wc=!0,Hc=["pre","pre-wrap"],$c=["pre","pre-wrap","inherit",""],qc=["pre"];function Vc(e,t){Array.from(e.childNodes).forEach(function(e){if(e.nodeType===Node.TEXT_NODE)t&&(" "===e.data?e.data=" ":e.data=e.data.replace(/\r?\n/g,"<br>").replace(/\t/g,"    ").replace(/ {2}/g,"  "));else{var n=t||Hc.includes(e.style.whiteSpace);$c.includes(e.style.whiteSpace)||(n=!1),Vc(e,n)}})}var Uc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.content,r=void 0===n?"":n,o=t.resources,a=t.allowUndo,i=t.active,l=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;if(!s)return!0;Fc=r,r=r.replace(Bc,"<$1$2></$1>").replace(/(?:^<en-note>)|(?:(<\/en-note>)[\s\S]*$)/g,"").replace(/(<en-todo[^\/]*)\/>/g,"$1></en-todo>").replace(/(<pre(?:>|\s[^>]*>))([\u0000-\uffff]*?)<\/pre>/g,function(e,t,n){return"<div"+t.substr(4)+n.replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")+"</div>"}).replace(/(<div[^>\/]*)\/>/g,"$1></div>");var u=document.createElement("div");u.innerHTML=r;for(var d=function(e){var t="span"===e.tagName.toLowerCase()&&e.textContent&&!e.textContent.trim().length;return Hc.includes(e.style.whiteSpace)&&qc.includes(e.tagName.toLowerCase())||t},f=document.createTreeWalker(u,NodeFilter.SHOW_ALL,{acceptNode:function(e){if(jt(e)&&d(e))return Vc(e,!0),NodeFilter.FILTER_REJECT;if(Pt(e)&&Xc(e)){e.nodeValue=e.nodeValue.replace(/[\f\n\r\t\v ]{2,}/g," ");var t=document.createElement("en-text");return e.parentElement.replaceChild(t,e),t.appendChild(e),NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}});f.nextNode(););bl(u),ir.resources=o;var p,h,m,g,y,v=ir.fromSchema(gn).parse(u),b=Se.EditorState.create({doc:v,schema:gn});void 0===i&&(i=Xl.getState(l).editable),c.dom.classList.remove("error");try{var w=Br(b),k=Je.DOMSerializer.fromSchema(gn).serializeFragment(w.doc);p=ir.fromSchema(l.schema).parse(k)}catch(e){Ce.a.error("peso parsing error ".concat(e)),DEBUG&&setTimeout(function(){throw e}),c.dom.classList.add("error");var _=Br(b,!0);try{var O=Je.DOMSerializer.fromSchema(gn).serializeFragment(_.doc);p=ir.fromSchema(l.schema).parse(O)}catch(e){Ce.a.error("peso fallback parsing error ".concat(e)),DEBUG&&setTimeout(function(){throw e}),i=!1}}if(p.descendants(function(e,t){"selstart"===e.type.name&&(m=t),"selend"===e.type.name&&(g=t,y=e.attrs.top)}),m&&g){var C=Zc(p,l,m,g);p=C.doc,h=C.selection}if(wl(p),a){var S=c.state.tr;new Se.AllSelection(c.state.doc).replaceWith(S,p),c.dispatch(S)}else{var x=Se.EditorState.create({doc:p,plugins:c.state.plugins,props:c.props,schema:l.schema,selection:h}),E=_c(x);c.updateState(E)}if(y){var P=St(c,c.state.selection.head);window.scrollTo(0,P.top-y)}return c.dispatch(c.state.tr.setMeta(js,js.getState(c.state)).setMeta(Nc,"content_loading")),setTimeout(function(){c.dispatch(c.state.tr.setMeta(Nc,"content_loaded"))},0),a||Be(c.state,c.dispatch),Xl.getState(l).loaded||xs("clearselection",{},c.state,s,c),es("active",i,c.state,s,c),!0},Kc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;!1!==t.resetChangesState&&Be(n,r);var a,i,l,s=n,c=s.schema,u=s.selection,d=u.$from,f=u.$to;if(0===Object(as.undoDepth)(n))l={success:!0,value:Fc};else{if(t.saveSelection){var p=c.node("selstart",{top:St(o,d.pos).top}),h=c.node("selend",{top:St(o,f.pos).top});d.parent.type.strictContentMatch.matchType(p.type)&&f.parent.type.strictContentMatch.matchType(h.type)&&(n=n.apply(n.tr.insert(f.pos,p).insert(d.pos,h)))}n=n.apply(n.tr.setMeta("serializing","enml")),a=bt()("en-note");var m=Mc.fromSchema(c).serializeFragment(n.doc,{},a);Ye(m),vl(m),i=(i=(new XMLSerializer).serializeToString(m)).replace(Rc,"").replace(Ic,"<en-todo$1 />").replace(zc,"<en-media$1 />"),l={success:!0,value:i=Lc+i}}return l},Yc={A:!0,ABBR:!0,ACRONYM:!0,AREA:!0,B:!0,BDO:!0,BIG:!0,BR:!0,CITE:!0,CODE:!0,DEL:!0,DFN:!0,EM:!0,FONT:!0,I:!0,IMG:!0,INS:!0,KBD:!0,MAP:!0,Q:!0,S:!0,SAMP:!0,SMALL:!0,SPAN:!0,STRIKE:!0,STRONG:!0,SUB:!0,SUP:!0,TT:!0,U:!0,VAR:!0},Xc=function(e){var t=e.previousSibling,n=e.nextSibling;return t&&n&&Yc[t.tagName]&&Yc[n.tagName]},Zc=function(e,t,n,r){var o,a,i,l=(e=t.schema.nodes.doc.create(null,e.slice(0).content)).resolve(n),s=e.resolve(r),c=function(e){return e.nodeAfter&&"p"===e.nodeAfter.type.name&&1===e.nodeAfter.childCount};return a=e.resolve(l.before()),i=e.resolve(s.before()),c(a)&&c(i)&&i.pos-a.pos-a.nodeAfter.nodeSize==1&&Qe(i.nodeBefore,"resource")?(e=(e=e.replace(r-1,r+2,Je.Slice.empty)).replace(n-1,n+2,Je.Slice.empty),o=new Se.NodeSelection(e.resolve(n-1))):(e=(e=e.replace(r,r+1,Je.Slice.empty)).replace(n,n+1,Je.Slice.empty),o=Se.TextSelection.between(e.resolve(n),e.resolve(r-1))),{selection:o,doc:e}},Gc=function(e,t,n,r,o){var a=o.dom.innerText.replace(/(\r\n|\r|\n)/g,"\n").trim(),i=a.split("\n"),l=a.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"").split(" "),s=a.split(/\n{2,}/);return{words:l.length,charsWithoutSpaces:l.join("").length,charsWithSpaces:i.join("").length,paragraphs:s.length,lines:i.length}},Jc=n(1697),Qc=Object(Jc.chainCommands)(Jc.deleteSelection,Jc.joinBackward,Jc.selectNodeBackward),eu=Object(Jc.chainCommands)(Jc.deleteSelection,Jc.joinForward,Jc.selectNodeForward),tu=function(e,t,n,r,o){try{t.value;var a=t.options,i=void 0===a?{}:a,l=(i.forward?eu:Qc)(n,r,o);if(!l&&r){var s=i.forward?"forwardDelete":"delete";l=document.execCommand(s,!1,null)}return l}catch(e){if("NS_ERROR_FAILURE"===e.name)return!1;throw e}};tu.usesOptions=!0;var nu=function(e,t,n,r,o){return""},ru=new Se.PluginKey("selection");var ou=function(){return new Se.Plugin({key:ru,props:{decorations:function(e){if(!(e.selection instanceof Se.TextSelection||e.selection instanceof Se.AllSelection))return null;var t=at(e.selection,e.doc,function(e){return e.nodeAfter&&e.nodeAfter.type.spec.selectionStyling});return xe.DecorationSet.create(e.doc,t.map(function(e){return xe.Decoration.node(e.pos,e.pos+e.nodeAfter.nodeSize,{class:"selected"},{isInSelection:!0})}))}},state:{init:function(){return{isPMSelection:!0,isTitleSelection:!1}},apply:function(e,t){var n=e.getMeta(ru);return n?{isPMSelection:n.isPMSelection,isTitleSelection:n.isTitleSelection}:t}},view:function(e){var t=function(){var t=ru.getState(e.state),n=function(){var e=getSelection(),t=e.anchorNode,n=e.focusNode;if(null===t||null===n)return{isPMSelection:!1,isTitleSelection:!1};t.nodeType===document.TEXT_NODE&&(t=t.parentElement),n.nodeType===document.TEXT_NODE&&(n=n.parentElement);var r=document.querySelector("en-noteheader"),o=r&&r.contains(t)&&r.contains(n);return{isPMSelection:!o&&!1!==t.isContentEditable&&!1!==n.isContentEditable,isTitleSelection:o}}(),r=n.isPMSelection,o=n.isTitleSelection;r===t.isPMSelection&&o===t.isTitleSelection||e.dispatch(e.state.tr.setMeta(ru,{isPMSelection:r,isTitleSelection:o}))};document.addEventListener("selectionchange",t);var n=null,r=function(){var t,n=function(e){e.metaKey&&"a"===e.key&&(t=!0)},r=function(n){t&&(t=!1,e.state.selection instanceof Se.AllSelection||Object(Jc.selectAll)(e.state,e.dispatch))};return document.addEventListener("keydown",n),document.addEventListener("keyup",r),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",r)}};return e.editable||(n=r()),{update:function(e,t){var o=Xl.getState(t).editable,a=Xl.getState(e.state).editable;o!==a&&(n&&n(),a||(n=r()))},destroy:function(){document.removeEventListener("selectionchange",t),n&&n()}}}})},au=!1,iu=function(e,t,n,r,o){if(!o||!o.editable)return!1;if(r){var a=ru.getState(n),i=a.isPMSelection,l=a.isTitleSelection;return i||l?o.focus():window.focus(),o.hasFocus()}return!0},lu=function(e,t,n,r,o){return o&&o.hasFocus()},su=!0,cu=function(e,t,n,r,o){return r&&o.someProp("setNoteLayout",function(e){return e(t)}),!0},uu=function(e,t,n,r,o){var a=Object(as.undo)(n,r);if(r){var i=o.state.tr,l=!1,s=!1;Object(as.undo)(n)&&(l=!0),a&&(s=!0),(l||s)&&(i.setMeta(mu,{simulateAddToUndoStack:l,simulateAddToRedoStack:s}),r(i))}return a},du=function(e,t,n,r,o){return Object(as.undoDepth)(n)>0};function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fu(n,!0).forEach(function(t){hu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fu(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mu=new Se.PluginKey("native-undo"),gu=!(Ae.isIOS||Ae.isSafari),yu=function(){return new Se.Plugin({key:mu,state:{init:function(){return{nativeUndoCounter:0,nativeRedoCounter:0}},apply:function(e,t){var n=e.getMeta(this);if(n){var r=t;return n.simulateAddToUndoStack&&(r=pu({},r,{nativeUndoCounter:t.nativeUndoCounter+1})),n.simulateAddToRedoStack&&(r=pu({},r,{nativeRedoCounter:t.nativeRedoCounter+1})),r}return t}},props:{handleDOMEvents:{input:function(e,t){return ku(e,t,!1),!1}}},view:function(e){var t=document.createElement("en-native-undo-helper");t.setAttribute("style","width:1px;height:1px;top:-9999px;left:-9999px;position:fixed"),t.setAttribute("tabIndex","-1"),t.setAttribute("contenteditable","true"),t.addEventListener("input",function(t){return ku(e,t,!0)}),document.body.appendChild(t);return{update:gu?function(e,n){var r=mu.getState(n),o=mu.getState(e.state);r.nativeUndoCounter!==o.nativeUndoCounter&&function(e){vu(t),document.execCommand("insertText",!1,"u"),e.focus()}(e),r.nativeRedoCounter!==o.nativeRedoCounter&&function(e){vu(t),document.execCommand("insertText",!1,"r"),wu(e,"undo"),e.focus()}(e)}:function(){return null},destroy:function(){t.remove(),bu=!1}}}})},vu=function(e){var t=document.createRange();t.selectNodeContents(e),function(e){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}(t)},bu=!1,wu=function(e,t){bu=!0;try{document.execCommand(t)}finally{bu=!1}},ku=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return bu?null:"historyUndo"===t.inputType?(wu(e,"redo"),uu("undo",null,e.state,e.dispatch,e),null):"historyRedo"===t.inputType?(wu(e,"undo"),_u("redo",null,e.state,e.dispatch,e),null):null},_u=function(e,t,n,r,o){var a=Object(as.redo)(n,r);if(r){var i=o.state.tr,l=!1,s=!1;Object(as.redo)(n)&&(s=!0),a&&(l=!0),(l||s)&&(i.setMeta(mu,{simulateAddToUndoStack:l,simulateAddToRedoStack:s}),r(i))}return a},Ou=function(e,t,n,r,o){return Object(as.redoDepth)(n)>0},Cu=!0,Su=function(e,t,n,r,o){var a=new Se.AllSelection(n.doc);return r&&r(n.tr.setSelection(a)),!0},xu=!1,Eu=function(e,t,n,r,o){var a=n.tr,i=t.anchor,l=t.head;return r&&(a.setSelection(Se.TextSelection.create(a.doc,i,l)),r(a)),!0},Pu=function(e,t,n){var r=n.selection,o=r.$anchor,a=r.$head;return{anchor:o.pos,head:a.pos}};function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(n,!0).forEach(function(t){Au(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Au(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tu(e){return nt(e,function(e){return"todo"===e.type.name})}function Nu(e,t){var n=t.nodeAfter,r=Mu({},n.attrs,{checked:!n.attrs.checked});e.setNodeMarkup(t.pos,n.type,r,n.marks)}function Du(e,t,n){var r=t.nodeAfter,o=Mu({},r.attrs,{checked:n});e.setNodeMarkup(t.pos,r.type,o,r.marks)}var Lu=function(e,t,n,r,o){var a=n.doc,i={$from:a.resolve(0),$to:a.resolve(a.nodeSize-2)};return{isEmpty:2===a.nodeSize,isDirty:Ke("changes",null,n),isReadOnly:!o.editable,isEditable:o.editable,hasFocus:o.hasFocus(),todo:Tu(i).length,link:Tu(i).length,firstLine:o.dom.innerText.trim().split("\n").shift(),selection:Pu("selection",null,n),lastSelection:null}};function Ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Iu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ru(n,!0).forEach(function(t){zu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ru(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bu=function(e,t,n,r,o){var a,i=Iu({},o.props.styleAttributes),l=i.zoom||1;return(a="+"===t?function(e){var t=1;t=Math.abs(e-.5)<.01||e<.5?.67:Math.abs(e-.67)<.01||e<.67?.75:Math.abs(e-.75)<.01||e<.75?.9:Math.abs(e-.9)<.01||e<.9?1:Math.abs(e-1)<.01||e<1?1.1:Math.abs(e-1.1)<.01||e<1.1?1.25:Math.abs(e-1.25)<.01||e<1.25?1.5:Math.abs(e-1.5)<.01||e<1.5?1.75:Math.abs(e-1.75)<.01||e<1.75?2:Math.abs(e-2)<.01||e<2?2.5:(Math.abs(e-2.5),3);return $u(t)}(l):"-"===t?function(e){var t=1;t=Math.abs(e-.5)<.01||e<.5?.5:Math.abs(e-.67)<.01||e<.67?.5:Math.abs(e-.75)<.01||e<.75?.67:Math.abs(e-.9)<.01||e<.9?.75:Math.abs(e-1)<.01||e<1?.9:Math.abs(e-1.1)<.01||e<1.1?1:Math.abs(e-1.25)<.01||e<1.25?1.1:Math.abs(e-1.5)<.01||e<1.5?1.25:Math.abs(e-1.75)<.01||e<1.75?1.5:Math.abs(e-2)<.01||e<2?1.75:Math.abs(e-2.5)<.01||e<2.5?2:Math.abs(e-3)<.01||e<3?2.5:3;return $u(t)}(l):parseFloat(t))>0&&a<10&&(r&&(i.zoom=1===a?null:a,o.setProps({styleAttributes:i,attributes:Iu({},o.props.attributes,{style:Cr(i)})})),!0)},Fu=function(e,t,n,r,o){return o&&o.props.styleAttributes.zoom||1},Wu=.75,Hu=2;function $u(e){return Math.min(Math.max(e,Wu),Hu)}function qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qu(n,!0).forEach(function(t){Uu(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qu(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Uu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ku=Ce.a.getLogger("fullsize"),Yu=["preview"];function Xu(e){return"string"==typeof e&&Yu.indexOf(e)>-1}function Zu(e,t){return t.nodeAfter&&t.nodeAfter.attrs.url&&t.nodeAfter.attrs.url.length&&function(e,t,n){var r=e.props.fullsize||{};Xu(t)?r.enabled?Ku.warn("Fullsize mode is already opened. Blocking request."):r.pending?Ku.warn("Another fullsize request is already pending. Blocking request."):(e.setProps({fullsize:Vu({},r,{enabled:!1,pending:!0,scrollY:window.scrollY,sender:t,senderData:n})}),e.props.notify("fullsize",{action:"open",sender:t})):Ku.warn("Unrecognized 'sender' for fullsize: ".concat(t))}(e,"preview",t),!0}function Gu(e){return function(e,t,n){var r=e.props.fullsize||{};Xu(t)?r.enabled?r.pending?Ku.warn("Another fullsize request is already pending. Blocking request."):(e.setProps({fullsize:Vu({},r,{pending:!0,sender:t,senderData:n})}),e.props.notify("fullsize",{action:"close",sender:t})):Ku.warn("Fullsize mode is not enabled. Blocking request."):Ku.warn("Unrecognized 'sender' for fullsize: ".concat(t))}(e,"preview"),!0}function Ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ju(n,!0).forEach(function(t){ed(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ju(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ed(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var td=Ce.a.getLogger("fullsize"),nd={preview:function(e,t){var n=(e.props.fullsize||{}).scrollY,r=function(e){var t=ut(e.state.doc,function(e){return Qe(e,"image")});return(t=t.filter(function(e){return e.nodeAfter&&e.nodeAfter.attrs.url&&e.nodeAfter.attrs.url.length})).map(function(t){return{$node:t,dom:_t(e,t.pos).querySelector("img")}})}(e),o=0;if(t&&t.pos){var a=r.find(function(e){return e.$node.pos===t.pos});(o=r.indexOf(a))<0&&(o=0)}return Object(Wl.renderPreview)({initialIndex:o,items:r,animated:!0,translucent:!0,scrollYOffset:n||0,onClose:function(){Gu(e)},onChange:function(t){!function(e,t){if(!t||!t.$node||"number"!=typeof t.$node.pos)return!1;var n=e.state.tr.setSelection(Se.NodeSelection.create(e.state.doc,t.$node.pos)).scrollIntoView();e.dispatch(n)}(e,t)},isVisibleInView:function(t){var n=t.dom;return function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!jt(t)||!t.parentNode)return!1;var r=t.getBoundingClientRect(),o=t.parentNode,a=e.dom.getBoundingClientRect(),i=function(e){return n?!(r.bottom<=e.top||r.top>=e.bottom||r.left>=e.right||r.right<=e.left):!(0===e.height||0===e.width||r.bottom>e.bottom&&r.top>e.top||r.top<e.top&&r.bottom<e.bottom||r.left>e.left&&r.right>e.right||r.left<e.left&&r.right<e.right)};if(!i(a))return!1;for(;o&&o!==document.documentElement;){var l=window.getComputedStyle(o);if("none"===l.display||"hidden"===l.visibility)return!1;if("static"!==l.position&&[l.overflow,l.overflowY,l.overflowX].indexOf("hidden")>-1){var s=o.getBoundingClientRect();if(!i({top:Math.max(a.top,s.top),left:Math.max(a.left,s.left),bottom:Math.min(a.bottom,s.bottom),right:Math.min(a.right,s.right),width:s.width,height:s.height}))return!1}o=o.parentNode}return!!o}(e,n)}}),!0}},rd={preview:function(e){return Object(Wl.renderPreview)(null),!0}},od=!0,ad=function(e,t,n,r,o){if(!t||!o)return!1;var a=t||{},i=a.action,l=a.bounds,s=o.props.fullsize||{},c=s.sender,u=s.senderData,d=s.enabled,f=s.scrollY;if(!c)return td.warn("Fullsize is missing request owner."),!1;if("open"===i){if(d)return td.warn("Fullsize is already open. Blocking request."),!1;!function(e,t,n){var r=bt()("en-fullsize-wrapper");r.style.top="".concat(t.top/1,"px"),r.style.left="".concat(t.left/1,"px"),r.style.width="".concat(t.width/1,"px"),r.style.height="".concat(t.height/1,"px");var o=document.querySelector("en-noteheader"),a=e.dom;a.parentNode.insertBefore(r,o),r.appendChild(o),r.appendChild(a),document.body.classList.add("fullsize"),r.scrollTop=n/1,es("active",!1,e.state,e.dispatch,e)}(o,l,f);var p,h=nd[c];if("function"!=typeof h)return td.warn("No fullsize open handler for sender: ".concat(c)),!1;if(p=h(o,u),o.setProps({fullsize:Qu({},s,{pending:!1,enabled:!!p})}),!p)return td.warn("Fullsize open handler returned unsuccessfully for sender: ".concat(c)),sd(o),!1}else{if("close"!==i)return td.warn("Invalid action specified for fullsize: ".concat(i)),!1;if(!d)return td.warn("Fullsize is already closed. Blocking request."),!1;sd(o);var m,g=rd[c];if("function"!=typeof g)return td.warn("No fullsize open handler for sender: ".concat(c)),!1;if(m=g(o,u),o.setProps({fullsize:Qu({},s,{pending:!1,enabled:!1})}),!m)return td.warn("Fullsize close handler returned unsuccessfully for sender: ".concat(c)),!1}return!0},id=function(e,t,n,r,o){var a=t||{},i=a.action,l=a.bounds,s=o&&o.props.fullsize||{},c=s.sender,u=s.enabled,d=s.pending;return"open"===i&&!u&&d&&l&&"function"==typeof nd[c]||"close"===i&&u&&d&&"function"==typeof rd[c]},ld=function(e,t,n,r,o){return!(!o.props.fullsize||!o.props.fullsize.enabled)};function sd(e){var t=document.querySelector("en-fullsize-wrapper"),n=t.scrollTop,r=document.querySelector("en-noteheader"),o=e.dom;t.parentNode.insertBefore(r,t),t.parentNode.insertBefore(o,t),t.parentNode.removeChild(t),document.body.classList.remove("fullsize"),e.props.config.activeAfterSetup&&(es("active",!0,e.state,e.dispatch,e),iu("focus",!0,e.state,e.dispatch,e)),(document.scrollingElement||document.body).scrollTop=n}function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ud(e,t,n){return t&&cd(e.prototype,t),n&&cd(e,n),e}function dd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pd=function e(t){dd(this,e),fd(this,"key",void 0),fd(this,"values",[]),fd(this,"children",{}),this.key=t},hd=function(){function e(){dd(this,e),fd(this,"root",void 0),this.root=new pd(null)}return ud(e,[{key:"insert",value:function(e,t){for(var n=this.root,r=0;r<e.length;r++){var o=e[r];n.children[o]||(n.children[o]=new pd(o)),(n=n.children[o]).values.push(t)}}},{key:"find",value:function(e){for(var t=this.root,n=0;n<e.length;n++){if(!t.children[e[n]])return[];t=t.children[e[n]]}return t.values}}]),e}(),md=function(){function e(t){var n=this;dd(this,e),fd(this,"ids",new Set),fd(this,"trie",void 0),fd(this,"trielower",void 0),this.trie=new hd,this.trielower=new hd,t&&(console.time("build reco"),t.forEach(function(e){var t=e.width,r=e.height,o=e.hash;e.items.forEach(function(e){return e.t.forEach(function(a){var i={style:["top: ".concat(e.y/r*100,"%;"),"left: ".concat(e.x/t*100,"%;"),"width: ".concat(e.w/t*100,"%;"),"height: ".concat(e.h/r*100,"%;")].join(" "),hash:o,text:a};n.trie.insert(a,i),n.trielower.insert(a.toLocaleLowerCase(),i)})}),n.ids.add(e.hash)}),console.timeEnd("build reco"))}return ud(e,[{key:"find",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?this.trielower.find(e.toLocaleLowerCase()):this.trie.find(e),r={},o=new Set;return n.forEach(function(e){var t=e.hash,n=e.style,a="".concat(t,";").concat(n);o.has(a)||(r[t]||(r[t]=[]),r[t].push(n),o.add(a))}),r}},{key:"equal",value:function(e){if(!e||e.length!==this.ids.size)return!1;var t=!0,n=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(!this.ids.has(i.hash))return!1}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return!0}}]),e}();function gd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gd(n,!0).forEach(function(t){vd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gd(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bd={a:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ",b:"bⓑｂḃḅḇƀƃɓ",c:"cⓒｃćĉċčçḉƈȼꜿↄ",d:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ",e:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ",f:"fⓕｆḟƒꝼ",g:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ",h:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ",i:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı",j:"jⓙｊĵǰɉ",k:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ",l:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ",m:"mⓜｍḿṁṃɱɯ",n:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ",o:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ",p:"pⓟｐṕṗƥᵽꝑꝓꝕ",q:"qⓠｑɋꝗꝙ",r:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ",s:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ",t:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ",u:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ",v:"vⓥｖṽṿʋꝟʌ",w:"wⓦｗẁẃŵẇẅẘẉⱳ",x:"xⓧｘẋẍ",y:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ",z:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"},wd={};Object.keys(bd).forEach(function(e){if(bd.hasOwnProperty(e)){var t=bd[e];wd[e]="["+e+t+"]";for(var n=0;n<t.length;n++){var r=t[n];wd[r]||(wd[r]=wd[e])}}});var kd="A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_d="̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఃా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︯",Od="0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９",Cd=(RegExp("(?=[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఃా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︯0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９])[ᄀ-ᇿ⺀-ㄯ㄰-ㆿㇰ-鿿ꥠ-꥿가-퟿豈-﫿︰-﹏｡-ￜ]"),"(?:[^"+kd+_d+Od+"]|[ᄀ-ᇿ⺀-ㄯ㄰-ㆿㇰ-鿿ꥠ-꥿가-퟿豈-﫿︰-﹏｡-ￜ])"),Sd=(RegExp("^"+Cd),RegExp(Cd+"$"),"[^A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞭꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఀ-ఃా-ౄె-ైొ-్ౕౖౢౣಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼᪰-᪾ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-ᮭ᯦-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷼-᷿⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꧥꨩ-ꨶꩃꩌꩍꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︯0-9٠-٩۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯෦-෯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꧰-꧹꩐-꩙꯰-꯹０-９_＿]"),xd=(RegExp(Sd),RegExp("^("+["a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with"].join("|")+")$","i"),function(e,t){var n=e.replace(/[\\^$.*+?()[\]{}|\/]/g,"\\$&").replace(/\s/g,"(?:&nbsp;|\\s)");return{regex:new RegExp(n,t?"gi":"g"),getTextRange:function(e,t){return[e+t.index,e+t.index+t[0].length]}}}),Ed=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return{parent:e,count:r,pos:t,deco:n,marks:o,primary:-1}},Pd=function(e,t,n){return n>0?e>=t-1?0:e+1:n<0?e<=0?t-1:e-1:e},jd=function(e,t,n,r){for(var o=r>0?n.to:n.from,a=0,i=0;i<e.length;i++){var l=e[i];if(o<=l.pos&&r<0)return Pd(a,t,r);if(o<=l.pos)return a;a+=l.count}return 0},Md=function(e,t){var n=e.deco.type,r=e.deco,o=r.from,a=r.to;e.primary=t,e.deco="InlineType"===n.constructor.name?xe.Decoration.inline(o,a,{class:"accentuate".concat(t>-1?" primary":"")}):xe.Decoration.node(o,a,{},{search:yd({},n.spec.search,{primary:t})})},Ad=function(){var e="retain",t=document,n={}.hasOwnProperty;function r(){return function(e,t,n,r,a){if(t&&!t.nodeType&&arguments.length<=2)return!1;var i="function"==typeof n;i&&(l=n,n=function(e,t){return l(e.text,t.startIndex)});var l;o(t,{find:e,wrap:i?null:n,replace:i?n:"$"+(r||"&"),prepMatch:function(e,t){if(!e[0])throw"findAndReplaceDOMText cannot handle zero-length matches";if(r>0){var n=e[r];e.index+=e[0].indexOf(n),e[0]=n}return e.endIndex=e.index+e[0].length,e.startIndex=e.index,e.index=t,e},filterElements:a});return!0}.apply(null,arguments)||o.apply(null,arguments)}function o(e,t){return new a(e,t)}function a(t,o){var a=o.preset&&r.PRESETS[o.preset];if(o.portionMode=o.portionMode||e,a)for(var i in a)n.call(a,i)&&!n.call(o,i)&&(o[i]=a[i]);this.node=t,this.options=o,this.prepMatch=o.prepMatch||this.prepMatch,this.reverts=[],this.enhancements=[],this.matches=this.search(),this.matches.length&&this.processMatches()}return r.NON_PROSE_ELEMENTS={br:1,hr:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1},r.NON_CONTIGUOUS_PROSE_ELEMENTS={address:1,article:1,aside:1,blockquote:1,dd:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,main:1,nav:1,noscript:1,ol:1,output:1,p:1,pre:1,section:1,ul:1,br:1,li:1,summary:1,dt:1,details:1,rp:1,rt:1,rtc:1,script:1,style:1,img:1,video:1,audio:1,canvas:1,svg:1,map:1,object:1,input:1,textarea:1,select:1,option:1,optgroup:1,button:1,table:1,tbody:1,thead:1,th:1,tr:1,td:1,caption:1,col:1,tfoot:1,colgroup:1},r.NON_INLINE_PROSE=function(e){return n.call(r.NON_CONTIGUOUS_PROSE_ELEMENTS,e.nodeName.toLowerCase())},r.PRESETS={prose:{forceContext:r.NON_INLINE_PROSE,filterElements:function(e){return!n.call(r.NON_PROSE_ELEMENTS,e.nodeName.toLowerCase())}}},r.Finder=a,a.prototype={search:function(){var e,t=0,n=0,r=this.options.find,o=this.getAggregateText(),a=[],i=this;return r="string"==typeof r?RegExp(String(r).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1"),"g"):r,function o(l){for(var s=0,c=l.length;s<c;++s){var u=l[s];if("string"==typeof u){if(r.global)for(;e=r.exec(u);)a.push(i.prepMatch(e,t++,n));else(e=u.match(r))&&a.push(i.prepMatch(e,0,n));n+=u.length}else o(u)}}(o),a},prepMatch:function(e,t,n){if(!e[0])throw new Error("findAndReplaceDOMText cannot handle zero-length matches");return e.endIndex=n+e.index+e[0].length,e.startIndex=n+e.index,e.index=t,e},getAggregateText:function(){var e=this.options.filterElements,t=this.options.forceContext;return function n(r){if(r.nodeType===window.Node.TEXT_NODE)return[r.data];if(e&&!e(r))return[];var o=[""];var a=0;if(r=r.firstChild)do{if(r.nodeType!==window.Node.TEXT_NODE){var i=n(r);t&&r.nodeType===window.Node.ELEMENT_NODE&&(!0===t||t(r))?(o[++a]=i,o[++a]=""):("string"==typeof i[0]&&(o[a]+=i.shift()),i.length&&(o[++a]=i,o[++a]=""))}else o[a]+=r.data}while(r=r.nextSibling);return o}(this.node)},processMatches:function(){var e,t,n,r=this.matches.slice(),o=this.node,a=this.options.filterElements,i=[],l=o,s=r.shift(),c=0,u=0,d=[o];e:for(;;){if(l.nodeType===window.Node.TEXT_NODE&&(!t&&l.length+c>=s.endIndex?t={node:l,index:u++,text:l.data.substring(s.startIndex-c,s.endIndex-c),indexInMatch:0===c?0:c-s.startIndex,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,isEnd:!0}:e&&i.push({node:l,index:u++,text:l.data,indexInMatch:c-s.startIndex,indexInNode:0}),!e&&l.length+c>s.startIndex&&(e={node:l,index:u++,indexInMatch:0,indexInNode:s.startIndex-c,endIndexInNode:s.endIndex-c,text:l.data.substring(s.startIndex-c,s.endIndex-c)}),c+=l.data.length),n=l.nodeType===window.Node.ELEMENT_NODE&&a&&!a(l),e&&t){if(l=this.replaceMatch(s,e,i,t),c-=t.node.data.length-t.endIndexInNode,e=null,t=null,i=[],u=0,0,!(s=r.shift()))break}else if(!n&&(l.firstChild||l.nextSibling)){l.firstChild?(d.push(l),l=l.firstChild):l=l.nextSibling;continue}for(;;){if(l.nextSibling){l=l.nextSibling;break}if((l=d.pop())===o)break e}}},prepareReplacementString:function(e,t,n){var r=this.options.portionMode;return"first"===r&&t.indexInMatch>0?"":(e=e.replace(/\$(\d+|&|`|')/g,function(e,t){var r;switch(t){case"&":r=n[0];break;case"`":r=n.input.substring(0,n.startIndex);break;case"'":r=n.input.substring(n.endIndex);break;default:r=n[+t]||""}return r}),"first"===r?e:t.isEnd?e.substring(t.indexInMatch):e.substring(t.indexInMatch,t.indexInMatch+t.text.length))},getPortionReplacementNode:function(e,n){var r=this.options.replace||"$&",o=this.options.wrap,a=this.options.wrapClass;if(o&&o.nodeType){var i=t.createElement("div");i.innerHTML=o.outerHTML||(new XMLSerializer).serializeToString(o),o=i.firstChild}if("function"==typeof r)return(r=r(e,n))&&r.nodeType?r:t.createTextNode(String(r));var l="string"==typeof o?t.createElement(o):o;return l&&a&&(l.className=a),(r=t.createTextNode(this.prepareReplacementString(r,e,n))).data&&l?(l.appendChild(r),l):r},replaceMatch:function(e,n,r,o){var a,i,l=n.node,s=o.node;if(l===s){var c=l;n.indexInNode>0&&(a=t.createTextNode(c.data.substring(0,n.indexInNode)),c.parentNode.insertBefore(a,c));var u=this.getPortionReplacementNode(o,e);return c.parentNode.insertBefore(u,c),o.endIndexInNode<c.length&&(i=t.createTextNode(c.data.substring(o.endIndexInNode)),c.parentNode.insertBefore(i,c)),c.parentNode.removeChild(c),this.enhancements.push(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u.classList.toggle(e,t)}),this.reverts.push(function(){a===u.previousSibling&&a.parentNode.removeChild(a),i===u.nextSibling&&i.parentNode.removeChild(i),u.parentNode.replaceChild(c,u)}),u}a=t.createTextNode(l.data.substring(0,n.indexInNode)),i=t.createTextNode(s.data.substring(o.endIndexInNode));for(var d=this.getPortionReplacementNode(n,e),f=[],p=0,h=r.length;p<h;++p){var m=r[p],g=this.getPortionReplacementNode(m,e);m.node.parentNode.replaceChild(g,m.node),this.reverts.push(function(e,t){return function(){t.parentNode.replaceChild(e.node,t)}}(m,g)),f.push(g)}var y=this.getPortionReplacementNode(o,e);return l.parentNode.insertBefore(a,l),l.parentNode.insertBefore(d,l),l.parentNode.removeChild(l),s.parentNode.insertBefore(y,s),s.parentNode.insertBefore(i,s),s.parentNode.removeChild(s),this.enhancements.push(function(e,t){[d,y].concat(f).forEach(function(n){return n.classList.toggle(e,t)})}),this.reverts.push(function(){a.parentNode.removeChild(a),d.parentNode.replaceChild(l,d),i.parentNode.removeChild(i),y.parentNode.replaceChild(s,y)}),y}},r}();function Td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nd(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Dd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ld(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Id=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=arguments.length>2?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rd(this,"value",void 0),Rd(this,"ignoreCase",void 0),Rd(this,"info",{index:-1,readwrite:0,readonly:0,total:0}),Rd(this,"decos",xe.DecorationSet.empty),Rd(this,"reco",void 0),Rd(this,"view",void 0),Rd(this,"selection",void 0),Rd(this,"shouldNotify",!1),Rd(this,"shouldScroll",!1),Rd(this,"matches",[]),Rd(this,"pendingUpdateNodes",new Set),Rd(this,"setView",function(e){if(t.view=e,t.shouldNotify&&(t.shouldNotify=!1,e.dispatch(e.state.tr.setMeta(zd,{action:"navigate",direction:1}))),t.shouldScroll){t.shouldScroll=!1;var n=e.dom.querySelector("accentuate.primary,.accentuate.primary");n&&"function"==typeof n.scrollIntoViewIfNeeded?n.scrollIntoViewIfNeeded():n&&n.scrollIntoView({block:"center",inline:"center"})}}),Rd(this,"updateCount",function(e,n,r){if("doc"===e.type.name)t.info.readwrite=n;else if("image"===e.type.name)t.info.readonly+=n;else if(t.pendingUpdateNodes.delete(e)&&(t.info.readonly+=n,null!=r&&n>0)){var o=t.matches.find(function(e){return e.pos===r});o&&(o.count=n)}t.info.total=t.info.readwrite+t.info.readonly}),Rd(this,"decorate",function(e){var n=t.updateCount,r=t.value,o=t.ignoreCase,a=xd(r,o),i=a.regex,l=a.getTextRange,s=e.type.schema.nodes,c=s.foreigncontent,u=s.image,d=[],f=[],p=0,h=t.reco.find(r,o);e.descendants(function(e,r){if(e.type===c){var o=xe.Decoration.node(r,r+e.nodeSize,{},{search:{regex:i,update:n,primary:-1}});t.pendingUpdateNodes.add(e),f.push(Ed("foreigncontent",r,o,0)),d.push(o)}else if(e.type===u&&h[e.attrs.hash]){var a=h[e.attrs.hash],s=xe.Decoration.node(r,r+e.nodeSize,{},{search:{styles:a,primary:-1}});f.push(Ed("image",r,s,a.length)),d.push(s),t.updateCount(e,a.length)}else if(e.isTextblock){for(var m,g=mt(e),y=function(){var t=Dd(l(r,m),2),n=t[0],o=t[1],a=xe.Decoration.inline(n+1,o+1,{class:"accentuate"}),i=[];e.slice(m.index,m.index+1).content.nodesBetween(0,1,function(e){i.push.apply(i,Nd(e.marks))}),f.push(Ed("doc",n+1,a,1,i)),d.push(a),p+=1};m=i.exec(g);)y();return!1}}),t.shouldNotify=!0,t.matches=f,t.decos=xe.DecorationSet.create(e,d),t.updateCount(e,p)}),this.value=n,this.ignoreCase=r,this.reco=new md(o)}var t,n,r;return t=e,(n=[{key:"getReplacePositions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.info.readwrite)return[];if(e)return this.replacePositions;var t=this.replacePosition;return t?[t]:[]}},{key:"destroy",value:function(){this.view=null,this.matches=null,this.pendingUpdateNodes=new Set}},{key:"equal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=e.ignoreCase,r=e.reco;return!(t!==this.value||void 0!==n&&n!==this.ignoreCase||r&&!this.reco.equal(r))}},{key:"navigate",value:function(e,t){var n=e.doc,r=e.selection,o=function(e,t,n,r,o){return r===o?Pd(n.index,n.total,e):jd(t,n.total,o,e)}(t,this.matches,this.info,this.selection,r),a=this.clone();return a.updatePrimary(o),a.shouldScroll=!0,a.selection=r,a.decos=xe.DecorationSet.create(n,a.matches.map(function(e){return e.deco})),a.info=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Td(n,!0).forEach(function(t){Rd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Td(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a.info,{index:o}),this.destroy(),Ne("find",{action:"find",data:a.info}),a}},{key:"accentuate",value:function(e,t){var n=this.find(e,t);return n.shouldNotify=!1,n}},{key:"find",value:function(t,n){var r=t.doc,o=new e(n.value,n.ignoreCase);return o.reco=!n.reco||this.reco.equal(n.reco)?this.reco:new md(n.reco),o.decorate(r),this.destroy(),o}},{key:"clear",value:function(){var t=new e;return t.reco=this.reco,this.destroy(),t}},{key:"updatePrimary",value:function(e){var t=this.matches.find(function(e){return e.primary>-1});t&&Md(t,-1);e:for(var n=0,r=0;r<this.matches.length;r++)for(var o=this.matches[r],a=0;a<o.count;a++){if(e===n){Md(o,a);break e}n++}}},{key:"clone",value:function(){var t=new e(this.value,this.ignoreCase);return t.info=this.info,t.reco=this.reco,t.decos=this.decos,t.view=this.view,t.selection=this.selection,t.matches=this.matches,t.pendingUpdateNodes=this.pendingUpdateNodes,t}},{key:"replacePositions",get:function(){for(var e=[],t=this.value.length,n=this.matches.length-1;n>=0;n--){var r=this.matches[n],o=r.parent,a=r.pos,i=r.marks;"doc"===o&&e.push({from:a,to:a+t,marks:i})}return e}},{key:"replacePosition",get:function(){for(var e=this.info.index,t=this.matches.length,n=this.value.length;;){var r=this.matches[e],o=r.parent,a=r.pos,i=r.marks;if("doc"===o)return{from:a,to:a+n,marks:i};if(e=e>=this.matches.length-1?0:e+1,t--<0)throw new Error("Failed to retrieve a replaceable position, check MatchFind parents and readwrite count.")}}}])&&Ld(t.prototype,n),r&&Ld(t,r),e}(),zd=(n(1753),new Se.PluginKey("find")),Bd=function(){return new Se.Plugin({key:zd,props:{decorations:function(e){return this.getState(e).decos},handleDOMEvents:{}},state:{init:function(e,t){var n=e.props.config.accentuate.value,r=new Id;return n&&"string"==typeof n&&(r=r.accentuate(t,{value:n,ignoreCase:!0})),r},apply:function(e,t,n,r){if(!Xl.getState(r).loaded)return t;var o=e.getMeta(this)||{};return"find"===o.action?t.find(r,o.props):"navigate"===o.action?t.navigate(r,o.direction):"clear"===o.action||t.value&&e.docChanged?(o.silent||Ne("find",{action:"dismiss"}),t.clear()):t}},view:function(e){return{update:function(){return zd.getState(e.state).setView(e)},destroy:function(){return zd.getState(e.state).destroy()}}}})},Fd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=zd.getState(n);return r&&!o.equal(t)&&r(n.tr.setMeta(zd,{action:t.value?"find":"clear",silent:"find"===e,props:t})),!0},Wd=function(e,t,n,r){var o=zd.getState(n);return r&&o.info.total>1&&r(n.tr.setMeta(zd,{action:"navigate",direction:1})),!0},Hd=function(e,t,n,r){var o=zd.getState(n);return r&&o.info.total>1&&r(n.tr.setMeta(zd,{action:"navigate",direction:-1})),!0},$d=function(e,t,n,r){var o=zd.getState(n);if(r&&o.info.readwrite){var a=n.tr,i=o.getReplacePositions(t.bulk);i.forEach(function(e){var r=e.from,o=e.to,i=e.marks,l=n.schema.text(t.value,i);a.replaceWith(r,o,l)}),i.length>0&&r(a.setMeta(zd,{action:o.info.total-1>0?"find":"clear",silent:"replace"===e,props:{value:o.value,ignoreCase:o.ignoreCase}}))}return!0},qd=function(e,t,n,r,o){var a=n.selection,i=n.schema,l=n.tr;return a instanceof Se.NodeSelection&&(a.node.type===i.nodes.foreigncontent&&(!!qr(l,a.from)&&(!!Ma(l,a.from,a.to)&&(r&&r(l),!0))))},Vd=function(e,t,n,r,o){var a=n.selection,i=n.tr;return!a.empty&&(r&&(a.ranges.forEach(function(e){return function(e,t,n){return Ea(e,Sa,xa,t,n)}(i,e.$from.pos,e.$to.pos)}),r(Oi(i,_i.b.NoteElementText,_i.a.SemanticRemoveFormat))),!0)};function Ud(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Yd={h1:[1,_i.a.Heading1],h2:[2,_i.a.Heading2],h3:[3,_i.a.Heading3],h4:[4,_i.a.Heading4],h5:[5,_i.a.Heading5],h6:[6,_i.a.Heading6]},Xd=!0,Zd=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=Kd(Yd[t]||[null,null],2),c=s[0],u=s[1],d=!1;return i.ranges.forEach(function(e){Lo(e).forEach(function(e){var t=e.nodeAfter;t.type!==a.nodes.h&&t.type!==a.nodes.p||(r&&(c>=1&&c<=6?l.setNodeMarkup(e.pos,a.nodes.h,{level:c}):l.setNodeMarkup(e.pos,a.nodes.p),n.storedMarks&&l.ensureMarks(n.storedMarks)),d=!0)})}),d&&r&&r(Oi(l,_i.b.NoteElementText,"p"===t?_i.a.Normal:u)),d};function Gd(e,t,n,r,o){var a=n.selection,i=[];if(a.ranges.forEach(function(e){var t=nt(e,function(e){return"h"===e.type.name||"p"===e.type.name});i.push.apply(i,Ud(t))}),!i.length)return"p";for(var l=void 0,s=0;s<i.length&&t!==cs;s++){var c=i[s].nodeAfter,u="h"===c.type.name?"h"+c.attrs.level:"p";void 0===l?l=u:l!==u&&(l=cs)}return l}var Jd=function(e,t,n,r,o){var a=n.selection,i=a.from+(a.empty?0:1),l=o.domAtPos(i),s=l.node,c=l.offset;for(s instanceof Text||!s.childNodes.length||(s=s.childNodes[Math.min(s.childNodes.length-1,c)]);!(s instanceof HTMLElement);)s=s.parentElement;return kl(o,t,s),!0},Qd=function(e,t,n,r,o){return kl(o,t,null),!0},ef=function(e,t,n){var r=e.tr,o=e.schema,a=new Je.Slice(Je.Fragment.from([o.nodes.hr.create(),o.nodes.p.create()]),0,1);return r.replaceRange(t,n,a),r.setSelection(Se.TextSelection.create(r.doc,r.selection.to,r.selection.to)),r.scrollIntoView(),r},tf=!0,nf=function(e,t,n,r,o){var a=n.selection;if(!Io(a,-1,n.schema.nodes.hr))return!1;if(!r)return!0;var i=n.storedMarks||a.$from.marks(),l=ef(n,a.from,a.to);return!!l&&(l.setStoredMarks(i),r(Oi(l,_i.b.NoteElementText,_i.a.AddDivider)),!0)};function rf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function of(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rf(n,!0).forEach(function(t){af(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rf(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function af(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lf(e){return nt(e,function(e){return Qe(e,"listitem")})}function sf(e,t){for(var n=t.parent,r=new Je.NodeRange(t,t.doc.resolve(t.pos+t.nodeAfter.nodeSize),t.depth),o=-1,a=t.depth;a>=0;)dc(t.node(a))&&o++,a--;if(!(o>=za)){var i=Object(sr.findWrapping)(r,n.type);e.mapping.maps.length;i&&e.wrap(r,i)}}function cf(e,t){var n=e.mapping.maps.length,r=t.node(-1),o=t.pos,a=t.nodeAfter.nodeSize,i=o+a,l=dc(r);if(l){Object(sr.canSplit)(e.doc,i,2)?e.split(i,2):Object(sr.canSplit)(e.doc,t.after())&&e.split(t.after()),Object(sr.canSplit)(e.doc,o,2)?e.split(o,2):Object(sr.canSplit)(e.doc,t.before())&&e.split(t.before());var s=e.doc.resolve(e.doc.resolve(e.mapping.slice(n).map(o)).before()),c=s.blockRange(e.doc.resolve(s.pos+a));e.lift(c,s.depth-1)}else{Object(sr.canSplit)(e.doc,i)&&(e.split(i),uf(e,lt(ft(e,i,1),dc))),Object(sr.canSplit)(e.doc,o)&&(e.split(o),uf(e,lt(ft(e,o,1),dc)));var u=e.doc.resolve(e.mapping.slice(n).map(o)+1),d=u.blockRange(e.doc.resolve(u.pos+a-2));e.lift(d,u.depth-2)}return{$li:e.doc.resolve(e.mapping.slice(n).map(o)),inList:l}}function uf(e,t){if(t&&t.nodeAfter&&t.nodeAfter.attrs.start){var n=of({},t.nodeAfter.attrs);delete n.start,e.setNodeMarkup(t.pos,null,n)}}function df(e,t){var n=!0,r=0;do{var o=cf(e,t);t=o.$li,n=o.inList,r+=1}while(n);e.setNodeMarkup(t.pos,null,of({},t.nodeAfter.attrs,{indent:r-1}))}function ff(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=e.doc.type.schema.nodes,a=o.p,i=o.li,l=e.mapping.maps.length,s=lt(e.doc.resolve(t),function(e){return e.type===a});if(!s||!s.nodeAfter)return e;var c=s.nodeAfter.attrs,u=c.indent||0;u>0&&e.setNodeMarkup(s.pos,null,of({},c,{indent:0}));var d=s;if(!n){u-=1;var f=lt(s,function(e){return e.type===i}),p=lt(f,function(e){return Qe(e,"list")});n=p.nodeAfter.type,d=p}for(var h=d,m=new Je.NodeRange(d,d.doc.resolve(d.pos+d.nodeAfter.nodeSize),d.depth),g=0;g<=u;g++){var y=Object(sr.findWrapping)(m,n);if(y){var v=y.find(function(e){return e.type===i});v&&(v.attrs=of({},v.attrs,{checked:r})),e.wrap(m,y),d=pt(e,l,h.pos);var b=e.doc.resolve(d.before());m=b.blockRange(e.doc.resolve(b.pos+b.nodeAfter.nodeSize))}}return e}var pf=!0,hf=function(e,t,n,r,a){var i=n.tr,l=n.doc,s=n.selection,c=n.storedMarks||s.$from.marks(),u=e,d={},p=!1;return s.ranges.map(Ci).forEach(function(e){var t=gc(l,e),n=t.listItems,r=t.paragraphs;n.forEach(function(e){var t=i.doc.resolve(i.mapping.map(e.pos));L[u](i,t),d.action="indent"===u?_i.a.IndentList:_i.a.OutdentList,d.category=_i.b.NoteElementList,p=!0}),r.forEach(function(e){var t=i.doc.resolve(i.mapping.map(e.pos));f[u](i,t),d.action="indent"===u?_i.a.IndentParagraph:_i.a.OutdentParagraph,d.category=_i.b.NoteElementText,p=!0}),La(e).forEach(function(e){var t=i.doc.resolve(i.mapping.map(e.pos));o[u](i,t)&&(p=!0)})}),p&&(i.setStoredMarks(c),r&&r(Oi(i,d))),p},mf=n(424),gf=n.n(mf),yf=n(1716),vf=n.n(yf),bf=!0,wf=function(e,t,n,r,o){if(!o.editable)return!1;var a,i,l=n.doc,s=n.schema,c=n.selection,u=n.tr,d=c.$from,f=c.from,p=c.to,h=c.empty;"string"==typeof t?a=t:t&&(t.url&&(a=t.url),t.title&&(i=t.title));var m=s.marks.link;if(a&&a.length){var g=ys(u,a,i||"");return r&&r(g),!0}var y=ds(d,m);if(y&&y.mark&&y.from<=p&&p<=y.to)return r&&r(u.setMeta(Os,{createLink:"LINK_EDIT_EXISTING"})),!0;if(h){var v=l.resolve(f).parent;return!(!v||!v.type.allowsMarkType(m))&&(r&&r(u.setMeta(Os,{createLink:"LINK_CREATE_TEXT_AND_HREF"})),!0)}return!at(c,l,function(e){var t=e.nodeAfter;return t&&(!!m.isInSet(t.marks)||!function(e){if(!e)return!1;var t=e.type.schema.marks.link;return we()(e,"type.spec.isLinkable")||e.type.allowsMarkType(t)}(t))}).length&&(r&&(!function(e){var t=[];if(e.forEach(function(e){var n=nt(e,function(e){return"text"===e.type.name});t.push.apply(t,n)}),!t.length)return!1;for(var n=t[0].marks,r=function(e){var r=t[e];if(n.length!==r.marks.length||!Array.prototype.every.call(n,function(e){return e.isInSet(r.marks)}))return{v:!1}},o=0;o<t.length;o++){var a=r(o);if("object"===is(a))return a.v}return!0}(c.ranges)?r(u.setMeta(Os,{createLink:"LINK_CREATE_HREF_ONLY"})):vf()(gf()(c.ranges.map(Do))).length>1?r(u.setMeta(Os,{createLink:"LINK_CREATE_HREF_ONLY"})):r(u.setMeta(Os,{createLink:"LINK_CREATE_TEXT_AND_HREF"}))),!0)},kf=function(e,t,n){var r=n.selection,o=n.schema,a=r.$from,i=r.$to,l=ds(a,o.marks.link);return l&&l.mark&&l.from<=i.pos&&i.pos<=l.to&&l.mark.attrs.href||""},_f=!0,Of=function(e,t,n,r,o){if(!o.editable)return!1;if(!r)return!0;var a=gs(n.tr);return r&&r(a),!0};function Cf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xf={insertorderedlist:"ol",insertunorderedlist:"ul",inserttodolist:"todolist"},Ef={insertorderedlist:_i.a.OrderedList,insertunorderedlist:_i.a.UnorderedList,inserttodolist:_i.a.TodoList},Pf=!0,jf=function(e,t,n,r){var o=n.doc,a=n.schema,i=n.tr,l=n.selection,s=i.storedMarks,c=!1;return n.selection.ranges.forEach(function(r){var s=Ci(r),u=n.schema.nodes[xf[e]],d=Af(n,r);u.name===d?(c=!0,function(e,t,n){var r=lf(t);r.length>0&&r.reverse().forEach(function(t){var n=e.doc.resolve(e.mapping.map(t.pos));df(e,n)})}(i,s)):(c=function(e,t,n,r,o,a){var i=gc(e,n),l=i.listItems,s=i.paragraphs;return s.forEach(function(e){var n=a,o=ft(t,e.pos);"todolist"===r.name&&tc(o)&&(n=t.doc.resolve(o.pos+1).nodeAfter.attrs.checked,rc(t,e),o=ft(t,e.pos)),ff(t,o.pos+1,r,n)}),l.forEach(function(e){var n=ft(t,e.pos),o=n.before(),i=e.nodeAfter.attrs;t.setNodeMarkup(o,r),t.setNodeMarkup(n.pos,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cf(n,!0).forEach(function(t){Sf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cf(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i,{checked:a}))}),l.length>0||s.length>0}(o,i,s,u,a.nodes.li,t)||c,l instanceof Vo.CellSelection||i.scrollIntoView())}),c&&(i.setStoredMarks(s),i.setMeta("list-item-changed",!0)),r&&r(Oi(i,_i.b.NoteElementList,Ef[e])),c};var Mf=function(e,t,n){var r=[];return n.selection.ranges.forEach(function(e){var t=Ci(e),o=Af(n,t);r.push(o)}),r.reduce(function(e,t){return e&&e!==t?"none":t},null)};function Af(e,t){var n=gc(e.doc,t),r=n.listItems;return n.paragraphs.length?"none":r.reduce(function(e,t){var n=t.node().type.name;return e&&e!==n?"none":n},null)}function Tf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Df=function(e,t,n,r,o){var a=n.doc,i=(n.schema,n.selection),l=n.tr,s=e.replace("justify","").replace("full","justify"),c=!1;return i.ranges.forEach(function(e){var t=e.$from,n=e.$to;a.nodesBetween(t.pos,n.pos,function(e,t){if(e.isTextblock){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tf(n,!0).forEach(function(t){Nf(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tf(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.attrs,{textAlign:s});return l.setNodeMarkup(t,e.type,n,e.marks),c=!0,!1}return null})}),c&&r&&r(l),c},Lf=function(e,t,n){var r=n.doc;return n.selection.ranges.reduce(function(e,t){var n=t.$from,o=t.$to;return""===e?e:(r.nodesBetween(n.pos,o.pos,function(t,n){if(t.isTextblock)if(null==e)e=t.attrs.textAlign;else if(e!==t.attrs.textAlign)return e="",!1;return null}),e)},null)||""};function Rf(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}var If=!1,zf=function(e,t,n,r,o){if(!t){if(!o)return!1;var a=Ff(e,t,n,r,o);a&&(t={url:a.url,filename:a.filename,reference:a.reference})}return!(!t||!t.url&&!t.data)&&(EN.isEnabled("annotations")?Hf(t):(function(){return Wf.apply(this,arguments)}().then(function(){return Hf(t)}),!0))},Bf=function(e,t,n,r,o){return o&&o.props.config.images.annotate&&o.editable},Ff=function(e,t,n,r,o){return o&&o.state&&o.state.selection instanceof Se.NodeSelection?Co(o.state.selection.node,"image"):null};function Wf(){var e;return e=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EN.initApp("annotations");case 2:return e.next=4,EN.enableAppAsync("annotations");case 4:case"end":return e.stop()}},e)}),(Wf=function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Rf(a,r,o,i,l,"next",e)}function l(e){Rf(a,r,o,i,l,"throw",e)}i(void 0)})}).apply(this,arguments)}function Hf(e){return EN.isActive("annotations")||EN.activate("annotations"),Object(vi.track)(_i.b.NoteElementAttachment,_i.a.LaunchImageAnnotation),EN.run("annotations-load",e)}var $f={insert:function(e,t,n,r){var o,a=n.schema,i=t.selection,l=t.mapping.maps.length,s=function(e,t){var n=go(t);return Object(yt.d)(n.mime,n.filename,null)?e.nodes.image.create(n):e.nodes.file.create(n)}(a,r),c=Ut.getState(n).coords,u=c&&e.posAtCoords({left:c.x,top:c.y});if(u&&!t.getMeta("resource-inserted")){var d=ft(t,u.pos);t.insert(d.pos,s),o=pt(t,l,d.pos,1)}else i.empty&&i.$from.nodeBefore?(t.insert(i.from,s),o=pt(t,l,i.from,1)):(function(e,t){var n=e.doc.resolve(e.selection.to+1);n.nodeAfter&&n.nodeAfter.isBlock&&e.insert(n.pos,t.nodes.p.create())}(t,a),t.replaceSelectionWith(s),o=pt(t,l,i.to,1));return(st(o,function(e){return e.type.spec.isolating})||t.doc).lastChild.eq(s)&&(t.insert(o.pos,a.nodes.p.create()),o=t.doc.resolve(o.pos+1)),t.setMeta("resource-inserted",!0),t.setSelection(Se.TextSelection.between(o,o,1)),!0},update:function(e,t,n,r){var o=go(r),a=t.doc,i=nt({$from:a.resolve(0),$to:a.resolve(a.nodeSize-2)},vo(r)),l=!1;return i.forEach(function(e){var n=yo(e.nodeAfter.attrs,o);t.step(new Jr(e.pos,n)),t.setMeta("addToHistory",!1),l=!0}),l},delete:function(e,t,n,r){var o=t.doc,a=nt({$from:o.resolve(0),$to:o.resolve(o.nodeSize-2)},vo(r)),i=!1;return a.forEach(function(e){t.delete(e.pos,e.pos+1),i=!0}),i}},qf=!0,Vf=function(e,t,n,r,o){var a=n.selection,i=n.tr;if(a instanceof Vo.CellSelection&&a.$headCell.pos!==a.$anchorCell.pos)return!1;if(!t)return ru.getState(n).isPMSelection;var l=!(Array.isArray(t)?t:[t]).some(function(e){var t=!1,r=$f[e.action];return"function"==typeof r&&(t=!r(o,i,n,e)),t||"insert"!==e.action||Oi(i,_i.b.NoteElementAttachment,Object(ki.a)(e)),t},!0);return l&&r&&(i.setMeta("resources-updated",!0),i.scrollIntoView(),r(i)),l},Uf=function(e,t,n,r,o){return wo(o,t&&t.neighbors)},Kf=!0,Yf=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;if(!r)return!0;var c=s.nodeAfter;return l.delete(s.pos,s.pos+c.nodeSize),r(Oi(l,_i.b.NoteElementTable,_i.a.RemoveTable)),!0},Xf=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},Zf=!0,Gf=function(e,t,n,r,o){if(!Jf(e,t,n))return!1;return!!Object(Vo.deleteColumn)(n,function(e){r&&r(Oi(e,_i.b.NoteElementTable,_i.a.RemoveColumn))})||Yf(null,null,n,r)},Jf=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},Qf=!0,ep=function(e,t,n,r,o){if(!tp(e,t,n))return!1;return!!Object(Vo.deleteRow)(n,function(e){r&&r(Oi(e,_i.b.NoteElementTable,_i.a.RemoveRow))})||Yf(null,null,n,r)},tp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},np=!0,rp=function(e,t,n,r,o){var a=n.schema,i=n.tr;if(i.deleteSelection(),!zo(i.selection))return!1;if(r){for(;i.selection.$to.depth>1&&i.selection.$to.end(i.selection.$to.depth)===i.selection.to;)i.setSelection(Se.TextSelection.create(i.doc,i.selection.to+1));var l=ca(a,t);i.replaceSelectionWith(l);var s=i.steps[i.steps.length-1],c=i.doc.resolve(s.from);i.setSelection(Se.TextSelection.create(i.doc,c.pos+4)),i.scrollIntoView(),r(Oi(i,_i.b.NoteElementTable,_i.a.AddTable))}return!0},op=!0,ap=function(e,t,n,r,o){if(!ip(e,t,n))return!1;var a=function(e){r&&r(Oi(e,_i.b.NoteElementTable,_i.a.AddColumn))};return"before"===t?Object(Vo.addColumnBefore)(n,a):Object(Vo.addColumnAfter)(n,a),!0},ip=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},lp=!0,sp=function(e,t,n,r,o){if(!cp(e,t,n))return!1;var a=function(e){r&&r(Oi(e,_i.b.NoteElementTable,_i.a.AddRow))};return"before"===t?Object(Vo.addRowBefore)(n,a):Object(Vo.addRowAfter)(n,a),!0},cp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},up=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;arguments.length>4&&arguments[4];if(!dp(e,t,n))return!1;var o=function(e){r&&r(Oi(e,_i.b.NoteElementTable,t?_i.a.MergeCells:_i.a.UnmergeCells))};return t?Object(Vo.mergeCells)(n,o):Object(Vo.splitCell)(n,o),!0},dp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})};function fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr;["left","center","right"].indexOf(t)<0&&(window.console.warn("Saw unexpected alignment value",t),t=null),"left"===t&&(t=null);var s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;var c=s.nodeAfter;return l.setNodeMarkup(s.pos,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fp(n,!0).forEach(function(t){pp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fp(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},c.attrs,{align:t}),c.marks),r&&r(l),!0},mp=function(e,t,n){var r=n.schema,o=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table});return o?o.nodeAfter.attrs.align||"left":""};function gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gp(n,!0).forEach(function(t){vp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gp(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function vp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;var c=s.nodeAfter;l.setNodeMarkup(s.pos,null,yp({},c.attrs,{borderColor:t}),c.marks);var u=[a.nodes.tr,a.nodes.th,a.nodes.td];return c.descendants(function(e,t){return!u.includes(e.type)||(l.setNodeMarkup(s.pos+t,null,yp({},e.attrs,{borderColor:null}),e.marks),e.type!==a.nodes.th&&e.type!==a.nodes.td)}),r&&r(l),!0},wp=function(e,t,n){var r=n.schema,o=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table});return o&&o.nodeAfter.attrs.borderColor||""},kp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})};function _p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Op(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_p(n,!0).forEach(function(t){Cp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_p(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=parseInt(t,10);if(isNaN(s)||s<0)return window.console.warn("Invalid value given to tableborderwidth: "+t),!1;s+="px";var c=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!c)return!1;var u=c.nodeAfter;l.setNodeMarkup(c.pos,null,Op({},u.attrs,{borderWidth:s}),u.marks);var d=[a.nodes.tr,a.nodes.th,a.nodes.td];return u.descendants(function(e,t){return!d.includes(e.type)||(l.setNodeMarkup(c.pos+t,null,Op({},e.attrs,{borderWidth:null}),e.marks),e.type!==a.nodes.th&&e.type!==a.nodes.td)}),r&&r(l),!0},xp=function(e,t,n){var r=n.schema,o=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table});return o&&parseInt(o.nodeAfter.attrs.borderWidth,10)||0},Ep=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})};function Pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mp=function(e,t,n,r,o){var a,i,l=n.selection,s=n.tr;try{a=Qi()(t),i="#ffffff"===t}catch(e){a=Qi()("#ffffff"),i=!0}var c=a.luminosity()>.45?Fa:"#ffffff",u=i?null:t,d=i?null:a.darken(.2).hex();return ua(l,function(e,t){s.setNodeMarkup(t,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pp(n,!0).forEach(function(t){jp(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pp(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.attrs,{color:c,backgroundColor:u,borderColor:d}),e.marks)}),r&&r(Oi(s,_i.b.NoteElementTable,_i.a.ChangeCellColor)),!0},Ap=function(e,t,n){var r=[];return ua(n.selection,function(e,t){r.push(e.attrs.backgroundColor)}),1!==vf()(r).length||"string"!=typeof r[0]?"":r[0]},Tp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr;if(!(i instanceof Vo.CellSelection))return!1;var s=lt(i.$anchor,function(e){return e.type===a.nodes.table}),c=s.nodeAfter,u=da(i).selected,d=function(e,t){if(t.length<2)return null;var n=ya(e).map(function(e){return Go({},e)}),r=fa(e),o=0,a=[];r.forEach(function(e,r){t.indexOf(r)>-1&&(o+=n[r].width,a.push({index:r,minWidth:e}))});var i=0,l=o/t.length;return a.sort(function(e,t){return t.minWidth-e.minWidth}).forEach(function(e,r){var a=e.minWidth;a>l?l=(o-(i+=a))/(t.length-r-1):a=l,n[e.index].width=Math.round(a)}),n}(c,Array.from(u.cols));return va(l,s),ga(l,s.pos,d),r&&r(Oi(l,_i.b.NoteElementTable,_i.a.ChangeColumnWidth,"distribute")),!0},Np=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},Dp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;var c=function(e,t){var n=Yo.getState(e.state).noteWidth;return pa(e,t,n)}(o,s.nodeAfter);return va(l,s),ga(l,s.pos,c),r&&r(Oi(l,_i.b.NoteElementTable,_i.a.ChangeColumnWidth,"match-note-width")),!0},Lp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})};function Rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ip(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zp=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;s.nodeAfter;return["","middle","top","bottom"].indexOf(t)<0&&(window.console.warn("Saw unexpected vertical-align value",t),t=null),"top"===t&&(t=null),ua(i,function(e,n){l.setNodeMarkup(n,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rp(n,!0).forEach(function(t){Ip(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rp(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e.attrs,{verticalAlign:t}),e.marks)}),r&&r(l),!0},Bp=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})},Fp=!0,Wp=function(e,t,n,r,o){return Object(Jc.toggleMark)(n.schema.marks[e])(n,function(e){var t=n.selection.content().content;if(t&&1===t.childCount){var o=t.child(0);if(o.type===o.type.schema.nodes.table){e.updated&=-5}}r(e)})},Hp=function(e,t,n){var r=n.selection,o=r.$from,a=r.empty,i=r.ranges;return a?!!n.schema.marks[e].isInSet(n.storedMarks||o.marks())||!!ps(o.parent,e):function(e,t){var n=[],r=void 0;if(e.forEach(function(e){var t=nt(e,function(e){return"text"===e.type.name});n.push.apply(n,t)}),!n.length)return!1;for(var o=t.name,a=0;a<n.length&&r!==cs;a++){var i=n[a].nodeAfter,l=n[a].parent,s=El("h"===l.type.name?"h"+l.attrs.level:"p",o),c=!!t.isInSet(i.marks)||s;void 0===r?r=c:_e()(r,c)||(r=cs)}return r}(i,n.schema.marks[e])},$p=!0,qp=function(e,t,n,r,o){if(!r)return!0;var a=n.tr,i=n.selection,l=i.empty,s=i.ranges,c=n.schema.marks[e];return s.forEach(function(e){return function(e,n){if(t){var r={value:Er(t),unit:"px"},o=c.create(r);l?a.addStoredMark(o):a.addMark(e,n,o)}else l?a.removeStoredMark(c):a.removeMark(e,n,c)}(e.$from.pos,e.$to.pos)}),r(Oi(a,_i.b.NoteElementText,_i.a.ChangeFontSize)),!0};function Vp(e,t,n,r,o){var a,i=hs("fontsize",null,o.props.config.defaults.fontsize,n);return i===cs?i:(a="px"!==i.unit?Er("".concat(i.value).concat(i.unit||"")):Math.round(i.value),String(a||""))}var Up=["fontfamily","fontname"];var Kp=function(e,t,n,r,o){if(!r)return!0;var a=n.tr,i=n.selection,l=i.empty,s=i.ranges,c=n.schema.marks[e],u=function(n,r){if(!t||"default"===t||function(e,t,n){return Up.includes(e)&&t.props.config.defaults[e]===n}(e,o,t))l?a.removeStoredMark(c):a.removeMark(n,r,c);else{var i=c.create(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t));l?a.addStoredMark(i):a.addMark(n,r,i)}};return s.forEach(function(e){return u(e.$from.pos,e.$to.pos)}),r(a),!0},Yp=function(e,t,n,r,o){return hs(e,e,function(e,t){return Up.includes(e)?t.props.config.defaults[e]:null}(e,o),n)},Xp=Kp,Zp=function(e,t,n,r,o){var a=hs(e,e,null,n);return a&&a!==cs?a:hs("fontname","fontname",null,n)?cs:hs(e,e,o.props.config.defaults.fontfamily,n)},Gp=Date.now(),Jp=!0,Qp=function(e,t,n,r,o){if(!r)return!0;var a=n.tr,i=n.selection,l=i.empty,s=i.ranges,c=n.schema.marks.forecolor;if(s.forEach(function(e){return function(e,r){if(t){var o=t,i=js.getState(n);i.enabled&&(o=el(o,i.backgroundColor));var s=c.create({color:o});l?a.addStoredMark(s):a.addMark(e,r,s)}else l?a.removeStoredMark(c):a.removeMark(e,r,c)}(e.$from.pos,e.$to.pos)}),r){var u=Date.now();u>Gp+100&&(Gp=u,Oi(a,_i.b.NoteElementText,_i.a.ChangeFontColor)),r(a)}return!0};function eh(e,t,n,r,o){var a=hs("forecolor","color",null,n);return a===cs||null==a?a:tl(a)}var th=!0,nh=function(e,t,n,r,o){if(!r)return!0;var a=n.tr,i=n.selection,l=i.empty,s=i.ranges,c=n.schema.marks.highlight,u=void 0===t?Za:t;return!(null!==u&&Object.keys(Ga).indexOf(u)<0)&&(s.forEach(function(e){if(u){var t=c.create({highlight:u});l?a.addStoredMark(t):a.addMark(e.$from.pos,e.$to.pos,t)}else l?a.removeStoredMark(c):a.removeMark(e.$from.pos,e.$to.pos,c)}),r(Oi(a,_i.b.NoteElementText,_i.a.Highlight,t)),!0)};function rh(e,t,n,r,o){return hs(e,e,null,n)}function oh(e){return void 0===Ga[e]?Za:e}var ah={lowercase:function(e){return e.toLocaleLowerCase()},capitalize:function(e){return e[0].toLocaleUpperCase()+e.slice(1).toLocaleLowerCase()},uppercase:function(e){return e.toLocaleUpperCase()}},ih=function(e,t,n,r,o){var a=ah[e];if("null"===a)return!1;var i=[],l=!1,s=n.doc,c=n.selection,u=n.tr;if(c.ranges.forEach(function(e){var t,n;!function(e,t,n){var r=t.$from,o=t.$to,a=r.doc,i="[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]+",l=new RegExp(i,"g"),s=new RegExp("^".concat(i)),c=new RegExp("".concat(i,"$")),u=[];r.pos===o.pos?a.nodesBetween(r.pos,o.pos,function(e,t){return e.isText&&(u=[r]),0===u.length}):u=nt(t,function(e){return"text"===e.type.name}),u.forEach(function(t){var i,u=t.nodeAfter,d=t.nodeBefore,f=t.pos,p=a.nodeAt(f+u.nodeSize);for(l.lastIndex=0;null!=(i=l.exec(u.text));){var h=i[0],m=f+i.index;if(r.pos!==o.pos&&m>=o.pos)break;if(r.pos===o.pos&&m>o.pos)break;if(i.index>0&&r.pos===o.pos)break;var g="";0===i.index&&d&&d.isText&&c.test(d.text)&&(g=d.text.match(c)[0]);var y="";i.index+h.length===u.text.length&&p&&p.isText&&s.test(p.text)&&(y=p.text.match(s)[0]);var v=m-g.length,b=n(g+h+y,v);g.length>0&&e.insertText(b.substr(0,g.length),v,m),e.insertText(b.substr(g.length,h.length),m,m+h.length),y.length>0&&e.insertText(b.substr(-y.length),m+h.length,m+h.length+y.length)}})}(u,e,function(e,r){return l=!0,null==t&&(t=r),n=r+e.length,a(e)}),null!=t&&i.push({$from:s.resolve(t),$to:s.resolve(n)})}),l&&r){var d=i[0],f=new Se.TextSelection(d.$from,d.$to);f.ranges=i,u.setSelection(f),r(u)}return l},lh=function(e,t,n,r,o){if(!r)return!0;var a=n.doc,i=n.selection,l=n.tr,s=n.schema.nodes.todo;return(i.$cursor?ut(a,function(e){return e.type===s}):Tu(i.ranges[0])).forEach(function(e){"on"===t?Du(l,e,!0):"off"===t?Du(l,e,!1):Nu(l,e)}),r(l),!0},sh=function(e,t,n,r,o){var a=n.tr,i=n.selection,l=n.schema;if(!Io(i,-1,l.nodes.todo))return!1;if(!r)return!0;var s="toggle"===t,c=n.schema.nodes.todo,u=n.storedMarks||i.$to.parentOffset&&i.$from.marks();return i.ranges.forEach(function(e){s?Gs(e).forEach(function(e){var t=ac();t&&Nu(a,t)}):i.$cursor?a.replaceSelectionWith(c.create()):Gs(e).forEach(function(e){tc(e)?rc(a,e):oc(e)||(nc(a,e,c.create()),a.scrollIntoView())})}),a.ensureMarks(u),r(a),!0},ch=!0,uh=function(e,t,n,r,o){return r&&EN.run("template-apply",{template:t}),!0},dh=function(e,t,n,r,o){return o&&o.editable},fh=n(852),ph=n(1754),hh=n.n(ph),mh=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];var gh=[0,3614090360,3905402710,606105819,3250441966,4118548399,1200080426,2821735955,4249261313,1770035416,2336552879,4294925233,2304563134,1804603682,4254626195,2792965006,1236535329,4129170786,3225465664,643717713,3921069994,3593408605,38016083,3634488961,3889429448,568446438,3275163606,4107603335,1163531501,2850285829,4243563512,1735328473,2368359562,4294588738,2272392833,1839030562,4259657740,2763975236,1272893353,4139469664,3200236656,681279174,3936430074,3572445317,76029189,3654602809,3873151461,530742520,3299628645,4096336452,1126891415,2878612391,4237533241,1700485571,2399980690,4293915773,2240044497,1873313359,4264355552,2734768916,1309151649,4149444226,3174756917,718787259,3951481745];var yh=[[function(e,t,n){return e&t|~e&n},[[0,7,1],[1,12,2],[2,17,3],[3,22,4],[4,7,5],[5,12,6],[6,17,7],[7,22,8],[8,7,9],[9,12,10],[10,17,11],[11,22,12],[12,7,13],[13,12,14],[14,17,15],[15,22,16]]],[function(e,t,n){return e&n|t&~n},[[1,5,17],[6,9,18],[11,14,19],[0,20,20],[5,5,21],[10,9,22],[15,14,23],[4,20,24],[9,5,25],[14,9,26],[3,14,27],[8,20,28],[13,5,29],[2,9,30],[7,14,31],[12,20,32]]],[function(e,t,n){return e^t^n},[[5,4,33],[8,11,34],[11,16,35],[14,23,36],[1,4,37],[4,11,38],[7,16,39],[10,23,40],[13,4,41],[0,11,42],[3,16,43],[6,23,44],[9,4,45],[12,11,46],[15,16,47],[2,23,48]]],[function(e,t,n){return t^(e|~n)},[[0,6,49],[7,10,50],[14,15,51],[5,21,52],[12,6,53],[3,10,54],[10,15,55],[1,21,56],[8,6,57],[15,10,58],[6,15,59],[13,21,60],[4,6,61],[11,10,62],[2,15,63],[9,21,64]]]];function vh(e){return String.fromCharCode(255&e)+String.fromCharCode(e>>>8&255)+String.fromCharCode(e>>>16&255)+String.fromCharCode(e>>>24&255)}function bh(e){for(;e<0;)e+=4294967296;for(;e>4294967295;)e-=4294967296;return e}function wh(e,t,n,r,o){var a,i,l,s,c,u,d,f,p;a=r[0],i=r[1],l=r[2],s=r[3],c=o[0],u=o[1],d=o[2],p=n(t[i],t[l],t[s]),f=(f=bh(f=t[a]+p+e[c]+gh[d]))<<u|f>>>32-u,f+=t[i],t[a]=bh(f)}function kh(e){var t,n,r,o,a,i,l,s,c,u,d,f,p;if(r=[1732584193,4023233417,2562383102,271733878],(l=(i=63&(a=e.length))<56?56-i:120-i)>0)for(e+="",u=0;u<l-1;u++)e+="\0";for(e+=vh(8*a),e+=vh(0),a+=l+8,t=[0,1,2,3],n=[16],o=[4],f=0;f<a;f+=64){for(u=0,d=f;u<16;u++,d+=4)n[u]=e.charCodeAt(d)|e.charCodeAt(d+1)<<8|e.charCodeAt(d+2)<<16|e.charCodeAt(d+3)<<24;for(u=0;u<4;u++)o[u]=r[u];for(u=0;u<4;u++)for(s=yh[u][0],c=yh[u][1],d=0;d<16;d++)wh(n,o,s,t,c[d]),p=t[0],t[0]=t[3],t[3]=t[2],t[2]=t[1],t[1]=p;for(u=0;u<4;u++)r[u]+=o[u],r[u]=bh(r[u])}return vh(r[0])+vh(r[1])+vh(r[2])+vh(r[3])}var _h={keyschedule:function(e,t){var n,r,o=e.split("");for(r=0;r<o.length;r++)o[r]=o[r].charCodeAt(0);var a=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173];for(t||(t=1024),r=n=o.length;r<128;r++)o[r]=a[o[r-1]+o[r-n]&255];var i=a[o[r=128-(n=t+7>>3)]&255>>(7&-t)];for(o[r]=i;r--;)i=a[i^o[r+n]],o[r]=i;var l=new Array(64);r=63;do{l[r]=(255&o[2*r])+(o[2*r+1]<<8)}while(r--);return l},decrypt_chunk:function(e,t){var n,r,o,a,i;n=(e.charCodeAt(7)<<8)+e.charCodeAt(6),r=(e.charCodeAt(5)<<8)+e.charCodeAt(4),o=(e.charCodeAt(3)<<8)+e.charCodeAt(2),a=(e.charCodeAt(1)<<8)+e.charCodeAt(0),i=15;do{n=((n&=65535)<<11)+(n>>5),n-=(a&~r)+(o&r)+t[4*i+3],r=((r&=65535)<<13)+(r>>3),r-=(n&~o)+(a&o)+t[4*i+2],o=((o&=65535)<<14)+(o>>2),o-=(r&~a)+(n&a)+t[4*i+1],a=((a&=65535)<<15)+(a>>1),a-=(o&~n)+(r&n)+t[4*i+0],5!=i&&11!=i||(n-=t[63&r],r-=t[63&o],o-=t[63&a],a-=t[63&n])}while(i--);return String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&o)+String.fromCharCode(o>>8&255)+String.fromCharCode(255&r)+String.fromCharCode(r>>8&255)+String.fromCharCode(255&n)+String.fromCharCode(n>>8&255)},decrypt:function(e,t,n){for(var r="",o=this.keyschedule(t,n);e.length>0;){var a=e.slice(0,8);e=e.slice(8),r+=this.decrypt_chunk(a,o)}return r}};function Oh(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Ch(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Oh(a,r,o,i,l,"next",e)}function l(e){Oh(a,r,o,i,l,"throw",e)}i(void 0)})}}var Sh=8,xh=32,Eh=5e4,Ph=16,jh=Ph*Sh,Mh=32,Ah=Mh*Sh,Th="ENC0",Nh=hh.a.codec.utf8String.toBits(Th)[0],Dh=64,Lh=window,Rh=!!(Lh.crypto&&Lh.crypto.subtle&&Lh.TextEncoder&&Lh.TextDecoder),Ih=Rh&&new TextEncoder,zh=Rh&&new TextDecoder,Bh=Rh&&crypto.subtle;function Fh(e,t){return hh.a.misc.pbkdf2(e,t,Eh,jh)}function Wh(e,t){var n=hh.a.codec.base64.toBits(t),r=Sh*Th.length;if(n[0]!==Nh)return Gh(e,t);var o=hh.a.bitArray.bitSlice(n,r,r+jh);r+=jh;var a=hh.a.bitArray.bitSlice(n,r,r+jh);r+=jh;var i=hh.a.bitArray.bitSlice(n,r,r+jh);r+=jh;var l=hh.a.bitArray.bitLength(n),s=hh.a.bitArray.bitSlice(n,r,l-Ah);r+=l-Ah-r;var c=hh.a.bitArray.bitSlice(n,r,r+Ah),u=Fh(e,a),d=new hh.a.misc.hmac(u).encrypt(hh.a.bitArray.bitSlice(n,0,l-Ah));if(!hh.a.bitArray.equal(d,c))return null;var f=Fh(e,o),p=new hh.a.cipher.aes(f),h=hh.a.mode.cbc.decrypt(p,s,i);return hh.a.codec.utf8String.fromBits(h)}function Hh(e,t){var n=hh.a.codec.utf8String.toBits(t),r=hh.a.random.randomWords(jh/xh,0),o=hh.a.random.randomWords(jh/xh,0),a=Fh(e,r),i=Fh(e,o),l=hh.a.random.randomWords(jh/xh,0),s=new hh.a.cipher.aes(a),c=hh.a.mode.cbc.encrypt(s,n,l),u=[].concat(hh.a.codec.utf8String.toBits(Th),r,o,l,c),d=new hh.a.misc.hmac(i).encrypt(u);return u=u.concat(d),hh.a.codec.base64.fromBits(u)}function $h(e){var t=atob(e),n=new Uint8Array(t.length);return Array.prototype.forEach.call(t,function(e,t){return n[t]=e.charCodeAt(0)}),n}function qh(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function Vh(e,t){return Uh.apply(this,arguments)}function Uh(){return(Uh=Ch(regeneratorRuntime.mark(function e(t,n){var r,o,a,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]&&i[2],e.next=3,Bh.importKey("raw",Ih.encode(t),"PBKDF2",!1,["deriveBits","deriveKey"]);case 3:return o=e.sent,e.next=6,Bh.deriveKey({name:"PBKDF2",salt:n,iterations:Eh,hash:"SHA-256"},o,r?{name:"HMAC",hash:"SHA-256",length:jh}:{name:"AES-CBC",length:jh},!0,r?["sign","verify"]:["encrypt","decrypt"]);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kh(e,t){return Yh.apply(this,arguments)}function Yh(){return(Yh=Ch(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,l,s,c,u,d,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=$h(n),o=Th.length,(((r[0]<<8)+r[1]<<8)+r[2]<<8)+r[3]===Nh){e.next=5;break}return e.abrupt("return",Gh(t,n));case 5:return a=r.slice(o,o+Ph),o+=Ph,i=r.slice(o,o+Ph),o+=Ph,l=r.slice(o,o+Ph),o+=Ph,s=r.length,c=r.slice(o,s-Mh),o+=s-Mh-o,u=r.slice(o,o+Mh),e.next=17,Vh(t,i,!0);case 17:return d=e.sent,e.next=20,Bh.verify("HMAC",d,u,r.slice(0,s-Mh));case 20:if(e.sent){e.next=23;break}return e.abrupt("return",null);case 23:return e.next=25,Vh(t,a,!1);case 25:return f=e.sent,e.next=28,Bh.decrypt({name:"AES-CBC",iv:l},f,c);case 28:return p=e.sent,e.abrupt("return",zh.decode(p));case 30:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xh(e,t){return Zh.apply(this,arguments)}function Zh(){return(Zh=Ch(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,l,s,c,u,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ih.encode(n),o=new Uint8Array(Ph),a=new Uint8Array(Ph),crypto.getRandomValues(o),crypto.getRandomValues(a),e.next=7,Vh(t,o,!1);case 7:return i=e.sent,e.next=10,Vh(t,a,!0);case 10:return l=e.sent,s=new Uint8Array(Ph),crypto.getRandomValues(s),e.t0=Uint8Array,e.next=16,Bh.encrypt({name:"AES-CBC",iv:s},i,r);case 16:return e.t1=e.sent,c=new e.t0(e.t1),(u=new Uint8Array(Th.length+o.length+a.length+s.length+c.length)).set(Ih.encode(Th),0),u.set(o,Th.length),u.set(a,Th.length+o.length),u.set(s,Th.length+o.length+a.length),u.set(c,Th.length+o.length+a.length+s.length),e.t2=Uint8Array,e.next=27,Bh.sign("HMAC",l,u);case 27:return e.t3=e.sent,d=new e.t2(e.t3),(f=new Uint8Array(u.length+d.length)).set(u,0),f.set(d,u.length),e.abrupt("return",qh(f));case 33:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gh(e,t){var n=_h.decrypt(atob(t),kh(unescape(encodeURIComponent(e))),Dh),r=n.slice(0,4),o=n.slice(4);if(((-1^function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;t^=-1;for(var r=0,o=e.length;r<o;r++)n=255&(t^e.charCodeAt(r)),t=t>>>8^mh[n];return-1^t}(o))>>>0).toString(16).substring(0,4).toUpperCase()===r){for(var a=o.length;0===o.charCodeAt(a-1);)a-=1;return decodeURIComponent(escape(o.slice(0,a)))}return null}function Jh(e,t){return Qh.apply(this,arguments)}function Qh(){return(Qh=Ch(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rh){e.next=2;break}return e.abrupt("return",Kh(t,n));case 2:return e.abrupt("return",Wh(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function em(e,t){return tm.apply(this,arguments)}function tm(){return(tm=Ch(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Rh){e.next=2;break}return e.abrupt("return",Xh(t,n));case 2:return e.abrupt("return",Hh(t,n));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nm(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function rm(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){nm(a,r,o,i,l,"next",e)}function l(e){nm(a,r,o,i,l,"throw",e)}i(void 0)})}}hh.a.beware["CBC mode is dangerous because it doesn't protect message integrity."]();var om="2.x";function am(e){return ut(e,function(e){return"crypt"===e.type.name})}function im(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Promise(function(o){if(EN.run("platform-can-use",{type:"formDialog",range:om})){var a=[];a.push({type:"hiddenInput",id:"username",initialValue:fh.a.t("Encryption Key")},{type:"passwordInput",id:"key",placeholder:fh.a.t("Enter decryption passphrase"),isRequired:!0,initialValue:""}),r&&a.push({type:"validationErrorText",content:fh.a.t("The passphrase you entered is incorrect. Please re-enter the correct passphrase.")}),e&&a.push({type:"infoText",content:fh.a.t("crypto-hint",{HINT:qt(e)}),hasMarkup:!0}),a.push({type:"checkboxInput",id:"remember",label:fh.a.t("Remember passphrase until I quit Evernote"),initialValue:n}),EN.run("platform-use",{type:"formDialog",payload:{isModal:!0,titleText:t?fh.a.t("Decrypt content permanently"):fh.a.t("Reveal encrypted content"),titleIcon:"crypto",formElements:a,submitText:t?fh.a.t("Decrypt"):fh.a.t("Reveal"),cancelText:fh.a.t("Cancel")},callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("submitted"===e.result){var t=e.values,n=t.key,r=t.remember;o({key:n.value,remember:r&&r.value||!1})}else o({key:null})}})}else o({key:prompt(fh.a.t("Enter decryption passphrase"))})})}function lm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(n){if(EN.run("platform-can-use",{type:"formDialog",range:om})){var r=[];r.push({type:"hiddenInput",id:"username",initialValue:fh.a.t("Encryption Key")},{type:"passwordInput",id:"key",placeholder:fh.a.t("Enter encryption passphrase"),isRequired:!0,initialValue:""}),e&&r.push({type:"infoText",content:fh.a.t("crypto-hint",{HINT:qt(e)}),hasMarkup:!0}),r.push({type:"checkboxInput",id:"remember",label:fh.a.t("Remember passphrase until I quit Evernote"),initialValue:t}),EN.run("platform-use",{type:"formDialog",payload:{isModal:!0,titleText:fh.a.t("Encrypt selected text"),titleIcon:"crypto",formElements:r,submitText:fh.a.t("Encrypt"),cancelText:fh.a.t("Cancel")},callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("submitted"===e.result){var t=e.values,r=t.key,o=t.remember;n({key:r.value,remember:o&&o.value||!1})}else n({key:null})}})}else n({key:prompt(fh.a.t("Enter encryption passphrase"))})})}function sm(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise(function(t){if(EN.run("platform-can-use",{type:"formDialog",range:om})){var n=[];n.push({type:"warningText",content:fh.a.t("crypto-encrypt-warning"),hasMarkup:!0},{type:"hiddenInput",id:"username",initialValue:fh.a.t("Encryption Key")},{type:"passwordInput",id:"key1",label:fh.a.t("crypto-choose-passphrase"),labelHasMarkup:!0,isRequired:!0,initialValue:""},{type:"passwordInput",id:"key2",label:fh.a.t("crypto-reenter-passphrase"),labelHasMarkup:!0,isRequired:!0,initialValue:""}),e&&n.push({type:"validationErrorText",content:fh.a.t("Passphrases don't match. Try again.")}),n.push({type:"textInput",id:"hint",label:fh.a.t("crypto-enter-hint"),labelHasMarkup:!0,isRequired:!1,initialValue:""},{type:"checkboxInput",id:"remember",label:fh.a.t("Remember passphrase until I quit Evernote"),initialValue:!1}),EN.run("platform-use",{type:"formDialog",payload:{isModal:!0,titleText:fh.a.t("Encrypt selected text"),titleIcon:"crypto",formElements:n,submitText:fh.a.t("Encrypt"),cancelText:fh.a.t("Cancel")},callback:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("submitted"===e.result){var n=e.values,r=n.key1,o=n.key2,a=n.hint,i=n.remember;r&&r.value&&r.value.length&&r.value===o.value?t({key:r.value,hint:a&&a.value,remember:i&&i.value||!1}):Promise.resolve().then(function(){return t(sm(!0))})}else t({key:null})}})}else{var r=prompt(fh.a.t("Enter encryption passphrase"));t({key:r})}})}function cm(e){sessionStorage.setItem("crypt",e)}function um(){sessionStorage.removeItem("crypt")}function dm(){return sessionStorage.getItem("crypt")}function fm(){var e=Object(Gi.getUserId)(),t=Object(Gi.getServiceHost)();try{var n=JSON.parse(localStorage.getItem("pwHash"));if(n.userId===e&&n.serviceHost===t)return n}catch(e){}}function pm(e,t){return hm.apply(this,arguments)}function hm(){return(hm=rm(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,em(t,"#");case 2:e.t0=e.sent,e.t1=n,e.t2=Object(Gi.getUserId)(),e.t3=Object(Gi.getServiceHost)(),r={hash:e.t0,hint:e.t1,userId:e.t2,serviceHost:e.t3},localStorage.setItem("pwHash",JSON.stringify(r));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mm(e){return gm.apply(this,arguments)}function gm(){return(gm=rm(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=fm(),e.t0=!!n,!e.t0){e.next=7;break}return e.next=5,Jh(t,n.hash);case 5:e.t1=e.sent,e.t0="#"===e.t1;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ym(e){return vm.apply(this,arguments)}function vm(){return(vm=rm(regeneratorRuntime.mark(function e(t){var n,r,o,a,i,l,s,c,u,d,f=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>1&&void 0!==f[1]?f[1]:"",r=f.length>2?f[2]:void 0,o=f.length>3&&void 0!==f[3]&&f[3],a=f.length>4&&void 0!==f[4]&&f[4],!(i=dm())){e.next=12;break}return e.next=8,Jh(i,t);case 8:if(!(l=e.sent)){e.next=11;break}return e.abrupt("return",l);case 11:um();case 12:return e.next=14,im(n,r,o,a);case 14:if(s=e.sent,c=s.key,u=s.remember,null!==c){e.next=19;break}return e.abrupt("return",null);case 19:return e.next=21,Jh(c,t);case 21:if(d=e.sent){e.next=24;break}return e.abrupt("return",ym(t,n,r,u,!0));case 24:return u&&cm(c),e.abrupt("return",d);case 26:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bm(){return(bm=rm(regeneratorRuntime.mark(function e(t,n){var r,o,a,i,l,s,c,u,d,f,p,h,m,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state,o=r.schema,a=r.tr,i=r.selection,l=i.getBookmark(),e.prev=2,c=dm(),y=void 0,y=fm(),u=y?y.hint:void 0,d=!1,c){e.next=55;break}if(!fm()){e.next=45;break}case 8:return e.next=11,lm(u,!1);case 11:if(f=e.sent,c=f.key,d=f.remember,null!=c){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,mm(c);case 18:if(e.sent){e.next=40;break}return e.next=21,new Promise(function(e){if(EN.run("platform-can-use",{type:"formDialog",range:om})){var t=[];t.push({type:"infoText",content:fh.a.t("The encryption passphrase you entered is different than the one you previously used to encrypt note content. You can:")}),t.push({type:"radioInput",id:"useNewKey",value:"no",label:fh.a.t("Try to enter the passphrase again"),initialValue:!0}),t.push({type:"radioInput",id:"useNewKey",value:"yes",label:fh.a.t("Use a new passphrase (NOT RECOMMENDED)"),initialValue:!1}),EN.run("platform-use",{type:"formDialog",payload:{isModal:!0,titleText:fh.a.t("New encryption passphrase?"),titleIcon:"crypto",formElements:t,submitText:fh.a.t("Ok")},callback:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("submitted"===t.result){var n=t.values.useNewKey;e({useNewKey:"yes"===n.value})}else e({useNewKey:!1})}})}else e({useNewKey:"Y"===prompt(fh.a.t("Use new passphrase? (Y/N)"))})});case 21:if(p=e.sent,!p.useNewKey){e.next=37;break}return e.next=26,sm();case 26:if(h=e.sent,c=h.key,u=h.hint,d=h.remember,null!=c){e.next=32;break}return e.abrupt("return");case 32:return e.next=34,pm(c,u);case 34:return e.abrupt("break",43);case 37:return e.abrupt("continue",8);case 38:e.next=41;break;case 40:return e.abrupt("break",43);case 41:e.next=8;break;case 43:e.next=55;break;case 45:return e.next=47,sm();case 47:if(m=e.sent,c=m.key,u=m.hint,d=m.remember,null!=c){e.next=53;break}return e.abrupt("return");case 53:return e.next=55,pm(c,u);case 55:return d&&cm(c),e.next=58,em(c,t);case 58:g=e.sent,s=o.nodes.crypt.create({hint:u,cipher:"AES",length:128,ciphertext:g});case 60:return e.prev=60,a.setSelection(l.resolve(n.state.doc)),s&&a.replaceSelectionWith(s,!0),n.dispatch(a),e.finish(60);case 65:case"end":return e.stop()}var y},e,null,[[2,,60,65]])}))).apply(this,arguments)}var wm=!0,km=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4?arguments[4]:void 0),r=n.state.selection;return EN.run("template-dialog",{title:t.title,hasResources:mo(n.state).length>0,access:"private",type:"create",guid:null,restoreRange:function(){r&&n.dispatch(n.state.tr.setSelection(r))}}),!0},_m=function(e,t,n,r,o){return Cm(o)},Om=function(e,t,n,r,o){var a=Cm(o);return a.featureEnabled&&a.hasNoteGuid&&a.hasValidContent};function Cm(e){return{featureEnabled:!!EN.isEnabled("templatemanager"),hasNoteGuid:!!e.props.config.note.guid,hasValidContent:
//!util.dom.isEmpty(this.editor.field, { ignoreAttachments: true }) &&
(!e.props.config.note.contentClass||"evernote.realtime"===e.props.config.note.contentClass||"L10N"===e.props.config.note.contentClass)&&0===am(e.state.doc).length}}var Sm=function(e,t,n,r,o){var a=n.selection,i=n.schema;if(!EN.run("platform-can-use",{type:"formDialog",range:"^2.1"}))return!1;if(a.empty)return!1;if(a.ranges.length>1)return!1;for(var l=a.content(),s=ht(l,function(e){return"p"===e.type.name}).slice.content,c=[],u=0;u<s.childCount;u++){var d=s.child(u);if(d.type!==i.nodes.p)return!1;for(var f=0;f<d.childCount;f++){if(d.child(f).type!==i.nodes.text)return!1}c.push(d.textContent)}return r&&function(e,t){bm.apply(this,arguments)}(c.map(function(e){return"<div>".concat(qt(e),"</div>")}).join(""),o),!0};var xm=/^(?:rte|content|richlinks)\./;function Em(e){return e.replace(xm,"")}var Pm=n(0),jm=n.n(Pm),Mm=n(4),Am=n.n(Mm),Tm=n(75),Nm=n(85),Dm=n.n(Nm);function Lm(e){return(Lm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rm(){return(Rm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zm(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Bm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fm(e){return(Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hm(e,t){return(Hm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qm=function(e){function t(e,n){var r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=Fm(t).call(this,e,n),r=!a||"object"!==Lm(a)&&"function"!=typeof a?Wm(o):a,$m(Wm(r),"handleInputChange",function(e){var t=r.props,n=t.disallowLineBreaks,o=t.maxLength,a=t.onChange,i=t.onEveryChange;if(r.isComposing)r.hasChangeToEmit=!0,i(e.target.value);else{var l=e.target.value||"";n&&(l=l.replace(/\n/g," ")),o&&l.length>o&&(l=l.substring(0,o)),r.setState({value:l}),e.target.value!==l&&(e.target.value=l),a(l),i(e.target.value),r.hasChangeToEmit=!1}}),$m(Wm(r),"handleComposition",function(e){"compositionstart"===e.type?(r.isComposing=!0,r.hasChangeToEmit=!0):"compositionend"===e.type&&(r.isComposing=!1,r.hasChangeToEmit&&r.handleInputChange(e))});var i=r.props,l=i.value,s=i.defaultValue;return r.state={value:l||s||""},r.isComposing=!1,r.hasChangeToEmit=!1,r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hm(e,t)}(t,Pm["Component"]),n=t,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value}:null}}],(r=[{key:"render",value:function(){var e=this.props,t=(e.disallowLineBreaks,e.elementType),n=(e.onEveryChange,e.inputRef),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Im(n,!0).forEach(function(t){$m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Im(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},zm(e,["disallowLineBreaks","elementType","onEveryChange","inputRef"]),{value:this.state.value,onChange:this.handleInputChange,onCompositionStart:this.handleComposition,onCompositionEnd:this.handleComposition,ref:n});return"textarea"===t?jm.a.createElement("textarea",r):jm.a.createElement("input",Rm({},r,{type:"text"}))}}])&&Bm(n.prototype,r),o&&Bm(n,o),t}();$m(qm,"propTypes",{elementType:Am.a.string,value:Am.a.any,defaultValue:Am.a.any,onChange:Am.a.func,onEveryChange:Am.a.func}),$m(qm,"defaultProps",{elementType:"input",onChange:function(){},onEveryChange:function(){}});var Vm=qm,Um=n(1679),Km=n(1755),Ym=n.n(Km);function Xm(e){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zm(){return(Zm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gm(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Jm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qm(e){return(Qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tg(e,t){return(tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ng=function(e){function t(e,n){var r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=Qm(t).call(this,e,n),r=!a||"object"!==Xm(a)&&"function"!=typeof a?eg(o):a,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(eg(r),"handleInputChange",function(e){"string"==typeof e&&r.setState({resizeText:e.replace(/\s/g,"").length?e:"."})});var i,l=e.value;return r.sizingDiv=Object(Pm.createRef)(),i="string"==typeof l&&l.replace(/\s/g,"").length?l:".",r.state={resizeText:i},r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tg(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"getCaretFromPoint",value:function(e,t){var n=this.sizingDiv.current,r=Vt(e,t);if(r&&r.startContainer&&r.startContainer.contains(n)){n.style.visibility="visible";var o=Vt(e,t);return n.style.visibility="",o}return r}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.value,r=Gm(e,["className","value"]),o=this.state.resizeText;return jm.a.createElement("div",{className:Ym.a.container},jm.a.createElement(Vm,Zm({},r,{elementType:"textarea",defaultValue:n,className:Object(Um.a)(Ym.a.textArea,t),onEveryChange:this.handleInputChange})),jm.a.createElement("div",{ref:this.sizingDiv,className:Object(Um.a)(Ym.a.sizingBlock,t)},o))}}])&&Jm(n.prototype,r),o&&Jm(n,o),t}(),rg=n(1717),og=n.n(rg);function ag(e){return(ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cg(e,t){return(cg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ug(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dg=ve()(Ne,1e3,{leading:!0,maxWait:400,trailing:!0}),fg=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=lg(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==ag(o)&&"function"!=typeof o?sg(r):o,ug(sg(n),"state",{dropRange:null}),ug(sg(n),"handleFocus",function(){EN.execCommand("clearselection"),Ne("titleFocused",{focus:!0,module:"content"})}),ug(sg(n),"handleBlur",function(){Ne("titleFocused",{focus:!1,module:"content"})}),ug(sg(n),"handleTitleChange",function(e){var t=n.props.setNoteTitle,r=e.replace(/\n/g," ").trim();dg("titleChanged",{title:r}),"function"==typeof t&&t(r)}),ug(sg(n),"handleKeyPress",function(e){var t,r=e.keyCode,o=n.props.view;return!!(o&&o.state&&o.dispatch)&&(!((e.metaKey||e.ctrlKey||40!==r&&39!==r||(t=n.inputElement,!t||t.selectionStart!==t.selectionEnd||t.selectionEnd!==t.value.length))&&13!==r&&9!==r)&&(e.stopPropagation(),e.preventDefault(),Eu("selection",{anchor:1,head:1},o.state,o.dispatch,o),iu("focus",!0,o.state,o.dispatch,o),!0))}),ug(sg(n),"handleDragOver",function(e){e.dataTransfer.dropEffect="copy"}),ug(sg(n),"handleDrop",function(e){var t=e.dataTransfer.getData("text"),n=e.clientX,r=e.clientY;e.preventDefault(),setTimeout(function(){EN.execCommand("caretlocation",{x:n,y:r}),EN.execCommand("paste",{values:[{type:"text/plain",value:t}]})})}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cg(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"componentDidUpdate",value:function(){var e=this.props.dropCoords;if(this.state.dropRange&&!e&&this.setState({dropRange:null}),this.ref&&e){var t=this.ref.getCaretFromPoint(e.x,e.y);null!==t&&!this.state.dropRange&&this.inputElement.parentElement.contains(t.commonAncestorContainer)&&(this.inputElement.focus(),this.inputElement.selectionStart=t.startOffset,this.inputElement.selectionEnd=t.endOffset,this.setState({dropRange:t}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.editable,r=t.title;return jm.a.createElement("div",{className:og.a.noteHeader},n?jm.a.createElement(ng,{className:og.a.titleInput,value:r,onChange:this.handleTitleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyPress,onDragOver:this.handleDragOver,onDrop:this.handleDrop,placeholder:fh.a.t("Title"),inputRef:function(t){return e.inputElement=t},ref:function(t){return e.ref=t},disallowLineBreaks:!0,maxLength:255}):jm.a.createElement("div",{onClick:function(){return Ne("actionDenied",{readOnly:!0})},className:Object(Um.a)(og.a.titleInput,!r&&og.a.placeholder)},r||fh.a.t("Title")))}}])&&ig(n.prototype,r),o&&ig(n,o),t}(),pg={setNoteTitle:Pe.setNoteTitle},hg=Object(Tm.b)(function(e){return{editable:e.editor.editable,title:e.client.noteTitle,dropCoords:e.dropCoords.coords}},pg)(fg);function mg(e){var t=e.view;return jm.a.createElement(Tm.a,{store:Me.default},jm.a.createElement(hg,{view:t}))}mg.propTypes={view:Am.a.object.isRequired};var gg=null,yg=n(848),vg=n.n(yg),bg=n(1718),wg=n.n(bg);function kg(e){return(kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Og(e){return(Og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sg(e,t){return(Sg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eg=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,n=!(o=(e=Og(t)).call.apply(e,[this].concat(i)))||"object"!==kg(o)&&"function"!=typeof o?Cg(r):o,xg(Cg(n),"state",{hasError:!1}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sg(e,t)}(t,Pm["Component"]),n=t,o=[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}],(r=[{key:"componentDidCatch",value:function(e,t){Ce.a.error("Error in React Node View Error Boundary"),Ce.a.error(e),Ce.a.error(t)}},{key:"render",value:function(){if(this.state.hasError){var e=this.props,t=e.inline,n=e.selected;return jm.a.createElement("div",{className:Object(Um.a)(wg.a.errorBoundary,t?wg.a.errorBoundary__inline:wg.a.errorBoundary__block,n&&wg.a.errorBoundary__selected)},jm.a.createElement("span",null,fh.a.t("Something went wrong.")))}return this.props.children}}])&&_g(n.prototype,r),o&&_g(n,o),t}();xg(Eg,"propTypes",{inline:Am.a.bool,selected:Am.a.bool,children:Am.a.any});var Pg=n(1706);var jg=function(e){var t=e.inline;return jm.a.createElement("div",{className:Object(Um.a)(wg.a.loading,t?wg.a.loading__inline:wg.a.loading__block)},jm.a.createElement(Pg.a,null))},Mg=n(388),Ag=n(1757),Tg=n.n(Ag),Ng=n(422),Dg=n(1145),Lg=n(387);function Rg(e){return(Rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zg(e){return(zg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fg(e,t){return(Fg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hg=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,n=!(o=(e=zg(t)).call.apply(e,[this].concat(i)))||"object"!==Rg(o)&&"function"!=typeof o?Bg(r):o,Wg(Bg(n),"handleTemplateBtnClick",function(e){EN.isEnabled("templatemanager")&&(Object(vi.track)(vi.EventCategory.Note,vi.EventAction.OpenTemplateGallery,"template-btn"),EN.activate("templatemanager"))}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fg(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"isMobile",value:function(){var e=this.props.editor,t=we()(e,"view.props.config.client");return"ios"===t||"android"===t}},{key:"render",value:function(){var e,t=this.props,n=t.visible,r=void 0!==n&&n,o=t.showTemplates,a=this.isMobile();if(!r)return null;if(o){var i=a?fh.a.t("placeholder-copy-mobile-templates"):fh.a.t("placeholder-copy-templates"),l=i.indexOf("<button>"),s=i.indexOf("</button>");e=-1!==l&&-1!==s&&l<s?jm.a.createElement(Pm.Fragment,null,jm.a.createElement("span",{className:Tg.a.copyText},i.substring(0,l)),jm.a.createElement("div",{className:Tg.a.button,onClick:this.handleTemplateBtnClick},jm.a.createElement(Ng.a,{className:Tg.a.icon,svg:Dg.a}),i.substring(l+8,s)),i.substring(s+9)?jm.a.createElement("span",{className:Tg.a.copyText},i.substring(s+9)):null):jm.a.createElement("span",{className:Tg.a.copyText},i)}else{var c=a?fh.a.t("placeholder-copy-mobile"):fh.a.t("placeholder-copy");e=jm.a.createElement("span",{className:Tg.a.copyText},c)}return jm.a.createElement("div",{className:Object(Um.a)("placeholder",Tg.a.container)},e)}}])&&Ig(n.prototype,r),o&&Ig(n,o),t}();Wg(Hg,"propTypes",{visible:Am.a.bool,showTemplates:Am.a.bool,editor:Am.a.object,activeApp:Am.a.string});Tg.a;var $g=Object(Mg.a)(Lg.b,Object(Tm.b)(function(e){return{showTemplates:we()(e,"mediator.enabledApps.templatemanager",!1)}},{}))(Hg);function qg(){return(qg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vg(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ug(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Kg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ug(n,!0).forEach(function(t){Yg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ug(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xg=function(e){var t=e.nodeView,n=t.component,r=t.componentProps,o=void 0===r?{}:r,a=t.decorations,i=t.getPos,l=t.dom,s=t.contentDOM,c=t.options,u=void 0===c?{}:c,d=t.selected,f=t.node;return Object(Nm.createPortal)(jm.a.createElement(Eg,{inline:u.inline,selected:d},jm.a.createElement(Pm.Suspense,{fallback:jm.a.createElement(jg,{inline:u.inline})},Object(Pm.createElement)(n,Kg({getPos:i,options:u,selected:d,node:f,contentDOM:s,decorations:a},o)))),l)},Zg=function(e){var t=e.dom,n=e.component,r=Vg(e,["dom","component"]);return t&&n?Object(Nm.createPortal)(Object(Pm.createElement)(n,Kg({},r)),t):null};function Gg(e){var t=e.placeholder,n=e.nodeViews;return jm.a.createElement(Pm.Fragment,null,n.map(function(e){return jm.a.createElement(Xg,{key:e.id,nodeView:e})}),jm.a.createElement(Zg,qg({key:"placeholder"},t,{dom:t.domContainer,component:$g})))}Zg.propTypes={domElement:Am.a.any,component:Am.a.any};var Jg=Object(Tm.b)(function(e){return{nodeViews:vg()(e.nodeViews.byId),placeholder:e.placeholder}},{})(Gg);var Qg=jm.a.createContext({});function ey(e){var t=e.view;return jm.a.createElement(Tm.a,{store:Me.default},jm.a.createElement(Qg.Provider,{value:{view:t}},jm.a.createElement(Jg,null)))}var ty=null;function ny(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ny(n,!0).forEach(function(t){oy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ny(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ay={crypt:{readOnly:!1},defaults:{richTextFont:"sans-serif",selectionColor:"rgb(178, 215, 255)",fontsize:16,fontfamily:"sans-serif",fontname:"default"},images:{preview:!1},stayInEditMode:!0,richlinks:{enabled:!1,cacheSupported:!1},trackChanges:{trackContext:!1,allowMixedChanges:!1},typebehind:{code:!1,email:!1,emoticon:!1,heading:!1,horizontalrule:!1,list:!1,table:!1,todo:!1,url:!1},ui:{popover:!1,menu:!1,link:!1,dragHandle:!1,fileView:!1,tableAdornments:!1}},iy=ry({},ay,{defaults:ry({},ay.defaults,{richTextFont:"-apple-system"}),images:{preview:!0},typebehind:{code:!0,email:!0,emoticon:!0,heading:!0,horizontalrule:!0,list:!0,table:!0,todo:!0,url:!0},ui:{popover:!0,menu:!0,link:!0,dragHandle:!0,fileView:!0,tableAdornments:!0}}),ly={ion:iy,web:iy,boron:ry({},iy,{images:{preview:!0}}),neutron:ry({},ay,{crypt:{readOnly:!0},images:{preview:!0},stayInEditMode:!1,trackChanges:{trackContext:!0},typebehind:{email:!0,heading:!0,list:!0,table:!0,todo:!0,url:!0}})};function sy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cy(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sy(n,!0).forEach(function(t){uy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sy(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dy(e){return(dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function py(e,t){return!t||"object"!==dy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hy(e){return(hy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function my(e,t){return(my=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gy(e){var t={};for(var n in e){var r=e[n].spec.toClipboard;r&&(t[n]=r)}return t}var yy=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),py(this,hy(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&my(e,t)}(t,Je["DOMSerializer"]),n=t,o=[{key:"fromSchema",value:function(e){return e.cached.clipboardSerializer||(e.cached.clipboardSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}},{key:"nodesFromSchema",value:function(e){var t=gy(e.nodes);return t.text||(t.text=function(e){return e.text}),t}},{key:"marksFromSchema",value:function(e){return gy(e.marks)}}],(r=null)&&fy(n.prototype,r),o&&fy(n,o),t}(),vy=["justifycenter","justifyleft","justifyright","bold","italic","strikethrough","subscript","superscript","underline","highlight","codeblock"],by=["fontfamily","fontname","fontsize","forecolor","heading","highlight","insertunorderedlist"],wy=["fontfamily","inserttodo","insertunorderedlist","insertorderedlist","inserttodolist","heading","removeformat","createlink"],ky=["inserthorizontalrule","inserttable","resources","codeblock"],_y={paragraph:function(e,t,n,r){if(!(n.selection instanceof Se.TextSelection||n.selection instanceof Se.AllSelection||n.selection instanceof Vo.CellSelection))return!1;var o={},a={};return vy.forEach(function(e){o[e]=r.queryCommandState(e)}),by.forEach(function(e){a[e]=r.queryCommandValue(e)}),{details:{state:o,value:a},cmds:wy}},link:function(e,t,n){if(!t.paragraph)return!1;var r=n.selection,o=r.$from,a=r.to,i=ds(o,n.schema.marks.link);return!!(i&&i.mark&&i.from<=a&&a<=i.to)&&{details:{text:n.doc.textBetween(i.from,i.to),href:i.mark.attrs.href},cmds:["unlink"]}},foreigncontent:function(e,t,n){return n.selection instanceof Se.NodeSelection&&n.selection.node.type===n.schema.nodes.foreigncontent&&{details:!0,cmds:["simplifyforeigncontent"]}},resource:function(e,t,n){if(!(n.selection instanceof Se.NodeSelection))return!1;var r=Co(n.selection.node);if(!r)return!1;var o=[];return"image"===r.type&&o.push("annotate"),{details:r,cmds:o}}},Oy=Object.keys(_y);function Cy(e){var t=new Set(ky),n={};Oy.forEach(function(r){var o=_y[r](r,n,e.view.state,e);if(o){var a=o.details,i=o.cmds;a&&(n[r]=a,Array.isArray(i)&&i.forEach(function(e){return t.add(e)}))}});var r={};return t.forEach(function(t){r[t]=e.queryCommandEnabled(t)}),{context:n,enabled:r,version:"1.0"}}function Sy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.router=t.router,this.providers={}}var t,n,r;return t=e,(n=[{key:"getTokenAsync",value:function(e,t,n){var r=this.providers[e]||this.addProvider(e);return t&&(r.token=null),r.token?Promise.resolve(r.token):r.request?r.request:(r.request=this.router.toHostAsync("requestAuth",{serviceName:r.name,refresh:!!t,askUserForPermission:!!n}).then(function(t){if(r.request=null,r.token=t.token,r.lastRefreshed=t.lastRefreshed,r.lastErrorCode=r.errorCode,r.errorCode=t.errorCode,t.errorCode){var n=new Error("Auth Error");throw n.provider=e,n.errorCode=t.errorCode,n}return t.token}).catch(function(e){throw r.request=null,r.errorCode=e.errorCode,e}),r.request)}},{key:"getLastErrorCode",value:function(e){var t=this.providers[e];return t&&t.lastErrorCode}},{key:"addProvider",value:function(e){return this.providers[e]={name:e,request:null,token:null,lastErrorCode:null,errorCode:null,lastRefreshed:null},this.providers[e]}}])&&Sy(t.prototype,n),r&&Sy(t,r),e}();function Ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}xy.ErrorCodes={};var Py=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.router=t.router,this.diskEnabled=!0===t.diskEnabled,this.memCache={}}var t,n,r;return t=e,(n=[{key:"readMem",value:function(e){return this.memCache[e]}},{key:"writeMem",value:function(e,t){this.memCache[e]=t}},{key:"readDiskAsync",value:function(e){return this.diskEnabled?this.router.toHostAsync("getFromCache",{href:e}).then(function(e){return e.data&&e.data.data||e.data}):Promise.resolve()}},{key:"writeDisk",value:function(e,t){this.diskEnabled&&this.router.toHostAsync("saveInCache",{href:e,data:t})}},{key:"write",value:function(e,t){this.writeMem(e,t),this.writeDisk(e,t)}},{key:"enableDisk",value:function(){this.diskEnabled=!0}},{key:"disableDisk",value:function(){this.diskEnabled=!1}}])&&Ey(t.prototype,n),r&&Ey(t,r),e}();function jy(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function My(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ay(e,t,n){return t&&My(e.prototype,t),n&&My(e,n),e}var Ty=0,Ny=function(){function e(t){jy(this,e),this.messages={},this.routesToHost=t.routesToHost,this.routesFromHost=t.routesFromHost,this.sendMessage=t.sendMessage}return Ay(e,null,[{key:"getCorrelationId",value:function(){return++Ty}}]),Ay(e,[{key:"toHostAsync",value:function(t,n){var r,o=this,a=this.routesToHost[t],i=n[a.identifier];return i||a.oneway||(i=e.getCorrelationId(),n[a.identifier]=i),r=new Dy(function(){o.sendMessage(t,n)}),a.oneway?r.resolve():this.messages[i]=r,r.promise}},{key:"fromHost",value:function(e,t){var n,r;return!!this.routesFromHost[e]&&(n=function(e,t){for(var n=e.split("."),r=t,o=0;o<n.length;o++)if(null==(r=r[n[o]]))return null;return r}(this.routesFromHost[e].identifier,t),r=this.messages[n],delete this.messages[n],r.resolve(t),!0)}}]),e}(),Dy=function e(t){jy(this,e);var n=this;this.promise=new Promise(function(e,r){n.resolve=e,n.reject=r,t()})};var Ly=n(1695);function Ry(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Iy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zy,By={Enter:(zy=Object(Jc.chainCommands)(Jc.newlineInCode,Jc.createParagraphNear,Jc.liftEmptyBlock,Jc.splitBlock),function(e,t,n){var r=t;r=t&&function(n){var r=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();r&&n.ensureMarks(r),t(n)};var o=e.selection.$from,a=Xs(o)||{},i=a.node,l=i&&i.attrs.textAlign;if(l){var s=r;r=t&&function(e){if(o.pos!==e.selection.from){var t=Xs(e.selection.$from)||{},n=t.node,r=t.pos;n&&n.attrs.textAlign!==l&&e.setNodeMarkup(r,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ry(n,!0).forEach(function(t){Iy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ry(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.attrs,{textAlign:l}))}s(e)}}return zy(e,r,n)}),Tab:function(e,t,n){var r=e.tr,o=e.schema,a=e.selection,i=a.$from,l=a.$to;if(e.selection instanceof Se.TextSelection&&i.sameParent(l)){r.replaceWith(i.pos,l.pos,o.text("    ",e.storedMarks||i.marks())),r.scrollIntoView(),t(r);var s=i.pos+"    ".length;return n.someProp("triggerTypebehind",function(e){return e(n,i.pos,s," ",!1)}),!0}return!1}};function Fy(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hy={Backspace:function(e,t,n){var r=e.doc,o=e.schema,a=e.selection,i=e.tr;if(!(a instanceof Se.TextSelection))return!1;var l=a.$cursor,s=a.$from,c=a.$to;if(null===l&&(qy(i,s,c)||Vy(i,s,c)))return t(i),!0;if(null!=l&&l.node().isTextblock&&l.pos===l.start()&&Qe(l.node(-1),"listitem")&&l.start(-1)===l.before()){var u=ft(i,l.before(-1));return u&&1===u.depth&&u.nodeAfter&&Qe(u.nodeAfter,"listitem")&&u.nodeBefore&&Qe(u.nodeBefore,"listitem")&&u.parent.childCount>u.index()+1?(i.deleteRange(u.pos-2,u.pos+2),i.setMeta(uc["list-item-deleted"],!0),t(i),!0):hf("outdent",null,e,t,n)}if(null!=l&&null==l.nodeBefore&&l.node().isTextblock){var d=r.resolve(l.before());if(d.nodeBefore&&Qe(d.nodeBefore,"list")){for(var f=l,p=r.resolve(f.before()),h=p;!h.nodeBefore||!Qe(h.nodeBefore,"listitem");)h=r.resolve(h.pos-1);h=r.resolve(h.pos-1);var m=0;h.nodeBefore&&h.nodeBefore.isTextblock&&(h=r.resolve(h.pos-1),m=1);var g=new Je.Slice(Je.Fragment.from(o.nodes.p.create(null,p.nodeAfter.content)),m,m);return i.delete(p.pos,p.pos+p.nodeAfter.nodeSize),i.replace(h.pos,h.pos,g),i.setSelection(Se.TextSelection.create(i.doc,h.pos+(0===m?1:0))),t(i),!0}}return!1},Delete:function(e,t,n){var r=e.doc,o=e.schema,a=e.selection,i=e.tr;if(!(a instanceof Se.TextSelection))return!1;var l=a.$cursor,s=a.$from,c=a.$to,u=[o.nodes.ol,o.nodes.ul,o.nodes.todolist];if(null===l&&qy(i,s,c))return t(i),!0;if(null!=l&&null==l.nodeAfter&&l.node().isTextblock&&Qe(l.node(-1),"listitem")){var d=r.resolve(l.before());if(d.nodeBefore&&-1!==u.indexOf(d.nodeBefore.type)){for(var f=l,p=r.resolve(f.before()),h=p;!h.nodeBefore||!Qe(h.nodeBefore,"listitem");)h=r.resolve(h.pos-1);h=r.resolve(h.pos-1);var m=0;h.nodeBefore&&h.nodeBefore.isTextblock&&(h=r.resolve(h.pos-1),m=1);var g=new Je.Slice(Je.Fragment.from(p.nodeAfter),m,m);return i.delete(p.pos,p.pos+p.nodeAfter.nodeSize),i.replace(h.pos,h.pos,g),i.setSelection(Se.TextSelection.create(i.doc,h.pos+(0===m?1:0))),t(i),!0}var y=fc(l),v=Se.Selection.findFrom(r.resolve(l.pos+1),1,!0);if(!(v&&v instanceof Se.TextSelection))return!1;var b=v.$cursor,w=fc(b);if(null!=y&&w!==y){var k=r.resolve(y),_=r.resolve(y+k.nodeAfter.nodeSize);if(mc(i,l,_))return t(i),!0}}if(null!=l&&null==l.nodeAfter&&l.node().isTextblock){var O=r.resolve(l.after());if(O.nodeAfter&&Qe(O.nodeAfter,"list")&&mc(i,l,O))return t(i),!0}return!1},Enter:$y,"Shift-Enter":function(e,t,n){var r=e.selection,o=r.$from,a=r.empty;if(!hc(o))return!1;if(Ae.isIOS&&a&&!o.node().textContent)return $y(e,t,n);return Object(Jc.splitBlockKeepMarks)(e,t)}};function $y(e,t,n){var r=e.tr,o=e.schema,a=e.selection,i=a.$from,l=a.$to,s=i.nodeAfter;if(s&&s.isBlock||i.depth<2||!i.sameParent(l))return!1;if(!i.parent.content.size)return!!hc(i)&&(hf("outdent",null,e,t,n),!0);var c=e.schema.nodes.todo,u=i.parent.firstChild.type===c;if(u&&1===i.parent.childCount)return r.delete(i.before()+1,i.before()+2),t(r),!0;if(!Qe(i.node(-1),"listitem"))return!1;r.delete(i.pos,l.pos);var d=l.pos===i.end()?i.parent:null,f=[null,d?{type:d.type,attrs:d.attrs}:null],p=r.storedMarks;if(!p&&i.nodeBefore&&(p=i.nodeBefore.marks),p&&(p=p.filter(function(e){return!1!==e.type.spec.inclusive})),!Object(sr.canSplit)(r.doc,i.pos,2,f))return!1;r.split(i.pos,2,f);var h=lt(r.selection.$to,function(e){return Qe(e,"listitem")});if(h){var m=h.parent.type===o.nodes.todolist;if(u&&!m){var g=Gs(r.selection.ranges[0])[0];g&&r.insert(g.pos+1,c.create())}var y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fy(n,!0).forEach(function(t){Wy(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fy(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},h.nodeAfter.attrs);m?y.checked=!1:delete y.checked,y.value&&(y.value=null),r.setNodeMarkup(h.pos,null,y)}return r.setStoredMarks(p),r.scrollIntoView(),t(r),!0}function qy(e,t,n){var r=pc(t),o=pc(n);return!(!r||!o)&&(e.delete(t.pos,n.pos),e.setMeta(uc["list-item-deleted"],!0),!0)}function Vy(e,t,n){var r=pc(t),o=pc(n);if(o&&o!==r){var a=xi(new Se.SelectionRange(t,n));return r&&(t=a.$from),o&&(n=a.$to),e.delete(t.pos,n.pos),e.setMeta(uc["list-item-deleted"],!0),e.setMeta(uc["list-item-mixed-deleted"],!0),!0}return!1}var Uy=n(1719),Ky=n.n(Uy),Yy=function(e,t){var n=e.posAtCoords({left:t.clientX,top:t.clientY});return n?e.state.doc.resolve(n.pos):null},Xy=ur()(function(e){for(var t=e.content,n=e.openStart;n--&&1===t.childCount;)t=t.firstChild.content;var r=new Set([]);return t.descendants(function(e){r.add(e.type.name)}),Array.from(r)}),Zy=function(e,t,n){var r=Xy(t),o=Xy(n);return r.filter(function(e){return!o.includes(e)}).some(function(t){return e.state.schema.nodes[t].spec.preventDropIfRemoved})},Gy=function(e,t){if(null!=t[e])return Math.round(t[e]());var n="x"===e?"offsetWidth":"offsetHeight";return t.element[n]?Math.round(t.element[n]/2):0},Jy=function(e,t){var n=e.state.selection;return e.someProp("getDragImage",function(r){return r(e,t,n)})||function(e,t,n){for(var r=n.content().content,o=!0,a=0;a<r.childCount;a++)if(!r.child(a).isTextblock){o=!1;break}if(!o)return null;for(var i=[],l=0;l<r.childCount;l++){var s=r.child(l);if((0!==i.length||s&&s.textContent&&s.textContent.trim())&&(i.push(bt()("div",{},s.textContent||bt()("br"))),6===i.length&&l+1<r.childCount)){i.push(bt()("div",{class:Ky.a["ghost__TextBlocks--overflow"]},"…"));break}}if(0===i.length)return null;var c=e.nodeDOM(n.$head.before()),u=Ct(c,t),d=bt.a.apply(void 0,["div",{class:Ky.a.ghost__TextBlocks}].concat(i));return{element:d,x:function(){return u.x/c.offsetWidth*d.getBoundingClientRect().width}}}(e,t,n)||{element:bt()("div",{class:Ky.a.ghost__MixedSelection},bt()("div"),bt()("div"),bt()("div"))}};var Qy=n(8),ev=n.n(Qy),tv=n(9),nv=n.n(tv),rv=new ev.a({id:"5jqQY",use:"5jqQY-usage",viewBox:"0 0 14 14",content:'<symbol viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" id="5jqQY">\n  <path d="M5.90909 9.54545C5.90909 8.74219 5.25781 8.09091 4.45455 8.09091C3.65128 8.09091 3 8.74219 3 9.54545C3 10.3487 3.65128 11 4.45455 11C5.25781 11 5.90909 10.3487 5.90909 9.54545Z" />\n  <path d="M4.45455 3C5.25781 3 5.90909 3.65128 5.90909 4.45454C5.90909 5.25781 5.25781 5.90909 4.45455 5.90909C3.65128 5.90909 3 5.25781 3 4.45455C3 3.65128 3.65128 3 4.45455 3Z" />\n  <path d="M11 9.54545C11 8.74219 10.3487 8.09091 9.54543 8.09091C8.74216 8.09091 8.09088 8.74219 8.09088 9.54545C8.09088 10.3487 8.74216 11 9.54543 11C10.3487 11 11 10.3487 11 9.54545Z" />\n  <path d="M9.54543 3C10.3487 3 11 3.65128 11 4.45454C11 5.25781 10.3487 5.90909 9.54543 5.90909C8.74216 5.90909 8.09088 5.25781 8.09088 4.45455C8.09088 3.65128 8.74216 3 9.54543 3Z" />\n</symbol>'}),ov=(nv.a.add(rv),rv),av=n(1720),iv=n.n(av);function lv(e){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cv(e){return(cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dv(e,t){return(dv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fv=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=cv(t).call(this,e))||"object"!==lv(o)&&"function"!=typeof o?uv(r):o).state={rowLineVisible:!1,rowLinePosition:0,colLineVisible:!1,colLinePosition:0,scrollDragging:!1},n.handleScrollDragStart=n.handleScrollDragStart.bind(uv(n)),n.handleScrollDragMove=n.handleScrollDragMove.bind(uv(n)),n.handleScrollDragEnd=n.handleScrollDragEnd.bind(uv(n)),n.handleScrollClick=n.handleScrollClick.bind(uv(n)),n.handleScrollWheel=n.handleScrollWheel.bind(uv(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dv(e,t)}(t,Pm["PureComponent"]),n=t,o=[{key:"defaultProps",get:function(){return{cols:[],rows:[],headCell:-1,resizingColumn:-1,selectedCols:new Set,selectedRows:new Set,draggableCols:new Set,draggableRows:new Set,scrollLeft:0,scrollWidth:1,offsetWidth:1,editable:!0,handleScrollDelta:function(){},handleScrollTarget:function(){},handleInsertionClick:function(){},handleHandleClick:function(){},handleTableButtonClick:function(){},handleMenuButtonClick:function(){},handleInsertionHover:function(){},handleInsertionUnhover:function(){}}}}],(r=[{key:"handleScrollDragStart",value:function(e){var t=this.props,n=t.scrollLeft,r=t.scrollWidth,o=t.offsetWidth,a=o-o*o/r,i=n/(r-o);this.scrollDragMin=e.clientX-a*i,this.scrollDragMax=this.scrollDragMin+a,this.setState({scrollDragging:!0}),window.document.body.classList.add("peso-scrolling-x"),window.document.body.addEventListener("mousemove",this.handleScrollDragMove),window.addEventListener("mouseup",this.handleScrollDragEnd)}},{key:"handleScrollDragMove",value:function(e){if(ms(e)===ss.Left){var t=(e.clientX-this.scrollDragMin)/(this.scrollDragMax-this.scrollDragMin);this.props.handleScrollTarget(t)}else this.handleScrollDragEnd(e)}},{key:"handleScrollDragEnd",value:function(){this.setState({scrollDragging:!1,colLineVisible:!1,rowLineVisible:!1}),window.document.body.classList.remove("peso-scrolling-x"),window.document.body.removeEventListener("mousemove",this.handleScrollDragMove),window.removeEventListener("mouseup",this.handleScrollDragEnd)}},{key:"handleScrollClick",value:function(e){var t=this.props,n=t.scrollLeft,r=t.scrollWidth,o=t.offsetWidth,a=t.handleScrollDelta;if(!this.state.scrollDragging&&this.scrollbarElement){var i=o/r*o,l=n/(r-o)*(o-i),s=l+i,c=e.clientX-this.scrollbarElement.getBoundingClientRect().left;c<l?a(-1*o):c>s&&a(o)}}},{key:"handleScrollWheel",value:function(e){var t,n=this.contentElement&&this.contentElement.getBoundingClientRect(),r=this.scrollbarElement&&this.scrollbarElement.getBoundingClientRect(),o=e.clientX,a=e.clientY,i=e.deltaX,l=e.deltaY;(n&&n.left<=o&&n.right>=o&&n.top<=a&&n.bottom>=a||r&&r.left<=o&&r.right>=o&&r.top<=a&&r.bottom>=a)&&(t=this.props.handleScrollDelta(i)),t&&Math.abs(i)>=Math.abs(l)&&e.preventDefault()}},{key:"handleInsertionHover",value:function(e,t){this.props.editable&&("column"===e?this.setState({colLineVisible:!0,colLinePosition:t,rowLineVisible:!1}):this.setState({colLineVisible:!1,rowLineVisible:!0,rowLinePosition:t}),this.props.handleInsertionHover())}},{key:"handleInsertionUnhover",value:function(){this.handleScrollDragEnd(),this.props.handleInsertionUnhover()}},{key:"componentDidMount",value:function(){window.document.body.addEventListener("wheel",this.handleScrollWheel,{passive:!1})}},{key:"componentWillUnmount",value:function(){window.document.body.removeEventListener("wheel",this.handleScrollWheel)}},{key:"componentDidUpdate",value:function(e){var t=this.props.resizingColumn;t!==e.resizingColumn&&(t>-1?this.setState({colLineVisible:!0,colLinePosition:t+1,rowLineVisible:!1}):this.setState({colLineVisible:!1}))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.cols,o=n.rows,a=n.headCell,i=n.headCellRect,l=n.editable,s=n.selectedCols,c=n.selectedRows,u=n.draggableCols,d=n.draggableRows,f=n.scrollLeft,p=n.scrollWidth,h=n.offsetWidth,m=n.handleInsertionClick,g=n.handleHandleClick,y=n.handleTableButtonClick,v=n.handleMenuButtonClick,b=this.state,w=b.rowLineVisible,k=b.rowLinePosition,_=b.colLineVisible,O=b.colLinePosition,C=b.scrollDragging,S=r.reduce(function(e,t){return e+t},0),x=o.reduce(function(e,t){return e+t},0),E={width:S+1,transform:"translateX(-".concat(f,"px)")},P={height:x+1},j={height:x+1},M={width:S,height:x,transform:"translateX(-".concat(f,"px)")};e=l&&a>-1&&i?{left:r.reduce(function(e,t,n){return e+(n<=i.right-1?t:0)},0)-23,top:o.reduce(function(e,t,n){return e+(n<i.top?t:0)},0)+5}:{display:"none"};var A=null,T={opacity:0},N={opacity:0},D=h/p,L=D*h;if(D<1){var R={width:L,left:f/(p-h)*(h-L)};f>0&&(T.opacity=Math.min(1,f/40));var I=p-h;f<I&&(N.opacity=Math.min(1,(I-f)/40)),A=jm.a.createElement("div",{key:"scrollbar",className:Object(Um.a)("scrollbar",iv.a.scrollbar,C&&iv.a.dragging),onClick:this.handleScrollClick,ref:function(e){t.scrollbarElement=e}},jm.a.createElement("div",{key:"scrollbarThumb",className:Object(Um.a)("scrollbarthumb",iv.a.scrollbarThumb),style:R,onMouseDown:this.handleScrollDragStart}))}var z=r.reduce(function(e,t,n){return e+(n<O?t:0)},0)-(O>0?7:5),B=o.reduce(function(e,t,n){return e+(n<k?t:0)},0)-(k>0?7:5);return jm.a.createElement(Pm.Fragment,null,jm.a.createElement("div",{key:"tableBtn",draggable:!0,className:Object(Um.a)("tablebutton",iv.a.tableBtn),onMouseDown:function(e){return y(!0)},onClick:function(e){return y(!1)}},jm.a.createElement(Ng.a,{svg:ov})),jm.a.createElement("div",{key:"columns",className:Object(Um.a)("columns",iv.a.columns)},jm.a.createElement("div",{key:"handlesContainer",className:iv.a.handlesContainer},jm.a.createElement("div",{key:"handles",className:Object(Um.a)("handles",iv.a.handles),style:E},r.map(function(e,t){return jm.a.createElement("div",{key:"handle-".concat(t),draggable:!0,className:Object(Um.a)("handle",iv.a.handle,s.has(t)&&iv.a.selected,u.has(t)&&iv.a.draggable),style:{width:e},onMouseDown:function(e){return g("column",!0,t,e.shiftKey)},onClick:function(e){return g("column",!1,t,e.shiftKey)}})}))),jm.a.createElement("div",{key:"insertion-0",className:Object(Um.a)("insertion",iv.a.insertion,iv.a.first),onClick:function(){return m("column",0)},onMouseEnter:function(){return t.handleInsertionHover("column",0)},onMouseLeave:function(){return t.handleInsertionUnhover()}},jm.a.createElement("div",{className:iv.a.insertionShape})),jm.a.createElement("div",{key:"insertionsContainer",className:iv.a.insertionsContainer},jm.a.createElement("div",{key:"insertions",className:Object(Um.a)("insertions",iv.a.insertions),style:E},r.map(function(e,n){return jm.a.createElement("div",{key:"insertion-".concat(n+1),className:Object(Um.a)("insertion",iv.a.insertion),style:{marginLeft:e-18},onClick:function(){return m("column",n+1)},onMouseEnter:function(){return t.handleInsertionHover("column",n+1)},onMouseLeave:function(){return t.handleInsertionUnhover()}},jm.a.createElement("div",{className:iv.a.insertionShape}))})))),jm.a.createElement("div",{key:"rows",className:Object(Um.a)("rows",iv.a.rows)},jm.a.createElement("div",{key:"handlesContainer",className:iv.a.handlesContainer},jm.a.createElement("div",{key:"handles",className:Object(Um.a)("handles",iv.a.handles),style:P},o.map(function(e,t){return jm.a.createElement("div",{key:"handle-".concat(t),draggable:!0,className:Object(Um.a)("handle",iv.a.handle,c.has(t)&&iv.a.selected,d.has(t)&&iv.a.draggable),style:{height:e},onMouseDown:function(e){return g("row",!0,t,e.shiftKey)},onClick:function(e){return g("row",!1,t,e.shiftKey)}})}))),jm.a.createElement("div",{key:"insertion-0",className:Object(Um.a)("insertion",iv.a.insertion,iv.a.first),onClick:function(){return m("row",0)},onMouseEnter:function(){return t.handleInsertionHover("row",0)},onMouseLeave:function(){return t.handleInsertionUnhover()}},jm.a.createElement("div",{className:iv.a.insertionShape})),jm.a.createElement("div",{key:"insertionsContainer",className:iv.a.insertionsContainer},jm.a.createElement("div",{key:"insertions",className:Object(Um.a)("insertions",iv.a.insertions),style:P},o.map(function(e,n){return jm.a.createElement("div",{key:"insertion-".concat(n+1),className:Object(Um.a)("insertion",iv.a.insertion),style:{marginTop:e-18},onClick:function(){return m("row",n+1)},onMouseEnter:function(){return t.handleInsertionHover("row",n+1)},onMouseLeave:function(){return t.handleInsertionUnhover()}},jm.a.createElement("div",{className:iv.a.insertionShape}))})))),jm.a.createElement("div",{key:"contentContainer",className:Object(Um.a)("contentcontainer",iv.a.contentContainer),style:j,ref:function(e){t.contentElement=e}},jm.a.createElement("div",{key:"content",className:iv.a.content,style:M},jm.a.createElement("div",{key:"rowline",className:Object(Um.a)("rowline",iv.a.rowline,w&&iv.a.active),style:{top:B}}),jm.a.createElement("div",{key:"colline",className:Object(Um.a)("colline",iv.a.colline,_&&iv.a.active),style:{left:z}}),jm.a.createElement("div",{key:"cellBtn",className:Object(Um.a)("cellbutton",iv.a.cellBtn),style:e,onClick:function(e){return v(a,e.clientX,e.clientY)}})),jm.a.createElement("div",{key:"lscroll",className:Object(Um.a)("lscroll",iv.a.lscroll),style:T}),jm.a.createElement("div",{key:"rscroll",className:Object(Um.a)("rscroll",iv.a.rscroll),style:N})),A)}}])&&sv(n.prototype,r),o&&sv(n,o),t}(),pv=n(196),hv=function(e,t,n,r,o){var a=n.schema,i=n.selection,l=n.tr,s=lt(i.$anchor,function(e){return e.type===a.nodes.table});if(!s)return!1;var c=function(e,t){var n=Yo.getState(e.state).fullWidth;return pa(e,t,n)}(o,s.nodeAfter);return va(l,s),ga(l,s.pos,c),r&&r(Oi(l,_i.b.NoteElementTable,_i.a.ChangeColumnWidth,"match-window-width")),!0},mv=function(e,t,n){var r=n.schema;return null!=lt(n.selection.$anchor,function(e){return e.type===r.nodes.table})};function gv(e,t,n,r,o){var a=Vo.TableMap.get(t),i=t.nodeAt(a.map[n]),l=e.state.selection,s=function(e){return e instanceof Vo.CellSelection&&e.$headCell.pos!==e.$anchorCell.pos}(l),c=function(e){if(!(e instanceof Vo.CellSelection)){var t=st(e.$anchor,sa);return t?t.attrs.colspan>1||t.attrs.rowspan>1:null}var n=!1;return e.forEachCell(function(e){n=n||e.attrs.colspan>1||e.attrs.rowspan>1}),n}(l),u=function(e,t){if(!(e instanceof Vo.CellSelection))return!1;if(e.$headCell.pos===e.$anchorCell.pos)return!1;var n=e.$anchorCell.start(-1),r=new Set;return e.forEachCell(function(e,o){r.add(t.colCount(o-n))}),r.size>1}(l,a),d=i.attrs.backgroundColor||"#ffffff",f=i.attrs.verticalAlign;Object(pv.showMenu)({xPosition:r+1,yPosition:o-6,items:[{type:"colorpicker",label:"Cell Background",value:d,action:yv(e,Q)},{type:"divider"},{type:"item",label:"Set To Note Width",action:yv(e,te)},{type:"item",label:"Set To Window Width",action:yv(e,me)},{type:"item",label:"Distribute Columns Evenly",enabled:u,action:yv(e,ee)},{type:"submenu",label:"Cell Alignment",items:[{type:"item",label:"Align content to top",value:!f||"top"===f,action:yv(e,ne,"top")},{type:"item",label:"Align content to center",value:"middle"===f,action:yv(e,ne,"middle")},{type:"item",label:"Align content to bottom",value:"bottom"===f,action:yv(e,ne,"bottom")}]},{type:"divider"},{type:"item",label:"Merge Cells",enabled:s,action:yv(e,X,!0)},{type:"item",label:"Unmerge Cells",enabled:c,action:yv(e,X,!1)},{type:"divider"},{type:"item",label:"Delete Selected Column(s)",action:yv(e,q)},{type:"item",label:"Delete Selected Row(s)",action:yv(e,V)},{type:"item",label:"Delete Table",action:yv(e,$)}]})}function yv(e,t,n){return function(r){e.editable&&(t.execCommand(null,r||n,e.state,e.dispatch,e),e.focus())}}function vv(e){return(vv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bv(e,t){return!t||"object"!==vv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wv(e){return(wv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kv(e,t){return(kv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Cv(e,t,n){return t&&Ov(e.prototype,t),n&&Ov(e,n),e}function Sv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xv=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_v(this,e),Sv(this,"thickness",void 0),Sv(this,"maxSpeed",void 0),Sv(this,"endEvents",["dragend","drop","mouseup"]),Sv(this,"elt",void 0),Sv(this,"onScroll",void 0),Sv(this,"scrollSpeedX",0),Sv(this,"scrollSpeedY",0),Sv(this,"lastTs",0),Sv(this,"scrollSome",function(e){var n=t.lastTs?e-t.lastTs:0;t.scrollSpeedX||t.scrollSpeedY?(t.lastTs=e,t.scrollBy(t.scrollSpeedX*n,t.scrollSpeedY*n),requestAnimationFrame(t.scrollSome)):t.lastTs=0}),Sv(this,"mouseEventHandler",function(e){ms(e)===ss.Left&&(e.clientY||e.clientX)?t.scrollEventHandler(e):t.setScrollSpeed(0,0)}),Sv(this,"dragEventHandler",function(e){e.clientY||e.clientX?t.scrollEventHandler(e):t.setScrollSpeed(0,0)}),Sv(this,"scrollEventHandler",function(e){var n=t.getBounds(),r=e.clientX-n.left,o=n.right-e.clientX,a=e.clientY-n.top,i=n.bottom-e.clientY,l=a>0&&i>0,s=r>0&&o>0,c=l?Math.max(0,t.thickness-r):0,u=l?Math.max(0,t.thickness-o):0,d=s?Math.max(0,t.thickness-a):0,f=u-c,p=(s?Math.max(0,t.thickness-i):0)-d;t.setScrollSpeed(f*t.maxSpeed/t.thickness,p*t.maxSpeed/t.thickness)}),Sv(this,"endEventHandler",function(e){t.setScrollSpeed(0,0)}),this.thickness=n.thickness||50,this.maxSpeed=n.maxSpeed||1,this.elt=n.elt,this.onScroll=n.onScroll||function(){},document.addEventListener("mousemove",this.mouseEventHandler,!0),document.addEventListener("dragover",this.dragEventHandler,!0),this.endEvents.forEach(function(e){return document.addEventListener(e,t.endEventHandler,!0)})}return Cv(e,[{key:"scrollBy",value:function(e,t){this.elt.scrollLeft+=e,this.elt.scrollTop+=t,this.onScroll()}},{key:"getBounds",value:function(){return this.elt.getBoundingClientRect()}},{key:"setScrollSpeed",value:function(e,t){0!==this.scrollSpeedX||0!==this.scrollSpeedY||0===e&&0===t||requestAnimationFrame(this.scrollSome),this.scrollSpeedX=e,this.scrollSpeedY=t}},{key:"destroy",value:function(){var e=this;this.setScrollSpeed(0,0),document.removeEventListener("mousemove",this.mouseEventHandler,!0),document.removeEventListener("dragover",this.dragEventHandler,!0),this.endEvents.forEach(function(t){return document.removeEventListener(t,e.endEventHandler,!0)})}}]),e}(),Ev=function(e){function t(e){return _v(this,t),bv(this,wv(t).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kv(e,t)}(t,xv),Cv(t,[{key:"scrollBy",value:function(e,t){window.scrollBy(e,t)}},{key:"getBounds",value:function(){return{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight}}}]),t}();function Pv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mv=function(){function e(t,n,r,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jv(this,"getColumnElementStyles",function(e,t){return"width: ".concat(e,"px;")}),jv(this,"updateAdornments",function(){if(!a.destroyed&&a.dom){var e=a.options;if(a.uiTable||(a.uiTable=bt()("ui-table",{contenteditable:!1}),a.dom.appendChild(a.uiTable)),Object(Gi.getInteraction)().tableAdornments){for(var t=Array.from(a.table.rows).map(function(e){return e.getBoundingClientRect().height}),n=0;n<t.length;n++)if(0===t[n]){var r=t[n+1]?n+1:n-1,o=t[r]/2;o&&(t[n]=Math.floor(o),t[r]=Math.ceil(o))}Dm.a.render(jm.a.createElement(fv,{cols:e.colWidths,rows:t,headCell:e.headCell,headCellRect:e.headCellRect,resizingColumn:e.resizingColumn,selectedCols:e.selectedCols,selectedRows:e.selectedRows,draggableCols:e.draggableCols,draggableRows:e.draggableRows,editable:a.view.editable,scrollLeft:a.tableContainer.scrollLeft,scrollWidth:a.tableContainer.scrollWidth,offsetWidth:a.tableContainer.offsetWidth,handleScrollDelta:a.handleScrollDelta,handleScrollTarget:a.handleScrollTarget,handleInsertionClick:a.handleInsertionClick,handleHandleClick:a.handleHandleClick,handleTableButtonClick:a.handleTableButtonClick,handleMenuButtonClick:a.handleMenuButtonClick,handleInsertionHover:a.handleInsertionHover,handleInsertionUnhover:a.handleInsertionUnhover}),a.uiTable),a.table.rows.length||setTimeout(function(){return a.updateAdornments()},200)}}}),jv(this,"handleScrollDelta",function(e){var t=a.tableContainer.scrollWidth-a.tableContainer.offsetWidth;return a.tableContainer.scrollLeft=Math.min(t,Math.max(0,a.tableContainer.scrollLeft+e)),a.updateAdornments(),{scrollLeft:a.tableContainer.scrollLeft,maxScroll:a.tableContainer.scrollWidth-a.tableContainer.offsetWidth}}),jv(this,"handleScrollTarget",function(e){var t=a.tableContainer.scrollWidth-a.tableContainer.offsetWidth;a.tableContainer.scrollLeft=Math.min(1,Math.max(0,e))*t,a.updateAdornments()}),jv(this,"handleInsertionClick",function(e,t){if(a.view.editable){var n,r=a.view.state.tr;"column"===e?(ha(r,a.getPos(),t),n=_i.a.AddColumn):(ma(r,a.getPos(),t),n=_i.a.AddRow),a.view.dispatch(Oi(r,_i.b.NoteElementTable,n))}}),jv(this,"handleHandleClick",function(e,t,n,r){if(a.view.editable){var o,i=a.view.state,l=i.tr,s=i.selection,c=Vo.TableMap.get(a.node);if((o="column"===e?c.cellsInRect({top:0,bottom:c.height,left:n,right:n+1}):c.cellsInRect({top:n,bottom:n+1,left:0,right:c.width})).length){if(a.view.tableHandlePressed=t?e:null,t){var u=a.getPos()+2,d=!0;if(o.some(function(e){return!s.ranges.some(function(t){return t.$from.pos==u+e})&&(d=!1,!0)}),d)return}var f,p=a.getPos(),h=l.doc.resolve(p+1+o[o.length-1]),m=l.doc.resolve(p+1+o[0]);f=r&&s instanceof Vo.CellSelection&&Object(Vo.inSameTable)(h,s.$anchorCell)?"column"===e?Vo.CellSelection.colSelection(s.$anchorCell,m):Vo.CellSelection.rowSelection(s.$anchorCell,m):new Vo.CellSelection(h,m),l.setSelection(f),a.view.dispatch(l)}}}),jv(this,"handleTableButtonClick",function(e){a.view.tableHandlePressed=e?"table":null;var t=a.view.state,n=t.tr,r=t.doc;a.view.dispatch(ba(n,r.resolve(a.getPos())))}),jv(this,"handleMenuButtonClick",function(e,t,n){gv(a.view,a.node,e,t,n)}),jv(this,"handleInsertionHover",function(){a.freezeMargins=!0}),jv(this,"handleInsertionUnhover",function(){a.freezeMargins=!1,a.updateMargins(a.options)}),this.node=t,this.view=n,this.getPos=r,this.debounceUpdateAdornments=ve()(this.updateAdornments,0),this.debounceUpdateCellSizes=ve()(this.updateCellSizes,0),this.options=Av(this.node,this.view,o),this.createTable(),this.updateTable(this.options),this.updateAdornments()}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){return e.type===this.node.type&&!this.destroyed&&(this.node=e,this.options=Av(this.node,this.view,t),this.updateTable(this.options),this.debounceUpdateAdornments(),this.debounceUpdateCellSizes(),!0)}},{key:"destroy",value:function(){Dm.a.unmountComponentAtNode(this.uiTable),this.scroller&&this.scroller.destroy(),this.dom.removeEventListener("transitionend",this.debounceUpdateAdornments),this.tableContainer.removeEventListener("scroll",this.debounceUpdateAdornments),this.destroyed=!0}},{key:"selectNode",value:function(){this.dom.classList.toggle("selected",!0)}},{key:"deselectNode",value:function(){this.dom.classList.toggle("selected",!1)}},{key:"ignoreMutation",value:function(e){return"selection"!==e.type&&(this.uiTable.contains(e.target)||e.target===this.tableContainer||this.colgroup.contains(e.target)||e.target===this.table||e.target===this.outline||"attributes"===e.type&&e.target===this.dom)}},{key:"createTable",value:function(){var e=this;this.colgroup=bt()("colgroup",ya(this.node).map(function(t){return bt()("col",{style:e.getColumnElementStyles(t.width,e.options.totalWidth)})}));var t=bt()("tbody");this.table=bt()("table",this.colgroup,t),this.outline=bt()("div",{class:"outline",contenteditable:!1}),this.tableContainer=bt()("div",{class:"container"},this.table),this.dom=bt()("en-table",this.tableContainer,this.outline),this.contentDOM=t,this.scroller=new xv({elt:this.tableContainer,thickness:50,maxSpeed:1,onScroll:function(){return e.debounceUpdateAdornments()}}),this.dom.addEventListener("transitionend",this.debounceUpdateAdornments),this.tableContainer.addEventListener("scroll",this.debounceUpdateAdornments)}},{key:"updateTable",value:function(e){var t=this;for(e.colWidths.forEach(function(e,n){t.colgroup.children.length<n+1?t.colgroup.appendChild(bt()("col",{style:t.getColumnElementStyles(e,t.options.totalWidth)})):t.colgroup.children[n].setAttribute("style",t.getColumnElementStyles(e,t.options.totalWidth))});this.colgroup.children.length>e.colWidths.length;)this.colgroup.removeChild(this.colgroup.lastElementChild);null!=this.node.attrs.borderColor&&(this.table.style.borderColor=this.node.attrs.borderColor,this.outline.style.borderColor=this.node.attrs.borderColor),null!=this.node.attrs.borderWidth&&(this.table.style.borderWidth=this.node.attrs.borderWidth,this.outline.style.borderWidth=this.node.attrs.borderWidth),this.table.style.width="".concat(e.totalWidth,"px"),this.outline.style.maxWidth="".concat(e.totalWidth,"px"),this.freezeMargins||this.updateMargins(e)}},{key:"updateMargins",value:function(e){var t=(e.noteWidth-Math.min(e.availableWidth,e.totalWidth))/2,n=this.node.attrs.textAlign||"left";if(this.dom.style.textAlign="left"!==n?n:"",t<0)switch(e.noteAlign){default:case"center":this.dom.style.marginLeft="".concat(Math.ceil(t),"px"),this.dom.style.marginRight="".concat(Math.floor(t),"px");break;case"left":this.dom.style.marginLeft=0,this.dom.style.marginRight="".concat(2*t,"px");break;case"right":this.dom.style.marginLeft="".concat(2*t,"px"),this.dom.style.marginRight=0}else this.dom.style.marginLeft="left"!==n?"auto":"",this.dom.style.marginRight="center"===n?"auto":""}},{key:"updateCellSizes",value:function(){if(!this.destroyed){var e=this.node,t=this.view,n=this.getPos;if(!Ds.getState(t.state).dragging){for(var r=ya(e),o=Vo.TableMap.get(e),a=n(),i=[],l=[],s=0;s<o.width;s++){for(var c=0,u=0;u<o.height;u++){var d=o.map[u*o.width+s]+a+1,f=t.state.doc.resolve(d).nodeAfter.attrs.colspan,p=o.colCount(d-a-1)+f-1;if(p===s){var h=t.nodeDOM(d).offsetWidth;if(f>1)for(var m=1;m<f;m++){var g=p-f+m;h-=l[g]||r[g].width}c=Math.max(c,h)}}c>r[s].width&&(i.push({col:s,width:c}),l[s]=c)}i.length&&t.dispatch(t.state.tr.setMeta(Ds,{setColumnSizeChanges:i,pos:a}))}}}}])&&Pv(t.prototype,n),r&&Pv(t,r),e}();function Av(e,t,n){var r,o=t.props.getNoteWidth(),a=o.noteWidth,i=o.fullWidth,l=o.noteAlign,s=ya(e).map(function(e){return e.width}),c=n.find(function(e){return e.spec.active}),u=Vo.TableMap.get(e),d=c&&c.spec&&!Number.isNaN(c.spec.headCell)?c.spec.headCell:-1,f=null!=d&&-1!==d?u.findCell(u.map[d]):null,p=n.find(function(e){return e.spec.resizing});p&&p.spec&&(r=p.spec.column>-1?p.spec.column:-1)>-1&&r<s.length&&(p.spec.width>0&&(s[r]=p.spec.width),p.spec.nextWidth>0&&(s[r+1]=p.spec.nextWidth));var h=s.reduce(function(e,t){return e+t},0),m=n.find(function(e){return e.spec.multirange}),g=m&&m.spec&&m.spec.selected||{rows:new Set,cols:new Set},y=g.rows,v=g.cols,b=m&&m.spec&&m.spec.draggable||{rows:new Set,cols:new Set};return{availableWidth:i,noteWidth:a,noteAlign:l,colWidths:s,totalWidth:h,headCell:d,headCellRect:f,resizingColumn:r,selectedRows:y,selectedCols:v,draggableRows:b.rows,draggableCols:b.cols}}function Tv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dv(e){if(!e.size)return null;for(var t=e.content,n=e.openStart,r=e.openEnd;1===t.childCount&&(n>0&&r>0||"table"===t.firstChild.type.spec.tableRole);)n--,r--,t=t.firstChild.content;var o=t.firstChild,a=o.type.spec.tableRole,i=o.type.schema,l=[];if("row"===a)for(var s=0;s<t.childCount;s++){var c=t.child(s).content,u=s?0:Math.max(0,n-1),d=s<t.childCount-1?0:Math.max(0,r-1);(u||d)&&(c=Lv(i.nodes.tr,new Je.Slice(c,u,d)).content),l.push(c)}else{if("cell"!==a&&"header_cell"!==a)return null;l.push(n||r?Lv(i.nodes.tr,new Je.Slice(t,n,r)).content:t)}return function(e,t){for(var n=[],r=0;r<t.length;r++)for(var o=t[r],a=o.childCount-1;a>=0;a--)for(var i=o.child(a).attrs,l=i.rowspan,s=i.colspan,c=r;c<r+l;c++)n[c]=(n[c]||0)+s;for(var u=0,d=0;d<n.length;d++)u=Math.max(u,n[d]);for(var f=0;f<n.length;f++)if(f>=t.length&&t.push(Je.Fragment.empty),n[f]<u){for(var p=e.nodes.td.createAndFill(),h=[],m=n[f];m<u;m++)h.push(p);t[f]=t[f].append(Je.Fragment.from(h))}return{height:t.length,width:u,rows:t}}(i,l)}function Lv(e,t){var n=e.createAndFill();return new sr.Transform(n).replace(0,n.content.size,t).doc}function Rv(e,t,n,r,o,a,i,l){if(0===i||i===t.height)return!1;for(var s=!1,c=o;c<a;c++){var u=i*t.width+c,d=t.map[u];if(t.map[u-t.width]===d){s=!0;var f=n.nodeAt(d),p=t.findCell(d),h=p.top,m=p.left;e.setNodeMarkup(e.mapping.slice(l).map(d+r),null,Fv(f.attrs,"rowspan",i-h)),e.insert(e.mapping.slice(l).map(t.positionAt(i,m,n)),f.type.createAndFill(Fv(f.attrs,"rowspan",h+f.attrs.rowspan-i))),c+=f.attrs.colspan-1}}return s}function Iv(e,t,n,r,o,a,i,l){if(0===i||i===t.width)return!1;for(var s=!1,c=o;c<a;c++){var u=c*t.width+i,d=t.map[u];if(t.map[u-1]===d){s=!0;var f=n.nodeAt(d),p=t.colCount(d),h=e.mapping.slice(l).map(d+r);e.setNodeMarkup(h,null,Bv(f.attrs,i-p,f.attrs.colspan-(i-p))),e.insert(h+f.nodeSize,f.type.createAndFill(Bv(f.attrs,0,i-p))),c+=f.attrs.rowspan-1}}return s}function zv(e,t,n,r,o){var a=n?e.doc.nodeAt(n-1):e.doc,i=Vo.TableMap.get(a),l=r.top,s=r.left,c=s+o.width,u=l+o.height,d=e.tr,f=0;function p(){a=n?d.doc.nodeAt(n-1):d.doc,i=Vo.TableMap.get(a),f=d.mapping.maps.length}(function(e,t,n,r,o,a,i){var l,s,c=e.doc.type.schema.nodes;if(o>t.width)for(var u=0,d=0;u<t.height;u++){var f=n.child(u);d+=f.nodeSize;var p=[],h=void 0;h=null==f.lastChild||f.lastChild.type===c.td?l||(l=c.td.createAndFill()):s||(s=c.th.createAndFill());for(var m=t.width;m<o;m++)p.push(h);e.insert(e.mapping.slice(i).map(d-1+r),p)}if(a>t.height){for(var g=[],y=0,v=(t.height-1)*t.width;y<Math.max(t.width,o);y++){var b=!(y>=t.width)&&n.nodeAt(t.map[v+y]).type===c.th;g.push(b?s||(s=c.th.createAndFill()):l||(l=c.td.createAndFill()))}for(var w=c.tr.create(null,Je.Fragment.from(g)),k=[],_=t.height;_<a;_++)k.push(w);e.insert(e.mapping.slice(i).map(r+n.nodeSize-2),k)}return!(!l&&!s)})(d,i,a,n,c,u,f)&&p(),Rv(d,i,a,n,s,c,l,f)&&p(),Rv(d,i,a,n,s,c,u,f)&&p(),Iv(d,i,a,n,l,u,s,f)&&p(),Iv(d,i,a,n,l,u,c,f)&&p();for(var h=l;h<u;h++){var m=i.positionAt(h,s,a),g=i.positionAt(h,c,a);d.replace(d.mapping.slice(f).map(m+n),d.mapping.slice(f).map(g+n),new Je.Slice(o.rows[h-l],0,0))}p(),d.setSelection(new Vo.CellSelection(d.doc.resolve(n+i.positionAt(l,s,a)),d.doc.resolve(n+i.positionAt(u-1,c-1,a)))),t(d)}function Bv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=Fv(e,"colspan",e.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(t,n),r.colwidth.some(function(e){return e>0})||(r.colwidth=null)),r}function Fv(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tv(n,!0).forEach(function(t){Nv(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tv(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,Nv({},t,n))}function Wv(e,t,n){if(!(e.dragging&&n instanceof Vo.CellSelection))return null;var r=Et(t.target,function(e){return e&&"EN-TABLE"===e.tagName},null,!0);if(!r)return null;var o,a,i=e.dragging,l=i.tableDrag,s=i.tableDragCount,c=[],u=Ct(r,t);return"column"===l?(c.push(bt()("div",{class:"ghost_EnTableColumn"})),a=Math.max(u.y,0)):"row"===l?(c.push(bt()("div",{class:"ghost_EnTableRow"})),o=Math.max(u.x,0)):"table"===l?(c.push(bt()("div",{class:"ghost_EnTableFull"},[bt()("div",{class:"ghost_EnTableSides"}),bt()("div",{class:"ghost_EnTableHandle"}),bt()("div",{class:"ghost_EnTableCells"})])),o=Math.max(u.x,0),a=Math.max(u.y,0)):(c.push(bt()("div",{class:"ghost_EnTableCells"})),o=Math.max(u.x,0),a=Math.max(u.y,0)),s>0&&c.push(bt()("div",{class:"ghost_EnTableCount"},s)),{element:bt.a.apply(void 0,["en-table",{class:"ghost__EnTable"}].concat(c)),x:function(){return o},y:function(){return a}}}function Hv(e,t,n,r,o){var a=e.state.doc.resolve(t),i=e.dragging;if(!i)return null;i.tableDropPos=null;var l,s=Yy(e,{clientX:n+80,clientY:r}),c=Yy(e,{clientX:n-80,clientY:r}),u=Yy(e,{clientX:n,clientY:r+0});if(aa(a)&&(l=a),!l&&aa(s)&&(l=s),!l&&aa(c)&&(l=c),!l&&aa(u)&&(l=u),!l)return null;var d=ia(l),f=d.node,p=d.pos,h=e.nodeDOM(p+1).getBoundingClientRect(),m=e.nodeDOM(p+f.nodeSize-f.lastChild.nodeSize-1).getBoundingClientRect(),g={left:h.left,right:h.right,top:h.top,bottom:m.bottom};if("column"===i.tableDrag){var y,v=ya(f),b=g.left;for(y=0;y<v.length;y++){var w=v[y].width;if(n<b+w/2)break;b+=w}return i.tableDropPos=p,i.tableDropIndex=y,{target:"table ".concat(p," col ").concat(y),getRect:function(){return{left:b-o/2,right:b+o/2,top:g.top,bottom:g.bottom}}}}if("row"===i.tableDrag){var k,_=function(e,t,n){for(var r=n+1,o=[],a=0;a<t.childCount;a++){var i=e.nodeDOM(r);if(i instanceof HTMLElement){var l=i.getBoundingClientRect();o.push({height:l.height}),r+=t.child(a).nodeSize}}return o}(e,f,p),O=g.top;for(k=0;k<_.length;k++){var C=_[k].height;if(r<O+C/2)break;O+=C}return i.tableDropPos=p,i.tableDropIndex=k,{target:"table ".concat(p," row ").concat(k),getRect:function(){return{left:g.left,right:g.right,top:O-o/2,bottom:O+o/2}}}}if(i.slice){var S=i.slice.content.firstChild;if(i.slice.openStart<3&&S&&"tableRole"in S.type.spec){var x=e.posAtCoords({left:n,top:r})||{pos:0,inside:-1},E=x.pos,P=x.inside,j=P>-1?P:E,M=e.state.doc.resolve(j);if(aa(M)){var A=qv(e,e.nodeDOM(j));if(A)return{target:"table ".concat(p," pos ").concat(j),getRect:function(){var t=Dv(i.slice)||{width:1,height:1},n=t.width,r=t.height,o=Vo.TableMap.get(f),a=o.findCell(la(M,!0).pos-p-1),l=a.left+n-1,s=a.top+r-1,c=l>=o.width,u=s>=o.height;c&&(l=o.width-1),u&&(s=o.height-1);var d=qv(e,e.nodeDOM(p+1+o.map[s*o.width+l]+1)),h=A.getBoundingClientRect(),m=d.getBoundingClientRect();return{class:"rectangle"+(c?" overX":"")+(u?" overY":""),parent:e.nodeDOM(p).querySelector("ui-table ."+iv.a.contentContainer),left:h.left,right:m.right,top:h.top,bottom:m.bottom}}}}}}return a.nodeAfter&&"tr"===a.nodeAfter.type.name||a.nodeBefore&&"tr"===a.nodeBefore.type.name?{target:null,getRect:null}:null}function $v(e,t,n,r){var o=Yy(e,t),a=new lo(e,{dropPoint:r.tableDropPos?e.state.doc.resolve(r.tableDropPos+3):o}),i=a.state.selection,l=r.tableDropIndex;if(r.move&&i instanceof Vo.CellSelection){var s=ia(a.$.dropPoint);if("column"===r.tableDrag){var c=Vv(a.state),u=c.right-c.left;if(s&&s.pos===c.tableStart-1&&c.left<l&&(l=Math.max(0,l-u)),!Object(Vo.deleteColumn)(a.state,a.dispatch)){if((s&&s.pos)===c.tableStart-1)return a.commit(!0);a.dispatch(a.state.tr.delete(c.tableStart-1,c.tableStart-1+c.table.nodeSize))}r.move=!1}else if("row"===r.tableDrag){var d=Vv(a.state),f=d.bottom-d.top;if(s&&s.pos===d.tableStart-1&&d.top<l&&(l=Math.max(0,l-f)),!Object(Vo.deleteRow)(a.state,a.dispatch)){if((s&&s.pos)===d.tableStart-1)return a.commit(!0);a.dispatch(a.state.tr.delete(d.tableStart-1,d.tableStart-1+d.table.nodeSize))}r.move=!1}else if(i.isColSelection()&&i.isRowSelection()){var p=a.state.doc.resolve(ia(a.state.selection.$anchor,!0).pos);s&&p.pos===s.pos||a.dispatch(a.state.tr.setSelection(new Se.NodeSelection(p)))}var h=a.state.doc.resolve(ia(a.state.selection.$anchor,!0).pos);a.dispatch(Ws(a.state.tr,h))}if(!aa(a.$.dropPoint))return{tr:a.tr};if(!la(a.$.dropPoint)&&"column"!==r.tableDrag&&"row"!==r.tableDrag){var m=n?Object(sr.dropPoint)(e.state.doc,o.pos,n):null;return null==m||aa(e.state.doc.resolve(m))?a.commit(!0):{tr:a.tr}}var g=Dv(n);if(!g)return a.commit(!1);if("column"===r.tableDrag){for(var y=ia(a.$.dropPoint).pos,v=0;v<g.width;v++)a.dispatch(ha(a.state.tr,y,l));var b=ia(a.$.dropPoint),w=b.node,k=b.pos,_=Vo.TableMap.get(w).map[l]+k+1;a.$.dropPoint=a.state.doc.resolve(_+1)}else if("row"===r.tableDrag){for(var O=ia(a.$.dropPoint).pos,C=0;C<g.height;C++)a.dispatch(ma(a.state.tr,O,l));var S=ia(a.$.dropPoint),x=S.node,E=S.pos,P=Vo.TableMap.get(x),j=P.map[l*P.width]+E+1;a.$.dropPoint=a.state.doc.resolve(j+1)}else r.move&&a.dispatch(a.state.tr.deleteSelection());var M=a.state.doc.resolve(la(a.$.dropPoint).pos),A=M.start(-1),T=Vo.TableMap.get(M.node(-1)).findCell(M.pos-A);zv(a.state,a.dispatch,A,T,g);var N=a.state.doc.resolve(ia(a.$.dropPoint).pos);return a.dispatch(Ws(a.state.tr,N)),a.commit(!0)}function qv(e,t){for(;t&&t!==e.dom;t=t.parentNode)if(t instanceof HTMLTableCellElement)return t;return null}function Vv(e){var t,n=e.selection,r=Object(Vo.selectionCell)(e),o=r.node(-1),a=r.start(-1),i=Vo.TableMap.get(o);return(t=n instanceof Vo.CellSelection?i.rectBetween(n.$anchorCell.pos-a,n.$headCell.pos-a):i.findCell(r.pos-a)).tableStart=a,t.map=i,t.table=o,t}var Uv=new Se.PluginKey("table"),Kv="table-nav",Yv=function(){return new Se.Plugin({key:Uv,props:{decorations:function(e){return Uv.getState(e).decos},nodeViews:{table:function(e,t,n,r){return new Mv(e,t,n,r)}},handleKeyDown:Object(Ly.keydownHandler)({Backspace:wa,"Mod-Backspace":wa,Delete:wa,"Mod-Delete":wa}),handleDOMEvents:{mousedown:function(e,t){return!(2!==t.button||!aa(Yy(e,t),!0))||(3===t.detail?Zv(e,t):2!==t.detail&&(t.ctrlKey||t.metaKey?Zv(e,t):(xt(t.target,function(e){return e instanceof HTMLElement&&"UI-TABLE"===e.tagName})&&!function(e){for(;e;){var t=e.getAttribute("draggable");if("true"===t)return!0;if("false"===t)return!1;e=e.parentElement}return!1}(t.target)&&t.preventDefault(),!!Ae.isFirefox&&Jv(e,t))))},selectstart:function(e,t){var n=Jv(e,t);return n&&t.preventDefault(),n}},handleClick:function(e,t,n){return!!xt(n.target,function(e){return e instanceof HTMLElement&&"UI-TABLE"===e.tagName})},getDragImage:Wv,handleDropCursor:Hv,handleDropEvent:$v,handlePaste:function(e,t,n){if(e.dragging){var r=e.coordsAtPos(e.state.selection.from),o={clientX:(r.left+r.right)/2,clientY:(r.top+r.bottom)/2},a=e.dragging;return e.dragging=null,!0===this.spec.props.handleDropEvent(e,o,n,a)}return!1},handleScrollToSelection:function(e){function t(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}var n=e.state.selection;if(!(n instanceof Se.TextSelection))return!1;var r=e.coordsAtPos(n.head);if(r.left>10&&r.right<innerWidth-10&&r.top>10&&r.bottom<innerHeight-10)return!1;var o=la(n.$from),a=la(n.$to);if(!o)return!1;if(o.pos!==a.pos)return!1;var i=e.nodeDOM(o.pos),l=e.nodeDOM(ia(e.state.doc.resolve(o.pos)).pos).querySelector(".container"),s=document.scrollingElement,c=i.getBoundingClientRect(),u=l.getBoundingClientRect(),d=s.getBoundingClientRect();return c.left<u.left?t(l,-(u.left-c.left+10),0):c.right>u.right&&t(l,c.right-u.right+10,0),c.top<0?t(s,0,c.top-10):c.bottom>d.height&&t(s,0,c.bottom-d.height+10),!0}},state:{init:function(){return{decos:xe.DecorationSet.empty,wasTableNavigation:!1}},apply:function(e,t,n,r){var o=[],a=e.selection,i=a.$from,l=a.$to,s=lt(i,ra),c=lt(l,ra),u=!1;if(s&&c&&s.pos===c.pos){var d=s.pos,f=d+s.nodeAfter.nodeSize,p=da(e.selection),h=p.selected,m=p.draggable,g=p.headCell,y=Xl.getState(r).editable,v=e.getMeta(Kv),b=e.getMeta("pointer");u=v?v.wasTabPressed:!(b||e.docChanged||e.selectionSet)&&(t&&t.wasTableNavigation),y&&o.push(xe.Decoration.node(d,f,{class:"active"},{active:!0,headCell:g})),e.selection instanceof Vo.CellSelection&&o.push(xe.Decoration.node(d,f,{class:"multirange"},{multirange:!0,selected:h,draggable:m}))}return{decos:o.length>0?xe.DecorationSet.create(e.doc,o):null,wasTableNavigation:u}}},appendTransaction:function(e,t,n){var r=null;if(e.some(function(e){return e.docChanged})&&(r=Object(Vo.fixTables)(n,t),e[0].getMeta("paste"))){var o=oo(e);r=r||n.tr,ot(o,n.doc,function(e){return ra(e.nodeAfter)}).forEach(function(e){Ws(r,e)})}if(r=r||n.tr,!t.selection.eq(r.selection)){var a=r.selection,i=a.$from,l=a.$to,s=a.$anchor,c=a.$head,u=lt(i,ra),d=lt(l,ra);if(u||d)if((u&&u.pos)!==(d&&d.pos)){var f=u||i,p=d?n.doc.resolve(d.pos+d.nodeAfter.nodeSize):l;r.setSelection(new Se.TextSelection(i===s?f:p,i===s?p:f))}else if(!(n.selection instanceof Vo.CellSelection)){var h=lt(s,sa),m=lt(c,sa);h&&h.pos!==(m&&m.pos)&&r.setSelection(new Vo.CellSelection(h,h))}}return r.docChanged||r.selectionSet?r:null}})};function Xv(e,t){for(;t&&t!==e.dom;t=t.parentNode)if("TD"===t.nodeName||"TH"===t.nodeName)return t;return null}function Zv(e,t){if(Xv(e,t.target)){var n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n)return!1;var r=e.state,o=r.doc,a=r.tr,i=r.selection,l=Object(Vo.cellAround)(o.resolve(n.pos));return i instanceof Vo.CellSelection&&i.$anchorCell.node(-1)===l.node(-1)?a.setSelection(new Vo.CellSelection(i.$anchorCell,l)):a.setSelection(new Vo.CellSelection(l,l)),e.dispatch(a),t.preventDefault(),!0}return!1}function Gv(e,t){if(!Xv(e,t))return null;var n=e.posAtDOM(t,0);if(!n)return null;var r=e.state,o=r.doc,a=r.selection,i=Object(Vo.cellAround)(o.resolve(n));return i&&a instanceof Vo.CellSelection&&a.ranges.some(function(e){return e.$from.pos===i.pos+1})?i:null}function Jv(e,t){var n,r,o=!1;function a(){o=!0}function i(l){if(e.root.removeEventListener("mouseup",i),e.root.removeEventListener("dragend",i),e.root.removeEventListener("dragstart",a),e.domObserver.stop(),n.removeAttribute("draggable"),e.domObserver.start(),!o){var s=Gv(e,t.target);if(s&&r.pos===s.pos){var c=e.posAtCoords({left:l.clientX,top:l.clientY});e.dispatch(e.state.tr.setSelection(Se.TextSelection.create(e.state.doc,c?c.pos:e.posAtDOM(t.target,0))))}}}return!!(r=Gv(e,t.target))&&(n=e.nodeDOM(ia(r).pos),e.domObserver.stop(),n.draggable=!0,e.domObserver.start(),e.root.addEventListener("mouseup",i),e.root.addEventListener("dragend",i),e.root.addEventListener("dragstart",a),!0)}var Qv={"Shift-Tab":eb.bind(null,-1),Tab:eb.bind(null,1)};function eb(e,t,n,r){var o=t.schema,a=t.selection,i=a.$from,l=a.$to,s=lt(i,function(e){return e.type===o.nodes.th||e.type===o.nodes.td}),c=lt(l,function(e){return e.type===o.nodes.th||e.type===o.nodes.td});if(s&&c&&s.sameParent(c)){var u=Uv.getState(t),d=function(e){return u.wasTableNavigation&&e.setMeta(Kv,{wasTabPressed:!0}),n(e)};return ka(e)(t,d)||1!==e||(Object(Vo.addRowAfter)(t,d),ka(e)(r.state,d)),!0}return!1}var tb={Tab:nb.bind(null,1),"Shift-Tab":nb.bind(null,-1)};function nb(e,t,n,r){if(!(t.selection instanceof Se.TextSelection||t.selection instanceof Se.AllSelection))return!1;var o,a=t.selection,i=a.$from,l=a.empty,s=gc(t.doc,t.selection.ranges[0]),c=s.listItems,u=s.paragraphs;if(i&&aa(i)){if(null!=(o=i)&&o.pos===o.start()&&Qe(o.node(-1),"listitem")&&o.start(-1)===o.before()){var d=Uv.getState(t);return d&&d.wasTableNavigation?rb(e,t,n,r):hf(e>0?"indent":"outdent",null,t,n,r),!0}return rb(e,t,n,r)}return e>=1&&(t.selection instanceof Se.AllSelection||c.length>0||Ta(i)||u.length>1||!l&&u.length||l&&u[0]&&i.pos===u[0].pos+1)?(hf("indent",null,t,n,r),!0):e<=-1&&(hf("outdent",null,t,n),!0)}function rb(e,t,n,r){return eb(e,t,function(e){return e.setMeta(Kv,{wasTabPressed:!0}),n(e)},r),!0}var ob={Backspace:function(e,t,n){var r=e.selection.$cursor;if(null!=r&&null==r.nodeBefore&&r.node().isTextblock&&r.node().attrs.indent>0)return hf("outdent",null,e,t,n);return!1},Enter:function(e,t,n){var r=e.selection,o=r.$from,a=r.$to;if(!(e.selection instanceof Se.TextSelection&&o.sameParent(a)))return!1;if(!o.parent.content.size){var i=Xs(o)||{},l=i.node;if(!l||!l.attrs.indent)return!1}return ab(e,t,!0)},"Shift-Enter":function(e,t){var n=e.selection,r=n.$from,o=n.$to;if(!(e.selection instanceof Se.TextSelection&&r.parent.content.size&&r.sameParent(o)))return!1;return ab(e,t,!0,!1)}};function ab(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.tr,a=e.selection,i=a.$from,l=a.$to,s=o.storedMarks;o.delete(i.pos,l.pos);var c=l.pos===i.end()?i.parent:null;r&&c&&"h"===c.type.name&&(c=e.schema.nodes.p.create());var u=c&&[{type:c.type,attrs:c.attrs},null];return!!Object(sr.canSplit)(o.doc,i.pos,1,u)&&(o.split(i.pos,1,u),n&&(s=(s=s||i.nodeBefore&&i.nodeBefore.marks||[]).filter(function(e){return!1!==e.type.spec.inclusive}),o.setStoredMarks(s)),o.scrollIntoView(),t(o),!0)}var ib={" ":function(e,t,n){var r=e.selection,o=e.schema;if(!(r instanceof Se.NodeSelection))return!1;var a=r.$from.nodeAfter;if(!a)return!1;switch(a.type){case o.nodes.img:case o.nodes.image:return Zu(n,r.$from),!0;case o.nodes.file:return Oo(n,a,"space"),!0;case o.nodes.foreigncontent:var i=r.from,l=e.tr;return l=Ma(l=qr(l,i),i,i+1),t(l),!0;case o.nodes.table:var s=ct(a,function(e){return"cell"===e.type.spec.tableRole});if(s){var c=e.tr;t(c.setSelection(Se.TextSelection.create(c.doc,r.from+s.pos)))}return!0;default:return!1}},Backspace:function(e,t,n){var r=e.selection,o=e.tr;if(!(r instanceof Se.TextSelection))return!1;if(!r.$cursor)return!1;if(r.$cursor.nodeBefore)return!1;var a=lt(r.$cursor,function(e){return e.isTextblock});if(!a.nodeBefore||!a.nodeBefore.type.spec.selectOnDelete)return!1;if(0===a.nodeAfter.childCount){var i=o.doc.resolve(a.pos+a.nodeAfter.nodeSize);i.nodeAfter&&i.nodeAfter.type.spec.selectOnDelete&&o.delete(a.pos,i.pos)}return o.setSelection(new Se.NodeSelection(o.doc.resolve(a.pos-a.nodeBefore.nodeSize))),t(o),!0},Delete:function(e,t,n){var r=e.selection,o=e.tr;if(!(r instanceof Se.TextSelection))return!1;if(!r.$cursor)return!1;if(r.$cursor.nodeAfter)return!1;var a=lt(r.$cursor,function(e){return e.isTextblock});if(!a.nodeAfter)return!1;var i=o.doc.resolve(a.pos+a.nodeAfter.nodeSize);if(!i.nodeAfter||!i.nodeAfter.type.spec.selectOnDelete)return!1;0===a.nodeAfter.childCount&&a.nodeBefore&&a.nodeBefore.type.spec.selectOnDelete&&o.delete(a.pos,i.pos);return o.setSelection(Se.NodeSelection.create(o.doc,o.mapping.map(i.pos))),t(o),!0},"Shift-Enter":function(e,t,n){var r=e.selection,o=e.schema,a=e.tr;if(!(r instanceof Se.NodeSelection))return!1;if(!r.node.type.spec.selectOnDelete)return!1;var i=r.$from.pos;return a.insert(i,o.nodes.p.create()),a.setSelection(Se.TextSelection.create(a.doc,i+1)),t(a),!0}};var lb=new Se.PluginKey("bookend"),sb=function(){return new Se.Plugin({appendTransaction:function(e,t,n){var r=ub(oo(e),n.tr);return(r=cb(r)).setMeta(lb,!0),r&&r.docChanged?r:null}})},cb=function(e){var t=e.doc,n=t.firstChild,r=t.lastChild,o=e.doc.type.schema;return pb(r)||e.insert(e.doc.content.size,o.nodes.p.create()),pb(n)||e.insert(0,o.nodes.p.create()),e},ub=function(e,t){return ot(e,t.doc,function(e){return fb(e.nodeAfter)||fb(e.nodeBefore)},{shallow:!0}).forEach(function(e){t=db(t,ft(t,e.pos))}),t},db=function(e,t){var n=e.doc.type.schema;return(fb(t.nodeAfter)&&!pb(t.nodeBefore)||fb(t.nodeBefore)&&!pb(t.nodeAfter))&&e.insert(t.pos,n.nodes.p.create()),e},fb=function(e){return Boolean(e&&e.type.spec.addBookends)},pb=function(e){return Boolean(e&&(e.isTextblock||e.type.spec.isBookend))},hb=function(e){var t=[],n=!1;Array.from(e.querySelectorAll("p")).forEach(function(e){1===Mt(e)&&"O:P"===e.firstChild.tagName&&(n=!0,Tt(e.firstChild),e.appendChild(document.createElement("br")),At(e,"div"))}),Array.from(e.querySelectorAll('div[style*="mso-line-break-override"]')).forEach(function(e){var r=1+((parseFloat(e.style.marginLeft)+parseFloat(e.style.textIndent))/.5||0),o=e.querySelectorAll('span[style*="mso-special-format"]');if(o.length>0){var a;n=!0;var i="ul";"bullet"!==br(o[0].getAttribute("style"),"mso-special-format").toLowerCase()&&(i="ol"),1===Mt(o[0].parentNode)?(a=!0,Tt(o[0].parentNode)):Tt(o[0]),mb(e,t,r,i,a)}});var r=/level([0-9]+)/,o=/ignore/i;return Array.from(e.querySelectorAll("div[style*=mso], p[style*=mso]")).forEach(function(e){var a=(br(e.getAttribute("style"),"mso-list")||"").toLowerCase().match(r);if(n=!0,a){var i=parseInt(a.pop(),10);a.pop();if(!window.isNaN(i)){var l="ul",s=e.querySelectorAll('span[style*="mso-list:"]');s&&Array.from(s).forEach(function(){var e=s[0];br(e.getAttribute("style"),"mso-list").toLowerCase().match(o)&&("o"!==e.textContent.trim()&&e.textContent.match(/[0-9a-z]+.*/g)&&(l="ol"),"SPAN"===e.parentNode.tagName&&1===Mt(e.parentNode)?Tt(e.parentNode):Tt(e))}),mb(e,t,i,l)}}else mb(e,t)}),n?e:null};function mb(e,t,n,r,o){var a=function(e,t,n,r){if(void 0===n)return t.slice(-1).pop();for(var o,a=null;!a&&t.length;)(a=t.pop()).level===n?a.tagName===r.toUpperCase()?t.push(a):(o=a.parentNode,(a=document.createElement(r)).level=n,t.push(a),o.appendChild(a)):a.level<n?(t.push(a),o=a,(a=document.createElement(r)).level=n,t.push(a),o.appendChild(a)):a=null;return a||((a=document.createElement(r)).level=n,t.push(a),e.parentNode.insertBefore(a,e)),a}(e,t,n,r);if(Array.from(e.getElementsByTagName("o:p")).forEach(function(e){Tt(e)}),a&&e.getAttribute("style")){!function(e){e&&(Array.isArray(e)?e:[e]).forEach(function(e){e.parentNode.removeChild(e)})}(e);var i=e;if(o||br(e.getAttribute("style"),"mso-list"))e=At(e,"div"),(i=document.createElement("li")).appendChild(e);else{var l=a.lastElementChild;l&&(a=l)}e.removeAttribute("style"),a.appendChild(i)}else e.removeAttribute("style")}var gb=function(e){var t=!1;return Array.from(e.querySelectorAll("table > caption")).forEach(function(e){var n=e.closest("table");if(n&&n.parentNode){t=!0;var r=document.createElement("div");r.innerHTML=e.innerHTML,r.style.textAlign="center",n.parentNode.insertBefore(r,n),e.remove()}}),t?e:null},yb=function(e){var t=!1;return Array.from(e.querySelectorAll('a[style*="background: linear-gradient"]')).forEach(function(e){var n=e.style.background,r=n.replace(/^linear-gradient\(transparent, transparent\)([^,]+),\s*(url\(.*\))$/,function(e,t,n){return n+t});if(n!==r){e.style.background=r;var o=document.createElement("span");o.style.whiteSpace="normal",o.innerHTML=" &nbsp;",e.parentElement.insertBefore(o,e.nextSibling),t=!0}}),t?e:null};function vb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var bb=new Se.PluginKey("clipboard"),wb=function(){return new Se.Plugin({key:bb,props:{handleDOMEvents:{paste:function(e,t){return t.preventDefault(),!0}},transformPastedHTML:function(e){var t=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)n.firstChild.nodeType===Node.TEXT_NODE&&0===n.firstChild.textContent.trim().length?Tt(n.firstChild):t.appendChild(n.firstChild);return t}(e),n=Object.keys(ge).reduce(function(e,n){return ge[n](e||t)||e},null);return n?function(e){for(var t=document.createElement("div");e.firstChild;)t.append(e.firstChild);return t.innerHTML}(n):e},transformPasted:function(e){var t,n=(t=Vi,Vi={},t);return null!=n.openStart&&(e.openStart=Math.min(e.openStart,n.openStart),e.openEnd=Math.min(e.openEnd,n.openEnd)),e},transformPastedSlice:function(e,t,n){var r=t.state;return e=ri(e,r,n)},clipboardTextParser:function(e,t){var n=[],r=t.doc.type.schema;return e.trim().split(/(?:\r\n?|\n)/).forEach(function(e){n.push(e.length?r.nodes.p.create(null,Je.Fragment.from(r.text(e))):r.nodes.p.create())}),new Je.Slice(Je.Fragment.from(n),0,0)},clipboardTextSerializer:function(e){var t=e.content.size,n="",r=!1;return e.content.nodesBetween(0,t,function(e,o){e.isText?(n+=e.text.slice(Math.max(0,o)-o,t-o),r=!0):"foreigncontent"===e.type.name?n+=pi(e.attrs.content):e.isBlock&&r&&(r=!1,n+="\n"),e.isBlock&&!e.content.size&&(n+="\n")},0),n}},appendTransaction:function(e,t,n){if(!e.some(function(e){return e.getMeta("naturalizePasting")}))return null;var r=n.tr,o=e.reduce(function(e,t){return e.concat(oo(t))},[]).reduce(function(e,t){var r=t.from,o=t.to;return e.concat(Vr(Se.TextSelection.create(n.doc,r,o)))},[]);return o.length&&(r=n.tr,r=Object(as.closeHistory)(r),o.forEach(function(e){if(we()(e,"nodeAfter.attrs.simplifyOnPaste")){var t=vb(oo(r=qr(r,e.pos)),1)[0],o=r.doc.slice(t.from,t.to);o=ri(o,n,{}),r.replaceRange(t.from,t.to,o),r=Ma(r,e.pos,e.pos+1)}})),r}})},kb=new Se.PluginKey("codeblock"),_b=function(){return new Se.Plugin({key:kb,props:{handleKeyDown:Object(Ly.keydownHandler)({Backspace:Ob,"Mod-Backspace":Ob,Delete:Cb,Enter:Sb})}})};function Ob(e,t,n){var r=function(e,t,n){var r=e.doc,o=e.schema,a=e.tr,i=e.selection.$cursor;if(null==i||null!=i.nodeBefore||i.node().type!==o.nodes.plaintext||i.node(-1).type!==o.nodes.codeblock||i.start(-1)!==i.before())return!1;var l=r.resolve(i.before(-1)),s=l.nodeAfter,c=i.node(),u=[o.nodes.p.create(null,c.content)];s.childCount>1&&u.push(s.copy(Je.Fragment.from(s.content.content.slice(1))));var d=new Je.Slice(Je.Fragment.from(u),0,0),f=l.pos,p=l.pos+s.nodeSize,h=l.nodeBefore;h&&h.type===o.nodes.p&&0===h.childCount&&l.pos-h.nodeSize==0&&(f-=h.nodeSize);if(1===s.childCount){var m=l.pos+s.nodeSize,g=r.resolve(m).nodeAfter;g&&g.type===o.nodes.plaintext&&0===g.childCount&&m+g.nodeSize===r.nodeSize-2&&(p=m+g.nodeSize)}return a.replace(f,p,d),a.setSelection(Se.TextSelection.create(a.doc,f+1)),t(a),!0}(e,t);return r||(r=function(e,t,n){var r=e.doc,o=e.schema,a=e.tr,i=e.selection.$cursor;if(null==i||null!=i.nodeBefore||i.node().type!==o.nodes.p||null==r.resolve(i.before()).nodeBefore||r.resolve(i.before()).nodeBefore.type!==o.nodes.codeblock)return!1;var l=r.resolve(i.before()).nodeBefore,s=new Je.Slice(Je.Fragment.from(l.copy(Je.Fragment.from(i.node()))),2,0),c=i.before()-2,u=i.after();return a.replace(c,u,s),a.setSelection(Se.TextSelection.create(a.doc,c)),t(a),!0}(e,t)),r}function Cb(e,t,n){var r=e.doc,o=e.schema,a=e.tr,i=e.selection.$cursor;if(!i||i.pos!==i.end())return!1;var l=r.resolve(i.after()),s=l.nodeAfter;if(!s||s.type!==o.nodes.codeblock)return!1;var c=s,u=l,d=[c.child(0)];c.childCount>1&&d.push(c.copy(Je.Fragment.from(c.content.content.slice(1))));var f=new Je.Slice(Je.Fragment.from(d),1,1),p=i.pos,h=u.pos+c.nodeSize;return a.replace(p,h,f),a.setSelection(Se.TextSelection.create(a.doc,p)),t(a),!0}function Sb(e,t,n){e.doc;var r=e.schema,o=(e.tr,e.selection.$cursor);return null!=o&&o.node(-1).type===r.nodes.codeblock&&ab(e,t,n)}function xb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Eb(this,"node",void 0),Eb(this,"view",void 0),Eb(this,"getPos",void 0),Eb(this,"options",void 0),Eb(this,"decorations",void 0),Eb(this,"component",void 0),Eb(this,"componentProps",void 0),Eb(this,"stopEvent",void 0),Eb(this,"selected",!1),Eb(this,"id",Ge()()),Eb(this,"dom",void 0),Eb(this,"contentDOM",void 0);var n=t.node,r=t.view,o=t.getPos,a=t.options,i=void 0===a?{}:a,l=t.decorations,s=t.component,c=t.componentProps,u=void 0===c?{}:c,d=t.stopEvent;this.node=n,this.view=r,this.getPos=o,this.options=i,this.decorations=l,this.component=s,this.componentProps=u,this.stopEvent=d,this.id=Ge()(),this.options.inline?(this.dom=bt()("span"),this.contentDOM=n.isLeaf?null:bt()("span")):(this.dom=bt()("div"),this.contentDOM=n.isLeaf?null:bt()("div")),this.createNodeView()}var t,n,r;return t=e,(n=[{key:"createNodeView",value:function(){Object(Me.dispatch)(Pe.createNodeView({id:this.id,dom:this.dom,contentDOM:this.contentDOM,selected:this.selected,node:this.node,view:this.view,getPos:this.getPos,options:this.options,decorations:this.decorations,component:this.component,componentProps:this.componentProps}))}},{key:"updateNodeView",value:function(){Object(Me.dispatch)(Pe.updateNodeView({id:this.id,dom:this.dom,contentDOM:this.contentDOM,selected:this.selected,node:this.node,view:this.view,getPos:this.getPos,options:this.options,decorations:this.decorations,component:this.component,componentProps:this.componentProps}))}},{key:"update",value:function(e,t){return e.type===this.node.type&&(this.node=e,this.decorations=t,this.updateNodeView(),!0)}},{key:"destroy",value:function(){Object(Me.dispatch)(Pe.destroyNodeView(this.id))}},{key:"selectNode",value:function(){this.selected=!0,this.updateNodeView()}},{key:"deselectNode",value:function(){this.selected=!1,this.updateNodeView()}}])&&xb(t.prototype,n),r&&xb(t,r),e}(),jb=n(1721),Mb=n.n(jb),Ab=n(1139);function Tb(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Nb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Db(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=Object(Tm.c)(),o=Object(Tm.d)(Gi.getInteraction);Object(Pm.useEffect)(function(){var t=null;return e&&o.menu&&(t=r(Pe.createMenu(n))),function(){return t&&r(Pe.cleanupMenu(t))}},t)}function Lb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=n.targetElement,o=n.popoverItems,a=void 0===o?[]:o,i=n.overflowMenuItems,l=void 0===i?[]:i,s=Nb(Object(Pm.useState)(!1),2),c=s[0],u=s[1],d=Nb(Object(Pm.useState)({xPosition:null,yPosition:null}),2),f=d[0],p=d[1];Object(Pm.useEffect)(function(){!e&&c&&u(!1)},[e]),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=Object(Tm.c)(),o=Object(Tm.d)(Gi.getInteraction);Object(Pm.useEffect)(function(){var t=null;return e&&o.popover&&(t=r(Pe.createPopoverMenu(n))),function(){return t&&r(Pe.cleanupPopoverMenu(t))}},t)}(e,t,{targetElement:r,items:[].concat(Tb(a),[{enabled:!0,label:fh.a.t("More Options"),icon:Ab.a,action:function(e,t){p({xPosition:e,yPosition:t}),u(!0)}}])}),Db(c,[e,c,f.xPosition,f.yPosition],{xPosition:f.xPosition,yPosition:f.yPosition,items:l})}function Rb(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Ib(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Rb(a,r,o,i,l,"next",e)}function l(e){Rb(a,r,o,i,l,"throw",e)}i(void 0)})}}function zb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Bb=function(e){var t,n,r=e.node,o=e.selected,a=(e.getPos,e.decorations),i=e.viewFocus,l=e.ackAction,s=e.setRevealed,c=e.replaceWith,u=r.attrs,d=u.ciphertext,f=u.plaintext,p=u.hint,h=u.revealed,m=!0,g=Object(Pm.useRef)(null),y=Object(Pm.useRef)(null),v=zb(Object(Pm.useState)(!1),2),b=v[0],w=v[1];Object(Pm.useEffect)(function(){a&&(a.some(function(e){return e.spec.action})&&(w(!0),setTimeout(l)),a.some(function(e){return e.spec.hide})&&s(!1))},[a]),Object(Pm.useEffect)(function(){var e=y.current;if(e){for(;e.firstChild;)e.firstChild.remove();""!==f&&e.appendChild(function(e){var t=Ao(e),n=document.createElement("div");n.innerHTML=t;var r=ir.fromSchema(gn).parse(n);return Je.DOMSerializer.fromSchema(gn).serializeFragment(r)}(f))}},[f,y.current]),Db(b,[b,g.current],{anchorElement:g.current,xPosition:-4,yPosition:1,onClose:function(){w(!1),m&&setTimeout(i)},items:[h?{enabled:!0,type:"item",label:"Hide content",action:function(){s(!1)}}:{enabled:!0,type:"item",label:"Reveal encrypted content...",action:(n=Ib(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=10;break}return m=!1,e.next=4,ym(d,p,!1);case 4:if(t=e.sent,m=!0,t){e.next=9;break}return i(),e.abrupt("return");case 9:f=t;case 10:s(!0,f),i();case 12:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})},{enabled:!0,type:"item",label:"Decrypt permanently...",action:(t=Ib(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m=!1,e.next=3,ym(d,p,!0);case 3:if(t=e.sent,m=!0,t){e.next=8;break}return i(),e.abrupt("return");case 8:c(f=t),i();case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})}]});var k=Object(Um.a)(Mb.a.crypt,o&&Mb.a.selected,h&&Mb.a.revealed);return jm.a.createElement(jm.a.Fragment,null,jm.a.createElement("span",{className:"cursor-helper"},Xa),jm.a.createElement("div",{className:k,onClick:function(e){g.current.contains(e.target)||!h?w(!0):h&&(y.current.focus(),e.stopPropagation())},onKeyDown:function(e){" "===e.key&&(w(!0),e.preventDefault(),e.stopPropagation())}},h?jm.a.createElement(jm.a.Fragment,null,jm.a.createElement("div",{ref:y,tabIndex:0,className:"nestedSelectable"}),jm.a.createElement("svg",{ref:g,className:Mb.a.rightarrow,viewBox:"0 0 18 18"},jm.a.createElement("rect",{className:Mb.a.svgarrow,y:"0",width:"18",height:"18",rx:"3"}),jm.a.createElement("path",{d:"M6.79546 8.0522C6.55138 7.8081 6.15565 7.8081 5.91157 8.0522C5.6675 8.2963 5.6675 8.692 5.91157 8.9361L8.6067 11.6312C8.82389 11.8484 9.17603 11.8484 9.39322 11.6312L12.0883 8.9361C12.3324 8.692 12.3324 8.2963 12.0883 8.0522C11.8443 7.8081 11.4485 7.8081 11.2045 8.0522L8.99996 10.2567L6.79546 8.0522Z",fill:"#4D4D4D"}))):jm.a.createElement("svg",{viewBox:"0 0 100 18"},jm.a.createElement("rect",{className:Mb.a.svgbox,y:"0",width:"96",height:"18",rx:"3"}),jm.a.createElement("path",{ref:g,className:Mb.a.svgarrow,d:"M82 0H97C98.6569 0 100 1.34315 100 3V15C100 16.6569 98.6569 18 97 18H82V0Z"}),jm.a.createElement("circle",{cx:"11",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"21",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"31",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"41",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"51",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"61",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("circle",{cx:"71",cy:"9",r:"3",fill:"#4D4D4D"}),jm.a.createElement("path",{d:"M88.7955 8.0522C88.5514 7.8081 88.1557 7.8081 87.9116 8.0522C87.6675 8.2963 87.6675 8.692 87.9116 8.9361L90.6067 11.6312C90.8239 11.8484 91.176 11.8484 91.3932 11.6312L94.0883 8.9361C94.3324 8.692 94.3324 8.2963 94.0883 8.0522C93.8443 7.8081 93.4485 7.8081 93.2045 8.0522L91 10.2567L88.7955 8.0522Z",fill:"#4D4D4D"}))))};function Fb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hb=new Se.PluginKey("crypt"),$b={decos:xe.DecorationSet.Empty},qb=function(){return new Se.Plugin({key:Hb,props:{decorations:function(e){return Hb.getState(e).decos},handleKeyDown:Object(Ly.keydownHandler)({" ":function(e,t,n){var r=e.selection,o=e.schema;if(!(r instanceof Se.NodeSelection))return!1;var a=r.$from.nodeAfter;return!!a&&(a.type===o.nodes.crypt&&(t(e.tr.setMeta(Hb,{action:!0})),!0))},"Mod-Shift-x":function(e,t,n){Sm(null,null,e,t,n)}}),handleVisibilityChange:function(e,t){document.hidden&&e.dispatch(e.state.tr.setMeta(Hb,{hide:!0}))},nodeViews:{crypt:function(e,t,n){return new Pb({node:e,view:t,getPos:n,options:{inline:!0},component:Bb,componentProps:{viewFocus:function(){return t.focus()},ackAction:function(){return t.dispatch(t.state.tr.setMeta(Hb,{action:!1}))},setRevealed:function(e,r){var o=t.state,a=o.doc,i=o.tr,l=a.resolve(n()).nodeAfter;t.dispatch(i.setNodeMarkup(n(),null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fb(n,!0).forEach(function(t){Wb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fb(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},l.attrs,{plaintext:e?r:null,revealed:e})).setSelection(Se.TextSelection.create(i.doc,n()+1)))},replaceWith:function(e){var r,o,a,i,l=n(),s=(r=e,o=t.state.schema,a=Ao(r),(i=document.createElement("div")).innerHTML=a,ir.fromSchema(o).parseSlice(i)),c=t.state,u=c.doc,d=c.tr,f=u.nodeAt(l).marks;d.setSelection(Se.NodeSelection.create(d.doc,l)),d.replaceSelection(s);var p=d.mapping.map(l),h=d.mapping.map(l+1);d.setSelection(Se.TextSelection.create(d.doc,p,h)),f.forEach(function(e){return d.addMark(p,h,e)}),t.dispatch(d)}}})}}},state:{init:function(){return $b},apply:function(e,t){var n=e.getMeta(this);if(!n)return $b;if(n.action&&e.selection instanceof Se.NodeSelection&&e.selection.$from.nodeAfter.type===e.doc.type.schema.nodes.crypt)return{decos:xe.DecorationSet.create(e.doc,[xe.Decoration.node(e.selection.from,e.selection.to,{},{action:!0})])};if(n.hide){var r=am(e.doc).map(function(e){return xe.Decoration.node(e.pos,e.pos+1,{},{hide:!0})});return{decos:xe.DecorationSet.create(e.doc,r)}}return $b}}})};function Vb(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}var Ub=new Se.PluginKey("cursor-parking"),Kb=function(){return new Se.Plugin({key:Ub,state:{init:function(){return{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null}},apply:function(e,t){var n=e.getMeta(this);return n?n.inCursorParking?{inCursorParking:!0,storedMarks:e.storedMarks,bookmarkToRestore:e.selection.getBookmark()}:{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null}:e.docChanged&&t.inCursorParking&&t.bookmarkToRestore?{inCursorParking:!0,storedMarks:t.storedMarks,bookmarkToRestore:t.bookmarkToRestore.map(e.mapping)}:t}},view:function(){var e=document.createElement("en-cursor-parking");e.setAttribute("style","width:1px;height:1px;top:-9999px;left:-9999px;position:absolute"),e.setAttribute("tabIndex","-1"),e.setAttribute("contenteditable","true");var t=function(){e.innerHTML="<div><br/></div>"};return t(),document.body.appendChild(e),{update:function(n,r){var o=Ub.getState(r),a=Ub.getState(n.state);if(!o.inCursorParking&&a.inCursorParking&&function(){var t=document.createRange();t.selectNodeContents(e.firstChild);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)}(),o.inCursorParking&&!a.inCursorParking){var i=n.dispatch,l=n.state.tr;o.bookmarkToRestore&&l.setSelection(o.bookmarkToRestore.resolve(l.doc)),o.storedMarks&&l.setStoredMarks(o.storedMarks),n.focus(),i(l),t()}},destroy:function(){e.remove()}}}})},Yb=function(){var e,t=(e=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.dispatch(t.state.tr.setMeta(Ub,{inCursorParking:!0})),e.next=3,new Promise(function(e){return setTimeout(e,0)});case 3:t.dispatch(t.state.tr.setMeta(Ub,{inCursorParking:!1}));case 4:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){Vb(a,r,o,i,l,"next",e)}function l(e){Vb(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e){return t.apply(this,arguments)}}();function Xb(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gb=new Se.PluginKey("input"),Jb=function(){return new Se.Plugin({key:Gb,state:{init:function(){return{isComposing:!1}},apply:function(e,t){var n=e.getMeta(this);return n?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xb(n,!0).forEach(function(t){Zb(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xb(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},n):t}},props:{handleDOMEvents:{compositionstart:function(e,t){return e.dispatch(e.state.tr.setMeta(Gb,{isComposing:!0})),!1},compositionend:function(e,t){return e.dispatch(e.state.tr.setMeta(Gb,{isComposing:!1})),!1},beforeinput:function(e,t){if("deleteCompositionText"===t.inputType)return Qb(e,t);if(function(e){if("insertText"!==e.inputType)return!1;return/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g.test(e.data)}(t))return tw(e,t);if(rw(t.inputType)){var n=ow(e,t);return e.dispatch(e.state.tr.setMeta(Ub,{inCursorParking:!0})),n}return!1},input:function(e,t){return"deleteCompositionText"===t.inputType?ew(e,t):(rw(t.inputType)&&e.dispatch(e.state.tr.setMeta(Ub,{inCursorParking:!1})),!1)}}},view:function(e){return{update:function(e,t){var n=Gb.getState(t),r=Gb.getState(e.state);!n.isComposing&&r.isComposing&&e.dom.classList.add("isComposing"),n.isComposing&&!r.isComposing&&e.dom.classList.remove("isComposing")},destroy:function(){e.dom.classList.remove("isComposing")}}}})},Qb=function(e,t){var n=window.getSelection().getRangeAt(0),r=n.startContainer,o=n.endContainer,a=n.endOffset,i=n.startOffset;return Pt(r)&&r===o&&0===i&&a===r.length&&r.parentElement.insertBefore(document.createTextNode(Xa),r),!1},ew=function(e,t){return Nt(window.getSelection().getRangeAt(0).startContainer),!1},tw=function(e,t){var n=window.getSelection().getRangeAt(0);if(n.startContainer!==n.endContainer){var r=e.state,o=r.selection,a=r.tr;a.delete(o.from,o.to),e.dispatch(a)}return!1},nw={formatJustifyLeft:{cmd:Df,name:"justifyleft"},formatJustifyCenter:{cmd:Df,name:"justifycenter"},formatJustifyRight:{cmd:Df,name:"justifyright"},formatJustifyFull:{cmd:Df,name:"justifyfull"},formatBold:{cmd:Wp,name:"bold"},formatItalic:{cmd:Wp,name:"italic"},formatUnderline:{cmd:Wp,name:"underline"},formatFontColor:{cmd:Qp,name:"forecolor",getValue:function(e){return e.data}},formatIndent:{cmd:hf,name:"indent"},formatOutdent:{cmd:hf,name:"outdent"},formatRemove:{cmd:Vd,name:"removeformat"},insertUnorderedList:{cmd:jf,name:"insertunorderedlist"},insertOrderedList:{cmd:jf,name:"insertorderedlist"},insertHorizontalRule:{cmd:nf,name:"inserthorizontalrule"}},rw=function(e){return!!e&&Boolean(nw[e])},ow=function(e,t){var n=nw[t.inputType];if(n){var r=n.cmd,o=n.name,a=n.getValue;return r(o,a?a(t):null,e.state,function(t){return e.dispatch(t.setMeta("inputEventMappedToCommand",o))},e)}return!1},aw=n(1722),iw=n.n(aw),lw=new ev.a({id:"15Y5p",use:"15Y5p-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="15Y5p">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M16.9419 9.51051C17.186 9.75459 17.186 10.1503 16.9419 10.3944L12.4419 14.8944C12.1979 15.1385 11.8021 15.1385 11.5581 14.8944L7.05806 10.3944C6.81398 10.1503 6.81398 9.75459 7.05806 9.51051C7.30214 9.26643 7.69786 9.26643 7.94194 9.51051L11.375 12.9436L11.375 4.45245C11.375 4.10728 11.6548 3.82745 12 3.82745C12.3452 3.82745 12.625 4.10728 12.625 4.45245L12.625 12.9436L16.0581 9.51051C16.3021 9.26643 16.6979 9.26643 16.9419 9.51051Z" fill="black" />\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M6 18.3275C6 17.9823 6.27982 17.7025 6.625 17.7025H17.375C17.7202 17.7025 18 17.9823 18 18.3275C18 18.6726 17.7202 18.9525 17.375 18.9525H6.625C6.27982 18.9525 6 18.6726 6 18.3275Z" fill="black" />\n</symbol>'}),sw=(nv.a.add(lw),lw),cw=new ev.a({id:"33S4b",use:"33S4b-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="33S4b">\n  <path d="M8.84436 8.94709C9.48109 8.947 9.99728 9.46317 9.99736 10.0999C9.99745 10.7366 9.48096 11.2529 8.84423 11.253C8.20751 11.2531 7.69132 10.7369 7.69115 10.0999C7.69138 9.46304 8.20755 8.94685 8.84436 8.94709Z" />\n  <path d="M15.1873 8.94704C15.824 8.94695 16.3402 9.46312 16.34 10.0999C16.3401 10.7367 15.8239 11.2529 15.1872 11.2529C14.5504 11.253 14.0342 10.7368 14.0341 10.0998C14.034 9.46308 14.5502 8.94689 15.1873 8.94704Z" />\n  <path fill-rule="evenodd" d="M12 19.75C16.2802 19.75 19.75 16.2802 19.75 12C19.75 7.71979 16.2802 4.25 12 4.25C7.71979 4.25 4.25 7.71979 4.25 12C4.25 16.2802 7.71979 19.75 12 19.75ZM12 21C16.9706 21 21 16.9706 21 12C21 7.02944 16.9706 3 12 3C7.02944 3 3 7.02944 3 12C3 16.9706 7.02944 21 12 21Z" />\n  <path d="M12 14.625C11.1453 14.625 10.3098 14.878 9.59862 15.3521L9.34669 15.52C9.05949 15.7115 8.67144 15.6339 8.47997 15.3467C8.2885 15.0595 8.36611 14.6714 8.65332 14.48L8.90524 14.312C9.82172 13.701 10.8985 13.375 12 13.375C13.1015 13.375 14.1783 13.701 15.0948 14.312L15.3467 14.48C15.6339 14.6714 15.7115 15.0595 15.52 15.3467C15.3286 15.6339 14.9405 15.7115 14.6533 15.52L14.4014 15.3521C13.6903 14.878 12.8547 14.625 12 14.625Z" />\n</symbol>'}),uw=(nv.a.add(cw),cw);function dw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var hw=ur()(function(e){return Object(yt.e)(e)}),mw={"text/plain":jm.a.lazy(function(){return n.e(1).then(n.bind(null,1821))}),"application/pdf":jm.a.lazy(function(){return Promise.all([n.e(7),n.e(0)]).then(n.bind(null,1825))})},gw=376,yw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some(function(e){return we()(e,"type.spec.isInSelection")})};function vw(e){var t=e.progress,n=e.className,r=20*Math.PI;return jm.a.createElement("svg",{viewBox:"0 0 40 40",className:Object(Um.a)(iw.a.progress,n)},jm.a.createElement("circle",{r:"25%",cx:"50%",cy:"50%",strokeWidth:"50%",strokeDasharray:r,strokeDashoffset:r*(1-t)}))}function bw(e){var t=e.state,n=e.progress,r=e.mime,o=e.filename,a=e.filesize;if("unloaded"===t)return jm.a.createElement("div",{className:iw.a.header},jm.a.createElement("div",{className:iw.a.title},fh.a.t("Click to load attachment")));if("loading"===t)return jm.a.createElement("div",{className:iw.a.header},null!=n?jm.a.createElement(vw,{progress:n,className:iw.a.headerIcon}):null,jm.a.createElement("div",{className:iw.a.title},fh.a.t("Loading...")));if("error"===t)return jm.a.createElement("div",{className:iw.a.header},jm.a.createElement(Ng.a,{svg:uw,className:Object(Um.a)(iw.a.headerIcon,iw.a.headerIcon__error)}),jm.a.createElement("div",{className:iw.a.title},fh.a.t("Couldn't load attachment")));var i=a?hw(Number(a)):"";return jm.a.createElement("div",{className:iw.a.header},jm.a.createElement(Ng.a,{className:iw.a.headerIcon,svg:Object(yt.b)(r,o,null)}),jm.a.createElement("div",{className:iw.a.title},o||fh.a.t("Untitled Attachment")),jm.a.createElement("div",{className:iw.a.filesize},i))}iw.a;var ww=function(e){var t=e.node,n=e.view,r=e.selectNodeView,o=e.deselectNodeView,a=e.decorations,i=e.selected,l=e.getPos,s=e.onFileOpen,c=e.includeSimulations,u=e.onSimulateLoaded,d=e.onSimulateUnloaded,f=e.onSimulateLoading,p=e.onSimulateError,h=e.onViewAsAttachmentToggle,m=e.onPdfFullPreview,g=e.onPdfSinglePagePreview,y=e.updateViewerProps,v=t.attrs,b=v.filename,w=v.mime,k=v.filesize,_=v.progress,O=v.viewAsAttachment,C=t.attrs.state||"loaded",S="loaded"===C,x=w&&"application/pdf"===w,E=x?20971520:10485760,P=Number(k)>E,j=w&&mw[w],M=t.attrs.viewerProps;x&&!O&&void 0===M.fullPdf&&setTimeout(function(){g()},0);var A=Object(Gi.getInteraction)().fileView&&(S||!C)&&!O&&j&&!P&&(!x||void 0!==t.attrs.viewerProps.fullPdf);if("test.error"===b)throw new Error("Error Test!");var T=Object(Pm.useRef)(null);Lb(i&&(S||c),[i,C],{targetElement:T.current,popoverItems:[{enabled:S,label:fh.a.t("Download"),icon:sw,action:s}],overflowMenuItems:[{enabled:S,type:"item",label:fh.a.t("Download"),action:s},!j||P||O?null:{enabled:S,type:"item",label:fh.a.t("View as Attachment"),action:function(){return h(!0)}},j&&!P&&O&&!x?{enabled:S,type:"item",label:fh.a.t("View File Preview"),action:function(){return h(!1)}}:null,!j||P||!x||!O&&t.attrs.viewerProps.fullPdf?null:{enabled:S,type:"item",label:fh.a.t("Full Preview"),action:function(){return m()}},j&&!P&&x&&(O||t.attrs.viewerProps.fullPdf||void 0===t.attrs.viewerProps.fullPdf)?{enabled:!0,type:"item",label:fh.a.t("Page-through Preview"),action:function(){return g()}}:null].concat(pw(c?[S?{type:"divider"}:null,{enabled:!0,type:"item",label:"Simulate Loaded",action:u},{enabled:!0,type:"item",label:"Simulate Unloaded",action:d},{enabled:!0,type:"item",label:"Simulate Loading",action:f},{enabled:!0,type:"item",label:"Simulate Error",action:p}]:[])).filter(Boolean)});var N=Object(Um.a)("enmediafile",iw.a.enmediafile,C&&iw.a[C],A&&iw.a.viewFile,i||yw(a)?"selected":null),D=A?{width:"100%",minWidth:gw}:{width:gw};return jm.a.createElement("div",{className:N,ref:T,style:D,"data-popover-update":l(),"data-type":w},jm.a.createElement(bw,{state:C,mime:w,filename:b,progress:_,filesize:k}),A?jm.a.createElement("div",{className:iw.a.viewer},jm.a.createElement(j,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dw(n,!0).forEach(function(t){fw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dw(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({node:t,view:n,selectNodeView:r,deselectNodeView:o,updateViewerProps:y},t.attrs.viewerProps))):null)};function kw(e,t,n,r,o,a,i){try{var l=e[a](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ow(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_w(n,!0).forEach(function(t){Cw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Cw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sw=new Se.PluginKey("files"),xw=function(e,t){for(var n=t.target;n!==document.body;){if(n.classList&&n.classList.contains("ignore-pm-mouse-events"))return!0;n=n.parentElement}return!1},Ew=function(){return new Se.Plugin({key:Sw,props:{handleDOMEvents:{click:xw,mousedown:xw,mouseup:xw},handleDoubleClickOn:function(e,t,n,r,o,a){return"file"===n.type.name&&Oo(e,n,"tap")},getDragImage:function(e,t,n){var r=tt(n.content());if(!(r.length>0&&r.every(function(e){return"file"===e.type.name})))return null;var o=at(n,e.state.doc,function(e){return e.nodeAfter&&"file"===e.nodeAfter.type.name}).map(function(t){var n=e.nodeDOM(t.pos);return n&&n.querySelector("."+iw.a.header)}).filter(Boolean);if(0===o.length)return null;var a=o[0],i=Ct(a,t),l=r.length;return{element:bt()("div",{class:iw.a.ghost__Attachments},bt()("div",{class:"".concat(iw.a.enmediafile," selected"),style:"width: ".concat(300,"px;")},a.cloneNode(!0)),l>1?bt()("div",{class:iw.a.ghost__AttachmentsCount},l):null),x:function(){return i.x/a.offsetWidth*300}}},getDataTransferMetadata:function(e,t,n){if(!(n instanceof Se.NodeSelection))return null;var r=n.node;if(!Qe(r,"resource"))return null;var o=r.attrs;return{type:"resource",data:{mime:o.mime,filename:o.filename,filesize:o.filesize,url:o.url,reference:o.reference,hash:o.hash,height:o.height,width:o.width,progress:o.progress}}},nodeViews:{file:function(e,t,n,r){return new Pb({node:e,view:t,getPos:n,decorations:r,options:{inline:!1},component:ww,componentProps:{view:t,includeSimulations:t.props.config.includeResourceSimulations,onFileOpen:function(){var e=t.state.doc.resolve(n());Oo(t,e.nodeAfter,"tap")},onSimulateLoaded:function(){return Pw(t,n(),"loaded")},onSimulateUnloaded:function(){return Pw(t,n(),"unloaded")},onSimulateError:function(){return Pw(t,n(),"error")},onSimulateLoading:function(){return Mw(t,n())},onViewAsAttachmentToggle:function(e){return Aw(t,n(),e)},onPdfFullPreview:function(e){return Aw(t,n(),e,{fullPdf:!0})},onPdfSinglePagePreview:function(e){return Aw(t,n(),e,{fullPdf:!1,page:1})},updateViewerProps:function(e){Aw(t,n(),!1,e)},deselectNodeView:function(){var e=t.state,r=e.doc,o=e.tr,a=t.dispatch;o.setSelection(Se.TextSelection.create(r,n())),a(o)}}})}}}})},Pw=function(e,t,n){var r=e.state,o=r.doc,a=r.tr,i=e.dispatch,l=o.resolve(t);a.setNodeMarkup(t,null,Ow({},l.nodeAfter.attrs,{state:n})),i(a)},jw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(t){return setTimeout(t,e)})},Mw=function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var r,o,a,i,l,s,c,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,o=[0,.1,.3,.5,.75,.9];case 2:if(!(r<o.length)){e.next=13;break}return a=o[r],i=t.state,l=i.doc,s=i.tr,c=t.dispatch,u=l.resolve(n),s.setNodeMarkup(n,null,Ow({},u.nodeAfter.attrs,{state:"loading",progress:a})),c(s),e.next=10,jw(1e3);case 10:r++,e.next=2;break;case 13:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){kw(a,r,o,i,l,"next",e)}function l(e){kw(a,r,o,i,l,"throw",e)}i(void 0)})});return function(e,n){return t.apply(this,arguments)}}(),Aw=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e&&t){var o=e.state,a=o.doc,i=o.tr,l=e.dispatch,s=a.resolve(t);i.setNodeMarkup(t,null,Ow({},s.nodeAfter.attrs,{viewAsAttachment:n,viewerProps:r})),l(i),e.focus()}},Tw="http://www.w3.org/2000/svg",Nw=function(e){var t=e.viewBox,n=e.id,r=document.createElementNS(Tw,"svg");t&&r.setAttribute("viewBox",t);var o=document.createElementNS(Tw,"use");return o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#".concat(n)),r.appendChild(o),r},Dw=new ev.a({id:"3UCdy",use:"3UCdy-usage",viewBox:"0 0 24 25",content:'<symbol viewBox="0 0 24 25" xmlns="http://www.w3.org/2000/svg" id="3UCdy">\n<path fill-rule="evenodd" clip-rule="evenodd" d="M15.5662 6.04898C16.3639 6.08362 17 6.7413 17 7.54755V9H18.5C19.3284 9 20 9.67157 20 10.5V15.3459C20 15.5769 19.92 15.8008 19.7737 15.9795L15.1438 21.6336C14.9539 21.8655 14.6699 22 14.3701 22H10.5C9.67157 22 9 21.3284 9 20.5V20.0475H6.5C5.67157 20.0475 5 19.376 5 18.5475V7.54755C5 6.7413 5.6361 6.08362 6.43381 6.04898C6.65815 5.11592 7.4981 4.42255 8.5 4.42255H13.5C14.5019 4.42255 15.3419 5.11592 15.5662 6.04898ZM10.5 10.25C10.3619 10.25 10.25 10.3619 10.25 10.5V20.5C10.25 20.6381 10.3619 20.75 10.5 20.75H13V15.625C13 14.7275 13.7275 14 14.625 14H18.75V10.5C18.75 10.3619 18.6381 10.25 18.5 10.25H10.5ZM18.75 15.2566V15.25H14.625C14.4179 15.25 14.25 15.4179 14.25 15.625V20.75H14.2517L18.75 15.2566ZM14.2256 6.05833C14.0683 5.82557 13.802 5.67255 13.5 5.67255H8.5C8.20266 5.67255 7.93995 5.82086 7.78184 6.04755C7.68298 6.18928 7.625 6.36164 7.625 6.54755V7.54755C7.625 8.0308 8.01675 8.42255 8.5 8.42255H13.5C13.9832 8.42255 14.375 8.0308 14.375 7.54755V6.54755C14.375 6.36633 14.3199 6.19798 14.2256 6.05833Z" />\n</symbol>'}),Lw=(nv.a.add(Dw),Dw),Rw=n(1140),Iw=new ev.a({id:"6c18L",use:"6c18L-usage",viewBox:"0 0 23 22",content:'<symbol viewBox="0 0 23 22" xmlns="http://www.w3.org/2000/svg" id="6c18L">\n<path d="M10.9907 0.514761C10.8856 -0.0242175 10.1144 -0.0242177 10.0093 0.514761L9.75964 1.79392C9.72217 1.98591 9.57618 2.13843 9.386 2.18424L8.01765 2.51391C7.50713 2.6369 7.50713 3.36309 8.01765 3.48609L9.386 3.81575C9.57618 3.86157 9.72217 4.01408 9.75964 4.20608L10.0093 5.48523C10.1144 6.02421 10.8856 6.02421 10.9907 5.48523L11.2404 4.20608C11.2778 4.01408 11.4238 3.86157 11.614 3.81575L12.9823 3.48609C13.4929 3.36309 13.4929 2.6369 12.9823 2.51391L11.614 2.18424C11.4238 2.13843 11.2778 1.98591 11.2404 1.79392L10.9907 0.514761Z" />\n<path d="M19.0093 3.51476C19.1144 2.97578 19.8856 2.97578 19.9907 3.51476L20.2404 4.79392C20.2778 4.98591 20.4238 5.13843 20.614 5.18424L21.9823 5.51391C22.4929 5.6369 22.4929 6.36309 21.9823 6.48609L20.614 6.81575C20.4238 6.86157 20.2778 7.01408 20.2404 7.20608L19.9907 8.48523C19.8856 9.02421 19.1144 9.02421 19.0093 8.48523L18.7596 7.20608C18.7222 7.01408 18.5762 6.86157 18.386 6.81575L17.0177 6.48609C16.5071 6.36309 16.5071 5.6369 17.0177 5.51391L18.386 5.18424C18.5762 5.13843 18.7222 4.98591 18.7596 4.79392L19.0093 3.51476Z" />\n<path fill-rule="evenodd" clip-rule="evenodd" d="M13.3658 6.70742C13.1705 6.51216 12.8539 6.51216 12.6587 6.70742L0.637871 18.7282C0.442609 18.9235 0.442609 19.2401 0.637871 19.4353L2.40564 21.2031C2.6009 21.3984 2.91748 21.3984 3.11274 21.2031L15.1336 9.18229C15.3288 8.98703 15.3288 8.67045 15.1336 8.47519L13.3658 6.70742ZM13.1768 7.61427C13.0791 7.51664 12.9209 7.51664 12.8232 7.61427L10.3484 10.0891C10.2507 10.1868 10.2507 10.3451 10.3484 10.4427L11.409 11.5034C11.5066 11.601 11.6649 11.601 11.7626 11.5034L14.2374 9.02849C14.3351 8.93086 14.3351 8.77257 14.2374 8.67494L13.1768 7.61427Z" />\n<path d="M16.5114 12.2536C16.6253 11.7282 17.3747 11.7282 17.4886 12.2536L17.6446 12.9727C17.6861 13.1643 17.8357 13.3139 18.0273 13.3554L18.7464 13.5114C19.2718 13.6253 19.2718 14.3747 18.7464 14.4886L18.0273 14.6446C17.8357 14.6861 17.6861 14.8357 17.6446 15.0273L17.4886 15.7464C17.3747 16.2718 16.6253 16.2718 16.5114 15.7464L16.3554 15.0273C16.3139 14.8357 16.1643 14.6861 15.9727 14.6446L15.2536 14.4886C14.7282 14.3747 14.7282 13.6253 15.2536 13.5114L15.9727 13.3554C16.1643 13.3139 16.3139 13.1643 16.3554 12.9727L16.5114 12.2536Z" />\n<path d="M4.48865 6.25361C4.37472 5.72821 3.62528 5.72821 3.51135 6.25361L3.35543 6.97273C3.3139 7.16428 3.16428 7.31389 2.97274 7.35543L2.25361 7.51135C1.72821 7.62527 1.72821 8.37472 2.25361 8.48864L2.97274 8.64457C3.16428 8.6861 3.3139 8.83572 3.35543 9.02726L3.51135 9.74639C3.62528 10.2718 4.37472 10.2718 4.48865 9.74639L4.64457 9.02726C4.6861 8.83572 4.83572 8.6861 5.02726 8.64457L5.74639 8.48864C6.27179 8.37472 6.27179 7.62527 5.74639 7.51135L5.02726 7.35543C4.83572 7.31389 4.6861 7.16428 4.64457 6.97273L4.48865 6.25361Z" />\n</symbol>'}),zw=(nv.a.add(Iw),Iw);n(1758);function Bw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ww(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hw=function(){function e(t,n,r,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ww(this,"handleClick",function(e){for(var t=e.target;t&&"A"!==t.tagName&&t!==a.inner;)t=t.parentNode;var n=t&&"A"===t.tagName&&t.getAttribute("href");n&&(e.preventDefault(),a.view.props.notify("openLink",{module:"link",action:"open",eventType:"tap",href:n}))}),Ww(this,"handleMouseDown",function(e){return a.focusContent(e)}),Ww(this,"handleTouchStart",function(e){return a.focusContent(e)}),Ww(this,"handleDragStart",function(e){return e.preventDefault()}),this.node=t,this.view=n,this.getPos=r,this.resources=null,this.content=null,this.popover=null,this.search={},this.title=bt()("div",{class:"title"}),this.header=bt()("div",{class:"header"},Nw(Lw),this.title),this.inner=bt()("div",{class:"inner nestedSelectable",tabindex:"0"}),this.inner.addEventListener("click",this.handleClick,!0),this.inner.addEventListener("mousedown",this.handleMouseDown,!0),this.inner.addEventListener("touchstart",this.handleTouchStart,!0),this.inner.addEventListener("dragstart",this.handleDragStart,!0),this.dom=bt()("foreign-content",{class:"foreigncontent"},this.header,bt()("div",{class:"wrapper"},this.inner)),this.updateContent(t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.dismissPopover(),this.inner.removeEventListener("click",this.handleClick,!0),this.inner.removeEventListener("mousedown",this.handleMouseDown,!0),this.inner.removeEventListener("touchstart",this.handleTouchStart,!0),this.inner.removeEventListener("dragstart",this.handleDragStart,!0),this.destroyed=!0}},{key:"dismissPopover",value:function(){this.popover&&(Object(Me.dispatch)(Pe.cleanupPopoverMenu(this.popover.id)),this.popover=null)}},{key:"stopEvent",value:function(e){return!1}},{key:"selectNode",value:function(){var e=this;if(this.view.editable){var t=this.dom,n=[{enabled:!0,label:"Simplify & Make Editable",icon:zw,action:function(){var t=e.getPos(),n=e.view.state.tr;(n=Ma(n=qr(n,t),t,t+1))&&(e.dismissPopover(),e.view.dispatch(Oi(n,_i.b.NoteElementClip,_i.a.SimplifyClip)))}}];this.dom.classList.add("selected"),Object(Gi.getInteraction)().popover&&(this.popover={items:n,id:Object(Me.dispatch)(Pe.createPopoverMenu({targetElement:t,items:n}))})}}},{key:"deselectNode",value:function(){this.dom.classList.remove("selected"),this.dismissPopover()}},{key:"update",value:function(e,t){return e.type===this.node.type&&(this.node=e,this.updateContent(e),this.updateAccentuate(t),this.adjustSize(),this.popover&&Object(Me.dispatch)(Pe.updatePopoverMenu(this.popover)),!0)}},{key:"updateAccentuate",value:function(e){var t=null,n=null,r=-1,o=!0,a=!1,i=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(c.type.spec.search){t=c.type.spec.search.regex,n=c.type.spec.search.update,r=c.type.spec.search.primary;break}}}catch(e){a=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw i}}var u=this.search.primary,d=this.search.regex?this.search.regex.toString():"",f=t?t.toString():"";if(d===f&&u===r)return!1;if((t||f!==d)&&(this.inner.innerHTML=this.inner.innerHTML.replace(/<\/?accentuate[^>]*>/g,"")),t){var p=Ad(this.inner,{find:t,wrap:"accentuate"});r>-1&&p.enhancements[r]("primary"),n&&n(this.node,p.matches.length,this.getPos())}return this.search={regex:t,primary:r},!0}},{key:"updateContent",value:function(e){var t=this,n=e.attrs,r=n.content,o=void 0===r?null:r,a=n.resources,i=void 0===a?null:a,l=n.webClipType,s=void 0===l?null:l;if(!o||this.content===o&&this.resources===i)return!1;s!==this.webClipType&&(this.title.innerText=s?fh.a.t("Web Clip"):fh.a.t("HTML Content"),s?this.dom.dataset.webClipType=s:delete this.dom.dataset.webClipType),this.content=o,this.resources=i,this.webClipType=s,this.search={};var c=o.replace(mr("position","fixed",!0),"$1position: absolute;").replace(mr("position","sticky",!0),"$1position: absolute;");this.inner.innerHTML=c;var u=Bw(this.inner.querySelectorAll("en-media"));return this.resources&&u.forEach(function(e){var n=e.getAttribute("hash");if(n&&t.resources[n]){var r=t.resources[n],o=r.url,a=r.mime,i=r.filename;if(Object(yt.d)(a,i,null)){var l=bt()("img",{src:o});["width","height","alt","style","hash"].forEach(function(t){l.setAttribute(t,e.getAttribute(t))}),e.parentNode.replaceChild(l,e)}else{var s=bt()("span",{class:"attachment-placeholder",hash:e.getAttribute("hash")});s.innerText=i||"Untitled Attachment",s.appendChild(Nw(Rw.a)),e.parentNode.replaceChild(s,e)}}}),Bw(this.inner.querySelectorAll("en-crypt")).forEach(function(e){var t=document.createElement("span");t.classList.add("crypt-placeholder"),e.parentNode.replaceChild(t,e)}),!0}},{key:"adjustSize",value:function(){var e=this;if(!this.destroyed)if(this.dom.parentNode){var t=this.view.props.getNoteWidth(),n=t.noteWidth,r=t.fullWidth,o=t.noteAlign;if(this.inner.clientHeight<this.inner.scrollHeight){var a=this.inner.scrollHeight||400;this.inner.style.minHeight="".concat(a,"px")}var i=this.node.attrs.textAlign||"left",l=this.inner.scrollWidth+16,s=(n-Math.min(r,l))/2;if(s<0)switch(this.dom.style.width="initial",o){default:case"center":this.dom.style.marginLeft="".concat(Math.ceil(s),"px"),this.dom.style.marginRight="".concat(Math.floor(s),"px");break;case"left":this.dom.style.marginLeft=0,this.dom.style.marginRight="".concat(2*s,"px");break;case"right":this.dom.style.marginLeft="".concat(2*s,"px"),this.dom.style.marginRight=0}else this.dom.style.marginLeft="left"!==i?"auto":"",this.dom.style.marginRight="center"===i?"auto":"",this.dom.style.width="100%"}else setTimeout(function(){return e.adjustSize()})}},{key:"focusContent",value:function(e){var t=this;this.search.regex&&Fd(null,{},this.view.state,this.view.dispatch,this.view),document.activeElement!==this.inner&&(document.body.style.overflow="hidden",setTimeout(function(){t.inner.focus(),document.body.style.overflow=""})),e.stopPropagation()}}])&&Fw(t.prototype,n),r&&Fw(t,r),e}(),$w=new Se.PluginKey("foreign-content"),qw=function(){return new Se.Plugin({key:$w,props:{nodeViews:{foreigncontent:function(e,t,n,r){return new Hw(e,t,n,r)}}}})};function Vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kw(e){var t=e.attrs,n=t.width,r=t.height;return null==n&&null==r}function Yw(e,t,n){return e&&t?isNaN(n)?null:Kw(t)?null:(e.setNodeMarkup(n,null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vw(n,!0).forEach(function(t){Uw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vw(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t.attrs,{width:null,height:null})),e.setSelection(new Se.NodeSelection(e.doc.resolve(n))),e):null}var Xw=new ev.a({id:"3UgAP",use:"3UgAP-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="3UgAP">\n    <path d="M5.976 16.51c.22.072.429.188.6.36.17.17.287.38.359.6l1.786-.447a2.899 2.899 0 0 0-2.259-2.29l-.04-.009-.446 1.787zM18.68 8.597L9.487 17.79l-4.512 1.04a.3.3 0 0 1-.36-.36l1.042-4.51 9.192-9.193c.423-.423 1.623.091 2.681 1.15 1.058 1.057 1.572 2.257 1.15 2.68z" />\n</symbol>'}),Zw=(nv.a.add(Xw),Xw),Gw=new ev.a({id:"3XG2L",use:"3XG2L-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="3XG2L">\n    <path d="M11.75,10.25 L13.5,10.25 C13.9142136,10.25 14.25,10.5857864 14.25,11 C14.25,11.4142136 13.9142136,11.75 13.5,11.75 L11.75,11.75 L11.75,13.5 C11.75,13.9142136 11.4142136,14.25 11,14.25 C10.5857864,14.25 10.25,13.9142136 10.25,13.5 L10.25,11.75 L8.5,11.75 C8.08578644,11.75 7.75,11.4142136 7.75,11 C7.75,10.5857864 8.08578644,10.25 8.5,10.25 L10.25,10.25 L10.25,8.5 C10.25,8.08578644 10.5857864,7.75 11,7.75 C11.4142136,7.75 11.75,8.08578644 11.75,8.5 L11.75,10.25 Z M16.451757,15.3910968 L19.5229708,18.4623106 C19.815864,18.7552038 19.815864,19.2300776 19.5229708,19.5229708 C19.2300776,19.815864 18.7552038,19.815864 18.4623106,19.5229708 L15.3910968,16.451757 C14.1902373,17.4202081 12.6628275,18 11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,12.6628275 17.4202081,14.1902373 16.451757,15.3910968 Z M11,16.5 C14.0375661,16.5 16.5,14.0375661 16.5,11 C16.5,7.96243388 14.0375661,5.5 11,5.5 C7.96243388,5.5 5.5,7.96243388 5.5,11 C5.5,14.0375661 7.96243388,16.5 11,16.5 Z" />\n</symbol>'}),Jw=(nv.a.add(Gw),Gw);function Qw(e,t){Object(Me.dispatch)(Pe.cleanupPopoverMenu(e)),Object(Me.dispatch)(Pe.cleanupMenu(t))}function ek(e,t,n,r){return[{enabled:t.props.config.images.annotate&&t.editable,label:fh.a.t("Edit & Annotate"),icon:Zw,action:function(){var t=e.attrs,n=t.url,r=t.reference,o=t.filename;zf("annotate",{filename:o,reference:r,url:n})}},{enabled:t.props.config.images.preview,label:fh.a.t("Full Screen Preview"),icon:Jw,action:function(){var e=t.state.doc.resolve(n());Zu(t,e)}},{label:fh.a.t("More Actions"),icon:Ab.a,action:function(o,a){var i=function(e,t,n,r,o){var a=function(){r.props.notify("openLink",{module:"resource",action:"open",eventType:"tap",hash:n.attrs.hash,href:n.attrs.url,mime:n.attrs.mime,reference:n.attrs.reference})};return Object(Me.dispatch)(Pe.createMenu({xPosition:e,yPosition:t,items:[{type:"item",enabled:r.props.config.images.annotate&&r.editable,label:fh.a.t("Edit & Annotate"),action:function(){var e=n.attrs,t=e.url,r=e.reference,o=e.filename;zf("annotate",{filename:o,reference:r,url:t})}},{type:"item",enabled:r.props.config.images.preview,label:fh.a.t("Full Screen Preview"),action:function(){var e=r.state.doc.resolve(o());Zu(r,e)}},{type:"divider"},{type:"item",enabled:!!a,label:fh.a.t("Open"),action:a},{type:"item",enabled:!Kw(n)&&r.editable,label:fh.a.t("Reset Image Size"),action:function(){var e=Yw(r.state.tr,n,o());e&&r.dispatch(e)}}]}))}(o,a,e,t,n);r(i)}}]}n(1759);function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ok="proportional",ak=function(){function e(t,n,r,o){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.node=t,this.view=n,this.getPos=r,this.decorations=o,this.selected=!1,this.resizing=!1,this.naturalWidth=null,this.naturalHeight=null,this.init(),this.render(),setTimeout(function(){a.view.dispatch(a.view.state.tr.setMeta(Nc,{message:"image_loading"}))})}var t,n,r;return t=e,(n=[{key:"update",value:function(e,t){var n,r,o,a,i,l=!1;return this.node.type===e.type&&(this.node.attrs.url===e.attrs.url&&(this.node.attrs.width!==e.attrs.width?l=!0:this.node.attrs.height!==e.attrs.height?l=!0:this.node.attrs.style!==e.attrs.style?l=!0:this.node.attrs.state!==e.attrs.state?l=!0:this.decorations!==t&&(l=!0),this.node=e,this.decorations=t,l&&this.render(),this.popoverMenuId&&(n=this.popoverMenuId,r=this.node,o=this.view,a=this.getPos,i=this.updateOverflowMenuId,Object(Me.dispatch)(Pe.updatePopoverMenu({id:n,items:ek(r,o,a,i)}))),!0))}},{key:"selectNode",value:function(){this.selected=!0,this.dom.classList.add("focus"),this.render()}},{key:"deselectNode",value:function(){this.selected=!1,this.dom.classList.remove("focus"),Qw(this.popoverMenuId,this.overflowMenuId),this.popoverMenuId=null,this.overflowMenuId=null,this.resizing&&this.handleResizeEnd()}},{key:"stopEvent",value:function(e){return e.target===this.resizeHandle&&(e.preventDefault(),!0)}},{key:"init",value:function(){this.initDom(),this.initEvents()}},{key:"isLoading",value:function(){return"loading"===this.node.attrs.state}},{key:"initEvents",value:function(){this.handleLoad=this.handleLoad.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handlePreviewClick=this.handlePreviewClick.bind(this),this.handleResizeStart=this.handleResizeStart.bind(this),this.handleResizeMove=this.handleResizeMove.bind(this),this.handleResizeDblClick=this.handleResizeDblClick.bind(this),this.handleResizeEnd=this.handleResizeEnd.bind(this),this.isLoading=this.isLoading.bind(this),this.updateOverflowMenuId=this.updateOverflowMenuId.bind(this),this.image.addEventListener("load",this.handleLoad),this.image.addEventListener("error",this.handleLoad),this.image.addEventListener("mousedown",this.handleMouseDown),this.image.addEventListener("touchstart",this.handleMouseDown),this.previewButton.addEventListener("click",this.handlePreviewClick),this.resizeHandle.addEventListener("mousedown",this.handleResizeStart),this.resizeHandle.addEventListener("dblclick",this.handleResizeDblClick)}},{key:"destroy",value:function(){this.image.removeEventListener("load",this.handleLoad),this.image.removeEventListener("error",this.handleLoad),this.image.removeEventListener("mousedown",this.handleMouseDown),this.image.removeEventListener("touchstart",this.handleMouseDown),this.previewButton.removeEventListener("click",this.handlePreviewClick),this.resizeHandle.removeEventListener("mousedown",this.handleResizeStart),this.resizeHandle.removeEventListener("dblclick",this.handleResizeDblClick),document.body.removeEventListener("mousemove",this.handleResizeMove),window.removeEventListener("mouseup",this.handleResizeEnd),this.handleResizeEnd(),Qw(this.popoverMenuId,this.overflowMenuId)}},{key:"initDom",value:function(){this.dom=bt()("div",{class:"en-media-image"},bt()("div",{class:"en-media-image__loader"}),this.image=bt()("img",{class:"en-media-image__image"}),this.previewButton=bt()("div",{class:"en-media-image__preview-button"}),this.resizeFrame=bt()("div",{class:"en-media-image__size-frame"},this.resizeHandle=bt()("div",{class:"en-media-image__size-handle"})),this.accentuateContainer=bt()("div",{class:"en-media-image__accentuates"}))}},{key:"render",value:function(){var e,t,n,r,o,a=this,i=this.node.attrs,l=i.url,s=i.width,c=i.height,u=i.style,d=i.state;if(this.image.src!==l&&(this.image.src=l),this.dom.classList.toggle("en-media-image--loading","loading"===d),this.previewButton.className=this.isLoading()?"":"en-media-image__preview-button",this.popoverMenuId||!this.selected||this.isLoading()||Object(Gi.getInteraction)().popover&&(this.popoverMenuId=(e=this.image,t=this.node,n=this.view,r=this.getPos,o=this.updateOverflowMenuId,Object(Me.dispatch)(Pe.createPopoverMenu({targetElement:e,items:ek(t,n,r,o)})))),null===s)this.image.removeAttribute("width");else if(!Number.isNaN(parseInt(s,10))){var f=parseInt(s,10)+6;this.image.setAttribute("width",f)}if(this.image.style.minWidth="",null===c?this.image.removeAttribute("height"):Number.isNaN(parseInt(c,10))||this.image.setAttribute("height",parseInt(c,10)+6),this.resizeFrame.style.width="",this.resizeFrame.style.height="",u){["width","max-width","min-width","height","max-height","min-height"].forEach(function(e){kr(u,e)}),this.dom.setAttribute("style",u)}this.accentuateContainer.innerHTML="";var p=!0,h=!1,m=void 0;try{for(var g,y=(this.decorations||[])[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var v=g.value;if(v.type.spec.search)if("break"===function(){var e=v.type.spec.search,t=e.styles,n=e.primary;return t.forEach(function(e,t){a.accentuateContainer.appendChild(bt()("accentuate",{style:e,class:n===t?"primary":""}))}),"break"}())break}}catch(e){h=!0,m=e}finally{try{p||null==y.return||y.return()}finally{if(h)throw m}}}},{key:"handleLoad",value:function(){this.naturalWidth=this.image.naturalWidth,this.naturalHeight=this.image.naturalHeight,this.image.setAttribute("data-popover-update","loaded=true"),this.view.dispatch(this.view.state.tr.setMeta(Nc,{message:"image_loaded"}))}},{key:"handlePreviewClick",value:function(){if(this.selected&&!this.isLoading()&&this.view.props.config.images.preview){var e=this.view.state.doc.resolve(this.getPos());Zu(this.view,e)}}},{key:"handleResizeStart",value:function(){this.selected&&!this.isLoading()&&this.naturalWidth&&this.naturalHeight&&(this.resizing=!0,this.resizeInfo={type:ok,ratio:this.naturalWidth/this.naturalHeight},document.body.classList.add("nwse-resizing"),document.body.addEventListener("mousemove",this.handleResizeMove),window.addEventListener("mouseup",this.handleResizeEnd))}},{key:"handleResizeMove",value:function(e){if(1&e.buttons&&this.resizeInfo){var t=this.resizeFrame.getBoundingClientRect(),n=e.clientX-t.left-6,r=e.clientY-t.top-6;if(this.resizeInfo.type===ok){var o=Yo.getState(this.view.state).noteWidth,a=Math.max(n,this.resizeInfo.ratio*r);a=Math.max(a,50),a=Math.min(a,this.naturalWidth),a=Math.min(a,o-6),this.resizeFrame.style.width="".concat(a+6,"px"),this.resizeFrame.style.height="".concat(a/this.resizeInfo.ratio+6,"px")}}else this.handleResizeEnd(e)}},{key:"handleResizeEnd",value:function(e){if(this.selected&&this.resizing&&!this.isLoading()){if(this.resizing=!1,document.body.classList.remove("nwse-resizing"),document.body.removeEventListener("mousemove",this.handleResizeMove),window.removeEventListener("mouseup",this.handleResizeEnd),e&&e.clientX&&e.clientY&&this.resizeInfo){var t=this.resizeFrame.getBoundingClientRect(),n=e.clientX-t.left-6,r=e.clientY-t.top-6;if(this.resizeInfo.type===ok){var o,a,i=Math.max(n,this.resizeInfo.ratio*r);i=Math.max(i,50);var l=Yo.getState(this.view.state).noteWidth;if(i>=this.naturalWidth||i>=l-6?(o=null,a=null):(o=i,a=i/this.resizeInfo.ratio),this.resizeFrame.style.width=o?"".concat(o+6,"px"):"",this.resizeFrame.style.height=a?"".concat(a+6,"px"):"",o!==this.node.attrs.width){var s=this.view.state.tr;s.setNodeMarkup(this.getPos(),null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tk(n,!0).forEach(function(t){nk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.node.attrs,{width:o})),s.setSelection(new Se.NodeSelection(s.doc.resolve(this.getPos()))),this.view.dispatch(s)}}}this.resizeInfo=null}}},{key:"handleResizeDblClick",value:function(e){var t=Yw(this.view.state.tr,this.node,this.getPos());t&&this.view.dispatch(t)}},{key:"handleMouseDown",value:function(e){if(!this.dom.classList.contains("selected")){var t=this.getPos(),n=this.view.state;if(null!=t){var r=n.tr.setSelection(Se.NodeSelection.create(n.doc,t));this.view.dispatch(r)}}}},{key:"updateOverflowMenuId",value:function(e){this.overflowMenuId=e}}])&&rk(t.prototype,n),r&&rk(t,r),e}(),ik=new Se.PluginKey("image"),lk=function(){return new Se.Plugin({key:ik,props:{getDragImage:function(e,t,n){var r=tt(n.content());if(!(r.length>0&&r.every(function(e){return Qe(e,"image")})))return!1;var o=r.length,a=r[0].attrs;return{element:bt()("div",{class:"ghost__Images"},bt()("img",{src:a.url,decoding:Ae.isFirefox&&a.filesize<10485760?"sync":"auto"}),o>1?bt()("div",{class:"ghost__ImagesCount"},o):null)}},nodeViews:{image:function(e,t,n,r){return new ak(e,t,n,r)},img:function(e,t,n,r){return new ak(e,t,n,r)}}}})},sk=new Se.PluginKey("inlinecursor"),ck=function(){return new Se.Plugin({key:sk,state:{init:function(){return null},apply:function(e,t,n,r){var o=r.selection,a=o.$head,i=o.$anchor,l=a.nodeAfter,s=a.nodeBefore;if(r.selection instanceof Se.TextSelection&&a===i){var c,u=r.schema;if(l&&l.type===u.nodes.image?c=l:s&&s.type===u.nodes.image&&(c=s),c)return{head:a.pos,height:c.attrs.height}}return null}},props:{decorations:uk}})};function uk(e){this.getState(e);return null}var dk=n(421),fk=n.n(dk),pk=n(92);function hk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function mk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gk=new Se.PluginKey("dragdrop"),yk={},vk=/Edge\/(\d+)/.exec(navigator.userAgent),bk=/MSIE \d/.test(navigator.userAgent),wk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);yk.mac=/Mac/.test(navigator.platform);var kk=yk.ie=!!(bk||wk||vk);yk.ie_version=bk?document.documentMode||6:wk?+wk[1]:vk?+vk[1]:null,yk.gecko=!kk&&/gecko\/(\d+)/i.test(navigator.userAgent),yk.gecko_version=yk.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var _k=!kk&&/Chrome\/(\d+)/.exec(navigator.userAgent);yk.chrome=!!_k,yk.chrome_version=_k&&+_k[1],yk.ios=!kk&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),yk.android=/Android \d/.test(navigator.userAgent),yk.webkit=!kk&&"WebkitAppearance"in document.documentElement.style,yk.safari=/Apple Computer/.test(navigator.vendor),yk.webkit_version=yk.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Ok=yk.ie&&yk.ie_version<15||yk.ios&&yk.webkit_version<604,Ck=yk.mac?"metaKey":"ctrlKey";var Sk=function(){return new Se.Plugin({key:gk,state:{init:function(){return{dragging:!1,dropping:!1,preventingDrop:!1}},apply:function(e,t){return!0===e.getMeta("paste")||!0===e.getMeta("resources-updated")||"drop"===e.getMeta("uiEvent")||e.getMeta(Ut)?this.spec.state.init():e.getMeta(this)||t}},props:{handleDOMEvents:{dragstart:function(e,t){xk(e,t);var n=Jy(e,t);n&&n.element&&(document.body.contains(n.element)||this.spec.renderToDragImageHolder(n.element),t.dataTransfer.setDragImage(n.element,Gy("x",n),Gy("y",n)));var r=function(e,t){var n=e.state.selection;return e.someProp("getDataTransferMetadata",function(r){return r(e,t,n)})||{type:"general"}}(e,t);return t.dataTransfer.setData("EnDataTransferMeta",JSON.stringify(r)),!0},dragover:function(e,t){if(!e.dragging){var n=t.dataTransfer.types,r=n.indexOf("x.drop-as/column")>-1?"column":n.indexOf("x.drop-as/row")>-1?"row":void 0;e.dragging={move:!1,slice:null,tableDrag:r}}return jk(e,{dragging:!0}),!1},dragenter:function(e,t){if(!e.dragging)return!1;var n=Yy(e,t);if(!n)return!1;var r=!1,o=e.dragging.slice;if(o){if(o.size>=1e5)return!1;var a=ri(o,e.state,{enclipboard:e.dragging.move,$context:n,drop:!0});e.dragging.processedSlice=a,r=Zy(e,o,a)}return jk(e,{dragging:!0,preventingDrop:r}),!1},dragend:function(e,t){return jk(e,{dragging:!1,dropping:!1,preventingDrop:!1}),Xy.cache.clear(),!1},drop:function(e,t){return jk(e,{dragging:!1,dropping:!0,preventingDrop:!1}),Ek(e,t),jk(e,{dragging:!1,dropping:!1,preventingDrop:!1}),Xy.cache.clear(),!0},mousedown:function(e,t){return jk(e,{dragging:!1,dropping:!1,preventingDrop:!1}),!1}},decorations:function(e){if(!(e.selection instanceof Se.NodeSelection))return null;var t=gk.getState(e),n=t.dragging,r=t.dropping;if(!n&&!r)return null;var o=at(e.selection,e.doc,Boolean);return xe.DecorationSet.create(e.doc,o.map(function(e){return xe.Decoration.node(e.pos,e.pos+e.nodeAfter.nodeSize,{},{dragging:n,dropping:r})}))}},view:function(){var e=document.createElement("div"),t="-9999px",n="-9999px";yk.safari&&(t="calc(100% - 1px)",n="calc(100% - 1px)"),e.style.top=t,e.style.left=n,e.id="drag-image-holder",e.classList.add("drag-image-holder"),document.body.appendChild(e);var r=function(){for(;e.firstChild;)e.firstChild.remove()};return this.renderToDragImageHolder=function(t){r(),t&&e.appendChild(t)},{update:function(e,t){var n=gk.getState(t),o=gk.getState(e.state),a=o.dragging,i=o.preventingDrop;document.body.classList.toggle("peso-dragging",a),document.body.classList.toggle("peso-preventingDrop",i),n.dragging&&!a&&r()},destroy:function(){document.body.classList.remove("peso-dragging"),document.body.classList.remove("peso-preventingDrop"),r(),e.remove()}}}})},xk=function(e,t){var n=e.mouseDown;if(n&&n.done(),t.dataTransfer){var r={move:!t[Ck],slice:null,processedSlice:null},o=Si(e.state.selection),a=[],i=!0;if(o instanceof Vo.CellSelection)"table"===e.tableHandlePressed&&o.isColSelection()&&o.isRowSelection()?r.tableDrag="table":"column"===e.tableHandlePressed&&o.isColSelection()?(r.tableDrag="column",r.tableDragCount=Dv(o.content()).width,a.push("x.drop-as/column")):"row"===e.tableHandlePressed&&o.isRowSelection()&&(r.tableDrag="row",r.tableDragCount=Dv(o.content()).height,a.push("x.drop-as/row")),delete e.tableHandlePressed;else if(n&&n.mightDrag)e.dispatch(e.state.tr.setSelection(Se.NodeSelection.create(e.state.doc,n.mightDrag.pos)));else if(t.target&&1===t.target.nodeType){var l=e.docView.nearestDesc(t.target,!0);l&&l.node.type.spec.draggable&&l!==e.docView&&e.dispatch(e.state.tr.setSelection(Se.NodeSelection.create(e.state.doc,l.posBefore)))}else ru.getState(e.state).isPMSelection||(r.move=!1,i=!1);if(i){var s=Si(e.state.selection).content(),c=Object(xe.__serializeForClipboard)(e,s),u=c.dom,d=c.text;t.dataTransfer.clearData(),t.dataTransfer.setData(Ok?"Text":"text/html",u.innerHTML),Ok||t.dataTransfer.setData("text/plain",d),r.slice=s}a.forEach(function(e){return t.dataTransfer.setData(e,e)}),e.dragging=r}},Ek=function(e,t){if(e.editable){var n=e.dragging;if(e.dragging=null,t.dataTransfer){var r=e.posAtCoords(Pk(t));if(r){var o=e.state.doc.resolve(r.pos);if(o){var a=n&&n.slice||Object(xe.__parseFromClipboard)(e,t.dataTransfer.getData(Ok?"Text":"text/plain"),Ok?null:t.dataTransfer.getData("text/html"),!1,o);if(a){t.preventDefault();var i=ri(a,e.state,{enclipboard:n&&n.move,$context:o,drop:!0});if(!Zy(e,a,i)){a=i;var l=e.someProp("handleDropEvent",function(r){return r(e,t,a,n||{})});if(!0!==l){var s=l||{},c=s.insertPos,u=s.insertTo,d=s.tr;null==(c=c||(a?Object(sr.dropPoint)(e.state.doc,o.pos,a):o.pos))&&(c=o.pos);var f=aa(e.state.doc.resolve(c));d=d||e.state.tr;var p=e.state.selection;if(n&&n.move)e.someProp("handleDropDelete",function(r){return r(e,t,d,n||{})})||d.deleteSelection();var h=d.mapping.map(c);u=u?d.mapping.map(u):h;var m=0===a.openStart&&0===a.openEnd&&1===a.content.childCount,g=d.doc;if(m?d.replaceRangeWith(h,u,a.content.firstChild):d.replaceRange(h,u,a),!d.doc.eq(g)){var y=d.doc.resolve(h);if(f||!ra(y.nodeAfter)&&!aa(y))m&&Se.NodeSelection.isSelectable(a.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(a.content.firstChild)?d.setSelection(new Se.NodeSelection(y)):d.setSelection(function(e,t,n,r){return e.someProp("createSelectionBetween",function(r){return r(e,t,n)})||Se.TextSelection.between(t,n,r)}(e,y,d.doc.resolve(d.mapping.map(c))));else{var v=d.doc.resolve(ia(y,!0).pos);Ws(d,v),ba(d,v)}var b=!1;e.state.doc.nodesBetween(p.from,p.to,function(e){return"file"!==e.type.name&&"image"!==e.type.name||(b=!0),!0}),b&&Oi(d,_i.b.NoteElementAttachment,_i.a.MoveAttachment),e.focus(),e.dispatch(d.setMeta("uiEvent","drop")),Ae.isFirefox&&Yb(e)}}}}}}}}},Pk=function(e){return{left:e.clientX,top:e.clientY}},jk=function(e,t){var n=gk.getState(e.state);(void 0!==t.dragging&&n.dragging!==t.dragging||void 0!==t.dropping&&n.dropping!==t.dropping||void 0!==t.preventingDrop&&n.preventingDrop!==t.preventingDrop)&&e.dispatch(e.state.tr.setMeta(gk,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hk(n,!0).forEach(function(t){mk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hk(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{},t)))},Mk=new Se.PluginKey("list"),Ak=function(){return new Se.Plugin({key:Mk,state:{init:function(){return{listItemPos:null,listDragSelection:null}},apply:function(e,t){var n=e.getMeta(this),r=null!=t.listItemPos?e.mapping.map(t.listItemPos):null;if(n&&"SetListDragSelection"===n.type)return{listItemPos:r,listDragSelection:n.payload};if(!t.listDragSelection&&e.selectionSet)return null==t.listItemPos?t:{listDragSelection:null,listItemPos:null};if(n&&"SetListItemPos"===n.type)return{listItemPos:n.payload,listDragSelection:t.listDragSelection};var o=e.getMeta(gk);return o&&!1===o.dragging?{listItemPos:r,listDragSelection:null}:t.listItemPos===r?t:{listItemPos:r,listDragSelection:t.listDragSelection}}},props:{handleDOMEvents:{mousedown:function(e,t){if(!e.editable)return!1;var n=Et(t.target,function(e){return Boolean(e&&e.classList&&e.classList.contains("list-drag-handle"))},null,!0),r=n&&e.posAtDOM(n,0);if(null==r)return!1;var o=e.state,a=o.tr,i=o.doc,l=e.dispatch,s=i.resolve(r-1),c=!t.altKey&&s.nodeAfter?i.resolve(s.pos+s.nodeAfter.nodeSize):null;return c&&c.nodeAfter&&Qe(c.nodeAfter,"list")?(a.setSelection(new Se.TextSelection(s,i.resolve(c.pos+c.nodeAfter.nodeSize))),a.setMeta(Mk,{type:"SetListDragSelection",payload:"parent-child"})):(a.setSelection(new Se.NodeSelection(s)),a.setMeta(Mk,{type:"SetListDragSelection",payload:"single"})),l(a),!1},mousemove:function(e,t){return e.editable&&Tk(e,t),!1},mouseup:function(e,t){var n=Mk.getState(e.state),r=e.state,o=r.selection,a=r.tr,i=e.dispatch,l=!1;return n.listDragSelection&&(l=!0,a.setMeta(Mk,{type:"SetListDragSelection",payload:null})),o instanceof Se.NodeSelection&&Qe(o.node,"listitem")&&(l=!0,a.setSelection(Se.TextSelection.between(o.$anchor,o.$head))),l&&i(a),!1}},transformPastedSlice:function(e,t,n){var r=t.state.selection.$from,o=t.state.schema;return null==lt(r,function(e){return e.type===o.nodes.li})?e:e=function(e,t,n){var r=e.content;if(0!==e.openStart||!Qe(r.firstChild,"list"))return e;var o=r.firstChild.firstChild;if(o&&Qe(o,"list")){var a=[];r.firstChild.content.forEach(function(e){a.push(e)});for(var i=1;i<r.childCount;i++)a.push(r.child(i));for(var l=a[a.length-1],s=0;l;)l=l.lastChild,s++;return new Je.Slice(Je.Fragment.from(a),0,s)}var c=r.firstChild,u=0;for(;c;)c=c.firstChild,u++;return new Je.Slice(r,u,e.openEnd)}(e=function(e,t,n){var r=e.content;if(r.childCount<2||!r.firstChild.isTextblock||!r.child(1).isTextblock)return e;for(var o=[r.child(0)],a=t.state.schema,i=1;i<r.childCount;i++){var l=r.child(i);o.push(l.isTextblock?a.nodes.li.create(null,l):l)}var s=Je.Fragment.from(o),c=r.lastChild===s.lastChild?e.openEnd:e.openEnd+1;return new Je.Slice(s,e.openStart,c)}(e=function(e,t,n){var r=e.content;if(0===e.openStart||r.childCount<2||!Qe(r.child(1),"list"))return e;var o=[t.state.schema.nodes.li.create(null,r.child(0))];o=o.concat(r.child(1).content.content);var a=r.child(1).copy(Je.Fragment.from(o)),i=Je.Fragment.from([a].concat(r.content.slice(2)));return new Je.Slice(i,e.openStart+2,e.openEnd)}(e,t),t))},getDragImage:function(e,t,n){var r=Mk.getState(e.state).listDragSelection;if(!r)return null;var o=n.$from,a=e.nodeDOM(o.pos);if(!a||!a.parentElement)return null;var i=null,l=null;!a.nextElementSibling||"parent-child"!==r||"UL"!==a.nextElementSibling.tagName&&"OL"!==a.nextElementSibling.tagName||(l=(i=a.nextElementSibling).cloneNode(!0));var s=a.parentElement.tagName,c=a.cloneNode(!0);c.setAttribute("style","width: ".concat(a.clientWidth,"px; height: ").concat(a.clientHeight,"px;")),l&&l.setAttribute("style","width: ".concat(i.clientWidth,"px; height: ").concat(i.clientHeight,"px"));var u=bt()(s,{class:Object(pk.c)("ghost__lists",a.parentElement.classList.contains("en-todolist")?"en-todolist":null)},c,l);Array.from(u.querySelectorAll(".list-drag-handle")).forEach(function(e){e.remove()}),Array.from(u.querySelectorAll(".selected, .ProseMirror-selectednode")).forEach(function(e){e.classList.remove("selected"),e.classList.remove("ProseMirror-selectednode")});var d=Ct(a,t);return{x:function(){return Math.max(d.x,0)},y:function(){return Math.max(d.y,0)},element:u}},decorations:function(e){if(!Xl.getState(e).editable||!Object(Gi.getInteraction)().dragHandle)return xe.DecorationSet.empty;var t=Mk.getState(e),n=t.listItemPos,r=t.listDragSelection;if(null==n)return null;var o=e.doc.resolve(n);if(o.nodeAfter&&Qe(o.nodeAfter,"listitem")||(o=lt(o,function(e){return Qe(e,"listitem")})),!o)return null;var a=[],i=bt()("div",{draggable:!0,class:"list-drag-handle"});if(i.innerHTML='<svg draggable="false" viewBox="'.concat(ov.viewBox,'"><use xlink:href="#').concat(ov.id,'"/></svg>'),a.push(xe.Decoration.widget(o.pos+1,i,{key:"list-drag-handle"})),"parent-child"===r){var l=lt(o,function(e){return Qe(e,"list")}),s=at(e.selection,e.doc,function(e){return Qe(e.nodeAfter,"listitem")});a.push(xe.Decoration.widget(l.pos+1,function(e,t){var n=lt(o,function(e){return Qe(e,"list")}),r=e.nodeDOM(n.pos),a=e.nodeDOM(o.pos),i=r.getBoundingClientRect(),l=window.getComputedStyle(a).getPropertyValue("--bullet-left-position"),c=s.map(function(t){return e.nodeDOM(t.pos).getBoundingClientRect()}),u=kt(c),d=bt()("div",{class:"list-parent-child-dragSelection"});return d.style.top=Math.abs(u.top-i.top)+"px",d.style.right=Math.abs(u.right-i.right)+"px",d.style.bottom=Math.abs(u.bottom-i.bottom)+"px",d.style.left=l||"0px",d},{key:"list-parent-child-dragSelection"})),s.forEach(function(e){a.push(xe.Decoration.node(e.pos,e.pos+e.nodeAfter.nodeSize,{class:"selected"}))})}return xe.DecorationSet.create(e.doc,a)},handleDropDelete:function(e,t,n,r){return Vy(n,n.selection.$from,n.selection.$to)}},appendTransaction:function(e,t,n){if(!e.some(function(e){return e.docChanged}))return null;var r=e.reduce(function(e,t){return t.isGeneric?e:(t.getMeta(uc["list-item-changed"])&&(e.checkChangedListTypes=!0),t.getMeta(uc["list-item-deleted"])&&(e.checkAncestorList=!0),t.getMeta(uc["list-item-mixed-deleted"])&&(e.shallow=!1),(t.getMeta("paste")||"drop"===t.getMeta("uiEvent"))&&(e.shallow=!1),e)},{checkChangedListTypes:!1,checkAncestorList:!1,shallow:!0}),o=oo(e),a=yc(o,n.tr,r);return a.setStoredMarks(n.storedMarks),a.docChanged?a:null}})},Tk=fk()(function(e,t){var n=e.state,r=n.tr,o=n.selection,a=e.dispatch,i=Mk.getState(e.state);if(!i.listDragSelection){var l=e.posAtCoords({left:t.clientX+25,top:t.clientY}),s=null;if(l&&null!=l.pos){var c=e.state.doc.resolve(l.pos),u=c.nodeAfter&&Qe(c.nodeAfter,"listitem")?c:lt(c,function(e){return Qe(e,"listitem")});s=u&&!function(e,t){var n=lt(t,function(e){return Qe(e,"list")});if(n&&e.from<n.pos&&n.pos<e.to)return!0;var r=lt(e.$anchor,function(e){return Qe(e,"listitem")}),o=lt(e.$head,function(e){return Qe(e,"listitem")});return!(!r&&!o||r&&o&&r.pos===o.pos)}(o,u)?u.pos:null}i.listItemPos!==s&&a(r.setMeta(Mk,{type:"SetListItemPos",payload:s}))}},100,{trailing:!0,leading:!0});var Nk=n(1760),Dk=n.n(Nk),Lk=new Se.PluginKey("placeholder"),Rk=bt()("div",{class:"placeholder ".concat(Dk.a.wrapper)}),Ik=function(){return new Se.Plugin({key:Lk,props:{decorations:function(e){return xe.DecorationSet.create(e.doc,[xe.Decoration.widget(0,Rk)])}},view:function(e){return zk(e,e.state),{update:zk}}})};function zk(e,t){var n=Object(Gi.isPlaceholderVisible)(),r=e.state.doc,o=1===r.childCount&&r.firstChild&&0===r.firstChild.childCount&&e.editable&&!e.composing&&e.props.active;o&&!n?Object(Wl.renderPlaceholder)({visible:!0,domContainer:Rk}):!o&&n&&Object(Wl.renderPlaceholder)({visible:!1,domContainer:Rk})}var Bk=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=bt()("hr",{"data-sectionbreak":!0,style:"display:none;"});Object.defineProperty(o,"contentEditable",{get:function(){return!0},set:function(e){}}),this.dom=o},Fk=new Se.PluginKey("sectionbreak"),Wk=function(){return new Se.Plugin({key:Fk,props:{nodeViews:{sectionbreak:function(e,t,n){return new Bk(e,t,n)}},handleKeyDown:Object(Ly.keydownHandler)({Backspace:Hk,"Mod-Backspace":Hk,Delete:$k,"Mod-Delete":$k})}})};function Hk(e,t,n){var r=e.doc,o=e.selection.$cursor;if(o){var a=r.resolve(o.before()),i=a.nodeBefore;i&&"sectionbreak"===i.type.name&&t(e.tr.delete(a.pos-1,a.pos))}}function $k(e,t,n){var r=e.doc,o=e.selection.$cursor;if(o){var a=r.resolve(o.after()),i=a.nodeAfter;i&&"sectionbreak"===i.type.name&&t(e.tr.delete(a.pos,a.pos+1))}}function qk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Uk=function(){return new Se.Plugin(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qk(n,!0).forEach(function(t){Vk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qk(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(Vo.tableEditing)().spec,{appendTransaction:function(){}}))};function Kk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kk(n,!0).forEach(function(t){Xk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kk(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zk=new Se.PluginKey("todo"),Gk=function(){return new Se.Plugin({key:Zk,props:{handleDOMEvents:{mousedown:Jk,click:Jk},handleKeyDown:Object(Ly.keydownHandler)({Enter:function(e,t,n){var r=e.selection,o=r.$from,a=r.$to;if(r.empty&&o.parent.firstChild&&o.parent.firstChild.type===e.schema.nodes.todo){var i=e.storedMarks||a.parentOffset&&o.marks();if(o.parent.childCount>1)return Object(Jc.splitBlock)(e,function(n){var r=a.pos+2;return n.insert(r,e.schema.nodes.todo.create()),n.setNodeMarkup(r,null,null,i),n.setSelection(Se.TextSelection.create(n.doc,r+1)),n.setNodeMarkup(r-1,null,o.parent.attrs,null),i&&n.ensureMarks(i),t(n.scrollIntoView()),!0});var l=e.tr,s=o.pos-o.parentOffset;return l.delete(s,s+1),i&&l.ensureMarks(i),t(l),!0}return!1},Space:function(e,t){var n=e.selection,r=e.schema.nodes.todo;if(n instanceof Se.NodeSelection&&n.node.type===r){var o=e.tr;return Nu(o,n.$from),o.setSelection(Se.NodeSelection.create(o.doc,n.$from.pos)),t(o),!0}return!1}})}})};function Jk(e,t){if(!e.editable)return!1;var n=e.posAtCoords({left:t.clientX,top:t.clientY});if(!n||-1===n.inside)return!1;var r=e.state.schema,o=e.state.doc.resolve(n.inside);if(o.nodeAfter&&o.nodeAfter.type===r.nodes.todo){if("click"===t.type){var a=o.nodeAfter,i=Yk({},a.attrs,{checked:!a.attrs.checked});e.dispatch(e.state.tr.setNodeMarkup(o.pos,a.type,i,a.marks))}return t.preventDefault(),!0}if(o.parent&&o.parent.type===r.nodes.todolist&&(t.target.classList.contains("list-bullet")||t.target.parentNode&&t.target.parentNode.classList.contains("list-bullet"))){if("click"===t.type){var l=o.nodeAfter,s=Yk({},l.attrs,{checked:!l.attrs.checked}),c=e.state.tr;c.setNodeMarkup(o.pos,l.type,s,l.marks),c.setStoredMarks(e.state.tr.storedMarks),e.dispatch(c)}return t.preventDefault(),!0}return!1}var Qk=n(1723),e_=n.n(Qk);function t_(e){return(t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function r_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o_(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var a_=new Se.PluginKey("typebehind"),i_=function(e){return new Se.Plugin({key:a_,state:{init:function(){return{undoable:null,appendedTriggeredTypebehind:null}},apply:function(e,t){var n,r=e.getMeta(a_)||{},o=r.undoable,a=o_(r,["undoable"]);return(n=o||(e.getMeta(lb)?t.undoable:e.selectionSet||e.docChanged?null:t.undoable))===t.undoable&&e_()(a)?t:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n_(n,!0).forEach(function(t){r_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},a,{undoable:n})}},props:{handleKeyDown:Object(Ly.keydownHandler)({Backspace:function(e,t,n){return!!a_.getState(e).undoable&&(Object(as.undo)(e,t,n),!0)},Enter:function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"\n")})},"Alt-Enter":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"\n")})},"Ctrl-Enter":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"\n")})},"Meta-Enter":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"\n")})},"Shift-Enter":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"\n")})},Space:function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n," ")})},"Alt-Space":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n," ")})},"Ctrl-Space":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n," ")})},"Meta-Space":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n," ")})},"Shift-Space":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n," ")})},Tab:function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"    ")})},"Alt-Tab":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"    ")})},"Ctrl-Tab":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"    ")})},"Meta-Tab":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"    ")})},"Shift-Tab":function(e,t,n){return n.someProp("triggerTypebehind",function(r){return r(e,t,n,"    ")})}}),triggerTypebehind:function(t,n,r,o){if(!(t.selection instanceof Se.TextSelection))return!1;for(var a=t.selection.$from,i=t.tr,l=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼"),s=0;s<e.length;s++){var c=l_(t,a,e[s])&&e[s].match(t,l,o);if(c){var u=function(){var l=e[s],u=a.pos,d=u-c[0].length,f={rule:l,match:c,start:d,end:u,trigger:o},p=l.getTriggerType&&l.getTriggerType(c,d,u,o)||{},h=p.stopPropagation,m=void 0!==h&&h,g=p.append;if((void 0===g||g)&&!m)i.setMeta(a_,{appendedTriggeredTypebehind:f,view:r}),n(i);else{l.process(t,function(e){e=Object(as.closeHistory)(e),m&&e.setMeta(a_,{undoable:!0}),n(e)},c,d,u,o,r)}return{v:m}}();if("object"===t_(u))return u.v}}return!1}},appendTransaction:function(e,t,n){var r=a_.getState(n),o=r.appendedTriggeredTypebehind,a=r.view;if(!o)return null;if(!e.some(function(e){return e.docChanged}))return null;var i=null,l=o.rule,s=o.match,c=o.start,u=o.end,d=o.trigger;return u<=n.doc.content.size&&n.doc.textBetween(c,u)===s[0]&&l.process(n,function(e){(i=Object(as.closeHistory)(e)).setMeta(a_,{undoable:!0,appendedTriggeredTypebehind:null})},s,c,u,d,a),i||(i=n.tr.setMeta(a_,{undoable:null,appendedTriggeredTypebehind:null})),i}})};function l_(e,t,n){if(!n.matchSchema)return!0;var r=n.matchSchema,o=r.type,a=r.attrs,i=r.depth;return t.node(i||t.depth).type.strictContentMatch.matchType(e.schema.nodes[o],a)}var s_=/^```([.\w]*)$/,c_=/^```/,u_=function(e){return[{name:"createCodeblock",matchSchema:{type:"codeblock",depth:-1},match:function(e,t,n){return Ta(e.selection.$cursor)?null:s_.exec(t)},process:function(e,t,n,r,o,a,i){var l=function(e,t,n,r,o){var a=e.doc,i=e.tr,l=e.schema,s=(e.selection,Di({plain:!0},{selection:new Se.Selection(a.resolve(n),a.resolve(r))},o).plain.replace("```","").split("\n").map(function(e){return l.nodes.plaintext.create(null,e.length?l.text(e):null)})),c=l.nodes.codeblock.create({},s);return i.replaceRangeWith(n,r,c),i}(e,0,r,o,i);l&&(l.setSelection(Se.TextSelection.create(l.doc,r+1)),t(Oi(l,_i.b.NoteElementText,_i.a.Codeblock,"typebehind")))}},{name:"exitCodeblock",match:function(e,t,n){return Ta(e.selection.$cursor)?c_.exec(t):null},process:function(e,t,n,r,o,a){var i=e.tr,l=e.selection.$cursor,s=lt(l,function(e){return e.type===e.type.schema.nodes.codeblock}),c=s.nodeAfter;if(1===c.childCount&&7===c.nodeSize||"\n"===a&&2===c.childCount&&9===c.nodeSize)i.delete(s.pos,s.pos+c.nodeSize),i.setSelection(Se.TextSelection.create(i.doc,s.pos+1)),t(i);else{var u=lt(l,function(e){return e.isTextblock});if(c.lastChild===u.nodeAfter){if(i.setSelection(Se.TextSelection.create(i.doc,s.pos+c.nodeSize+1)),null===l.nodeAfter||0===l.nodeAfter.nodeSize){var d=u.pos;"\n"===a&&(d-=u.nodeBefore.nodeSize),i.delete(d,u.pos+u.nodeAfter.nodeSize)}else"\n"===a?i.delete(u.pos-u.nodeBefore.nodeSize,u.pos):i.delete(l.pos-4,l.pos);t(i)}}}}]};function d_(e){return e.replace(/[-[\]\/{}()*+?.\\^$|]/g,"\\$&")}var f_=/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*?)$/i;var p_={"❤️":["<3"],"💔":["</3"],"😎":["8)","8=)","8-)","B=)","B-)"],"😧":["D:"],"😢":[":'(",";(",";=(",";-("],"🐵":[":o)"],"💋":[":*",":-*"],"😃":["=)","=-)",":=)"],"😄":[":D",":-D"],"😉":[";)",";-)",";=)"],"😆":[":>",":->"],"😐":[":|",":-|",":=|"],"😮":[":o",":-o",":O",":-O",":=o",":=O"],"😠":[">:(",">:-("],"🙂":[":)","(:",":-)"],"😞":[":(","):",":-(",":=("],"😕":[":/",":-/",":\\",":-\\"],"😛":[":p",":-p",":b",":-b",":P",":-P",":=p",":=P"],"😜":[";p",";-p",";b",";-b",";P",";-P"],"😊":[":$",":-$",":=$"],"😡":[":@",":-@",":=@","x(","x-(","x=(","X(","(X=("],"😇":["O:)","O:=)","O:-)","o:)","o:=)","o:-)"],"😪":["|-)","I-)","I=)"]},h_={"😀":["grinningface","grinning_face","grinning"],"😁":["beamingfacewithsmilingeyes","beaming_face_with_smiling_eyes","grin"],"😂":["facewithtearsofjoy","face_with_tears_of_joy","joy"],"🤣":["rollingonthefloorlaughing","rolling_on_the_floor_laughing","rofl"],"😃":["grinningfacewithbigeyes","grinning_face_with_big_eyes","smiley"],"😄":["grinningfacewithsmilingeyes","grinning_face_with_smiling_eyes","smile"],"😅":["grinningfacewithsweat","grinning_face_with_sweat","sweatsmile","sweat_smile"],"😆":["grinningsquintingface","grinning_squinting_face","laughing"],"😉":["winkingface","winking_face","wink"],"😊":["smilingfacewithsmilingeyes","smiling_face_with_smiling_eyes","blush"],"😋":["facesavoringfood","face_savoring_food","yum"],"😎":["smilingfacewithsunglasses","smiling_face_with_sunglasses","sunglasses"],"😍":["smilingfacewithhearteyes","smiling_face_with_heart_eyes","hearteyes","heart_eyes"],"😘":["faceblowingakiss","face_blowing_a_kiss","kissingheart","kissing_heart"],"😗":["kissingface","kissing_face","kissing"],"😙":["kissingfacewithsmilingeyes","kissing_face_with_smiling_eyes","kissingsmilingeyes","kissing_smiling_eyes"],"😚":["kissingfacewithclosedeyes","kissing_face_with_closed_eyes","kissingclosedeyes","kissing_closed_eyes"],"☺️":["smilingface","smiling_face","relaxed"],"🙂":["slightlysmilingface","slightly_smiling_face"],"🤗":["huggingface","hugging_face"],"🤩":["star-struck"],"🤔":["thinkingface","thinking_face"],"🤨":["facewithraisedeyebrow","face_with_raised_eyebrow"],"😐":["neutralface","neutral_face"],"😑":["expressionlessface","expressionless_face","expressionless"],"😶":["facewithoutmouth","face_without_mouth","nomouth","no_mouth"],"🙄":["facewithrollingeyes","face_with_rolling_eyes"],"😏":["smirkingface","smirking_face","smirk"],"😣":["perseveringface","persevering_face","persevere"],"😥":["sadbutrelievedface","sad_but_relieved_face","disappointedrelieved","disappointed_relieved"],"😮":["facewithopenmouth","face_with_open_mouth","openmouth","open_mouth"],"🤐":["zippermouthface","zipper_mouth_face"],"😯":["hushedface","hushed_face","hushed"],"😪":["sleepyface","sleepy_face","sleepy"],"😫":["tiredface","tired_face"],"😴":["sleepingface","sleeping_face","sleeping"],"😌":["relievedface","relieved_face","relieved"],"😛":["facewithtongue","face_with_tongue","stuckouttongue","stuck_out_tongue"],"😜":["winkingfacewithtongue","winking_face_with_tongue","stuckouttonguewinkingeye","stuck_out_tongue_winking_eye"],"😝":["squintingfacewithtongue","squinting_face_with_tongue","stuckouttongueclosedeyes","stuck_out_tongue_closed_eyes"],"🤤":["droolingface","drooling_face"],"😒":["unamusedface","unamused_face","unamused"],"😓":["downcastfacewithsweat","downcast_face_with_sweat","sweat"],"😔":["pensiveface","pensive_face","pensive"],"😕":["confusedface","confused_face","confused"],"🙃":["upsidedownface","upside_down_face"],"🤑":["moneymouthface","money_mouth_face"],"😲":["astonishedface","astonished_face","astonished"],"☹️":["frowningface","frowning_face","whitefrowningface","white_frowning_face"],"🙁":["slightlyfrowningface","slightly_frowning_face"],"😖":["confoundedface","confounded_face","confounded"],"😞":["disappointedface","disappointed_face","disappointed"],"😟":["worriedface","worried_face","worried"],"😤":["facewithsteamfromnose","face_with_steam_from_nose","triumph"],"😢":["cryingface","crying_face","cry"],"😭":["loudlycryingface","loudly_crying_face","sob"],"😦":["frowningfacewithopenmouth","frowning_face_with_open_mouth","frowning"],"😧":["anguishedface","anguished_face","anguished"],"😨":["fearfulface","fearful_face","fearful"],"😩":["wearyface","weary_face","weary"],"🤯":["explodinghead","exploding_head"],"😬":["grimacingface","grimacing_face","grimacing"],"😰":["anxiousfacewithsweat","anxious_face_with_sweat","coldsweat","cold_sweat"],"😱":["facescreaminginfear","face_screaming_in_fear","scream"],"😳":["flushedface","flushed_face","flushed"],"🤪":["zanyface","zany_face"],"😵":["dizzyface","dizzy_face"],"😡":["poutingface","pouting_face","rage"],"😠":["angryface","angry_face","angry"],"🤬":["facewithsymbolsonmouth","face_with_symbols_on_mouth"],"😷":["facewithmedicalmask","face_with_medical_mask","mask"],"🤒":["facewiththermometer","face_with_thermometer"],"🤕":["facewithheadbandage","face_with_head_bandage"],"🤢":["nauseatedface","nauseated_face"],"🤮":["facevomiting","face_vomiting"],"🤧":["sneezingface","sneezing_face"],"😇":["smilingfacewithhalo","smiling_face_with_halo","innocent"],"🤠":["cowboyhatface","cowboy_hat_face","facewithcowboyhat","face_with_cowboy_hat"],"🤥":["lyingface","lying_face"],"🤫":["shushingface","shushing_face"],"🤭":["facewithhandovermouth","face_with_hand_over_mouth"],"🧐":["facewithmonocle","face_with_monocle"],"🤓":["nerdface","nerd_face"],"😈":["smilingfacewithhorns","smiling_face_with_horns","smilingimp","smiling_imp"],"👿":["angryfacewithhorns","angry_face_with_horns","imp"],"🤡":["clownface","clown_face"],"👹":["ogre","japaneseogre","japanese_ogre"],"👺":["goblin","japanesegoblin","japanese_goblin"],"💀":["skull"],"☠️":["skullandcrossbones","skull_and_crossbones"],"👻":["ghost"],"👽":["alien"],"👾":["alienmonster","alien_monster","spaceinvader","space_invader"],"🤖":["robotface","robot_face"],"💩":["pileofpoo","pile_of_poo","hankey"],"😺":["smileycat","smiley_cat"],"😸":["grinningcatface","grinning_cat_face","smilecat","smile_cat"],"😹":["catfacewithtearsofjoy","cat_face_with_tears_of_joy","joycat","joy_cat"],"😻":["catfacewithhearteyes","cat_face_with_heart_eyes","hearteyescat","heart_eyes_cat"],"😼":["catfacewithwrysmile","cat_face_with_wry_smile","smirkcat","smirk_cat"],"😽":["kissingcatface","kissing_cat_face","kissingcat","kissing_cat"],"🙀":["wearycatface","weary_cat_face","screamcat","scream_cat"],"😿":["cryingcatface","crying_cat_face"],"😾":["poutingcatface","pouting_cat_face","poutingcat","pouting_cat"],"🙈":["seenoevilmonkey","see_no_evil_monkey","seenoevil","see_no_evil"],"🙉":["hearnoevilmonkey","hear_no_evil_monkey","hearnoevil","hear_no_evil"],"🙊":["speaknoevilmonkey","speak_no_evil_monkey","speaknoevil","speak_no_evil"],"👶":["baby"],"🧒":["child"],"👦":["boy"],"👧":["girl"],"🧑":["person","adult"],"👱":["personblondhair","person_blond_hair","personwithblondhair","person_with_blond_hair"],"👨":["man"],"👱‍♂️":["manblondhair","man_blond_hair","blondhairedman","blond_haired_man","blond-haired-man"],"🧔":["manbeard","man_beard","beardedman","bearded_man","beardedperson","bearded_person"],"👩":["woman"],"👱‍♀️":["womanblondhair","woman_blond_hair","blondhairedwoman","blond_haired_woman","blond-haired-woman"],"🧓":["olderperson","older_person","olderadult","older_adult"],"👴":["oldman","old_man","olderman","older_man"],"👵":["oldwoman","old_woman","olderwoman","older_woman"],"👨‍⚕️":["manhealthworker","man_health_worker","maledoctor","male_doctor","male-doctor"],"👩‍⚕️":["womanhealthworker","woman_health_worker","femaledoctor","female_doctor","female-doctor"],"👨‍🎓":["manstudent","man_student","malestudent","male_student","male-student"],"👩‍🎓":["womanstudent","woman_student","femalestudent","female_student","female-student"],"👨‍🏫":["manteacher","man_teacher","maleteacher","male_teacher","male-teacher"],"👩‍🏫":["womanteacher","woman_teacher","femaleteacher","female_teacher","female-teacher"],"👨‍⚖️":["manjudge","man_judge","malejudge","male_judge","male-judge"],"👩‍⚖️":["womanjudge","woman_judge","femalejudge","female_judge","female-judge"],"👨‍🌾":["manfarmer","man_farmer","malefarmer","male_farmer","male-farmer"],"👩‍🌾":["womanfarmer","woman_farmer","femalefarmer","female_farmer","female-farmer"],"👨‍🍳":["mancook","man_cook","malecook","male_cook","male-cook"],"👩‍🍳":["womancook","woman_cook","femalecook","female_cook","female-cook"],"👨‍🔧":["manmechanic","man_mechanic","malemechanic","male_mechanic","male-mechanic"],"👩‍🔧":["womanmechanic","woman_mechanic","femalemechanic","female_mechanic","female-mechanic"],"👨‍🏭":["manfactoryworker","man_factory_worker","malefactoryworker","male_factory_worker","male-factory-worker"],"👩‍🏭":["womanfactoryworker","woman_factory_worker","femalefactoryworker","female_factory_worker","female-factory-worker"],"👨‍💼":["manofficeworker","man_office_worker","maleofficeworker","male_office_worker","male-office-worker"],"👩‍💼":["womanofficeworker","woman_office_worker","femaleofficeworker","female_office_worker","female-office-worker"],"👨‍🔬":["manscientist","man_scientist","malescientist","male_scientist","male-scientist"],"👩‍🔬":["womanscientist","woman_scientist","femalescientist","female_scientist","female-scientist"],"👨‍💻":["mantechnologist","man_technologist","maletechnologist","male_technologist","male-technologist"],"👩‍💻":["womantechnologist","woman_technologist","femaletechnologist","female_technologist","female-technologist"],"👨‍🎤":["mansinger","man_singer","malesinger","male_singer","male-singer"],"👩‍🎤":["womansinger","woman_singer","femalesinger","female_singer","female-singer"],"👨‍🎨":["manartist","man_artist","maleartist","male_artist","male-artist"],"👩‍🎨":["womanartist","woman_artist","femaleartist","female_artist","female-artist"],"👨‍✈️":["manpilot","man_pilot","malepilot","male_pilot","male-pilot"],"👩‍✈️":["womanpilot","woman_pilot","femalepilot","female_pilot","female-pilot"],"👨‍🚀":["manastronaut","man_astronaut","maleastronaut","male_astronaut","male-astronaut"],"👩‍🚀":["womanastronaut","woman_astronaut","femaleastronaut","female_astronaut","female-astronaut"],"👨‍🚒":["manfirefighter","man_firefighter","malefirefighter","male_firefighter","male-firefighter"],"👩‍🚒":["womanfirefighter","woman_firefighter","femalefirefighter","female_firefighter","female-firefighter"],"👮":["policeofficer","police_officer","cop"],"👮‍♂️":["manpoliceofficer","man_police_officer","policeman","malepoliceofficer","male_police_officer","male-police-officer"],"👮‍♀️":["womanpoliceofficer","woman_police_officer","policewoman","femalepoliceofficer","female_police_officer","female-police-officer"],"🕵️":["detective","sleuthorspy","sleuth_or_spy"],"🕵️‍♂️":["mandetective","man_detective","maledetective","male_detective","male-detective"],"🕵️‍♀️":["womandetective","woman_detective","femaledetective","female_detective","female-detective"],"💂":["guard","guardsman"],"💂‍♂️":["manguard","man_guard","maleguard","male_guard","male-guard"],"💂‍♀️":["womanguard","woman_guard","femaleguard","female_guard","female-guard"],"👷":["constructionworker","construction_worker"],"👷‍♂️":["manconstructionworker","man_construction_worker","maleconstructionworker","male_construction_worker","male-construction-worker"],"👷‍♀️":["womanconstructionworker","woman_construction_worker","femaleconstructionworker","female_construction_worker","female-construction-worker"],"🤴":["prince"],"👸":["princess"],"👳":["personwearingturban","person_wearing_turban","man_with_turban"],"👳‍♂️":["manwearingturban","man_wearing_turban","man-wearing-turban"],"👳‍♀️":["womanwearingturban","woman_wearing_turban","woman-wearing-turban"],"👲":["manwithchinesecap","man_with_chinese_cap","manwithguapimao","man_with_gua_pi_mao"],"🧕":["womanwithheadscarf","woman_with_headscarf","personwithheadscarf","person_with_headscarf"],"🤵":["manintuxedo","man_in_tuxedo"],"👰":["bridewithveil","bride_with_veil"],"🤰":["pregnantwoman","pregnant_woman"],"🤱":["breastfeeding","breast_feeding","breast-feeding"],"👼":["babyangel","baby_angel","angel"],"🎅":["santaclaus","santa_claus","santa"],"🤶":["mrsclaus","mrs_claus"],"🧙":["mage"],"🧙‍♀️":["womanmage","woman_mage","femalemage","female_mage"],"🧙‍♂️":["manmage","man_mage","malemage","male_mage"],"🧚":["fairy"],"🧚‍♀️":["womanfairy","woman_fairy","femalefairy","female_fairy"],"🧚‍♂️":["manfairy","man_fairy","malefairy","male_fairy"],"🧛":["vampire"],"🧛‍♀️":["womanvampire","woman_vampire","femalevampire","female_vampire"],"🧛‍♂️":["manvampire","man_vampire","malevampire","male_vampire"],"🧜":["merperson"],"🧜‍♀️":["mermaid"],"🧜‍♂️":["merman"],"🧝":["elf"],"🧝‍♀️":["womanelf","woman_elf","femaleelf","female_elf"],"🧝‍♂️":["manelf","man_elf","maleelf","male_elf"],"🧞":["genie"],"🧞‍♀️":["womangenie","woman_genie","femalegenie","female_genie"],"🧞‍♂️":["mangenie","man_genie","malegenie","male_genie"],"🧟":["zombie"],"🧟‍♀️":["womanzombie","woman_zombie","femalezombie","female_zombie"],"🧟‍♂️":["manzombie","man_zombie","malezombie","male_zombie"],"🙍":["personfrowning","person_frowning"],"🙍‍♂️":["manfrowning","man_frowning","man-frowning"],"🙍‍♀️":["womanfrowning","woman_frowning","woman-frowning"],"🙎":["personpouting","person_pouting","personwithpoutingface","person_with_pouting_face"],"🙎‍♂️":["manpouting","man_pouting","man-pouting"],"🙎‍♀️":["womanpouting","woman_pouting","woman-pouting"],"🙅":["persongesturingno","person_gesturing_no","nogood","no_good"],"🙅‍♂️":["mangesturingno","man_gesturing_no","man-gesturing-no"],"🙅‍♀️":["womangesturingno","woman_gesturing_no","woman-gesturing-no"],"🙆":["persongesturingok","person_gesturing_ok","okwoman","ok_woman"],"🙆‍♂️":["mangesturingok","man_gesturing_ok","man-gesturing-ok"],"🙆‍♀️":["womangesturingok","woman_gesturing_ok","woman-gesturing-ok"],"💁":["persontippinghand","person_tipping_hand","informationdeskperson","information_desk_person"],"💁‍♂️":["mantippinghand","man_tipping_hand","man-tipping-hand"],"💁‍♀️":["womantippinghand","woman_tipping_hand","woman-tipping-hand"],"🙋":["personraisinghand","person_raising_hand","raisinghand","raising_hand"],"🙋‍♂️":["manraisinghand","man_raising_hand","man-raising-hand"],"🙋‍♀️":["womanraisinghand","woman_raising_hand","woman-raising-hand"],"🙇":["personbowing","person_bowing","bow"],"🙇‍♂️":["manbowing","man_bowing","man-bowing"],"🙇‍♀️":["womanbowing","woman_bowing","woman-bowing"],"🤦":["personfacepalming","person_facepalming","facepalm","face_palm"],"🤦‍♂️":["manfacepalming","man_facepalming","man-facepalming"],"🤦‍♀️":["womanfacepalming","woman_facepalming","woman-facepalming"],"🤷":["personshrugging","person_shrugging","shrug"],"🤷‍♂️":["manshrugging","man_shrugging","man-shrugging"],"🤷‍♀️":["womanshrugging","woman_shrugging","woman-shrugging"],"💆":["persongettingmassage","person_getting_massage","massage"],"💆‍♂️":["mangettingmassage","man_getting_massage","man-getting-massage"],"💆‍♀️":["womangettingmassage","woman_getting_massage","woman-getting-massage"],"💇":["persongettinghaircut","person_getting_haircut","haircut"],"💇‍♂️":["mangettinghaircut","man_getting_haircut","man-getting-haircut"],"💇‍♀️":["womangettinghaircut","woman_getting_haircut","woman-getting-haircut"],"🚶":["personwalking","person_walking","walking"],"🚶‍♂️":["manwalking","man_walking","man-walking"],"🚶‍♀️":["womanwalking","woman_walking","woman-walking"],"🏃":["personrunning","person_running","runner"],"🏃‍♂️":["manrunning","man_running","man-running"],"🏃‍♀️":["womanrunning","woman_running","woman-running"],"💃":["womandancing","woman_dancing","dancer"],"🕺":["mandancing","man_dancing"],"👯":["peoplewithbunnyears","people_with_bunny_ears","dancers"],"👯‍♂️":["manwithbunnyears","man_with_bunny_ears","man-with-bunny-ears-partying"],"👯‍♀️":["womanwithbunnyears","woman_with_bunny_ears","woman-with-bunny-ears-partying"],"🧖":["personinsteamyroom","person_in_steamy_room"],"🧖‍♀️":["womaninsteamyroom","woman_in_steamy_room"],"🧖‍♂️":["maninsteamyroom","man_in_steamy_room"],"🧗":["personclimbing","person_climbing"],"🧗‍♀️":["womanclimbing","woman_climbing"],"🧗‍♂️":["manclimbing","man_climbing"],"🧘":["personinlotusposition","person_in_lotus_position"],"🧘‍♀️":["womaninlotusposition","woman_in_lotus_position"],"🧘‍♂️":["maninlotusposition","man_in_lotus_position"],"🛀":["persontakingbath","person_taking_bath","bath"],"🛌":["personinbed","person_in_bed","sleepingaccommodation","sleeping_accommodation"],"🕴️":["maninsuitlevitating","man_in_suit_levitating","maninbusinesssuitlevitating","man_in_business_suit_levitating"],"🗣️":["speakinghead","speaking_head","speakingheadinsilhouette","speaking_head_in_silhouette"],"👤":["bustinsilhouette","bust_in_silhouette"],"👥":["bustsinsilhouette","busts_in_silhouette"],"🤺":["personfencing","person_fencing","fencer"],"🏇":["horseracing","horse_racing"],"⛷️":["skier"],"🏂":["snowboarder"],"🏌️":["persongolfing","person_golfing","golfer"],"🏌️‍♂️":["mangolfing","man_golfing","man-golfing"],"🏌️‍♀️":["womangolfing","woman_golfing","woman-golfing"],"🏄":["personsurfing","person_surfing","surfer"],"🏄‍♂️":["mansurfing","man_surfing","man-surfing"],"🏄‍♀️":["womansurfing","woman_surfing","woman-surfing"],"🚣":["personrowingboat","person_rowing_boat","rowboat"],"🚣‍♂️":["manrowingboat","man_rowing_boat","man-rowing-boat"],"🚣‍♀️":["womanrowingboat","woman_rowing_boat","woman-rowing-boat"],"🏊":["personswimming","person_swimming","swimmer"],"🏊‍♂️":["manswimming","man_swimming","man-swimming"],"🏊‍♀️":["womanswimming","woman_swimming","woman-swimming"],"⛹️":["personbouncingball","person_bouncing_ball","person_with_ball"],"⛹️‍♂️":["manbouncingball","man_bouncing_ball","man-bouncing-ball"],"⛹️‍♀️":["womanbouncingball","woman_bouncing_ball","woman-bouncing-ball"],"🏋️":["personliftingweights","person_lifting_weights","weightlifter","weight_lifter"],"🏋️‍♂️":["manliftingweights","man_lifting_weights","man-lifting-weights"],"🏋️‍♀️":["womanliftingweights","woman_lifting_weights","woman-lifting-weights"],"🚴":["personbiking","person_biking","bicyclist"],"🚴‍♂️":["manbiking","man_biking","man-biking"],"🚴‍♀️":["womanbiking","woman_biking","woman-biking"],"🚵":["personmountainbiking","person_mountain_biking","mountain_bicyclist"],"🚵‍♂️":["manmountainbiking","man_mountain_biking","man-mountain-biking"],"🚵‍♀️":["womanmountainbiking","woman_mountain_biking","woman-mountain-biking"],"🏎️":["racingcar","racing_car"],"🏍️":["motorcycle","racingmotorcycle","racing_motorcycle"],"🤸":["personcartwheeling","person_cartwheeling","persondoingcartwheel","person_doing_cartwheel"],"🤸‍♂️":["mancartwheeling","man_cartwheeling","man-cartwheeling"],"🤸‍♀️":["womancartwheeling","woman_cartwheeling","woman-cartwheeling"],"🤼":["personwrestling","person_wrestling","wrestlers"],"🤼‍♂️":["manwrestling","man_wrestling","man-wrestling"],"🤼‍♀️":["womanwrestling","woman_wrestling","woman-wrestling"],"🤽":["personplayingwaterpolo","person_playing_water_polo","water_polo"],"🤽‍♂️":["manplayingwaterpolo","man_playing_water_polo","man-playing-water-polo"],"🤽‍♀️":["womanplayingwaterpolo","woman_playing_water_polo","woman-playing-water-polo"],"🤾":["personplayinghandball","person_playing_handball","handball"],"🤾‍♂️":["manplayinghandball","man_playing_handball","man-playing-handball"],"🤾‍♀️":["womanplayinghandball","woman_playing_handball","woman-playing-handball"],"🤹":["personjuggling","person_juggling","juggling"],"🤹‍♂️":["manjuggling","man_juggling","man-juggling"],"🤹‍♀️":["womanjuggling","woman_juggling","woman-juggling"],"👫":["manandwomanholdinghands","man_and_woman_holding_hands","couple"],"👬":["twomenholdinghands","two_men_holding_hands"],"👭":["twowomenholdinghands","two_women_holding_hands"],"💏":["couplekiss","couple_kiss"],"👩‍❤️‍💋‍👨":["kiss_woman_man","woman-kiss-man"],"👨‍❤️‍💋‍👨":["kiss_man_man","man-kiss-man"],"👩‍❤️‍💋‍👩":["kiss_woman_woman","woman-kiss-woman"],"💑":["couplewithheart","couple_with_heart"],"👩‍❤️‍👨":["couple_woman_man","woman-heart-man"],"👨‍❤️‍👨":["couple_man_man","man-heart-man"],"👩‍❤️‍👩":["couple_woman_woman","woman-heart-woman"],"👪":["family"],"👨‍👩‍👦":["family_man_woman_boy","man-woman-boy"],"👨‍👩‍👧":["family_man_woman_girl","man-woman-girl"],"👨‍👩‍👧‍👦":["family_man_woman_girl_boy","man-woman-girl-boy"],"👨‍👩‍👦‍👦":["family_man_woman_boy_boy","man-woman-boy-boy"],"👨‍👩‍👧‍👧":["family_man_woman_girl_girl","man-woman-girl-girl"],"👨‍👨‍👦":["family_man_man_boy","man-man-boy"],"👨‍👨‍👧":["family_man_man_girl","man-man-girl"],"👨‍👨‍👧‍👦":["family_man_man_girl_boy","man-man-girl-boy"],"👨‍👨‍👦‍👦":["family_man_man_boy_boy","man-man-boy-boy"],"👨‍👨‍👧‍👧":["family_man_man_girl_girl","man-man-girl-girl"],"👩‍👩‍👦":["family_woman_woman_boy","woman-woman-boy"],"👩‍👩‍👧":["family_woman_woman_girl","woman-woman-girl"],"👩‍👩‍👧‍👦":["family_woman_woman_girl_boy","woman-woman-girl-boy"],"👩‍👩‍👦‍👦":["family_woman_woman_boy_boy","woman-woman-boy-boy"],"👩‍👩‍👧‍👧":["family_woman_woman_girl_girl","woman-woman-girl-girl"],"👨‍👦":["family_man_boy","man-boy"],"👨‍👦‍👦":["family_man_boy_boy","man-boy-boy"],"👨‍👧":["family_man_girl","man-girl"],"👨‍👧‍👦":["family_man_girl_boy","man-girl-boy"],"👨‍👧‍👧":["family_man_girl_girl","man-girl-girl"],"👩‍👦":["family_woman_boy","woman-boy"],"👩‍👦‍👦":["family_woman_boy_boy","woman-boy-boy"],"👩‍👧":["family_woman_girl","woman-girl"],"👩‍👧‍👦":["family_woman_girl_boy","woman-girl-boy"],"👩‍👧‍👧":["family_woman_girl_girl","woman-girl-girl"],"🤳":["selfie"],"💪":["flexedbiceps","flexed_biceps","muscle"],"👈":["backhandindexpointingleft","backhand_index_pointing_left","pointleft","point_left"],"👉":["backhandindexpointingright","backhand_index_pointing_right","pointright","point_right"],"☝️":["indexpointingup","index_pointing_up","pointup","point_up"],"👆":["backhandindexpointingup","backhand_index_pointing_up","pointup2","point_up_2"],"🖕":["middlefinger","middle_finger"],"👇":["backhandindexpointingdown","backhand_index_pointing_down","point_down"],"✌️":["victoryhand","victory_hand","v"],"🤞":["crossedfingers","crossed_fingers"],"🖖":["vulcansalute","vulcan_salute","spockhand","spock_hand","spock-hand"],"🤘":["signofthehorns","sign_of_the_horns","thehorns","the_horns","rockon","rock_on","metal"],"🤙":["callmehand","call_me_hand"],"🖐️":["handwithfingerssplayed","hand_with_fingers_splayed","raisedhandwithfingerssplayed","raised_hand_with_fingers_splayed"],"✋":["raisedhand","raised_hand","hand"],"👌":["okhand","ok_hand"],"👍":["thumbsup","thumbs_up","+1"],"👎":["thumbsdown","thumbs_down","-1"],"✊":["raisedfist","raised_fist","fist"],"👊":["oncomingfist","oncoming_fist","facepunch","face_punch"],"🤛":["leftfacingfist","left_facing_fist","left-facing_fist","fistleft","fist_left"],"🤜":["rightfacingfist","right_facing_fist","right-facing_fist","fistright","fist_right"],"🤚":["raisedbackofhand","raised_back_of_hand"],"👋":["wavinghand","waving_hand","wave"],"🤟":["loveyougesture","love_you_gesture","iloveyouhandsign","i_love_you_hand_sign"],"✍️":["writinghand","writing_hand"],"👏":["clappinghands","clapping_hands","clap"],"👐":["openhands","open_hands"],"🙌":["raisinghands","raising_hands","raisedhands","raised_hands"],"🤲":["palmsuptogether","palms_up_together"],"🙏":["foldedhands","folded_hands","pray"],"🤝":["handshake"],"💅":["nailpolish","nail_polish","nailcare","nail_care"],"👂":["ear"],"👃":["nose"],"👣":["footprints"],"👀":["eyes"],"👁️":["eye"],"👁️‍🗨️":["eyeinspeechbubble","eye_in_speech_bubble","eye-in-speech-bubble"],"🧠":["brain"],"👅":["tongue"],"👄":["mouth","lips"],"🏻":["lightskintone","light_skin_tone","skin-tone-2"],"🏼":["mediumlightskintone","medium_light_skin_tone","skin-tone-3"],"🏽":["mediumskintone","medium_skin_tone","skin-tone-4"],"🏾":["mediumdarkskintone","medium_dark_skin_tone","skin-tone-5"],"🏿":["darkskintone","dark_skin_tone","skin-tone-6"],"💋":["kissmark","kiss_mark","kiss"],"💘":["heartwitharrow","heart_with_arrow","cupid"],"💝":["heartwithribbon","heart_with_ribbon","giftheart","gift_heart"],"💖":["sparklingheart","sparkling_heart"],"💗":["growingheart","growing_heart","heartpulse"],"💓":["beatingheart","beating_heart","heartbeat"],"💞":["revolvinghearts","revolving_hearts"],"💕":["twohearts","two_hearts"],"💌":["loveletter","love_letter"],"❣️":["heavyheartexclamation","heavy_heart_exclamation","heavyheartexclamationmarkornament","heavy_heart_exclamation_mark_ornament"],"💔":["brokenheart","broken_heart"],"❤️":["redheart","red_heart","heart"],"🧡":["orangeheart","orange_heart"],"💛":["yellowheart","yellow_heart"],"💚":["greenheart","green_heart"],"💙":["blueheart","blue_heart"],"💜":["purpleheart","purple_heart"],"🖤":["blackheart","black_heart"],"💟":["heartdecoration","heart_decoration"],"💤":["zzz"],"💢":["angersymbol","anger_symbol","anger"],"💣":["bomb"],"💥":["collision","boom"],"💦":["sweatdroplets","sweat_droplets","sweatdrops","sweat_drops"],"💨":["dashingaway","dashing_away","dash"],"💫":["dizzy"],"💬":["speechballoon","speech_balloon"],"🗨️":["leftspeechbubble","left_speech_bubble"],"🗯️":["rightangerbubble","right_anger_bubble"],"💭":["thoughtballoon","thought_balloon"],"🕳️":["hole"],"👓":["glasses","eyeglasses"],"🕶️":["darksunglasses","dark_sunglasses"],"👔":["necktie"],"👕":["tshirt","shirt"],"👖":["jeans"],"🧣":["scarf"],"🧤":["gloves"],"🧥":["coat"],"🧦":["socks"],"👗":["dress"],"👘":["kimono"],"👙":["bikini"],"👚":["womansclothes","womans_clothes"],"👛":["purse"],"👜":["handbag"],"👝":["clutchbag","clutch_bag","pouch"],"🛍️":["shoppingbags","shopping_bags"],"🎒":["backpack","schoolsatchel","school_satchel"],"👞":["mansshoe","mans_shoe"],"👟":["runningshoe","running_shoe","athleticshoe","athletic_shoe"],"👠":["highheeledshoe","high_heeled_shoe","highheel","high_heel"],"👡":["womanssandal","womans_sandal","sandal"],"👢":["womansboot","womans_boot","boot"],"👑":["crown"],"👒":["womanshat","womans_hat"],"🎩":["tophat","top_hat"],"🎓":["graduationcap","graduation_cap","mortarboard","mortar_board"],"🧢":["billedcap","billed_cap"],"⛑️":["rescueworkershelmet","rescue_workers_helmet","helmetwithwhitecross","helmet_with_white_cross"],"📿":["prayerbeads","prayer_beads"],"💄":["lipstick"],"💍":["ring"],"💎":["gemstone","gem_stone","gem"],"🐵":["monkeyface","monkey_face"],"🐒":["monkey"],"🦍":["gorilla"],"🐶":["dogface","dog_face","dog"],"🐕":["dog2"],"🐩":["poodle"],"🐺":["wolfface","wolf_face","wolf"],"🦊":["foxface","fox_face"],"🐱":["catface","cat_face","cat"],"🐈":["cat2"],"🦁":["lionface","lion_face"],"🐯":["tigerface","tiger_face","tiger"],"🐅":["tiger2"],"🐆":["leopard"],"🐴":["horseface","horse_face","horse"],"🐎":["racehorse","race_horse"],"🦄":["unicornface","unicorn_face"],"🦓":["zebra","zebraface","zebra_face"],"🦌":["deer"],"🐮":["cowface","cow_face","cow"],"🐂":["ox"],"🐃":["waterbuffalo","water_buffalo"],"🐄":["cow2"],"🐷":["pigface","pig_face","pig"],"🐖":["pig2"],"🐗":["boar"],"🐽":["pignose","pig_nose"],"🐏":["ram"],"🐑":["ewe","sheep"],"🐐":["goat"],"🐪":["dromedarycamel","dromedary_camel"],"🐫":["twohumpcamel","two_hump_camel","camel"],"🦒":["giraffe","giraffeface","giraffe_face"],"🐘":["elephant"],"🦏":["rhinoceros"],"🐭":["mouseface","mouse_face","mouse"],"🐁":["mouse2"],"🐀":["rat"],"🐹":["hamsterface","hamster_face","hamster"],"🐰":["rabbitface","rabbit_face","rabbit"],"🐇":["rabbit2"],"🐿️":["chipmunk"],"🦔":["hedgehog"],"🦇":["bat"],"🐻":["bearface","bear_face","bear"],"🐨":["koala"],"🐼":["pandaface","panda_face"],"🐾":["pawprints","paw_prints","feet"],"🦃":["turkey"],"🐔":["chicken"],"🐓":["rooster"],"🐣":["hatchingchick","hatching_chick"],"🐤":["babychick","baby_chick"],"🐥":["hatchedchick","hatched_chick"],"🐦":["bird"],"🐧":["penguin"],"🕊️":["dove","doveofpeace","dove_of_peace"],"🦅":["eagle"],"🦆":["duck"],"🦉":["owl"],"🐸":["frogface","frog_face","frog"],"🐊":["crocodile"],"🐢":["turtle"],"🦎":["lizard"],"🐍":["snake"],"🐲":["dragonface","dragon_face"],"🐉":["dragon"],"🦕":["sauropod"],"🦖":["t-rex","trex","t_rex"],"🐳":["spoutingwhale","spouting_whale","whale"],"🐋":["whale2"],"🐬":["dolphin"],"🐟":["fish"],"🐠":["tropicalfish","tropical_fish"],"🐡":["blowfish"],"🦈":["shark"],"🐙":["octopus"],"🐚":["spiralshell","spiral_shell","shell"],"🦀":["crab"],"🦐":["shrimp"],"🦑":["squid"],"🐌":["snail"],"🦋":["butterfly"],"🐛":["bug"],"🐜":["ant"],"🐝":["honeybee","bee"],"🐞":["ladybeetle","lady_beetle","beetle"],"🦗":["cricket"],"🕷️":["spider"],"🕸️":["spiderweb","spider_web"],"🦂":["scorpion"],"💐":["bouquet"],"🌸":["cherryblossom","cherry_blossom"],"💮":["whiteflower","white_flower"],"🏵️":["rosette"],"🌹":["rose"],"🥀":["wiltedflower","wilted_flower"],"🌺":["hibiscus"],"🌻":["sunflower"],"🌼":["blossom"],"🌷":["tulip"],"🌱":["seedling"],"🌲":["evergreentree","evergreen_tree"],"🌳":["deciduoustree","deciduous_tree"],"🌴":["palmtree","palm_tree"],"🌵":["cactus"],"🌾":["sheafofrice","sheaf_of_rice","earofrice","ear_of_rice"],"🌿":["herb"],"☘️":["shamrock"],"🍀":["fourleafclover","four_leaf_clover"],"🍁":["mapleleaf","maple_leaf"],"🍂":["fallenleaf","fallen_leaf"],"🍃":["leafflutteringinwind","leaf_fluttering_in_wind","leaves"],"🍇":["grapes"],"🍈":["melon"],"🍉":["watermelon"],"🍊":["tangerine"],"🍋":["lemon"],"🍌":["banana"],"🍍":["pineapple"],"🍎":["redapple","red_apple","apple"],"🍏":["greenapple","green_apple"],"🍐":["pear"],"🍑":["peach"],"🍒":["cherries"],"🍓":["strawberry"],"🥝":["kiwifruit","kiwi_fruit"],"🍅":["tomato"],"🥥":["coconut"],"🥑":["avocado"],"🍆":["eggplant"],"🥔":["potato"],"🥕":["carrot"],"🌽":["earofcorn","ear_of_corn","corn"],"🌶️":["hotpepper","hot_pepper"],"🥒":["cucumber"],"🥦":["broccoli"],"🍄":["mushroom"],"🥜":["peanuts"],"🌰":["chestnut"],"🍞":["bread"],"🥐":["croissant"],"🥖":["baguettebread","baguette_bread"],"🥨":["pretzel"],"🥞":["pancakes"],"🧀":["cheesewedge","cheese_wedge"],"🍖":["meatonbone","meat_on_bone"],"🍗":["poultryleg","poultry_leg"],"🥩":["cutofmeat","cut_of_meat"],"🥓":["bacon"],"🍔":["hamburger"],"🍟":["frenchfries","french_fries","fries"],"🍕":["pizza"],"🌭":["hotdog","hot_dog"],"🥪":["sandwich"],"🌮":["taco"],"🌯":["burrito"],"🥙":["stuffedflatbread","stuffed_flatbread"],"🥚":["egg"],"🍳":["cooking","friedegg","fried_egg"],"🥘":["shallowpanoffood","shallow_pan_of_food"],"🍲":["potoffood","pot_of_food","stew"],"🥣":["bowlwithspoon","bowl_with_spoon"],"🥗":["greensalad","green_salad"],"🍿":["popcorn"],"🥫":["cannedfood","canned_food"],"🍱":["bentobox","bento_box","bento"],"🍘":["ricecracker","rice_cracker"],"🍙":["riceball","rice_ball"],"🍚":["cookedrice","cooked_rice","rice"],"🍛":["curryrice","curry_rice","curry"],"🍜":["steamingbowl","steaming_bowl","ramen"],"🍝":["spaghetti"],"🍠":["roastedsweetpotato","roasted_sweet_potato","sweetpotato","sweet_potato"],"🍢":["oden"],"🍣":["sushi"],"🍤":["friedshrimp","fried_shrimp"],"🍥":["fishcakewithswirl","fish_cake_with_swirl","fishcake","fish_cake"],"🍡":["dango"],"🥟":["dumpling"],"🥠":["fortunecookie","fortune_cookie"],"🥡":["takeoutbox","takeout_box"],"🍦":["softicecream","soft_ice_cream","icecream"],"🍧":["shavedice","shaved_ice"],"🍨":["ice_cream"],"🍩":["doughnut"],"🍪":["cookie"],"🎂":["birthdaycake","birthday_cake","birthday"],"🍰":["shortcake","cake"],"🥧":["pie"],"🍫":["chocolatebar","chocolate_bar"],"🍬":["candy"],"🍭":["lollipop"],"🍮":["custard"],"🍯":["honeypot","honey_pot"],"🍼":["babybottle","baby_bottle"],"🥛":["glassofmilk","glass_of_milk"],"☕":["hotbeverage","hot_beverage","coffee"],"🍵":["teacup","tea"],"🍶":["sake"],"🍾":["bottlewithpoppingcork","bottle_with_popping_cork","champagne"],"🍷":["wineglass","wine_glass"],"🍸":["cocktailglass","cocktail_glass","cocktail"],"🍹":["tropicaldrink","tropical_drink"],"🍺":["beermug","beer_mug","beer"],"🍻":["clinkingbeermugs","clinking_beer_mugs","beers"],"🥂":["clinkingglasses","clinking_glasses"],"🥃":["tumblerglass","tumbler_glass"],"🥤":["cupwithstraw","cup_with_straw"],"🥢":["chopsticks"],"🍽️":["forkandknifewithplate","fork_and_knife_with_plate","knifeforkplate","knife_fork_plate"],"🍴":["forkandknife","fork_and_knife"],"🥄":["spoon"],"🔪":["kitchenknife","kitchen_knife","hocho"],"🏺":["amphora"],"🌍":["globeshowingeuropeafrica","globe_showing_europe_africa","earthafrica","earth_africa"],"🌎":["globeshowingamericas","globe_showing_americas","earthamericas","earth_americas"],"🌏":["globeshowingasiaaustralia","globe_showing_asia_australia","earthasia","earth_asia"],"🌐":["globewithmeridians","globe_with_meridians"],"🗺️":["worldmap","world_map"],"🗾":["mapofjapan","map_of_japan","japan"],"🏔️":["snowcappedmountain","snow_capped_mountain"],"⛰️":["mountain"],"🌋":["volcano"],"🗻":["mountfuji","mount_fuji"],"🏕️":["camping"],"🏖️":["beachwithumbrella","beach_with_umbrella"],"🏜️":["desert"],"🏝️":["desertisland","desert_island"],"🏞️":["nationalpark","national_park"],"🏟️":["stadium"],"🏛️":["classicalbuilding","classical_building"],"🏗️":["buildingconstruction","building_construction"],"🏘️":["houses","housebuildings","house_buildings"],"🏚️":["derelicthouse","derelict_house","derelicthousebuilding","derelict_house_building"],"🏠":["house"],"🏡":["housewithgarden","house_with_garden"],"🏢":["officebuilding","office_building","office"],"🏣":["japanesepostoffice","japanese_post_office","postoffice","post_office"],"🏤":["europeanpostoffice","european_post_office"],"🏥":["hospital"],"🏦":["bank"],"🏨":["hotel"],"🏩":["lovehotel","love_hotel"],"🏪":["conveniencestore","convenience_store"],"🏫":["school"],"🏬":["departmentstore","department_store"],"🏭":["factory"],"🏯":["japanesecastle","japanese_castle"],"🏰":["castle","europeancastle","european_castle"],"💒":["wedding"],"🗼":["tokyotower","tokyo_tower"],"🗽":["statueofliberty","statue_of_liberty"],"⛪":["church"],"🕌":["mosque"],"🕍":["synagogue"],"⛩️":["shintoshrine","shinto_shrine"],"🕋":["kaaba"],"⛲":["fountain"],"⛺":["tent"],"🌁":["foggy"],"🌃":["nightwithstars","night_with_stars"],"🏙️":["cityscape"],"🌄":["sunriseovermountains","sunrise_over_mountains"],"🌅":["sunrise"],"🌆":["cityscapeatdusk","cityscape_at_dusk","citysunset","city_sunset"],"🌇":["sunset","citysunrise","city_sunrise"],"🌉":["bridgeatnight","bridge_at_night"],"♨️":["hotsprings","hot_springs"],"🌌":["milkyway","milky_way"],"🎠":["carouselhorse","carousel_horse"],"🎡":["ferriswheel","ferris_wheel"],"🎢":["rollercoaster","roller_coaster"],"💈":["barberpole","barber_pole","barber"],"🎪":["circustent","circus_tent"],"🚂":["locomotive","steamlocomotive","steam_locomotive"],"🚃":["railwaycar","railway_car"],"🚄":["highspeedtrain","high_speed_train","bullettrainside","bullettrain_side"],"🚅":["bullettrain","bullet_train","bullettrainfront","bullettrain_front"],"🚆":["train2"],"🚇":["metro"],"🚈":["lightrail","light_rail"],"🚉":["station"],"🚊":["tram"],"🚝":["monorail"],"🚞":["mountainrailway","mountain_railway"],"🚋":["tramcar","tram_car","train"],"🚌":["bus"],"🚍":["oncomingbus","oncoming_bus"],"🚎":["trolleybus"],"🚐":["minibus"],"🚑":["ambulance"],"🚒":["fireengine","fire_engine"],"🚓":["policecar","police_car"],"🚔":["oncomingpolicecar","oncoming_police_car"],"🚕":["taxi"],"🚖":["oncomingtaxi","oncoming_taxi"],"🚗":["automobile","car","redcar","red_car"],"🚘":["oncomingautomobile","oncoming_automobile"],"🚙":["sportutilityvehicle","sport_utility_vehicle","bluecar","blue_car"],"🚚":["deliverytruck","delivery_truck","truck"],"🚛":["articulatedlorry","articulated_lorry","semi"],"🚜":["tractor"],"🚲":["bicycle","bike"],"🛴":["kickscooter","kick_scooter","scooter"],"🛵":["motorscooter","motor_scooter"],"🚏":["busstop","bus_stop"],"🛣️":["motorway"],"🛤️":["railwaytrack","railway_track"],"🛢️":["oildrum","oil_drum"],"⛽":["fuelpump","fuel_pump"],"🚨":["policecarlight","police_car_light","rotatinglight","rotating_light"],"🚥":["horizontaltrafficlight","horizontal_traffic_light","trafficlight","traffic_light"],"🚦":["verticaltrafficlight","vertical_traffic_light"],"🛑":["stopsign","stop_sign","octagonalsign","octagonal_sign"],"🚧":["construction"],"⚓":["anchor"],"⛵":["sailboat","boat"],"🛶":["canoe"],"🚤":["speedboat"],"🛳️":["passengership","passenger_ship"],"⛴️":["ferry"],"🛥️":["motorboat","motor_boat"],"🚢":["ship"],"✈️":["airplane"],"🛩️":["smallairplane","small_airplane"],"🛫":["airplanedeparture","airplane_departure"],"🛬":["airplanearrival","airplane_arrival","airplanearriving","airplane_arriving"],"💺":["seat"],"🚁":["helicopter"],"🚟":["suspensionrailway","suspension_railway"],"🚠":["mountaincableway","mountain_cableway"],"🚡":["aerialtramway","aerial_tramway"],"🛰️":["satellite"],"🚀":["rocket"],"🛸":["flyingsaucer","flying_saucer","ufo"],"🛎️":["bellhopbell","bellhop_bell"],"⌛":["hourglassdone","hourglass_done","hourglass"],"⏳":["hourglassnotdone","hourglass_not_done","hourglassflowingsand","hourglass_flowing_sand"],"⌚":["watch"],"⏰":["alarmclock","alarm_clock"],"⏱️":["stopwatch"],"⏲️":["timerclock","timer_clock"],"🕰️":["mantelpiececlock","mantelpiece_clock"],"🕛":["twelveo’clock","twelve_o_clock","clock12"],"🕧":["twelvethirty","twelve_thirty","clock1230"],"🕐":["oneo’clock","one_o_clock","clock1"],"🕜":["onethirty","one_thirty","clock130"],"🕑":["twoo’clock","two_o_clock","clock2"],"🕝":["twothirty","two_thirty","clock230"],"🕒":["threeo’clock","three_o_clock","clock3"],"🕞":["threethirty","three_thirty","clock330"],"🕓":["fouro’clock","four_o_clock","clock4"],"🕟":["fourthirty","four_thirty","clock430"],"🕔":["fiveo’clock","five_o_clock","clock5"],"🕠":["fivethirty","five_thirty","clock530"],"🕕":["sixo’clock","six_o_clock","clock6"],"🕡":["sixthirty","six_thirty","clock630"],"🕖":["seveno’clock","seven_o_clock","clock7"],"🕢":["seventhirty","seven_thirty","clock730"],"🕗":["eighto’clock","eight_o_clock","clock8"],"🕣":["eightthirty","eight_thirty","clock830"],"🕘":["nineo’clock","nine_o_clock","clock9"],"🕤":["ninethirty","nine_thirty","clock930"],"🕙":["teno’clock","ten_o_clock","clock10"],"🕥":["tenthirty","ten_thirty","clock1030"],"🕚":["elevenoclock","eleven_o_clock","clock11"],"🕦":["eleventhirty","eleven_thirty","clock1130"],"🌑":["newmoon","new_moon"],"🌒":["waxingcrescentmoon","waxing_crescent_moon"],"🌓":["firstquartermoon","first_quarter_moon"],"🌔":["waxinggibbousmoon","waxing_gibbous_moon","moon"],"🌕":["fullmoon","full_moon"],"🌖":["waninggibbousmoon","waning_gibbous_moon"],"🌗":["lastquartermoon","last_quarter_moon"],"🌘":["waningcrescentmoon","waning_crescent_moon"],"🌙":["crescentmoon","crescent_moon"],"🌚":["newmoonface","new_moon_face","newmoonwithface","new_moon_with_face"],"🌛":["firstquartermoonface","first_quarter_moon_face","firstquartermoonwithface","first_quarter_moon_with_face"],"🌜":["lastquartermoonface","last_quarter_moon_face","lastquartermoonwithface","last_quarter_moon_with_face"],"🌡️":["thermometer"],"☀️":["sun","sunny"],"🌝":["fullmoonface","full_moon_face","fullmoonwithface","full_moon_with_face"],"🌞":["sunwithface","sun_with_face"],"⭐":["star"],"🌟":["glowingstar","glowing_star","star2"],"🌠":["shootingstar","shooting_star","stars"],"☁️":["cloud"],"⛅":["sunbehindcloud","sun_behind_cloud","partlysunny","partly_sunny"],"⛈️":["cloudwithlightningandrain","cloud_with_lightning_and_rain","thundercloudandrain","thunder_cloud_and_rain"],"🌤️":["sunbehindsmallcloud","sun_behind_small_cloud","mostlysunny","mostly_sunny"],"🌥️":["sunbehindlargecloud","sun_behind_large_cloud","barelysunny","barely_sunny"],"🌦️":["sunbehindraincloud","sun_behind_rain_cloud","partlysunnyrain","partly_sunny_rain"],"🌧️":["cloudwithrain","cloud_with_rain","raincloud","rain_cloud"],"🌨️":["cloudwithsnow","cloud_with_snow","snowcloud","snow_cloud"],"🌩️":["cloudwithlightning","cloud_with_lightning","lightning"],"🌪️":["tornado"],"🌫️":["fog"],"🌬️":["windface","wind_face","windblowingface","wind_blowing_face"],"🌀":["cyclone"],"🌈":["rainbow"],"🌂":["closedumbrella","closed_umbrella"],"☂️":["umbrella"],"☔":["umbrellawithraindrops","umbrella_with_rain_drops"],"⛱️":["umbrellaonground","umbrella_on_ground"],"⚡":["highvoltage","high_voltage","zap"],"❄️":["snowflake"],"☃️":["snowman","snowmanwithsnow","snowman_with_snow"],"⛄":["snowmanwithoutsnow","snowman_without_snow"],"☄️":["comet"],"🔥":["fire"],"💧":["droplet"],"🌊":["waterwave","water_wave","ocean"],"🎃":["jackolantern","jack_o_lantern"],"🎄":["christmastree","christmas_tree"],"🎆":["fireworks"],"🎇":["sparkler"],"✨":["sparkles"],"🎈":["balloon"],"🎉":["partypopper","party_popper","tada"],"🎊":["confettiball","confetti_ball"],"🎋":["tanabatatree","tanabata_tree"],"🎍":["pinedecoration","pine_decoration","bamboo"],"🎎":["japanesedolls","japanese_dolls","dolls"],"🎏":["carpstreamer","carp_streamer","flags"],"🎐":["windchime","wind_chime"],"🎑":["moonviewingceremony","moon_viewing_ceremony","ricescene","rice_scene"],"🎀":["ribbon"],"🎁":["wrappedgift","wrapped_gift","gift"],"🎗️":["reminderribbon","reminder_ribbon"],"🎟️":["admissiontickets","admission_tickets"],"🎫":["ticket"],"🎖️":["militarymedal","military_medal","medal"],"🏆":["trophy"],"🏅":["sportsmedal","sports_medal"],"🥇":["1stplacemedal","1st_place_medal","firstplacemedal","first_place_medal"],"🥈":["2ndplacemedal","2nd_place_medal","secondplacemedal","second_place_medal"],"🥉":["3rdplacemedal","3rd_place_medal","thirdplacemedal","third_place_medal"],"⚽":["soccerball","soccer_ball","soccer"],"⚾":["baseball"],"🏀":["basketball"],"🏐":["volleyball"],"🏈":["americanfootball","american_football","football"],"🏉":["rugbyfootball","rugby_football"],"🎾":["tennis"],"🎳":["bowling"],"🏏":["cricketgame","cricket_game","cricketbatandball","cricket_bat_and_ball"],"🏑":["fieldhockey","field_hockey","fieldhockeystickandball","field_hockey_stick_and_ball"],"🏒":["icehockey","ice_hockey","icehockeystickandpuck","ice_hockey_stick_and_puck"],"🏓":["pingpong","ping_pong","tabletennispaddleandball","table_tennis_paddle_and_ball"],"🏸":["badminton","badmintonracquetandshuttlecock","badminton_racquet_and_shuttlecock"],"🥊":["boxingglove","boxing_glove"],"🥋":["martialartsuniform","martial_arts_uniform"],"🥅":["goalnet","goal_net"],"⛳":["flaginhole","flag_in_hole","golf"],"⛸️":["iceskate","ice_skate"],"🎣":["fishingpole","fishing_pole","fishingpoleandfish","fishing_pole_and_fish"],"🎽":["runningshirt","running_shirt","runningshirtwithsash","running_shirt_with_sash"],"🎿":["skis","ski"],"🛷":["sled"],"🥌":["curlingstone","curling_stone"],"🎯":["directhit","direct_hit","dart"],"🎱":["pool8ball","pool_8_ball","8ball","8_ball","eightball","eight_ball"],"🔮":["crystalball","crystal_ball"],"🎮":["videogame","video_game"],"🕹️":["joystick"],"🎰":["slotmachine","slot_machine"],"🎲":["gamedie","game_die"],"♠️":["spadesuit","spade_suit","spades"],"♥️":["heartsuit","heart_suit","hearts"],"♦️":["diamondsuit","diamond_suit","diamonds"],"♣️":["clubsuit","club_suit","clubs"],"🃏":["joker","blackjoker","black_joker"],"🀄":["mahjongreddragon","mahjong_red_dragon","mahjong"],"🎴":["flowerplayingcards","flower_playing_cards"],"🎭":["performingarts","performing_arts"],"🖼️":["framedpicture","framed_picture","framewithpicture","frame_with_picture"],"🎨":["artistpalette","artist_palette","art"],"🔇":["mutedspeaker","muted_speaker","mute"],"🔈":["speakerlowvolume","speaker_low_volume","speaker"],"🔉":["speakermediumvolume","speaker_medium_volume","sound"],"🔊":["speakerhighvolume","speaker_high_volume","loudsound","loud_sound"],"📢":["loudspeaker"],"📣":["megaphone","mega"],"📯":["postalhorn","postal_horn"],"🔔":["bell"],"🔕":["bellwithslash","bell_with_slash","nobell","no_bell"],"🎼":["musicalscore","musical_score"],"🎵":["musicalnote","musical_note"],"🎶":["musicalnotes","musical_notes","notes"],"🎙️":["studiomicrophone","studio_microphone"],"🎚️":["levelslider","level_slider"],"🎛️":["controlknobs","control_knobs"],"🎤":["microphone"],"🎧":["headphone","headphones"],"📻":["radio"],"🎷":["saxophone"],"🎸":["guitar"],"🎹":["musicalkeyboard","musical_keyboard"],"🎺":["trumpet"],"🎻":["violin"],"🥁":["drum","drumwithdrumsticks","drum_with_drumsticks"],"📱":["mobilephone","mobile_phone","iphone"],"📲":["mobilephonewitharrow","mobile_phone_with_arrow","calling"],"☎️":["telephone","phone"],"📞":["telephonereceiver","telephone_receiver"],"📟":["pager"],"📠":["faxmachine","fax_machine","fax"],"🔋":["battery"],"🔌":["electricplug","electric_plug"],"💻":["laptopcomputer","laptop_computer","computer"],"🖥️":["desktopcomputer","desktop_computer"],"🖨️":["printer"],"⌨️":["keyboard"],"🖱️":["computermouse","computer_mouse","threebuttonmouse","three_button_mouse"],"🖲️":["trackball"],"💽":["computerdisk","computer_disk","minidisc"],"💾":["floppydisk","floppy_disk"],"💿":["opticaldisk","optical_disk","cd"],"📀":["dvd"],"🎥":["moviecamera","movie_camera"],"🎞️":["filmframes","film_frames"],"📽️":["filmprojector","film_projector"],"🎬":["clapperboard","clapper_board","clapper"],"📺":["television","tv"],"📷":["camera"],"📸":["camerawithflash","camera_with_flash"],"📹":["videocamera","video_camera"],"📼":["videocassette","vhs"],"🔍":["magnifyingglassleft","magnifying_glass_left","mag"],"🔎":["magnifyingglassright","magnifying_glass_right","magright","mag_right"],"🕯️":["candle"],"💡":["lightbulb","light_bulb","bulb"],"🔦":["flashlight"],"🏮":["redpaperlantern","red_paper_lantern","izakayalantern","izakaya_lantern"],"📔":["notebookwithdecorativecover","notebook_with_decorative_cover"],"📕":["closedbook","closed_book"],"📖":["openbook","open_book","book"],"📗":["greenbook","green_book"],"📘":["bluebook","blue_book"],"📙":["orangebook","orange_book"],"📚":["books"],"📓":["notebook"],"📒":["ledger"],"📃":["pagewithcurl","page_with_curl"],"📜":["scroll"],"📄":["pagefacingup","page_facing_up"],"📰":["newspaper"],"🗞️":["rolledupnewspaper","rolled_up_newspaper"],"📑":["bookmarktabs","bookmark_tabs"],"🔖":["bookmark"],"🏷️":["label"],"💰":["moneybag","money_bag"],"💴":["yenbanknote","yen_banknote","yen"],"💵":["dollarbanknote","dollar_banknote","dollar"],"💶":["eurobanknote","euro_banknote","euro"],"💷":["poundbanknote","pound_banknote","pound"],"💸":["moneywithwings","money_with_wings"],"💳":["creditcard","credit_card"],"💹":["chartincreasingwithyen","chart_increasing_with_yen","chart"],"💱":["currencyexchange","currency_exchange"],"💲":["heavydollarsign","heavy_dollar_sign"],"✉️":["envelope","email"],"📧":["e-mail"],"📨":["incomingenvelope","incoming_envelope"],"📩":["envelopewitharrow","envelope_with_arrow"],"📤":["outboxtray","outbox_tray"],"📥":["inboxtray","inbox_tray"],"📦":["package"],"📫":["mailbox"],"📪":["mailboxclosed","mailbox_closed"],"📬":["mailboxwithmail","mailbox_with_mail"],"📭":["mailboxwithnomail","mailbox_with_no_mail"],"📮":["postbox"],"🗳️":["ballotboxwithballot","ballot_box_with_ballot","ballotbox","ballot_box"],"✏️":["pencil2"],"✒️":["blacknib","black_nib"],"🖋️":["fountainpen","fountain_pen","lowerleftfountainpen","lower_left_fountain_pen"],"🖊️":["pen","lowerleftballpointpen","lower_left_ballpoint_pen"],"🖌️":["paintbrush","lowerleftpaintbrush","lower_left_paintbrush"],"🖍️":["crayon","lowerleftcrayon","lower_left_crayon"],"📝":["memo","pencil"],"💼":["briefcase"],"📁":["filefolder","file_folder"],"📂":["openfilefolder","open_file_folder"],"🗂️":["cardindexdividers","card_index_dividers"],"📅":["calendardate","calendar_date","date"],"📆":["calendar","tearoffcalendar","tear_off_calendar"],"🗒️":["spiralnotepad","spiral_notepad","spiral_note_pad"],"🗓️":["spiralcalendar","spiral_calendar","spiralcalendarpad","spiral_calendar_pad"],"📇":["cardindex","card_index"],"📈":["chartincreasing","chart_increasing","chartwithupwardstrend","chart_with_upwards_trend"],"📉":["chartdecreasing","chart_decreasing","chartwithdownwardstrend","chart_with_downwards_trend"],"📊":["barchart","bar_chart"],"📋":["clipboard"],"📌":["pushpin"],"📍":["roundpushpin","round_pushpin"],"📎":["paperclip"],"🖇️":["linkedpaperclips","linked_paperclips"],"📏":["straightruler","straight_ruler"],"📐":["triangularruler","triangular_ruler"],"✂️":["scissors"],"🗃️":["cardfilebox","card_file_box"],"🗄️":["filecabinet","file_cabinet"],"🗑️":["wastebasket"],"🔒":["locked","lock"],"🔓":["unlocked","unlock"],"🔏":["lockedwithpen","locked_with_pen","lockwithinkpen","lock_with_ink_pen"],"🔐":["lockedwithkey","locked_with_key","closedlockwithkey","closed_lock_with_key"],"🔑":["key"],"🗝️":["oldkey","old_key"],"🔨":["hammer"],"⛏️":["pick"],"⚒️":["hammerandpick","hammer_and_pick"],"🛠️":["hammerandwrench","hammer_and_wrench"],"🗡️":["dagger","dagger_knife"],"⚔️":["crossedswords","crossed_swords"],"🔫":["pistol","gun"],"🏹":["bowandarrow","bow_and_arrow"],"🛡️":["shield"],"🔧":["wrench"],"🔩":["nutandbolt","nut_and_bolt"],"⚙️":["gear"],"🗜️":["clamp","compression"],"⚖️":["balancescale","balance_scale","scales"],"🔗":["link"],"⛓️":["chains"],"⚗️":["alembic"],"🔬":["microscope"],"🔭":["telescope"],"📡":["satelliteantenna","satellite_antenna"],"💉":["syringe"],"💊":["pill"],"🚪":["door"],"🛏️":["bed"],"🛋️":["couchandlamp","couch_and_lamp"],"🚽":["toilet"],"🚿":["shower"],"🛁":["bathtub"],"🛒":["shoppingcart","shopping_cart","shoppingtrolley","shopping_trolley"],"🚬":["cigarette","smoking"],"⚰️":["coffin"],"⚱️":["funeralurn","funeral_urn"],"🗿":["moai","moyai"],"🏧":["atm"],"🚮":["litterinbin","litter_in_bin","putlitterinitsplace","put_litter_in_its_place"],"🚰":["potablewater","potable_water"],"♿":["wheelchair","wheelchair_symbol"],"🚹":["mens"],"🚺":["womens"],"🚻":["restroom"],"🚼":["babysymbol","baby_symbol"],"🚾":["watercloset","water_closet","wc"],"🛂":["passportcontrol","passport_control"],"🛃":["customs"],"🛄":["baggageclaim","baggage_claim"],"🛅":["leftluggage","left_luggage"],"⚠️":["warning"],"🚸":["childrencrossing","children_crossing"],"⛔":["noentry","no_entry"],"🚫":["prohibited","noentrysign","no_entry_sign"],"🚳":["nobicycles","no_bicycles"],"🚭":["nosmoking","no_smoking"],"🚯":["nolittering","no_littering","donotlitter","do_not_litter"],"🚱":["nonpotablewater","non_potable_water","non-potable_water"],"🚷":["nopedestrians","no_pedestrians"],"📵":["nomobilephones","no_mobile_phones"],"🔞":["nooneundereighteen","no_one_under_eighteen","underage"],"☢️":["radioactive","radioactivesign","radioactive_sign"],"☣️":["biohazard","biohazardsign","biohazard_sign"],"⬆️":["uparrow","up_arrow","arrowup","arrow_up"],"↗️":["uprightarrow","up_right_arrow","arrowupperright","arrow_upper_right"],"➡️":["rightarrow","right_arrow","arrowright","arrow_right"],"↘️":["downrightarrow","down_right_arrow","arrowlowerright","arrow_lower_right"],"⬇️":["downarrow","down_arrow","arrowdown","arrow_down"],"↙️":["downleftarrow","down_left_arrow","arrowlowerleft","arrow_lower_left"],"⬅️":["leftarrow","left_arrow","arrowleft","arrow_left"],"↖️":["upleftarrow","up_left_arrow","arrowupperleft","arrow_upper_left"],"↕️":["updownarrow","up_down_arrow","arrowupdown","arrow_up_down"],"↔️":["leftrightarrow","left_right_arrow"],"↩️":["rightarrowcurvingleft","right_arrow_curving_left","leftwardsarrowwithhook","leftwards_arrow_with_hook"],"↪️":["leftarrowcurvingright","left_arrow_curving_right","arrowrighthook","arrow_right_hook"],"⤴️":["rightarrowcurvingup","right_arrow_curving_up","arrowheadingup","arrow_heading_up"],"⤵️":["rightarrowcurvingdown","right_arrow_curving_down","arrowheadingdown","arrow_heading_down"],"🔃":["clockwiseverticalarrows","clockwise_vertical_arrows","arrowsclockwise","arrows_clockwise"],"🔄":["counterclockwisearrows","counterclockwise_arrows","arrowscounterclockwise","arrows_counterclockwise"],"🔙":["backarrow","back_arrow","back"],"🔚":["endarrow","end_arrow","end"],"🔛":["onarrow","on_arrow","on"],"🔜":["soonarrow","soon_arrow","soon"],"🔝":["toparrow","top_arrow","top"],"🛐":["placeofworship","place_of_worship"],"⚛️":["atom","atomsymbol","atom_symbol"],"🕉️":["om","omsymbol","om_symbol"],"✡️":["starofdavid","star_of_david"],"☸️":["wheelofdharma","wheel_of_dharma"],"☯️":["yinyang","yin_yang"],"✝️":["latincross","latin_cross"],"☦️":["orthodoxcross","orthodox_cross"],"☪️":["starandcrescent","star_and_crescent"],"☮️":["peace","peacesymbol","peace_symbol"],"🕎":["menorah","menorahwithninebranches","menorah_with_nine_branches"],"🔯":["sixpointedstar","six_pointed_star"],"♈":["aries"],"♉":["taurus"],"♊":["gemini"],"♋":["cancer"],"♌":["leo"],"♍":["virgo"],"♎":["libra"],"♏":["scorpio","scorpius"],"♐":["sagittarius"],"♑":["capricorn"],"♒":["aquarius"],"♓":["pisces"],"⛎":["ophiuchus"],"🔀":["shuffletracks","shuffle_tracks","shuffle","twistedrightwardsarrows","twisted_rightwards_arrows"],"🔁":["repeat"],"🔂":["repeatsingle","repeat_single","repeatone","repeat_one"],"▶️":["play","arrowforward","arrow_forward"],"⏩":["fastforward","fast_forward"],"⏭️":["nexttrack","next_track","next","blackrightpointingdoubletrianglewithverticalbar","black_right_pointing_double_triangle_with_vertical_bar"],"⏯️":["playorpause","play_or_pause","playpause","play_pause","blackrightpointingtrianglewithdoubleverticalbar","black_right_pointing_triangle_with_double_vertical_bar"],"◀️":["reverse","arrowbackward","arrow_backward"],"⏪":["fastreverse","fast_reverse","rewind"],"⏮️":["lasttrack","last_track","previous","blackleftpointingdoubletrianglewithverticalbar","black_left_pointing_double_triangle_with_vertical_bar"],"🔼":["upwards","arrowupsmall","arrow_up_small"],"⏫":["fastup","fast_up","arrowdoubleup","arrow_double_up"],"🔽":["downwards","arrowdownsmall","arrow_down_small"],"⏬":["fastdown","fast_down","arrowdoubledown","arrow_double_down"],"⏸️":["pause","doubleverticalbar","double_vertical_bar"],"⏹️":["stop","blacksquareforstop","black_square_for_stop"],"⏺️":["record","blackcircleforrecord","black_circle_for_record"],"⏏️":["eject"],"🎦":["cinema"],"🔅":["dim","lowbrightness","low_brightness"],"🔆":["bright","highbrightness","high_brightness"],"📶":["antennabars","antenna_bars","signalstrength","signal_strength"],"📳":["vibrationmode","vibration_mode"],"📴":["mobilephoneoff","mobile_phone_off"],"♀️":["female","femalesign","female_sign"],"♂️":["male","malesign","male_sign"],"⚕️":["medical","health","staffofaesculapius","staff_of_aesculapius","medicalsymbol","medical_symbol"],"♻️":["recycling","recycle"],"⚜️":["fleurdelis","fleur_de_lis"],"🔱":["trident"],"📛":["namebadge","name_badge"],"🔰":["beginner"],"⭕":["heavylargecircle","heavy_large_circle","o"],"✅":["whitecheckmark","white_check_mark"],"☑️":["ballotboxwithcheck","ballot_box_with_check"],"✔️":["heavycheckmark","heavy_check_mark"],"✖️":["heavymultiplicationx","heavy_multiplication_x"],"❌":["crossmark","cross_mark","x"],"❎":["whitecrossmark","white_cross_mark","crossmarkbutton","cross_mark_button","negativesquaredcrossmark","negative_squared_cross_mark"],"➕":["heavyplussign","heavy_plus_sign"],"➖":["heavyminussign","heavy_minus_sign"],"➗":["heavydivisionsign","heavy_division_sign"],"➰":["curlyloop","curly_loop"],"➿":["doublecurlyloop","double_curly_loop","loop"],"〽️":["partalternationmark","part_alternation_mark"],"✳️":["eightspokedasterisk","eight_spoked_asterisk"],"✴️":["eightpointedstar","eight_pointed_star","eightpointedblackstar","eight_pointed_black_star"],"❇️":["sparkle"],"‼️":["doubleexclamationmark","double_exclamation_mark","bangbang"],"⁉️":["exclamationquestionmark","exclamation_question_mark","interrobang"],"❓":["questionmark","question_mark","question"],"❔":["whitequestionmark","white_question_mark","greyquestion","grey_question"],"❕":["whiteexclamationmark","white_exclamation_mark","greyexclamation","grey_exclamation"],"❗":["exclamationmark","exclamation_mark","exclamation"],"〰️":["wavydash","wavy_dash"],"©️":["copyright"],"®️":["registered"],"™️":["trademark","trade_mark","tm"],"#️⃣":["keycaphash","keycap_hash","hash"],"*️⃣":["keycapstar","keycap_star","keycapasterisk","keycap_asterisk","asterisk"],"0️⃣":["keycapzero","keycap_zero","zero"],"1️⃣":["keycapone","keycap_one","one"],"2️⃣":["keycaptwo","keycap_two","two"],"3️⃣":["keycapthree","keycap_three","three"],"4️⃣":["keycapfour","keycap_four","four"],"5️⃣":["keycapfive","keycap_five","five"],"6️⃣":["keycapsix","keycap_six","six"],"7️⃣":["keycapseven","keycap_seven","seven"],"8️⃣":["keycapeight","keycap_eight","eight"],"9️⃣":["keycapnine","keycap_nine","nine"],"🔟":["keycapten","keycap_ten","ten"],"💯":["100"],"🔠":["abcd_uppercase","capital_abcd"],"🔡":["abcd"],"🔢":["1234"],"🔣":["inputsymbols","input_symbols","symbols"],"🔤":["abc"],"🅰️":["bloodtypea","bloodtype_a","a"],"🆎":["bloodtypeab","bloodtype_ab","ab"],"🅱️":["bloodtypeb","bloodtype_b","b"],"🆑":["cl"],"🆒":["cool"],"🆓":["free"],"ℹ️":["i","info","informationsource","information_source"],"🆔":["id","identity"],"Ⓜ️":["m"],"🆕":["new"],"🆖":["ng"],"🅾️":["bloodtypeo","bloodtype_o","o2"],"🆗":["ok"],"🅿️":["parking"],"🆘":["sos"],"🆙":["up"],"🆚":["vs","versus"],"🈁":["here","koko"],"🈂️":["servicecharge","service_charge","sa"],"🈷️":["monthlyamount","monthly_amount","u6708"],"🈶":["notfreeofcharge","not_free_of_charge","u6709"],"🈯":["reserved","u6307"],"🉐":["bargain","advantage","ideograph_advantage"],"🈹":["discount","u5272"],"🈚":["freeofcharge","free_of_charge","u7121"],"🈲":["prohibited_jp","u7981"],"🉑":["acceptable","accept"],"🈸":["application","u7533"],"🈴":["passinggrade","passing_grade","u5408"],"🈳":["vacancy","u7a7a"],"㊗️":["congratulations"],"㊙️":["secret"],"🈺":["openforbusiness","open_for_business","u55b6"],"🈵":["novacancy","no_vacancy","u6e80"],"▪️":["blacksmallsquare","black_small_square"],"▫️":["whitesmallsquare","white_small_square"],"◻️":["whitemediumsquare","white_medium_square"],"◼️":["blackmediumsquare","black_medium_square"],"◽":["whitemediumsmallsquare","white_medium_small_square"],"◾":["blackmediumsmallsquare","black_medium_small_square"],"⬛":["blacklargesquare","black_large_square"],"⬜":["whitelargesquare","white_large_square"],"🔶":["largeorangediamond","large_orange_diamond"],"🔷":["largebluediamond","large_blue_diamond"],"🔸":["smallorangediamond","small_orange_diamond"],"🔹":["smallbluediamond","small_blue_diamond"],"🔺":["smallredtriangle","small_red_triangle"],"🔻":["smallredtriangledown","small_red_triangle_down"],"💠":["diamondshapewithadotinside","diamond_shape_with_a_dot_inside"],"🔘":["radiobutton","radio_button"],"🔲":["blacksquarebutton","black_square_button"],"🔳":["whitesquarebutton","white_square_button"],"⚪":["whitecircle","white_circle"],"⚫":["blackcircle","black_circle"],"🔴":["redcircle","red_circle"],"🔵":["bluecircle","blue_circle","large_blue_circle"],"🏁":["chequeredflag","chequered_flag","checkeredflag","checkered_flag"],"🚩":["triangularflag","triangular_flag","triangularflagonpost","triangular_flag_on_post","redflag","red_flag"],"🎌":["crossedflags","crossed_flags","twoflags","two_flags"],"🏴":["blackflag","black_flag","waving_black_flag"],"🏳️":["whiteflag","white_flag","waving_white_flag"],"🏳️‍🌈":["pride","rainbowflag","rainbow_flag"],"🇦🇨":["ascensionisland","ascension_island"],"🇦🇩":["flag-ad","flag-and","andorra"],"🇦🇪":["flag-ae","flag-are","unitedarabemirates","united_arab_emirates"],"🇦🇫":["flag-af","flag-afg","afghanistan"],"🇦🇬":["flag-ag","flag-atg","antiguabarbuda","antigua_barbuda"],"🇦🇮":["flag-ai","flag-aia","anguilla"],"🇦🇱":["flag-al","flag-alb","albania"],"🇦🇲":["flag-am","flag-arm","armenia"],"🇦🇴":["flag-ao","flag-ago","angola"],"🇦🇶":["flag-aq","flag-ata","antarctica"],"🇦🇷":["flag-ar","flag-arg","argentina"],"🇦🇸":["flag-as","flag-asm","americansamoa","american_samoa"],"🇦🇹":["flag-at","flag-aut","austria"],"🇦🇺":["flag-au","flag-aus","australia"],"🇦🇼":["flag-aw","flag-abw","aruba"],"🇦🇽":["flag-ax","alandislands","aland_islands"],"🇦🇿":["flag-az","flag-aze","azerbaijan"],"🇧🇦":["flag-ba","flag-bih","bosniaherzegovina","bosnia_herzegovina"],"🇧🇧":["flag-bb","flag-brb","barbados"],"🇧🇩":["flag-bd","flag-bgd","bangladesh"],"🇧🇪":["flag-be","flag-bel","belgium"],"🇧🇫":["flag-bf","flag-bfa","burkinafaso","burkina_faso"],"🇧🇬":["flag-bg","flag-bgr","bulgaria"],"🇧🇭":["flag-bh","flag-bhr","bahrain"],"🇧🇮":["flag-bi","flag-bdi","burundi"],"🇧🇯":["flag-bj","flag-ben","benin"],"🇧🇱":["flag-bl","flag-blm","stbarthelemy","st_barthelemy"],"🇧🇲":["flag-bm","flag-bmu","bermuda"],"🇧🇳":["flag-bn","flag-brn","brunei"],"🇧🇴":["flag-bo","flag-bol","bolivia"],"🇧🇶":["flag-bq","flag-bes","caribbeannetherlands","caribbean_netherlands"],"🇧🇷":["flag-br","flag-bra","brazil"],"🇧🇸":["flag-bs","flag-bhs","bahamas"],"🇧🇹":["flag-bt","flag-btn","bhutan"],"🇧🇻":["flag-bv","flag-bvt","bouvetisland","bouvet_island"],"🇧🇼":["flag-bw","flag-bwa","botswana"],"🇧🇾":["flag-by","flag-blr","belarus"],"🇧🇿":["flag-bz","flag-blz","belize"],"🇨🇦":["flag-ca","flag-can","canada"],"🇨🇨":["flag-cc","flag-cck","cocoskeelingislands","cocos_keeling_islands"],"🇨🇩":["flag-cd","flag-cod"],"🇨🇫":["flag-cf","flag-caf","centralafricanrepublic","central_african_republic"],"🇨🇬":["flag-cg","flag-cog"],"🇨🇭":["flag-ch","flag-che","switzerland"],"🇨🇮":["flag-ci","flag-civ","cotedivoire","cote_divoire"],"🇨🇰":["flag-ck","flag-cok","cookislands","cook_islands"],"🇨🇱":["flag-cl","flag-chl","chile"],"🇨🇲":["flag-cm","flag-cmr","cameroon"],"🇨🇳":["flag-cn","flag-chn","china"],"🇨🇴":["flag-co","flag-col","colombia"],"🇨🇵":["clippertonisland","clipperton_island"],"🇨🇷":["flag-cr","flag-cri","costarica","costa_rica"],"🇨🇺":["flag-cu","flag-cub","cuba"],"🇨🇻":["flag-cv","flag-cpv","capeverde","cape_verde"],"🇨🇼":["flag-cw","flag-cuw","curacao"],"🇨🇽":["flag-cx","flag-cxr","christmasisland","christmas_island"],"🇨🇾":["flag-cy","flag-cyp","cyprus"],"🇨🇿":["flag-cz","flag-cze","czechia"],"🇩🇪":["flag-de","flag-deu","germany"],"🇩🇬":["diegogarcia","diego_garcia"],"🇩🇯":["flag-dj","flag-dji","djibouti"],"🇩🇰":["flag-dk","flag-dnk","denmark"],"🇩🇲":["flag-dm","flag-dma","dominica"],"🇩🇴":["flag-do","flag-dom","dominicanrepublic","dominican_republic"],"🇩🇿":["flag-dz","flag-dza","algeria"],"🇪🇦":["ceutamelilla","ceuta_melilla"],"🇪🇨":["flag-ec","flag-ecu","ecuador"],"🇪🇪":["flag-ee","flag-est","estonia"],"🇪🇬":["flag-eg","flag-egy","egypt"],"🇪🇭":["flag-eh","flag-esh","westernsahara","western_sahara"],"🇪🇷":["flag-er","flag-eri","eritrea"],"🇪🇸":["flag-es","flag-esp","spain"],"🇪🇹":["flag-et","flag-eth","ethiopia"],"🇪🇺":["flag-eu","europeanunion","european_union"],"🇫🇮":["flag-fi","flag-fin","finland"],"🇫🇯":["flag-fj","flag-fji","fiji"],"🇫🇰":["flag-fk","flag-flk","falklandislands","falkland_islands"],"🇫🇲":["flag-fm","flag-fsm","micronesia"],"🇫🇴":["flag-fo","flag-fro","faroeislands","faroe_islands"],"🇫🇷":["flag-fr","flag-fra","france"],"🇬🇦":["flag-ga","flag-gab","gabon"],"🇬🇧":["flag-gb","flag-gbr","unitedkingdom","united_kingdom","uk"],"🇬🇩":["flag-gd","flag-grd","grenada"],"🇬🇪":["flag-ge","flag-geo","georgia"],"🇬🇫":["flag-gf","flag-guf","frenchguiana","french_guiana"],"🇬🇬":["flag-gg","flag-ggy","guernsey"],"🇬🇭":["flag-gh","flag-gha","ghana"],"🇬🇮":["flag-gi","flag-gib","gibraltar"],"🇬🇱":["flag-gl","flag-grl","greenland"],"🇬🇲":["flag-gm","flag-gmb","gambia"],"🇬🇳":["flag-gn","flag-gin","guinea"],"🇬🇵":["flag-gp","flag-glp","guadeloupe"],"🇬🇶":["flag-gq","flag-gnq","equatorialguinea","equatorial_guinea"],"🇬🇷":["flag-gr","flag-grc","greece"],"🇬🇸":["flag-gs","flag-sgs","southgeorgiasouthsandwichislands","south_georgia_south_sandwich_islands"],"🇬🇹":["flag-gt","flag-gtm","guatemala"],"🇬🇺":["flag-gu","flag-gum","guam"],"🇬🇼":["flag-gw","flag-gnb","guinea-bissau"],"🇬🇾":["flag-gy","flag-guy","guyana"],"🇭🇰":["flag-hk","flag-hkg","hongkongsarchina","hong_kong_sar_china"],"🇭🇲":["flag-hm","flag-hmd","heardmcdonaldislands","heard_mcdonald_islands"],"🇭🇳":["flag-hn","flag-hnd","honduras"],"🇭🇷":["flag-hr","flag-hrv","croatia"],"🇭🇹":["flag-ht","flag-hti","haiti"],"🇭🇺":["flag-hu","flag-hun","hungary"],"🇮🇨":["canaryislands","canary_islands"],"🇮🇩":["flag-id","flag-idn","indonesia"],"🇮🇪":["flag-ie","flag-irl","ireland"],"🇮🇱":["flag-il","flag-isr","israel"],"🇮🇲":["flag-im","flag-imn","isleofman","isle_of_man"],"🇮🇳":["flag-in","flag-ind","india"],"🇮🇴":["flag-io","flag-iot","britishindianoceanterritory","british_indian_ocean_territory"],"🇮🇶":["flag-iq","flag-irq","iraq"],"🇮🇷":["flag-ir","flag-irn","iran"],"🇮🇸":["flag-is","flag-isl","iceland"],"🇮🇹":["flag-it","flag-ita","italy"],"🇯🇪":["flag-je","flag-jey","jersey"],"🇯🇲":["flag-jm","flag-jam","jamaica"],"🇯🇴":["flag-jo","flag-jor","jordan"],"🇯🇵":["flag-jp","flag-jpn","jp"],"🇰🇪":["flag-ke","flag-ken","kenya"],"🇰🇬":["flag-kg","flag-kgz","kyrgyzstan"],"🇰🇭":["flag-kh","flag-khm","cambodia"],"🇰🇮":["flag-ki","flag-kir","kiribati"],"🇰🇲":["flag-km","flag-com","comoros"],"🇰🇳":["flag-kn","flag-kna","stkittsnevis","st_kitts_nevis"],"🇰🇵":["flag-kp","flag-prk","northkorea","north_korea"],"🇰🇷":["flag-kr","flag-kor","southkorea","south_korea","kr"],"🇰🇼":["flag-kw","flag-kwt","kuwait"],"🇰🇾":["flag-ky","flag-cym","caymanislands","cayman_islands"],"🇰🇿":["flag-kz","flag-kaz","kazakhstan"],"🇱🇦":["flag-la","flag-lao","laos"],"🇱🇧":["flag-lb","flag-lbn","lebanon"],"🇱🇨":["flag-lc","flag-lca","stlucia","st_lucia"],"🇱🇮":["flag-li","flag-lie","liechtenstein"],"🇱🇰":["flag-lk","flag-lka","srilanka","sri_lanka"],"🇱🇷":["flag-lr","flag-lbr","liberia"],"🇱🇸":["flag-ls","flag-lso","lesotho"],"🇱🇹":["flag-lt","flag-ltu","lithuania"],"🇱🇺":["flag-lu","flag-lux","luxembourg"],"🇱🇻":["flag-lv","flag-lva","latvia"],"🇱🇾":["flag-ly","flag-lby","libya"],"🇲🇦":["flag-ma","flag-mar","morocco"],"🇲🇨":["flag-mc","flag-mco","monaco"],"🇲🇩":["flag-md","flag-mda","moldova"],"🇲🇪":["flag-me","flag-mne","montenegro"],"🇲🇫":["flag-mf","flag-maf","stmartin","st_martin"],"🇲🇬":["flag-mg","flag-mdg","madagascar"],"🇲🇭":["flag-mh","flag-mhl","marshallislands","marshall_islands"],"🇲🇰":["flag-mk","flag-mkd","macedonia"],"🇲🇱":["flag-ml","flag-mli","mali"],"🇲🇲":["flag-mm","flag-mmr","myanmar"],"🇲🇳":["flag-mn","flag-mng","mongolia"],"🇲🇴":["flag-mo","flag-mac","macau"],"🇲🇵":["flag-mp","flag-mnp","northernmarianaislands","northern_mariana_islands"],"🇲🇶":["flag-mq","flag-mtq","martinique"],"🇲🇷":["flag-mr","flag-mrt","mauritania"],"🇲🇸":["flag-ms","flag-msr","montserrat"],"🇲🇹":["flag-mt","flag-mlt","malta"],"🇲🇺":["flag-mu","flag-mus","mauritius"],"🇲🇻":["flag-mv","flag-mdv","maldives"],"🇲🇼":["flag-mw","flag-mwi","malawi"],"🇲🇽":["flag-mx","flag-mex","mexico"],"🇲🇾":["flag-my","flag-mys","malaysia"],"🇲🇿":["flag-mz","flag-moz","mozambique"],"🇳🇦":["flag-na","flag-nam","namibia"],"🇳🇨":["flag-nc","flag-ncl","newcaledonia","new_caledonia"],"🇳🇪":["flag-ne","flag-ner","niger"],"🇳🇫":["flag-nf","flag-nfk","norfolkisland","norfolk_island"],"🇳🇬":["flag-ng","flag-nga","nigeria"],"🇳🇮":["flag-ni","flag-nic","nicaragua"],"🇳🇱":["flag-nl","flag-nld","netherlands"],"🇳🇴":["flag-no","flag-nor","norway"],"🇳🇵":["flag-np","flag-npl","nepal"],"🇳🇷":["flag-nr","flag-nru","nauru"],"🇳🇺":["flag-nu","flag-niu","niue"],"🇳🇿":["flag-nz","flag-nzl","newzealand","new_zealand"],"🇴🇲":["flag-om","flag-omn","oman"],"🇵🇦":["flag-pa","flag-pan","panama"],"🇵🇪":["flag-pe","flag-per","peru"],"🇵🇫":["flag-pf","flag-pyf","frenchpolynesia","french_polynesia"],"🇵🇬":["flag-pg","flag-png","papuanewguinea","papua_new_guinea"],"🇵🇭":["flag-ph","flag-phl","philippines"],"🇵🇰":["flag-pk","flag-pak","pakistan"],"🇵🇱":["flag-pl","flag-pol","poland"],"🇵🇲":["flag-pm","flag-spm","stpierremiquelon","st_pierre_miquelon"],"🇵🇳":["flag-pn","flag-pcn","pitcairnislands","pitcairn_islands"],"🇵🇷":["flag-pr","flag-pri","puertorico","puerto_rico"],"🇵🇸":["flag-ps","flag-pse","palestine"],"🇵🇹":["flag-pt","flag-prt","portugal"],"🇵🇼":["flag-pw","flag-plw","palau"],"🇵🇾":["flag-py","flag-pry","paraguay"],"🇶🇦":["flag-qa","flag-qat","qatar"],"🇷🇪":["flag-re","flag-reu","réunion"],"🇷🇴":["flag-ro","flag-rou","romania"],"🇷🇸":["flag-rs","flag-srb","serbia"],"🇷🇺":["flag-ru","flag-rus","russia","russianfederation"],"🇷🇼":["flag-rw","flag-rwa","rwanda"],"🇸🇦":["flag-sa","flag-sau","saudiarabia","saudi_arabia"],"🇸🇧":["flag-sb","flag-slb","solomonislands","solomon_islands"],"🇸🇨":["flag-sc","flag-syc","seychelles"],"🇸🇩":["flag-sd","flag-sdn","sudan"],"🇸🇪":["flag-se","flag-swe","sweden"],"🇸🇬":["flag-sg","flag-sgp","singapore"],"🇸🇭":["flag-sh","flag-shn","sthelena","st_helena"],"🇸🇮":["flag-si","flag-svn","slovenia"],"🇸🇯":["flag-sj","flag-sjm","svalbardjanmayen","svalbard_jan_mayen"],"🇸🇰":["flag-sk","flag-svk","slovakia"],"🇸🇱":["flag-sl","flag-sle","sierraleone","sierra_leone"],"🇸🇲":["flag-sm","flag-smr","sanmarino","san_marino"],"🇸🇳":["flag-sn","flag-sen","senegal"],"🇸🇴":["flag-so","flag-som","somalia"],"🇸🇷":["flag-sr","flag-sur","suriname"],"🇸🇸":["flag-ss","flag-ssd","southsudan","south_sudan"],"🇸🇹":["flag-st","flag-stp","saotomeprincipe","sao_tome_principe"],"🇸🇻":["flag-sv","flag-slv","elsalvador","el_salvador"],"🇸🇽":["flag-sx","flag-sxm","sintmaarten","sint_maarten"],"🇸🇾":["flag-sy","flag-syr","syria"],"🇸🇿":["flag-sz","flag-swz","swaziland"],"🇹🇦":["tristandacunha","tristan_da_cunha"],"🇹🇨":["flag-tc","flag-tca","turkscaicosislands","turks_caicos_islands"],"🇹🇩":["flag-td","flag-tcd","chad"],"🇹🇫":["flag-tf","flag-atf","frenchsouthernterritories","french_southern_territories"],"🇹🇬":["flag-tg","flag-tgo","togo"],"🇹🇭":["flag-th","flag-tha","thailand"],"🇹🇯":["flag-tj","flag-tjk","tajikistan"],"🇹🇰":["flag-tk","flag-tkl","tokelau"],"🇹🇱":["flag-tl","flag-tls","timor-leste"],"🇹🇲":["flag-tm","flag-tkm","turkmenistan"],"🇹🇳":["flag-tn","flag-tun","tunisia"],"🇹🇴":["flag-to","flag-ton","tonga"],"🇹🇷":["flag-tr","flag-tur"],"🇹🇹":["flag-tt","flag-tto","trinidadtobago","trinidad_tobago"],"🇹🇻":["flag-tv","flag-tuv","tuvalu"],"🇹🇼":["flag-tw","flag-twn","taiwan"],"🇹🇿":["flag-tz","flag-tza","tanzania"],"🇺🇦":["flag-ua","flag-ukr","ukraine"],"🇺🇬":["flag-ug","flag-uga","uganda"],"🇺🇲":["flag-um","flag-umi"],"🇺🇳":["flag-un","unitednations","united_nations"],"🇺🇸":["flag-us","flag-usa","unitedstates","united_states","us"],"🇺🇾":["flag-uy","flag-ury","uruguay"],"🇺🇿":["flag-uz","flag-uzb","uzbekistan"],"🇻🇦":["flag-va","flag-vat","vaticancity","vatican_city"],"🇻🇨":["flag-vc","flag-vct","stvincentgrenadines","st_vincent_grenadines"],"🇻🇪":["flag-ve","flag-ven","venezuela"],"🇻🇬":["flag-vg","flag-vgb","britishvirginislands","british_virgin_islands"],"🇻🇮":["flag-vi","flag-vir","usvirginislands","us_virgin_islands"],"🇻🇳":["flag-vn","flag-vnm","vietnam"],"🇻🇺":["flag-vu","flag-vut","vanuatu"],"🇼🇫":["flag-wf","flag-wlf","wallisfutuna","wallis_futuna"],"🇼🇸":["flag-ws","flag-wsm","samoa"],"🇽🇰":["flag-xk","flag-xkx","kosovo"],"🇾🇪":["flag-ye","flag-yem","yemen"],"🇾🇹":["flag-yt","flag-myt","mayotte"],"🇿🇦":["flag-za","flag-zaf","southafrica","south_africa"],"🇿🇲":["flag-zm","flag-zmb","zambia"],"🇿🇼":["flag-zw","flag-zwe","zimbabwe"]};function m_(e){var t={};return Object.keys(e).forEach(function(n){e[n].forEach(function(e){void 0!==t[e]&&Ce.a.warn("pattern collision for alias: "+e),t[e]=n})}),t}var g_=m_(p_),y_=m_(h_);function v_(e){return Object.keys(e).reduce(function(t,n){return t.concat(Array.isArray(e[n])?e[n]:[])},[])}var b_=v_(p_),w_=v_(h_),k_=new RegExp("(^|\\s)("+b_.map(d_).join("|")+")$"),__=new RegExp("(^|\\s)(?::("+w_.map(d_).join("|")+"):)$","i"),O_=function(){return[{name:"smiley",match:function(e,t,n){return Ta(e.selection.$cursor)?null:k_.exec(t)},process:C_.bind(null,g_,!0)},{name:"emoji",match:function(e,t,n){return Ta(e.selection.$cursor)?null:__.exec(t)},process:C_.bind(null,y_,!1)}]};function C_(e,t,n,r,o,a,i,l){var s=n.tr,c=(n.selection,e[t?o[2]:o[2].toLowerCase()]);return s.delete(a,i),s.insertText(c,a),r(s),!1}var S_=/^(\*{3,}|-{3,}|={3,})$/,x_=function(){return[{name:"hr",matchSchema:{type:"hr",depth:-1},match:function(e,t,n){return S_.exec(t)},getTriggerType:function(e,t,n,r){return"\n"===r?{stopPropagation:!0}:null},process:function(e,t,n,r,o,a){var i=e.selection.$from,l=e.storedMarks||i.marks(),s=ef(e,i.start(),i.pos);s&&(s.setStoredMarks(l),t(Oi(s,_i.b.NoteElementText,_i.a.AddDivider,"typebehind")))}}]};function E_(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P_=/(?:^|\s)(\S+@\S+\.\S+)$/,j_=new RegExp("(?:^|\\s)((?:(?:https?://|ftp://|www\\.)\\S+)|(?:[a-z0-9\\-\\.]+\\.(?:com|net|edu|org)))(?:(?:\\:|/|#|\\?)\\S*|\\b)$","i"),M_=new RegExp("(?:^|\\s)\\[([^\\]\\n\\r]*)]\\(((?:(?:(?:https?://|ftp://|www\\.)\\S+)|(?:[a-z0-9\\-\\.]+\\.(?:com|net|edu|org)))(?:(?:\\:|/|#|\\?)\\S*|\\b))\\)$","i"),A_=function(e){return function(t,n,r,o,a,i){var l=t.tr,s=E_(r,2),c=s[0],u=s[1],d=e?e+u:/^[a-z]+:\/\//i.test(u)?u:"http://"+u,f=c.indexOf(u),p=t.schema.marks.link.create({href:d});return l.addMark(o+f,a,p),n(l),!1}},T_=function(e,t,n,r){return"\n"===r?{append:!1}:null},N_=function(){return{name:"email",match:function(e,t,n){return Ta(e.selection.$cursor)?null:P_.exec(t)},getTriggerType:T_,process:A_("mailto:")}},D_=function(){return{name:"url",match:function(e,t,n){if(Ta(e.selection.$cursor))return null;var r=j_.exec(t);return null!==r&&(!e.doc.rangeHasMark(e.selection.$cursor.pos-t.length+r.index,e.selection.$cursor.pos,e.schema.marks.link)&&r)},getTriggerType:T_,process:A_("")}},L_=function(){return{name:"markdownLink",match:function(e,t,n){return Ta(e.selection.$cursor)?null:M_.exec(t)},getTriggerType:T_,process:function(e,t,n,r,o,a){var i=e.tr,l=E_(n,3),s=l[0],c=l[1],u=l[2],d=/^[a-z]+:\/\//i.test(u)?u:"http://"+u,f=0,p=c;p.trim().length?f=s.indexOf(p)-1:(f=s.indexOf("[".concat(p,"]")),p=u);var h=e.schema.marks.link.create({href:d});r+=f,i.replaceWith(r,o,e.schema.text(p,e.storedMarks||i.selection.$to.marks())),i.addMark(r,r+p.length,h),t(i)}}},R_=n(1724),I_=/^(\d{1,3})(\.|\))$/,z_=/^\s*([-+*])$/,B_=function(e){var t,n=[],r=(t=e.nodes.ol,F_(Object(R_.wrappingInputRule)(null,t,function(e){return{start:+e[1]}},function(e,t){return t.childCount+t.attrs.start===+e[1]}))).handler;n.push({name:"ol",matchSchema:{type:"ol",depth:-1},match:function(e,t,n){return I_.exec(t)},process:function(e,t,n,o,a,i){var l=r(e,n,o,a,i);if(l){var s=l.storedMarks;(l=yc(Ei({from:o,to:a},l.mapping),l,{checkAncestorList:!0})).setStoredMarks(s),t(Oi(l,_i.b.NoteElementList,_i.a.OrderedList,"typebehind"))}}});var o=function(e){return F_(Object(R_.wrappingInputRule)(null,e))}(e.nodes.ul).handler;return n.push({name:"ul",matchSchema:{type:"ul",depth:-1},match:function(e,t){return z_.exec(t)},process:function(e,t,n,r,a,i){var l=o(e,n,r,a,i);l&&t(Oi(l,_i.b.NoteElementList,_i.a.UnorderedList,"typebehind"))}}),n};function F_(e){return new R_.InputRule(e.match,function(t,n,r,o,a){var i=t.doc.nodeAt(o-1),l=a.split("").map(function(e){return"\n"===e?2:1}).reduce(function(e,t){return e+t}),s=e.handler(t,n,r,o+l);return s&&(ff(s,s.mapping.map(r)),s.setStoredMarks(i.marks)),s})}var W_=/^((?:\[\s*\]){2,})(?:x(\d+))?$/,H_=function(){return[{name:"table",matchSchema:{type:"table",depth:-1},match:function(e,t,n){return W_.exec(t)},getTriggerType:function(e,t,n,r){return"\n"===r?{stopPropagation:!0}:null},process:function(e,t,n,r,o,a){var i=e.selection.$from,l=e.tr,s=e.schema,c=n[1].split("][").length,u=ca(s,{rows:parseInt(n[2],10)||1,columns:c}),d=i.start(),f=i.pos,p=e.storedMarks||i.marks();l.replaceRange(d,f,new Je.Slice(Je.Fragment.from(u),0,0));var h=it(l.doc,{from:l.mapping.map(d,-1),to:l.mapping.map(f,1)},function(e,t){return"cell"===t.type.spec.tableRole||"header_cell"===t.type.spec.tableRole});h&&l.setSelection(Se.TextSelection.create(l.doc,h.pos)),l.setStoredMarks(p),t(Oi(l,_i.b.NoteElementTable,_i.a.AddTable,"typebehind"))}}]},$_=/`([^`]+)`$/,q_=function(e){return[{name:"code",match:function(e,t,n){return Ta(e.selection.$cursor)?null:$_.exec(t)},process:function(e,t,n,r,o,a){var i=e.tr,l=i.doc.resolve(r),s=i.doc.resolve(o),c=l.marksAcross(s);i.addMark(r+1,o-1,e.schema.marks.code.create()),i.delete(o-1,o),i.delete(r,r+1),i.setStoredMarks(c),t(i)}}]},V_=/\[([\sxX])?\]$/i,U_=function(e){return[{name:"todo",match:function(e,t,n){return Ta(e.selection.$cursor)?null:V_.exec(t)},getTriggerType:function(e,t,n,r){return 1!==r.length?{stopPropagation:!0}:null},process:function(e,t,n,r,o,a){var i=n[1]&&"x"===n[1].toLowerCase(),l=e.doc.resolve(r),s=pc(l),c=s&&s.type===e.schema.nodes.ul;if(!Ys(l,!0)||s&&!c)t(e.tr.delete(r,o+1).insert(r,e.schema.nodes.todo.create({checked:i})));else{var u=e.storedMarks||e.selection.$from.marks();jf("inserttodolist",i,e,function(e){"\n"===a?e.delete(r-1,o+1):e.delete(e.mapping.map(r),e.mapping.map(o)+1),e.setStoredMarks(u),t(e)})}}}]},K_=/^#{1,3}$/,Y_=function(e){var t=Object(R_.textblockTypeInputRule)(null,e.nodes.h,function(e){return{level:e.input.length}},function(){return!1}).handler;return[{name:"heading",matchSchema:{type:"h",depth:-1},match:function(e,t,n){return"\n"===n?null:K_.exec(t)},process:function(e,n,r,o,a,i){var l=e.storedMarks||e.selection.$from.marks(),s=t(e,r,o,a+i.length);if(s){var c=Yd["h".concat(r[0].length)][1];s.setStoredMarks(l),n(Oi(s,_i.b.NoteFormat,c,"typebehind"))}}}]};function X_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}
/*!

Copyright (C) 2015-2017 by Marijn Haverbeke <marijnh@gmail.com> and others

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/var G_=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z_(this,"view",void 0),Z_(this,"width",void 0),Z_(this,"cursorPos",void 0),Z_(this,"element",void 0),Z_(this,"timeout",void 0),Z_(this,"preventingDrop",void 0),Z_(this,"getRect",null),Z_(this,"handlers",["dragover","dragend","drop","dragleave"]),Z_(this,"lastTarget",void 0),Z_(this,"lastTargetLeft",void 0),Z_(this,"lastTargetTop",void 0),Z_(this,"scheduleRemoval",function(e){clearTimeout(n.timeout),n.timeout=setTimeout(function(){return n.setCursor(null)},e)}),Z_(this,"dragover",function(e){if(n.view.editable){var t=n.view.posAtCoords({left:e.clientX,top:e.clientY});if(t){var r=t.pos;n.preventingDrop?r=null:n.view.dragging&&n.view.dragging.slice&&null==(r=Object(sr.dropPoint)(n.view.state.doc,r,n.view.dragging.processedSlice||n.view.dragging.slice))&&(r=t.pos);var o=n.view.someProp("handleDropCursor",function(t){return t(n.view,r,e.clientX,e.clientY,n.width)})||{target:r,getRect:null};r=o.target,n.getRect=o.getRect;var a=e.target.getBoundingClientRect(),i=e.target!==n.lastTarget||a.left!==n.lastTargetLeft||a.top!==n.lastTargetTop;n.lastTarget=e.target,n.lastTargetLeft=a.left,n.lastTargetTop=a.top,n.setCursor(r,i),n.scheduleRemoval(5e3)}}}),Z_(this,"dragend",function(){return n.scheduleRemoval(20)}),Z_(this,"drop",function(){return n.scheduleRemoval(20)}),Z_(this,"dragleave",function(e){e.target!==n.view.dom&&n.view.dom.contains(e.relatedTarget)||n.setCursor(null)}),this.view=t,this.width=2,this.cursorPos=null,this.element=null,this.timeout=null,this.preventingDrop=!1,this.handlers.forEach(function(e){return t.dom.addEventListener(e,n[e])})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;this.handlers.forEach(function(t){return e.view.dom.removeEventListener(t,e[t])})}},{key:"update",value:function(e,t){if(!e.editable)return!0;var n=gk.getState(t),r=gk.getState(e.state);return this.preventingDrop=r.preventingDrop,n.dragging&&!r.dragging?this.setCursor(null):null!=this.cursorPos&&t.doc!==e.state.doc&&this.updateOverlay(),!0}},{key:"setCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e!==this.cursorPos||t)&&(this.cursorPos=e,null==e?this.element&&(this.element.remove(),this.element=null):this.updateOverlay())}},{key:"updateOverlay",value:function(){if(this.view.editable){var e=this.getRect?this.getRect():null;if(!e){var t=this.view.state.doc.resolve(this.cursorPos);if(!t.parent.inlineContent){var n=t.nodeBefore,r=t.nodeAfter;if(n||r){var o=this.view.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),a=n?o.bottom:o.top;n&&r&&(a=(a+this.view.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),e={left:o.left,right:o.right,top:a-this.width/2,bottom:a+this.width/2}}}}if(!e){var i=this.view.coordsAtPos(this.cursorPos);e={left:i.left-this.width/2,right:i.left+this.width/2,top:i.top,bottom:i.bottom}}var l=e.parent||this.view.dom.offsetParent;this.element||(this.element=document.createElement("div")),l.appendChild(this.element),this.element.className=Ky.a.dropCursor+(e.class?" "+e.class:"");var s=l===document.body&&"static"===getComputedStyle(l).position?{left:-window.pageXOffset,top:-window.pageYOffset,width:l.getBoundingClientRect().width}:l.getBoundingClientRect();this.element.style.left=e.left-s.left+"px",this.element.style.top=e.top-s.top+"px",this.element.style.width=Math.min(s.width-(e.left-s.left),e.right-e.left)+"px",this.element.style.height=e.bottom-e.top+"px"}}}])&&X_(t.prototype,n),r&&X_(t,r),e}();function J_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eO=new Se.PluginKey("mark-persistence"),tO=function(){return new Se.Plugin({key:eO,props:{decorations:function(e){if(!(e.storedMarks&&e.selection instanceof Se.TextSelection))return xe.DecorationSet.empty;var t=rO(e.selection);if(!t||!oO(t))return xe.DecorationSet.empty;var n=e.storedMarks.reduce(function(e,t){return t.type.spec.setStyleForEmptyTextBlock?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J_(n,!0).forEach(function(t){Q_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J_(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{},t.type.spec.setStyleForEmptyTextBlock(t)):e},{});return e_()(n)?xe.DecorationSet.empty:xe.DecorationSet.create(e.doc,[xe.Decoration.node(t.pos,t.pos+t.nodeAfter.nodeSize,{style:Cr(n)})])}},appendTransaction:function(e,t,n){if(!e.some(function(e){return e.selectionSet||e.docChanged||"enml"===e.getMeta("serializing")}))return null;var r,o,a=rO(t.selection);a=a?(r=a,e.reduce(function(e,t){return ft(t,e.pos,o)},r)):null;var i=rO(n.selection),l=t.storedMarks,s=n.storedMarks,c=n.tr;return c.setMeta("addToHistory",!1),c.setMeta(Re,"skip"),a&&(!i||a.pos!==i.pos)&&l&&l.length>0&&oO(a)&&(c=iO(c,a,l),i&&(i=ft(c,i.pos))),i&&(!aO(i)||a&&i.pos===a.pos?i.nodeAfter.childCount>1?c=sO(c,i):s&&s.length>0&&e.some(function(e){return"enml"===e.getMeta("serializing")})&&oO(i)&&(c=iO(c,i,s)):c=lO(c,i)),!c.storedMarksSet&&n.storedMarks&&c.setStoredMarks(n.storedMarks),c.docChanged?c:null}})},nO=function(e){return e.type===e.type.schema.nodes.markholder},rO=function(e){if(!(e instanceof Se.TextSelection))return null;var t=e.$cursor;return t?t.nodeAfter&&t.nodeAfter.isTextblock?t:t.parent&&t.parent.isTextblock?t.doc.resolve(t.before()):null:null},oO=function(e){return e&&e.nodeAfter&&0===e.nodeAfter.childCount},aO=function(e){return e&&e.nodeAfter&&e.nodeAfter.isTextblock&&1===e.nodeAfter.childCount&&nO(e.nodeAfter.firstChild)},iO=function(e,t,n){var r=e.doc.type.schema;return e.insert(t.pos+1,r.nodes.markholder.create({},Je.Fragment.empty,n)),e.setMeta(eO,"inserted-markholder"),e},lO=function(e,t){var n=e.doc.resolve(t.pos+1),r=e.doc.resolve(n.start()),o=e.doc.resolve(n.end()),a=r.marksAcross(o);return e.delete(r.pos,o.pos),a&&e.setStoredMarks(a),e.setMeta(eO,"converted-markholder-to-stored-marks"),e},sO=function(e,t){var n=e.mapping.maps.length;return t.nodeAfter.forEach(function(r,o,a){if(nO(r)){var i=pt(e,n,t.pos+1+o);e.delete(i.pos,i.pos+1)}}),e.setMeta(eO,"removed-markholders"),e},cO=new Se.PluginKey("customheadingstyles"),uO=function(){return new Se.Plugin({key:cO,state:{init:function(){},apply:function(e){if(e.docChanged){var t=e.doc.attrs.customheadingstyles;t!==Object(Gi.getCustomHeadingStyles)()&&(Me.default.dispatch(Object(Pe.setCustomHeadingStyles)(t)),Ol())}}}})};n(1761);var dO={style:{default:null,enml:!0},codeblock:{default:!0,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"boolean"},textAlign:{default:null}},fO={plaintext:{default:!0,dataAttr:!0,type:"boolean"}},pO=["box-sizing: border-box;","padding: 8px;",'font-family: Monaco, Menlo, Consolas, "Courier New", monospace;',"font-size: 12px; color: rgb(51, 51, 51);","border-top-left-radius: 4px;","border-top-right-radius: 4px;","border-bottom-right-radius: 4px;","border-bottom-left-radius: 4px;","background-color: rgb(251, 250, 248);","border: 1px solid rgba(0, 0, 0, 0.14902);","background-position: initial initial;","background-repeat: initial initial;"].join(" "),hO=[{tag:"div",preserveWhitespace:"full",context:"codeblock/",priority:52,getAttrs:function(e){return{}}},{tag:"div",preserveWhitespace:"full",priority:52,getAttrs:function(e){return!!Wo(e,fO).plaintext&&{}}}],mO=function(e,t){var n=pi(e.outerHTML);return Je.Fragment.from(n.split("\n").map(function(e){return t.nodes.plaintext.create(null,e.length?t.text(e):null)}))},gO={plaintext:{content:"text*",marks:"",selectable:!1,isLinkable:!1,attrs:fO,parseDOM:hO,parseENML:hO,parseClipboard:hO,toDOM:function(e){return["div",{"data-plaintext":"true"},0]},toENML:function(e){return["div",0===e.childCount?["br"]:0]},toClipboard:function(e){return["div",{"data-plaintext":"true"},0===e.childCount?["br"]:0]}},codeblock:{content:"plaintext+",group:"section",defining:!0,code:!0,unsplittable:!0,isolating:!0,addBookends:!0,attrs:dO,parseDOM:[{tag:"en-codeblock",preserveWhitespace:!0,getAttrs:function(e){var t=Wo(e,dO);return t.textAlign=e.style.textAlign||t.align||null,t.codeblock=!0,delete t.style,t}}],parseClipboard:[{tag:"div",preserveWhitespace:!0,getAttrs:function(e){if("true"!==e.getAttribute("data-codeblock")&&"pre"!==e.style.whiteSpace&&!e.style.fontFamily.endsWith("monospace"))return!1;var t=Wo(e,dO);return t.textAlign=e.style.textAlign||t.align||null,t.codeblock=!0,delete t.style,t},getContent:mO},{tag:"pre",preserveWhitespace:"full",priority:51,getAttrs:function(e){var t=Wo(e,dO);return t.codeblock=!0,t.textAlign=e.style.textAlign||t.align||null,delete t.style,t},getContent:mO}],parseENML:[{tag:"div",priority:51,getAttrs:function(e){var t=Wo(e,dO);return!!t.codeblock&&(delete t.style,t.textAlign=e.style.textAlign||t.align||null,t)},getContent:mO}],toDOM:function(e){return["en-codeblock",{spellcheck:"false"},0]},toENML:function(e){var t=Ho(e.attrs,dO);return t.style=t.style||"",t.style+=pO,["div",t,0]},toClipboard:function(e){var t=qo(e.attrs,dO);return t.style=t.style||"",t.style+=pO,["div",t,0]}}},yO={hint:{default:null,enml:!0,dataAttr:!0},cipher:{default:null,enml:!0,dataAttr:!0},length:{default:null,enml:!0,dataAttr:!0},ciphertext:{default:"",dataAttr:!0},plaintext:{default:""},revealed:{default:!1}},vO={crypt:{group:"inline",atom:!0,inline:!0,attrs:yO,selectable:!0,selectionStyling:!0,selectOnDelete:!0,preventDropIfRemoved:!0,isLinkable:!1,parseDOM:[{tag:"en-crypt,img.en-crypt,.".concat(Mb.a.crypt),getAttrs:function(e){return Wo(e,yO)}}],parseENML:[{tag:"en-crypt",getAttrs:function(e){var t=Wo(e,yO);return t.ciphertext=e.textContent,t}}],parseClipboard:[{tag:"img.en-crypt",getAttrs:function(e){return Wo(e,yO)}}],toDOM:function(e){return["en-crypt",{class:"encrypt"},"*******"]},toENML:function(e){return["en-crypt",Ho(e.attrs,yO),e.attrs.ciphertext]},toClipboard:function(e){var t=qo(e.attrs,yO);if(t.revealed){var n=document.createElement("div");return n.innerHTML=t.plaintext,n}return delete t.plaintext,delete t.revealed,t.class="en-crypt en-crypt-placeholder",t.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",t.alt="******",["img",t]}}},bO=/((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g,wO={markholder:{enml:!0,enStyleAttr:!0,dataAttr:!0,default:!0,type:"boolean"}},kO=[{tag:"span",getAttrs:function(e){var t=Wo(e,wO);return!!t.markholder&&t}}],_O={doc:{attrs:{customheadingstyles:{default:{}}},content:"section+",skipValidation:!0},text:{group:"inline",skipValidation:!0,isLinkable:!0,toENML:function(e){return e.text.replace(bO,"").replace(/ {2}/g,"  ")}},markholder:{group:"inline",inline:!0,atom:!0,attrs:wO,parseDOM:kO,parseClipboard:kO,parseENML:kO,toDOM:function(e){return["span",qo(e.attrs,wO)]},toClipboard:function(e){return["span",qo(e.attrs,wO)]},toENML:function(e){return["span",Ho(e.attrs,wO),["br"]]}}},OO={content:{default:null},simplifyOnPaste:{default:!0,dataAttr:!0,type:"boolean"},foreigncontent:{default:null,dataAttr:!0,type:"boolean"},resources:{default:null},webClipType:{default:null,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"string"}},CO=function(e,t){var n=Wo(e,OO);return n.content=e.getAttribute("content")||e.innerHTML,n.resources={},Object.keys(t).forEach(function(e){n.content.indexOf(' hash="'.concat(e,'"'))>-1&&(n.resources[e]=t[e])}),"null"===n.webClipType&&(n.webClipType=null),n},SO=[{tag:"foreign-content,div[data-foreigncontent=true]",getAttrs:function(e){return CO(e,this.resources)},needsResourceData:!0,resources:{},priority:52},{priority:52,tag:"*",context:"foreigncontent//",skip:!0}],xO={foreigncontent:{group:"section",marks:"",atom:!0,attrs:OO,selectable:!0,resizing:!0,selectionStyling:!0,selectOnDelete:!0,preventDropIfRemoved:!0,parseDOM:SO,parseENML:[{tag:"foreign-content",getAttrs:function(e){return CO(e,this.resources)},needsResourceData:!0,resources:{}},{priority:52,tag:"*",context:"foreigncontent//",skip:!0}],parseClipboard:SO,toDOM:function(){return!1},toENML:function(e){var t=Ho(e.attrs,OO),n=document.createElement("div");n.innerHTML=e.attrs.content,Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])});for(var r=document.createDocumentFragment();n.firstChild;)r.appendChild(n.firstChild);return r},toClipboard:function(e){var t=qo({simplifyOnPaste:!1,foreigncontent:!0,content:null,webClipType:e.attrs.webClipType},OO),n=document.createElement("div");return n.innerHTML=e.attrs.content,Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n}}},EO=(n(1762),{style:{default:null,enml:!0},level:{default:1},textAlign:{default:null}}),PO=[{tag:"h1,h2,h3,h4,h5,h6",getAttrs:function(e){var t=Wo(e,EO);return t.level=parseInt(e.tagName.substr(1),10),t.textAlign=e.style.textAlign||t.align||null,delete t.style,t}}],jO={h:{content:"inline*",marks:"_",group:"section inlinecontainer",defining:!0,isBookend:!0,attrs:EO,parseDOM:PO,parseENML:PO,parseClipboard:PO,toDOM:function(e){var t=e.attrs,n=qo(t,EO),r=n.style;return t.textAlign&&"left"!==t.textAlign&&(r=wr(r,"text-align",t.textAlign)),n.style=r,n.style||delete n.style,delete n.level,delete n.textAlign,["h"+t.level,n,0]},toENML:function(e){var t=e.attrs,n=Ho(t,EO),r=n.style;t.textAlign&&"left"!==t.textAlign&&(r=wr(r,"text-align",t.textAlign)),n.style=r,n.style||delete n.style;var o="h"+t.level,a=_l(o);return a?[o,n,["span",{style:a+"--en-chs: true;"},0]]:[o,n,0]},toClipboard:function(e){var t=e.attrs,n=qo(t,EO),r=n.style;t.textAlign&&"left"!==t.textAlign&&(r=wr(r,"text-align",t.textAlign)),n.style=r,n.style||delete n.style,delete n.level,delete n.textAlign;var o="h"+t.level,a=_l(o);return a?[o,n,["span",{style:a+"--en-chs: true;"},0]]:[o,n,0]}}},MO=(n(1763),{style:{default:null,enml:!0},align:{default:null,enml:!0},noshade:{default:null,enml:!0},size:{default:null,enml:!0},width:{default:null,enml:!0}}),AO=[{tag:"hr",getAttrs:function(e){var t=Wo(e,MO);return(!t.style||-1===t.style.indexOf("-evernote-encp-section-break"))&&(delete t.style,t)}}],TO={hr:{group:"section",selectable:!1,addBookends:!0,parseDOM:AO,parseENML:AO,parseClipboard:AO,toDOM:function(e){return["hr",qo(e.attrs,MO)]},toENML:function(e){return["hr",Ho(e.attrs,MO)]},toClipboard:function(e){return["hr",qo(e.attrs,MO)]}}},NO=(n(1764),n(1765),n(1766),n(1767),{style:{default:null,enml:!0},title:{default:null,enml:!0},accesskey:{default:null,enml:!0},tabindex:{default:null,enml:!0},charset:{default:null,enml:!0},type:{default:null,enml:!0},name:{default:null,enml:!0},href:{default:null,enml:!0},hreflang:{default:null,enml:!0},rel:{default:null,enml:!0},rev:{default:null,enml:!0},shape:{default:null,enml:!0},coords:{default:null,enml:!0},target:{default:null,enml:!0},mime:{default:null,enml:!0},connectText:{default:null},connectBox:{default:null},textContent:{default:""},alternateLink:{default:null},parentFolderLink:{default:null},thumbnail:{default:null},imageMeta:{default:null},videoMeta:{default:null},guid:{default:null}}),DO=[{tag:"a[href]",getAttrs:function(e){var t=Wo(e,NO);return t.rev=t.rev||"en_rl_none",t.textContent=e.textContent,t.guid=Ge()(),delete t.style,t}}],LO={link:{inclusive:!1,attrs:NO,parseDOM:DO,parseENML:DO,parseClipboard:DO,toDOM:function(e){var t=e.attrs,n=qo(t,NO);delete n.textContent,delete n.guid;var r=[];return 0===t.href.indexOf("tel:")?r.push("en-phone"):0===t.href.indexOf("evernote://")&&r.push("en-internal-link"),n.class=r.join(" "),["a",n]},toClipboard:function(e){var t=qo(e.attrs,NO);return delete t.guid,["a",t]},toENML:function(e){return["a",Ho(e.attrs,NO)]}}},RO=n(1768),IO=n.n(RO),zO=(n(1769),{style:{default:null,enml:!0},start:{default:null,enml:!0},backgroundColor:{default:null},color:{default:null},lineHeight:{default:null},listStyleType:{default:null}}),BO={style:{default:null,enml:!0},backgroundColor:{default:null},color:{default:null},lineHeight:{default:null},listStyleType:{default:null}},FO={todo:{default:!0,enml:!0,enStyleAttr:!0,dataAttr:!0},style:{default:null,enml:!0},backgroundColor:{default:null},color:{default:null},lineHeight:{default:null},listStyleType:{default:null}},WO={style:{default:null,enml:!0},checked:{default:null,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"boolean"},value:{default:null,enml:!0},displayValue:{default:null},backgroundColor:{default:null},color:{default:null},listStyleType:{default:null}},HO=function(e,t){var n=e.style;return n=wr(n,"background-color",t.backgroundColor),n=wr(n,"color",t.color),n=wr(n,"line-height",t.lineHeight),""!==(n=wr(n,"list-style-type",t.listStyleType))?e.style=n:delete e.style,e},$O=function(e,t){return function(n){var r=n.attrs,o=qo(r,t);return 1===n.attrs.start&&delete o.start,delete(o=HO(o,r))["data-todo"],r.todo&&(o.class="en-todolist"),[e,o,0]}},qO=function(e,t){return function(n){var r=n.attrs,o=Ho(r,t);return 1===n.attrs.start&&delete o.start,o=HO(o,r),[e,o,0]}},VO=function(e,t){return function(n){var r=n.attrs,o=qo(r,t);return 1===n.attrs.start&&delete o.start,o=HO(o,r),[e,o,0]}},UO=function(e){return function(t){var n,r=t.attrs;if("enml"===e)return n=Ho(r,WO),["li",n=HO(n,r),0];if("clipboard"===e)return n=qo(r,WO),delete(n=HO(n,r)).displayValue,["li",n,0];n=qo(r,WO),delete(n=HO(n,r)).displayValue;var o=r.displayValue?r.displayValue.toString().length:null;n["data-display-value-length"]=o&&o>1?o:null;var a=["div",{class:"list-bullet",contenteditable:!1,"data-display-value":r.displayValue?r.displayValue+".":null}];return r.checked&&a.push(["img",{class:"bullet-checkmark",src:IO.a}]),["li",n,a,["div",{class:"list-content"},0]]}},KO=[{tag:"ol",getAttrs:function(e){if(0===e.childElementCount)return!1;var t=Wo(e,zO);return delete t.style,t}}],YO=[{tag:"ul",getAttrs:function(e){if(0===e.childElementCount)return!1;var t=Wo(e,BO);return delete t.style,t}}],XO=[{tag:"ul",priority:51,getAttrs:function(e){if(0===e.childElementCount)return!1;var t=Wo(e,FO);return!!t.todo&&(t.todo="true"===t.todo||"1"===t.todo,delete t.style,t)}}],ZO=[{tag:"li",getAttrs:function(e){var t=Wo(e,WO);return delete t.style,t}}],GO={ol:{content:"(li | todolist | ol | ul)+",group:"section list tablecontent",isLinkable:!0,attrs:zO,selectable:!1,isBookend:!0,parseDOM:KO,parseENML:KO,parseClipboard:KO,toDOM:$O("ol",zO),toENML:qO("ol",zO),toClipboard:VO("ol",zO)},ul:{content:"(li | todolist | ol | ul)+",group:"section list tablecontent",isLinkable:!0,attrs:BO,selectable:!1,isBookend:!0,parseDOM:YO,parseENML:YO,parseClipboard:YO,toDOM:$O("ul",BO),toENML:qO("ul",BO),toClipboard:VO("ul",BO)},todolist:{content:"(li | todolist | ol | ul)+",group:"section list tablecontent",isLinkable:!0,attrs:FO,selectable:!1,isBookend:!0,parseDOM:XO,parseENML:XO,parseClipboard:XO,toDOM:$O("ul",FO),toENML:qO("ul",FO),toClipboard:VO("ul",FO)},li:{content:"p+",group:"listitem",defining:!0,isLinkable:!0,attrs:WO,selectable:!1,parseDOM:ZO,parseENML:ZO,parseClipboard:ZO,toDOM:UO(),toENML:UO("enml"),toClipboard:UO("clipboard")}},JO=(n(1770),["address","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","foreign-content","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","img","li","main","nav","noscript","ol","output","p","pre","section","table","tfoot","todolist","ul","video"].join(","));var QO={style:{default:null,enml:!0},backgroundColor:{default:null},color:{default:null},textAlign:{default:null},indent:{default:0}},eC=[{tag:"div,p,address,blockquote,center,dd,dt,caption,pre",preserveWhitespace:!0,getAttrs:function(e){if(function(e){if("inline"===e.style.display)return!1;var t=e.querySelectorAll(JO);return Array.prototype.some.call(t,function(e){return"inline"!==e.style.display})}(e))return!1;var t=Wo(e,QO);return t.backgroundColor=e.style.backgroundColor||null,t.color=e.style.color||null,t.textAlign=e.style.textAlign||t.align||null,"CENTER"!==e.tagName||t.textAlign||(t.textAlign="center"),t.indent=function(e){var t=0;return e.style.marginLeft&&(t+=Er(e.style.marginLeft)),e.style.paddingLeft&&(t+=Er(e.style.paddingLeft)),Math.min(za,Math.ceil(t/40)||0)}(e),0!==t.indent||"BLOCKQUOTE"!==e.tagName&&"DD"!==e.tagName||(t.indent=1),delete t.style,t}},{tag:"br",getAttrs:function(e){return(!e.parentElement||1!==e.parentElement.childNodes.length)&&{}}}],tC={p:{content:"inline*",marks:"_",group:"section tablecontent inlinecontainer",attrs:QO,selectable:!1,isLinkable:!0,isBookend:!0,parseDOM:eC,parseENML:eC,parseClipboard:eC,toDOM:function(e){var t=e.attrs,n=qo(t,QO),r=n.style;return t.textAlign&&(r="left"===t.textAlign?kr(r,"text-align"):wr(r,"text-align",t.textAlign)),t.backgroundColor&&(r=wr(r,"background-color",t.backgroundColor)),t.color&&(r=wr(r,"color",t.color)),t.indent&&(r=wr(r,"padding-left","".concat(t.indent*Ba,"px"))),n.style=r,n.style||delete n.style,delete n.textAlign,delete n.indent,n.class="para",["div",n,0]},toENML:function(e){var t=e.attrs,n=Ho(t,QO),r=n.style;t.textAlign&&(r="left"===t.textAlign?kr(r,"text-align"):wr(r,"text-align",t.textAlign)),t.backgroundColor&&(r=wr(r,"background-color",t.backgroundColor)),t.color&&(r=wr(r,"color",t.color)),t.indent&&(r=wr(r,"padding-left","".concat(40*t.indent,"px"))),n.style=r,n.style||delete n.style;var o=_l("p");return o?["div",n,["span",{style:o+"--en-chs: true;"},0===e.childCount?["br"]:0]]:["div",n,0===e.childCount?["br"]:0]},toClipboard:function(e){var t=e.attrs,n=qo(t,QO),r=n.style;t.textAlign&&(r="left"===t.textAlign?kr(r,"text-align"):wr(r,"text-align",t.textAlign)),t.backgroundColor&&(r=wr(r,"background-color",t.backgroundColor)),t.color&&(r=wr(r,"color",t.color)),t.indent&&(r=wr(r,"padding-left","".concat(40*t.indent,"px"))),n.style=r,n.style||delete n.style,delete n.textAlign,delete n.indent;var o=_l("p");return o?["div",n,["span",{style:o+"--en-chs: true;"},0===e.childCount?["br"]:0]]:["div",n,0===e.childCount?["br"]:0]}}},nC={style:{default:null,enml:!0}},rC=[{tag:"hr",getAttrs:function(e){var t=Wo(e,nC);return!(!t.style||-1===t.style.indexOf("-evernote-encp-section-break"))&&(delete t.style,t)}}],oC=function(e){var t={};return t.style=wr(t.style,"display","none"),t.style=wr(t.style,"-evernote-encp-section-break",!0),["hr",t]},aC={sectionbreak:{group:"section",selectable:!1,parseDOM:rC,parseENML:rC,parseClipboard:rC,toDOM:oC,toENML:oC,toClipboard:oC}};function iC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iC(n,!0).forEach(function(t){sC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iC(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cC=function(e,t){return null==e?e:(e=String(e)).endsWith("px")?e:e.endsWith("%")?e:e+t},uC={style:{default:null,enml:!0},src:{default:null,enml:!0},url:{default:null},alt:{default:null,enml:!0},name:{default:null,enml:!0},longdesc:{default:null,enml:!0},height:{default:null,enml:!0},width:{default:null,enml:!0},usemap:{default:null,enml:!0},ismap:{default:null,enml:!0},align:{default:null,enml:!0},border:{default:null,enml:!0},hspace:{default:null,enml:!0},vspace:{default:null,enml:!0},isDataUrl:{default:null}},dC={style:{default:null,enml:!0},type:{default:null,enml:!0},hash:{default:null,enml:!0,dataAttr:!0},viewAsAttachment:{default:null,type:"boolean",enml:!0,enStyleAttr:!0,dataAttr:!0},viewerProps:{type:"object",default:{},enml:!0,enStyleAttr:!0,dataAttr:!0},mime:{default:null},height:{default:null},width:{default:null,enml:!0},usemap:{default:null},longdesc:{default:null},alt:{default:null},state:{default:null},reference:{default:null},filename:{default:null},filesize:{default:null},src:{default:null},url:{default:"",dataAttr:!0},progress:{default:null},borderWidth:{default:null},marginTop:{default:null},marginBottom:{default:null},marginLeft:{default:null},marginRight:{default:null},verticalAlign:{default:null}},fC=function(e,t){var n=Wo(e,dC),r=n.hash||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return!1;var n=e.src,r=e.url;if(!n&&!r)return!1;var o=Object.keys(t).find(function(e){var o=t[e];return r&&r===o.url||o.hash===n||o.url===n?e:null});return o&&Oe.warn("Hash extracted from src or data-url in an image. This should normally not happen and it means a resource was copied outside of our normal flow"),o}(n,t);if(!r||!t||!t[r])return!1;var o=yo(n,go(t[r])),a=e.style;return o.type=o.mime,o.borderWidth=a.borderWidth||null,o.width=a.width||(o.width?cC(o.width,"px"):null),o.height=a.width||(o.width?cC(o.height,"px"):null),o.verticalAlign=a.verticalAlign||o.valign||null,o.marginLeft=a.marginLeft||null,o.marginRight=a.marginRight||null,o.hspace&&(o.marginLeft=o.marginRight=o.hspace+"px"),o.marginTop=a.marginTop||null,o.marginBottom=a.marginBottom||null,o.vspace&&(o.marginTop=o.marginBottom=o.hspace+"px"),o},pC={attrs:dC,draggable:!1,atom:!0,selectionStyling:!0,selectOnDelete:!0,preventDropIfRemoved:!0,toENML:function(e){var t=e.attrs,n=Ho(t,dC);return n.type=n.type||t.mime,["en-media",n]},toDOM:function(e){var t=e.attrs,n=e.type,r=qo(t,dC);return r["data-type"]=r["data-type"]||t.mime,r.src=t.url,delete r.mime,delete r.url,delete r.reference,["image"===n.name?"img":"embed",r]},toClipboard:function(e){var t=e.attrs,n=qo(t,dC);return n["data-type"]=n["data-type"]||t.mime,n.src=t.url,delete n.mime,delete n.state,delete n.progress,delete n.reference,["img",n]}},hC=[{tag:"img",getAttrs:function(e){var t,n=Wo(e,uC);return n.style=e.getAttribute("style"),n.url=e.getAttribute("src"),n.width=e.getAttribute("width")||e.style.width,kr(n.style,"width"),n.height=e.getAttribute("height")||e.style.height,n.isDataUrl=!!(t=n.url)&&f_.test(t.trim()),kr(n.style,"height"),n}}],mC=function(e){return[{tag:"dom"===e?"en-media,img":"enml"===e?"en-media":"img",needsResourceData:!0,resources:{},priority:51,getAttrs:function(e){var t=fC(e,this.resources);return!(!t||!Object(yt.d)(t.mime,t.filename,null))&&t}}]},gC=function(e){return[{tag:"dom"===e?"en-media,img":"enml"===e?"en-media":"img",needsResourceData:!0,resources:{},priority:51,getAttrs:function(e){var t=fC(e,this.resources);return!(!t||Object(yt.d)(t.mime,t.filename,null))&&t}}]},yC={img:{group:"section tablecontent image",attrs:uC,draggable:!1,atom:!0,selectionStyling:!0,selectOnDelete:!0,preventDropIfRemoved:!0,parseDOM:hC,parseENML:hC,parseClipboard:hC,toENML:function(e){return["img",Ho(e.attrs,uC)]},toDOM:function(e){var t=qo(e.attrs,uC);return delete t.isValidDataUrl,["img",t]},toClipboard:function(e){var t=qo(e.attrs,uC);return delete t.isValidDataUrl,["img",t]}},image:lC({},pC,{group:"section tablecontent resource image",parseDOM:mC("dom"),parseENML:mC("enml"),parseClipboard:mC("clipboard")}),file:lC({},pC,{group:"section tablecontent resource",parseDOM:gC("dom"),parseENML:gC("enml"),parseClipboard:gC("clipboard")})},vC={selstart:{group:"inline",atom:!0,inline:!0,selectable:!1,attrs:{top:{default:null}},parseDOM:[],parseENML:[{tag:"span",getAttrs:function(e){return!!e.style.getPropertyValue("--en-sel-start")&&{top:e.style.getPropertyValue("--en-sel-start")||0}}}],parseClipboard:[],toDOM:function(){return!1},toENML:function(e){return["span",{style:"--en-sel-start: ".concat(e.attrs.top,";")}]},toClipboard:function(){return!1}},selend:{group:"inline",atom:!0,inline:!0,selectable:!1,attrs:{top:{default:null}},parseDOM:[],parseENML:[{tag:"span",getAttrs:function(e){return!!e.style.getPropertyValue("--en-sel-end")&&{top:e.style.getPropertyValue("--en-sel-end")||0}}}],parseClipboard:[],toDOM:function(){return!1},toENML:function(e){return["span",{style:"--en-sel-end: ".concat(e.attrs.top,";")}]},toClipboard:function(){return!1}}};n(1771);function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kC(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _C={style:{default:null,enml:!0},summary:{default:null,enml:!0},width:{default:null,enml:!0},cellspacing:{default:null,enml:!0},cellpadding:{default:null,enml:!0},align:{default:null,enml:!0},cols:{default:[]},backgroundColor:{default:null},borderWidth:{default:null},borderColor:{default:null},color:{default:null},selected:{default:!1}},OC=[{tag:"table",getAttrs:function(e){var t=Wo(e,_C),n=e.style;return t.borderColor=n.borderColor||null,t.borderWidth=n.borderWidth||null,t.borderWidth||!t.border&&0!==t.border||(t.borderWidth=t.border+"px"),n.width?t.width=n.width:(t.width||0===t.width)&&(t.width=-1!==t.width.indexOf("%")?t.width:parseInt(t.width,10)+"px"),e.querySelector("colgroup")&&(t.cols=Array.from(e.querySelectorAll("col")).map(function(e){return{width:parseInt(e.style.width,10)}})),delete t.style,t}}],CC=function(e){var t=e.attrs,n=qo(t,_C),r=n.style;r=wr(r,"background-color",t.backgroundColor),r=wr(r,"border-color",t.borderColor),r=wr(r,"border-width",t.borderWidth),r=wr(r,"color",t.color),r=wr(r,"width",t.width),n.style=r,n.width=t.width,n.style||delete n.style;var o=t.cols.map(function(e){return["col",{style:"width: ".concat(e.width,"px;")}]});return delete n.cols,delete n.compatible,delete n.selected,["table",n,["colgroup"].concat(kC(o)),["tbody",0]]},SC={content:"tr+",tableRole:"table",isolating:!0,resizing:!0,selectionStyling:!0,selectOnDelete:!0,preventDropIfRemoved:!0,addBookends:!0,isLinkable:!0,group:"section",attrs:_C,parseDOM:OC,parseENML:OC,parseClipboard:OC,toDOM:CC,toENML:function(e){var t=e.attrs,n=Ho(t,_C),r=n.style;r=wr(r,"background-color",t.backgroundColor),r=wr(r,"border-color",t.borderColor),r=wr(r,"border-width",t.borderWidth),r=wr(r,"color",t.color),r=wr(r,"width",t.width),n.style=r,n.width=t.width,n.style||delete n.style;var o=t.cols.map(function(e){return["col",{style:"width: ".concat(e.width,"px;")}]});return["table",n,["colgroup"].concat(kC(o)),["tbody",0]]},toClipboard:CC},xC={style:{default:null,enml:!0},backgroundColor:{default:null},textAlign:{default:null},verticalAlign:{default:null},borderWidth:{default:null},color:{default:null}},EC=[{tag:"tr",getAttrs:function(e){return Wo(e,xC)}}],PC=function(e){var t=e.attrs,n=qo(t,xC),r=n.style;return r=wr(r,"background-color",t.backgroundColor),r=wr(r,"border-width",t.borderWidth),r=wr(r,"color",t.color),r=wr(r,"text-align",t.textAlign),r=wr(r,"vertical-align",t.verticalAlign),n.style=r,n.style||delete n.style,["tr",n,0]},jC={content:"(th | td)*",tableRole:"row",selectable:!1,preventDropIfRemoved:!0,attrs:xC,isLinkable:!0,parseDOM:EC,parseENML:EC,parseClipboard:EC,toDOM:PC,toENML:function(e){var t=e.attrs,n=Ho(t,xC),r=n.style;return r=wr(r,"background-color",t.backgroundColor),r=wr(r,"border-width",t.borderWidth),r=wr(r,"color",t.color),r=wr(r,"text-align",t.textAlign),r=wr(r,"vertical-align",t.verticalAlign),n.style=r,n.style||delete n.style,["tr",n,0]},toClipboard:PC},MC={style:{default:null,enml:!0},abbr:{default:null,enml:!0},nowrap:{default:null,enml:!0},height:{default:null,enml:!0},colspan:{default:1,enml:!0},rowspan:{default:1,enml:!0},colwidth:{default:null},backgroundColor:{default:null},textAlign:{default:null},verticalAlign:{default:null},borderColor:{default:null},borderWidth:{default:null},color:{default:null}},AC={content:"section+",strictContent:"tablecontent+",tableRole:"header_cell",isolating:!0,unsplittable:!0,isLinkable:!0,preventDropIfRemoved:!0,attrs:MC,parseDOM:TC("th"),parseENML:TC("th"),parseClipboard:TC("th"),toDOM:NC.bind(null,"th"),toENML:DC.bind(null,"th"),toClipboard:LC.bind(null,"th")};function TC(e){return[{tag:e,getAttrs:function(e){var t=Wo(e,MC);t.colspan=parseInt(t.colspan,10)||1,t.rowspan=parseInt(t.rowspan,10)||1;var n=e.style;t.backgroundColor=n.backgroundColor||t.bgcolor||null,t.borderColor="initial"!==n.borderColor&&n.borderColor||n.border&&(n.border.match(/1px solid (.*)/)||[])[1]||null,t.borderWidth="1px"!==n.borderWidth&&n.borderWidth||null,t.color=n.color||null,t.verticalAlign=n.verticalAlign||t.valign||null,n.width?t.width=n.width:(t.width||0===t.width)&&(t.width+="px"),n.height?t.height=n.height:(t.height||0===t.heigth)&&(t.height+="px");var r=e.getAttribute("data-colwidth"),o=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map(function(e){return Number(e)}):null;return t.colwidth=o&&o.length===t.colspan?o:null,delete t.style,t}}]}function NC(e,t){var n=t.attrs,r=qo(n,MC),o=r.style;return 1===n.colspan&&delete r.colspan,1===n.rowspan&&delete r.rowspan,o=wr(o,"background-color",n.backgroundColor),o=wr(o,"border-color",n.borderColor),o=wr(o,"border-width",n.borderWidth),o=wr(o,"color",n.color),o=wr(o,"text-align",n.textAlign),o=wr(o,"vertical-align",n.verticalAlign),n.rowspan>1&&(o=wr(o,"height",(2*n.rowspan-2)*na+n.rowspan*Qo+"px")),r.style=o,r.style||delete r.style,[e,r,0]}function DC(e,t){var n=t.attrs,r=Ho(n,MC),o=r.style;return 1===n.colspan&&delete r.colspan,1===n.rowspan&&delete r.rowspan,o=wr(o,"background-color",n.backgroundColor),o=wr(o,"border-color",n.borderColor),o=wr(o,"border-width",n.borderWidth),o=wr(o,"color",n.color),o=wr(o,"text-align",n.textAlign),o=wr(o,"vertical-align",n.verticalAlign),r.style=o,delete r.height,r.style||delete r.style,[e,r,0]}function LC(e,t){var n=t.attrs,r=DC(e,t);return n.colwidth&&(r[1]["data-colwidth"]=n.colwidth[0]),r}var RC={table:SC,tr:jC,td:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bC(n,!0).forEach(function(t){wC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},AC,{tableRole:"cell",isLinkable:!0,parseDOM:TC("td"),parseENML:TC("td"),parseClipboard:TC("td"),toDOM:NC.bind(null,"td"),toENML:DC.bind(null,"td"),toClipboard:LC.bind(null,"td")}),th:AC},IC={1:10,2:13,3:16,4:18,5:24,6:32,7:48},zC={"xx-small":9,"x-small":10,small:13,medium:16,large:18,"x-large":24,"xx-large":32},BC=function(e){if(zC[e])return{value:zC[e]};var t=_r(e);return!window.isNaN(t.value)&&t},FC=["bold","700","800","900"],WC=[{tag:"b,strong",getAttrs:function(e){return""===e.style.fontWeight?null:!!FC.includes(e.style.fontWeight)&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[7-9]\d{2,})$/.test(e)&&null}}],HC={code:{default:null,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"boolean"}},$C=[{tag:"code,span",getAttrs:function(e){var t=Wo(e,HC);return!!t.code&&{code:t.code}}}],qC={fontfamily:{default:null,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"string"}},VC={serif:{class:ul.a.fontFamilySerif,cssFontFamilyValue:ul.a.serifCssFontFamilyValue},"slab-serif":{class:ul.a.fontFamilySlabSerif,cssFontFamilyValue:ul.a.slabSerifCssFontFamilyValue},monospace:{class:ul.a.fontFamilyMonospace,cssFontFamilyValue:ul.a.monospaceCssFontFamilyValue},script:{class:ul.a.fontFamilyScript,cssFontFamilyValue:ul.a.scriptCssFontFamilyValue},handwritten:{class:ul.a.fontFamilyHandwritten,cssFontFamilyValue:ul.a.handwrittenCssFontFamilyValue}},UC=[{style:"--en-fontfamily",getAttrs:function(e){return!!e&&{fontfamily:e}}},{tag:"span",getAttrs:function(e){var t=Wo(e,qC);if(!t.fontfamily){var n=e.style.fontFamily;if(!n)return!1;var r=null;return!!Object.keys(VC).some(function(e){return VC[e].cssFontFamilyValue===n&&(r=e,!0)})&&{fontfamily:r}}return{fontfamily:t.fontfamily}}},{tag:"kbd,samp,tt",getAttrs:function(e){return!e.style.fontFamily&&{fontfamily:"monospace"}}}],KC=[{style:"font-family",getAttrs:function(e){return!!e&&{fontname:e}}},{style:"font",getAttrs:function(e){var t=vr("font:"+e);return!!t.fontFamily&&{fontname:t.fontFamily}}},{tag:"font",getAttrs:function(e){var t=e.getAttribute("face");return!!t&&{fontname:t}}}],YC=[{tag:"font",getAttrs:function(e){var t=e.getAttribute("size"),n=IC[t];return!!n&&{value:n}}},{style:"font-size",getAttrs:BC},{style:"font",getAttrs:function(e){var t=vr("font:"+e);return!!t.fontSize&&BC(t.fontSize)}}],XC=[{tag:"font",getAttrs:function(e){var t=e.getAttribute("color");return!!t&&{color:t}}},{style:"color",context:"inlinecontainer/",getAttrs:function(e){return!(!e||"inherit"===e)&&{color:e}}}],ZC={highlight:{default:null,enml:!0,enStyleAttr:!0,dataAttr:!0,type:"string"}},GC=[{style:"-evernote-highlight=true",getAttrs:function(){return{highlight:Za}}},{tag:"span",priority:51,getAttrs:function(e){var t=Wo(e,ZC);return!!t.highlight&&{highlight:t.highlight}}},{tag:"span",getAttrs:function(e){var t;try{var n=nl(e.style.backgroundColor);t=Ja.indexOf(n)>=0?Za:Object.keys(Ga).find(function(e){return Ga[e]===n})}catch(e){return!1}return!!t&&{highlight:t}}}],JC=[{tag:"i,cite,dfn,em,var",getAttrs:function(e){return(""===e.style.fontStyle||"italic"===e.style.fontStyle)&&null}},{style:"font-style=italic"}],QC=[{tag:"s",getAttrs:function(e){return-1===e.style.textDecoration.indexOf("line-through")&&null}},{tag:"del",getAttrs:function(e){return-1===e.style.textDecoration.indexOf("line-through")&&null}},{tag:"strike",getAttrs:function(e){return-1===e.style.textDecoration.indexOf("line-through")&&null}},{style:"text-decoration",getAttrs:function(e){return e.includes("line-through")}}],eS=[{tag:"sub"},{style:"vertical-align=sub"}],tS=[{tag:"sup"},{style:"vertical-align=super"}],nS=[{tag:"u,ins",getAttrs:function(e){return-1===e.style.textDecoration.indexOf("underline")&&null}},{style:"text-decoration",getAttrs:function(e){return e.includes("underline")}}],rS={bold:{group:"textformat",parseDOM:WC,parseENML:WC,parseClipboard:WC,toDOM:function(){return["b"]},toENML:function(){return["b"]},toClipboard:function(){return["b"]}},code:{group:"textformat",excludes:"superscript subscript link fontfamily fontname",inclusive:!1,parseDOM:$C,parseENML:$C,parseClipboard:$C,toDOM:function(e){return["code",{class:"".concat(ul.a.inlineCode," ").concat(VC.monospace.class||""),"data-code":!0}]},toENML:function(e){return["code",{style:"--en-code: true"}]},toClipboard:function(e){return["span",{"data-code":!0}]}},fontfamily:{group:"textformat",excludes:"fontfamily fontname code",attrs:{fontfamily:{}},parseDOM:UC,parseENML:UC,parseClipboard:UC,toDOM:function(e){return["span",{class:VC[e.attrs.fontfamily]&&VC[e.attrs.fontfamily].class||"","data-fontfamily":e.attrs.fontfamily}]},toENML:function(e){return["span",{style:"--en-fontfamily: ".concat(e.attrs.fontfamily,";").concat(VC[e.attrs.fontfamily]?" font-family: ".concat(VC[e.attrs.fontfamily].cssFontFamilyValue):"")}]},toClipboard:function(e){return["span",{"data-fontfamily":e.attrs.fontfamily}]}},fontname:{group:"textformat",excludes:"fontfamily fontname code",attrs:{fontname:{}},parseDOM:KC,parseENML:KC,parseClipboard:KC,toDOM:function(e){return["span",{style:"font-family: ".concat(e.attrs.fontname,";")}]},toENML:function(e){return["span",{style:"font-family: ".concat(e.attrs.fontname,";")}]},toClipboard:function(e){return["span",{style:"font-family: ".concat(e.attrs.fontname,";")}]}},fontsize:{group:"textformat",attrs:{value:{},unit:{default:"px"}},setStyleForEmptyTextBlock:function(e){return{"font-size":"".concat(e.attrs.value).concat(e.attrs.unit)}},parseDOM:YC,parseENML:YC,parseClipboard:YC,toDOM:function(e){return["span",{style:"font-size: ".concat(e.attrs.value).concat(e.attrs.unit,";")}]},toENML:function(e){return["span",{style:"font-size: ".concat(e.attrs.value).concat(e.attrs.unit,";")}]},toClipboard:function(e){return["span",{style:"font-size: ".concat(e.attrs.value).concat(e.attrs.unit,";")}]}},forecolor:{group:"textformat",attrs:{color:{}},setStyleForEmptyTextBlock:function(e){return{color:e.attrs.color}},parseDOM:XC,parseENML:XC,parseClipboard:XC,toDOM:function(e){return["span",{style:"color: ".concat(e.attrs.color,";")}]},toENML:function(e){return["span",{style:"color: ".concat(e.attrs.color,";")}]},toClipboard:function(e){return["span",{style:"color: ".concat(e.attrs.color,";")}]}},highlight:{group:"textformat",attrs:{highlight:{default:"yellow"}},parseDOM:GC,parseENML:GC,parseClipboard:GC,toDOM:function(e){var t=e.attrs;t.highlight=oh(t.highlight);var n=qo(t,ZC);return n.class="".concat(ul.a.highlight," ").concat(ul.a[t.highlight]),["span",n]},toENML:function(e){var t=e.attrs;t.highlight=oh(t.highlight);var n=Ho(t,ZC);return n.style=n.style||"",n.style+="background-color: ".concat(Ga[t.highlight],";"),["span",n]},toClipboard:function(e){var t=e.attrs;t.highlight=oh(t.highlight);var n=qo(t,ZC);return n.style=n.style||"",n.style+="background-color: ".concat(Ga[t.highlight],";"),["span",n]}},italic:{group:"textformat",parseDOM:JC,parseENML:JC,parseClipboard:JC,toDOM:function(e){return["i"]},toENML:function(e){return["i"]},toClipboard:function(e){return["i"]}},strikethrough:{group:"textformat",parseDOM:QC,parseENML:QC,parseClipboard:QC,toDOM:function(e){return["s"]},toENML:function(e){return["s"]},toClipboard:function(e){return["s"]}},subscript:{group:"textformat",excludes:"superscript code",parseDOM:eS,parseENML:eS,parseClipboard:eS,toDOM:function(e){return["sub"]},toENML:function(e){return["sub"]},toClipboard:function(e){return["sub"]}},superscript:{group:"textformat",excludes:"subscript code",parseDOM:tS,parseENML:tS,parseClipboard:tS,toDOM:function(e){return["sup"]},toENML:function(e){return["sup"]},toClipboard:function(e){return["sup"]}},underline:{group:"textformat",parseDOM:nS,parseENML:nS,parseClipboard:nS,toDOM:function(e){return["u"]},toENML:function(e){return["u"]},toClipboard:function(e){return["u"]}}},oS=n(1147),aS=n.n(oS),iS=(n(1772),n(1773)),lS=n.n(iS),sS=n(1774),cS=n.n(sS),uS={checked:{default:!1,enml:!0,type:"boolean"}},dS={todo:{group:"inline",inline:!0,atom:!0,draggable:!1,selectionStyling:!0,attrs:uS,parseDOM:[{tag:".en-todo",getAttrs:function(e){return Wo(e,uS)}}],parseClipboard:[{tag:"span",getAttrs:function(e){if(-1===(e.getAttribute("style")||"").indexOf("-en-todo:")&&!e.getAttribute("data-en-todo"))return!1;var t=Wo(e,uS);return aS()(t.checked)||(t.checked="[x]"===e.textContent),t}}],parseENML:[{tag:"en-todo",getAttrs:function(e){return Wo(e,uS)}}],toDOM:function(e){var t=e.attrs.checked;return["span",{class:"en-todo","data-checked":!!t,draggable:"false"},["span",{class:"cursor-helper"},"​"],["en-todo",{checked:!!t},["img",{src:t?lS.a:cS.a}]],["span",{class:"cursor-helper"},"​"]]},toENML:function(e){var t=Ho(e.attrs,uS);return t.checked=Boolean(t.checked),["en-todo",t]},toClipboard:function(e){return["span",{"data-en-todo":!0,style:"--en-todo: true;"},e.attrs.checked?"[x]":"[]"]}}};function fS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fS(n,!0).forEach(function(t){hS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fS(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function hS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mS={style:{default:null,enml:!0},tagName:{default:"DIV"},content:{default:""}},gS=function(e){if("none"!==e.style.display)return!1;var t=Wo(e,mS);return t.content=e.getAttribute("content")||e.innerHTML,t.tagName=e.tagName,t},yS=[{priority:52,tag:"[style*=display][style*=none]",getAttrs:gS}],vS=[{priority:53,tag:"[style*=display][style*=none]",context:"p//",getAttrs:gS}],bS={attrs:mS,selectable:!1,marks:"",atom:!0,draggable:!1,toDOM:function(e){return["div",{style:"display:none;","data-hidden-node":"true"}]},toENML:function(e){var t=Ho(e.attrs,mS),n=document.createElement(e.attrs.tagName||"DIV");return n.innerHTML=e.attrs.content,Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n},toClipboard:function(e){var t=qo(e.attrs,mS),n=document.createElement(e.attrs.tagName||"DIV");return n.innerHTML=e.attrs.content,Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),n}},wS={hidden:pS({},bS,{group:"section",parseDOM:yS,parseENML:yS,parseClipboard:yS}),inlineHidden:pS({},bS,{group:"inline",inline:!0,parseDOM:vS,parseENML:vS,parseClipboard:vS})};function kS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kS(n,!0).forEach(function(t){OS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kS(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function OS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CS(e){var t=e.parseDOM.map(function(e){return{tag:e.tag,getAttrs:function(t){var n=e.getAttrs(t);return n.backgroundColor=t.style.backgroundColor,n.color=t.style.color,n}}}),n=function(t){var n=e.toDOM(t),r=t.attrs,o=n[1],a=o.style;return a=wr(a,"background-color",r.backgroundColor),a=wr(a,"color",r.color),delete o.color,delete o["background-color"],o.style=a,a||delete o.style,n[1]=o,n};return{attrs:_S({},e.attrs,{backgroundColor:Zt,color:Zt}),parseDOM:t,parseENML:t,parseClipboard:t,toDOM:n,toENML:n,toClipboard:n}}function SS(){var e=new Je.Schema({nodes:_S({},_O,{},tC,{},vO,{},gO,{},jO,{},TO,{},GO,{},aC,{},yC,{},vC,{},RC,{},dS,{},xO,{},wS),marks:{abbr:CS(mn.abbr),acronym:CS(mn.acronym),area:CS(mn.area),bdo:CS(mn.bdo),big:CS(mn.big),cite:CS(mn.cite),del:CS(mn.del),dfn:CS(mn.dfn),ins:CS(mn.ins),kbd:CS(mn.kbd),map:CS(mn.map),q:CS(mn.q),samp:CS(mn.samp),small:CS(mn.small),tt:CS(mn.tt),var:CS(mn.var),fontfamily:rS.fontfamily,bold:rS.bold,fontname:rS.fontname,fontsize:rS.fontsize,highlight:rS.highlight,italic:rS.italic,subscript:rS.subscript,superscript:rS.superscript,link:LO.link,forecolor:rS.forecolor,strikethrough:rS.strikethrough,underline:rS.underline,code:rS.code}}),t=Object.create(null),n=e.nodes;return Object.keys(n).forEach(function(e){var r=n[e],o=r.spec.strictContent||r.spec.content||"";t[o]||(t[o]=Je.ContentMatch.parse(o,n),t[o].computeWrapping=xS),r.strictContentMatch=t[o]}),function(e){var t=[],n=function(e,n,r){n.skipValidation||((n.parseClipboard||n.parseENML||n.parseDOM)&&(n.parseDOM||t.push("If parse functions present, parseDOM required for ".concat(r," ").concat(e)),n.parseENML||t.push("If parse functions present, parseENML required for ".concat(r," ").concat(e)),n.parseClipboard||t.push("If parse functions present, parseClipboard required for ".concat(r," ").concat(e))),n.toDOM||t.push("toDOM required for ".concat(r," ").concat(e)),n.toENML||t.push("toENML required for ".concat(r," ").concat(e)),n.toClipboard||t.push("toClipboard required for ".concat(r," ").concat(e)))};if(Object.keys(e.nodes).forEach(function(t){return n(t,e.nodes[t].spec,"node")}),Object.keys(e.marks).forEach(function(t){return n(t,e.marks[t].spec,"mark")}),t.length>0)throw Ce.a.error("Schema validation failed"),Ce.a.error(t.join("\n")),new Error("Schema validation failed")}(e),e}function xS(e){for(var t=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(e)){for(var a=[],i=r;i.type;i=i.via)a.push(i.type);return a.reverse()}for(var l=0;l<o.next.length;l+=2){var s=o.next[l];s.isLeaf||s.hasRequiredAttrs()||s.name in t||r.type&&!o.next[l+1].validEnd||(n.push({match:s.strictContentMatch,type:s,via:r}),t[s.name]=!0)}}}function ES(e){if(window.DEBUG){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t),e.print=function(n,r){var o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{all:!0};var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if("text"===t.type.name)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=document.createTextNode(JSON.stringify(e.text));if(0===e.marks.length)return o;var a=document.createElement(e.type.name),i="";(t.pos||t.all)&&(i+=n+":");(t.depth||t.all)&&(i+="<"+r+">");(t.size||t.all)&&(i+="["+e.nodeSize+"]");i&&a.setAttribute("__",i);(t.marks||t.all)&&e.marks.length>0&&a.setAttribute("_marks",NS(e.marks,"").replace(/\(/g,",").replace(/\)/g,""));return a.appendChild(o),a}(t,n,r,o);var a=document.createElement(t.type.name);var i=t.type===t.type.schema.nodes.doc;var l="";i||!n.pos&&!n.all||(l+=r+":");i||!n.depth&&!n.all||(l+="<"+o+">");(n.size||n.all)&&(l+="["+t.nodeSize+"]");l&&a.setAttribute("__",l);(n.marks||n.all)&&t.marks.length>0&&a.setAttribute("_marks",NS(t.marks,"").replace(/\(/g,",").replace(/\)/g,""));(n.attrs||n.all)&&Object.keys(t.attrs).filter(function(e){return t.attrs[e]!==t.type.attrs[e].default}).forEach(function(e){var n=JSON.stringify(t.attrs[e]);a.setAttribute(e.replace(/[ "'>\/=]/g,""),'"'===n[0]&&'"'===n[n.length-1]?n.substring(1,n.length-1):n)});r++;t.forEach(function(t){a.appendChild(e(t,n,r,o+1)),r+=t.nodeSize});return a}(n||e.view.state.doc,r);return t.appendChild(o),o},e.logTransactions=function(t){e.logTransactionsEnabled=t,localStorage.ce_logTr=JSON.stringify(!!t)},localStorage.ce_logTr&&e.logTransactions(JSON.parse(localStorage.ce_logTr)),e.logNotifications=function(e){localStorage.ce_logNotify=e?"":"false"},e.logSelections=function(e){!e&&Selection.prototype.setBaseAndExtent_&&(Selection.prototype.setBaseAndExtent=Selection.prototype.setBaseAndExtent_,delete Selection.prototype.setBaseAndExtent_,Selection.prototype.addRange=Selection.prototype.addRange_,delete Selection.prototype.addRange_,console.log("logSelections disabled")),e&&!Selection.prototype.setBaseAndExtent_&&(Selection.prototype.setBaseAndExtent_=Selection.prototype.setBaseAndExtent,Selection.prototype.setBaseAndExtent=PS,Selection.prototype.addRange_=Selection.prototype.addRange,Selection.prototype.addRange=jS,console.log("logSelections enabled")),localStorage.ce_trackRange=JSON.stringify(!!e)},localStorage.ce_trackRange&&e.logSelections(JSON.parse(localStorage.ce_trackRange))}}function PS(e,t,n,r){return console.warn("selection set to ",e,t,n,r),this.setBaseAndExtent_(e,t,n,r)}function jS(e){return console.warn("selection set to ",e.startContainer,e.startOffset,e.endContainer,e.endOffset),this.addRange_(e)}function MS(e){var t="";if(e.selectionSet||e.docChanged){var n=e.selection;n.empty?t+="sel: "+n.head+" ":t+="sel: "+JSON.stringify(e.selection)+" "}if(e.docChanged)if(e.steps.length>1){var r=oo(e);t+="changes:"+JSON.stringify(r)+" "}else{var o=e.steps[0];o instanceof sr.ReplaceStep?o.from===o.to?t+="insert: "+TS(o.slice.content)+" ":0===o.slice.size?t+="delete: "+(o.to-o.from)+" pos ":t+="replace: "+(o.to-o.from)+" pos with "+TS(o.slice.content)+" ":o instanceof sr.AddMarkStep?t+="addMark: "+o.mark.type.name+" ":o instanceof sr.RemoveMarkStep?t+="removeMark: "+o.mark.type.name+" ":o instanceof sr.ReplaceAroundStep&&(o.slice.size>0?t+="replaceAround: "+TS(o.slice.content)+" from: "+o.from+" to: "+o.to:t+="removeAround from: "+o.from+" to: "+o.to)}if(e.isGeneric||(t+="meta: [".concat(Object.keys(e.meta).join(", "),"] ")),e.storedMarksSet){var a=(e.storedMarks||[]).map(function(e){return e.type.name});t+="storedMarksSet: [".concat(a.join(", "),"] ")}console.groupCollapsed("TR ".concat(t)),console.trace("Transaction =",e),console.groupEnd()}function AS(e){var t="text"===e.type.name?JSON.stringify(e.text):e.type.name;return e.childCount>0&&(t+=">",t+=TS(e.content)),t}function TS(e){switch(e.childCount){case 0:return"";case 1:return AS(e.firstChild);default:var t=[];return e.forEach(function(e){return t.push(AS(e))}),"[ "+t.join(", ")+" ]"}}function NS(e,t){for(var n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}function DS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function LS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DS(n,!0).forEach(function(t){IS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DS(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zS=function(){function e(){var t,n,o,f,L,me=this,ge=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),IS(this,"setNoteLayout",function(e){var t=e||{};me.noteAlign="center"===t.align||"left"===t.align||"right"===t.align?t.align:me.noteAlign,me.noteMarginLeft=null==t.marginLeft||Number.isNaN(t.marginLeft)?me.noteMarginLeft:t.marginLeft,me.noteMarginRight=null==t.marginRight||Number.isNaN(t.marginRight)?me.noteMarginRight:t.marginRight,me.noteMarginTop=null==t.marginTop||Number.isNaN(t.marginTop)?me.noteMarginTop:t.marginTop,me.noteDefaultWidth=null==t.defaultWidth||Number.isNaN(t.defaultWidth)?me.noteDefaultWidth:t.defaultWidth,me.noteUseFullWidth="boolean"==typeof t.useFullWidth?t.useFullWidth:me.noteUseFullWidth,me.handleResize()}),IS(this,"handleResize",ve()(function(){var e=me.field,t=me.view;if(e&&t){me.noteHeader||(me.noteHeader=document.querySelector(".".concat(og.a.noteHeader)));var n,r=me.noteDefaultWidth-me.noteMarginLeft-me.noteMarginRight,o=e.parentNode.getBoundingClientRect().width,a=Math.max(0,o-me.noteMarginLeft-me.noteMarginRight);if(!me.noteUseFullWidth&&o>me.noteDefaultWidth)switch(n=r,me.noteAlign){case"center":var i=(o-n)/2;e.style.paddingLeft="".concat(Math.floor(i),"px"),e.style.paddingRight="".concat(Math.ceil(i),"px"),me.noteHeader&&(me.noteHeader.style.paddingLeft="".concat(Math.floor(i),"px"),me.noteHeader.style.paddingRight="".concat(Math.ceil(i),"px"));break;case"left":e.style.paddingLeft="".concat(me.noteMarginLeft,"px"),e.style.paddingRight="".concat(o-n-me.noteMarginRight,"px"),me.noteHeader&&(me.noteHeader.style.paddingLeft="".concat(me.noteMarginLeft,"px"),me.noteHeader.style.paddingRight="".concat(o-n-me.noteMarginRight,"px"));break;case"right":e.style.paddingLeft="".concat(o-n-me.noteMarginLeft,"px"),e.style.paddingRight="".concat(me.noteMarginRight,"px"),me.noteHeader&&(me.noteHeader.style.paddingLeft="".concat(o-n-me.noteMarginLeft,"px"),me.noteHeader.style.paddingRight="".concat(me.noteMarginRight,"px"))}else n=a,e.style.paddingLeft="".concat(me.noteMarginLeft,"px"),e.style.paddingRight="".concat(me.noteMarginRight,"px"),me.noteHeader&&(me.noteHeader.style.paddingLeft="".concat(me.noteMarginLeft,"px"),me.noteHeader.style.paddingRight="".concat(me.noteMarginRight,"px"));me.noteHeader.style.maxWidth=me.noteUseFullWidth?"".concat(a,"px"):"".concat(r,"px"),me.noteHeader.style.paddingTop="".concat(me.noteMarginTop,"px"),e.style.maxWidth=me.noteUseFullWidth?"":"".concat(me.noteDefaultWidth,"px"),me.noteWidth=n,me.fullWidth=a,t.someProp("handleResize",function(e){return e(t,n,a)})}else Oe.warn("Handle resize fired before the view and field were initialized")},30,{leading:!0,maxWait:100,trailing:!0})),IS(this,"handleVisibilityChange",function(e){me.view.someProp("handleVisibilityChange",function(t){return t(me.view,e)})}),this.commands=(t={clearselection:d,active:s,annotate:W,applytemplate:fe,bold:re,bounds:c,capitalize:ce,caretlocation:u,changes:r,code:re,codeblock:l,content:p,controltodos:ue,copy:a,count:h,createtemplate:pe,createlink:I,cut:a,delete:m,deletetable:$,deletetablecol:q,deletetablerow:V,encrypt:he,find:S,findnext:x,findprev:E,focus:g,fontfamily:ie,fontname:ae,fontsize:oe,forecolor:le,fullsize:C,heading:A,updateheading:T,resetheading:N,highlight:se,indent:R,inserthorizontalrule:D,insertorderedlist:B,inserttable:U,inserttablecol:K,inserttablerow:Y,inserttodo:de,inserttodolist:B,insertunorderedlist:B,italic:re,justifycenter:F,justifyfull:F,justifyleft:F,justifyright:F,lowercase:ce,mergecells:X,notelayout:y,outdent:R,paste:i,redo:b,removeformat:M,replace:P,resources:H,selectall:w,selection:k,simplifyforeigncontent:j,stats:_,strikethrough:re,subscript:re,superscript:re,tablealign:Z,tablebordercolor:G,tableborderwidth:J,tablecellcolor:Q,tableequalcol:ee,tablefitnote:te,tableverticalalign:ne,underline:re,undo:v,unlink:z,uppercase:ce,zoomscale:O},n=new Set,o={},f={},L={},Object.keys(t).forEach(function(e){n.add(e);var r=t[e];r.execCommand&&(o[e]=function(e,t,n,o,a){return!(!r.activeWhenUneditable&&!a.editable)&&(vi.analytics.trackExecCommand(e,t),r.execCommand(e,t,n,o,a))},o[e].usesOptions=r.execCommand.usesOptions),r.queryCommandValue&&(f[e]=function(e,t,n,o,a){var i=ru.getState(n).isPMSelection;return!(!r.activeWhenUneditable&&!a.editable||r.activeOnlyInPMSelection&&!i)&&r.queryCommandValue(e,t,n,o,a)}),r.queryCommandEnabled?L[e]=function(e,t,n,o,a){var i=ru.getState(n).isPMSelection;return!(!r.activeWhenUneditable&&!a.editable||r.activeOnlyInPMSelection&&!i)&&r.queryCommandEnabled(e,t,n,o,a)}:L[e]=function(e,t,n,o,a){var i=ru.getState(n).isPMSelection;return!(!r.activeWhenUneditable&&!a.editable||r.activeOnlyInPMSelection&&!i)&&r.execCommand(e,t,n,null,a)}}),{names:n,execs:o,queryValue:f,queryEnabled:L});var ye,be=function(e){var t;switch((e=Ll(e)).env.client){case"ion":case"boron":case"neutron":t=ly[e.env.client];break;default:t=ly.ion}return cy({},t,{activeAfterSetup:!1!==e.rte.active,accentuate:e.accentuate||{},debug:!!e.debug,find:e.find||{},search:e.search,id:e.id||"en-note",images:cy({},t.images,{path:e.rte.imageConfig.path||"images",annotate:!!e.rte.imageConfig.annotate,resize:!!e.rte.imageConfig.resize||!!e.rte.imageResizing,rotate:!!e.rte.imageConfig.rotate,horizontalThreshold:e.rte.smartMarginThreshold||0}),locale:e.global.locale||"en_US",note:{contentClass:e.note.contentClass,source:e.note.source,sourceURL:e.note.sourceURL,sourceApplication:e.note.sourceApplication,title:e.note.title||"",guid:e.note.guid},client:e.env.client||"web",trackChanges:cy({},t.trackChanges,{stateChanges:e.rte.trackStateChanges||[],valueChanges:e.rte.trackValueChanges||[],enabledChanges:e.rte.trackEnabledChanges||[]}),version:e.version,includeResourceSimulations:e.includeResourceSimulations,noteLayout:{align:"center"===e.noteLayout.align||"left"===e.noteLayout.align||"right"===e.noteLayout.align?e.noteLayout.align:Ka,marginLeft:null==e.noteLayout.marginLeft||Number.isNaN(e.noteLayout.marginLeft)?Va:e.noteLayout.marginLeft,marginRight:null==e.noteLayout.marginRight||Number.isNaN(e.noteLayout.marginRight)?Ua:e.noteLayout.marginRight,marginTop:null==e.noteLayout.marginTop||Number.isNaN(e.noteLayout.marginTop)?qa:e.noteLayout.marginTop,defaultWidth:null==e.noteLayout.defaultWidth||Number.isNaN(e.noteLayout.defaultWidth)?$a:e.noteLayout.defaultWidth,useFullWidth:"boolean"==typeof e.noteLayout.useFullWidth?e.noteLayout.useFullWidth:Ya},eagerContentChanged:!!e.rte.eagerContentChanged})}(ge);fh.a.setLocale(be.locale),this.initView({config:be,features:(ye=ge,{realtime:{enabled:(ye=Ll(ye)).realtime.enabled,undo:Bl("realtimeundo")||!1},typebehind:{undo:Bl("typebehindundo")||!1}}),markdown:!!ge.rte.markdown,notify:ge.notify||Ne}),this.resizeObserverTimeout=null,this.resizeObserver=new Ee.a(function(){me.resizeObserverTimeout=setTimeout(me.handleResize)}),this.resizeObserver.observe(document.body),this.scroller=new Ev,document.addEventListener("visibilitychange",this.handleVisibilityChange),this.execCommand("content",{content:ge.rte.enml||ge.rte.html||"",active:be.activeAfterSetup,resources:ge.rte.resources}),this.logTransactionsEnabled=!1}var t,n,o;return t=e,(n=[{key:"initView",value:function(e){var t=this;Object(Me.dispatch)(Pe.clearNodeViews());var n=new Ny({sendMessage:this.notify.bind(this),routesToHost:{requestAuth:{identifier:"serviceName"},showOptions:{identifier:"correlationId"},getFromCache:{identifier:"correlationId"},saveInCache:{identifier:"correlationId",oneway:!0}},routesFromHost:{authtoken:{identifier:"service"},optionselected:{identifier:"showEvent.correlationId"},cacheddata:{identifier:"cacheRequest.correlationId"}}}),r=e.config,o=SS(),a=function(e,t){var n=[Xo(),wb(),qb(),Ms(),Zl(),yu(),Kb(),Jb(),Object(as.history)(),Dc(),ck(),Wk(),Ew(),Bd(),lk(),Cs(),Ak(),_b(),Sk(),new Se.Plugin({view:function(e){return new G_(e)}}),Kt(),Yv(),Object(Ly.keymap)(Hy),Object(Ly.keymap)(tb),Gk(),Object(Ly.keymap)(ib),Object(Ly.keymap)(ob),Object(Ly.keymap)(Qv),Object(Ly.keymap)(By),Object(Ly.keymap)(Jc.baseKeymap),Object(Ly.keymap)({"Mod-z":as.undo,"Mod-y":as.redo,"Shift-Mod-y":as.redo}),Rs(),Uk(),Ik(),Il(),Ul(),Ie(),sb(),qw(),ou(),wi(),co(),uO(),tO()],r=e.config.typebehind,o=[];return r.code&&(o=(o=o.concat(u_(t))).concat(q_(t))),r.url&&(o.push(D_(t)),o.push(L_(t))),r.email&&o.push(N_(t)),r.emoticon&&(o=o.concat(O_(t))),r.horizontalrule&&(o=o.concat(x_(t))),r.list&&(o=o.concat(B_(t))),r.heading&&(o=o.concat(Y_(t))),r.table&&(o=o.concat(H_(t))),r.todo&&(o=o.concat(U_(t))),n.unshift(i_(o)),n.forEach(function(t){t.props.notify&&(t.props.notify=e.notify)}),n}(e,o),i=LS({auth:new xy({router:n}),cache:new Py({router:n,diskEnabled:r.richlinks.cacheSupported}),clipboardParser:Ui.fromSchema(o),clipboardSerializer:yy.fromSchema(o),dispatchTransaction:function(e){if(t.view){if(t.logTransactionsEnabled){var n=t.view.state.applyTransaction(e),r=n.state;n.transactions.forEach(MS),t.view.updateState(r)}else t.view.updateState(t.view.state.apply(e));t.maybeContextChangedNotification()}},editable:function(){return!1},fullsize:{},getNoteWidth:function(){return{noteWidth:t.noteWidth,fullWidth:t.fullWidth,noteAlign:t.noteAlign}},setNoteLayout:this.setNoteLayout,router:n,state:Se.EditorState.create({plugins:a,schema:o,props:e}),styleAttributes:{zoom:null},handleDOMEvents:{focus:function(){t.notify("focusChanged",{focus:!0,module:"content",showInput:!0})},blur:function(){t.notify("focusChanged",{focus:!1,module:"content"})}}},e);i.attributes={style:Cr(i.styleAttributes)};var l,s=document.getElementById(r.id);if(!s)throw new Error("Root note with id=".concat(r.id," not found."));s.classList.add("peso"),this.view=new xe.EditorView({mount:s},i),this.view.someProp("renderStatusBar",function(e){return e(t.view.state)}),Object(Me.dispatch)(Pe.setInteraction(r.ui)),Object(Me.dispatch)(Pe.setEditable(this.view.editable)),l=this.view,ty||(ty=document.createElement("en-reactportalmanager"),document.body.appendChild(ty)),Object(Nm.render)(jm.a.createElement(ey,{view:l}),ty),function(e){if(!gg){gg=document.createElement("en-noteheader");var t=document.querySelector("en-note");t?document.body.insertBefore(gg,t):document.body.insertBefore(gg,document.body.firstElementChild)}Object(Nm.render)(jm.a.createElement(mg,{view:e}),gg)}(this.view),this.setNoteLayout({align:r.noteLayout.align,marginLeft:r.noteLayout.marginLeft,marginRight:r.noteLayout.marginRight,marginTop:r.noteLayout.marginTop,defaultWidth:r.noteLayout.defaultWidth,useFullWidth:r.noteLayout.useFullWidth}),Ae.isFirefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"addDevTools",value:function(){0}},{key:"setMarginAttributes",value:function(e){if(null==e||null==this.view)return!1;var t={styleAttributes:LS({},this.view.props.styleAttributes)},n=t.styleAttributes,r=e.note;r&&(n["padding-top"]=Or(r.top,"px"),n["padding-left"]=Or(r.left,"px"),n["padding-bottom"]=Or(r.bottom,"px"),n["padding-right"]=Or(r.right,"px"));var o=e.scroll;o&&(t.scroll={top:o.top||0,left:o.left||0,bottom:o.bottom||0,right:o.right||0});var a=e.offset;return a&&(t.offset={height:a.height||0,width:a.width||0}),t.attributes=LS({},this.view.props.attributes,{style:Cr(t.styleAttributes)}),this.view.setProps(t),!0}},{key:"syncDarkmode",value:function(e){var t=this.view;t&&e!==js.getState(t.state).enabled&&t.dispatch(t.state.tr.setMeta(js,{enabled:e}))}},{key:"setBodyClasses",value:function(e,t){Object.values(je.ENClientId).forEach(function(t){document.body.classList.toggle(t,t===e)}),Object.values(je.ENPlatformId).forEach(function(e){document.body.classList.toggle(e,e===t)})}},{key:"setActive",value:function(e){var t=this.view,n=t.state,r=t.dispatch,o=n.selection;if(this.view.setProps({active:e}),!0===e&&n.selection.from!==o.to){var a=new Se.TextSelection(o.$head);r(n.tr.setSelection(a)),r(n.tr.setSelection(o))}}},{key:"setEditorMode",value:function(e){this.notify("editorMode",{mode:e}),Object(Me.dispatch)(Pe.setEditorMode(e))}},{key:"cleanup",value:function(){this.view&&this.view.dom&&(this.view.dom.classList.remove("peso"),this.view.dom.outerHTML+=""),this.view.destroy(),this.view=null,this.styleChangedNotification=null,Object(Me.dispatch)(Pe.clearNodeViews()),ty&&(Object(Nm.unmountComponentAtNode)(ty),ty.remove(),ty=null),gg&&(Object(Nm.unmountComponentAtNode)(gg),gg.remove(),gg=null),this.handleResize.cancel(),this.resizeObserver.unobserve(document.body),this.resizeObserverTimeout&&clearTimeout(this.resizeObserverTimeout),this.scroller.destroy(),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}},{key:"execCommand",value:function(e,t,n){var r=Em(e);if(this.view.props.router.fromHost(r,t))return!0;var o=this.commands.execs[r];if("function"!=typeof o)return!1;o.usesOptions&&(t={value:t,options:n});var a=this.view;return o(r,t,a.state,a.dispatch,this.view)||!1}},{key:"queryCommandState",value:function(e,t){var n=Em(e),r=this.queryCommandValue(n,t);return"justifyleft"===n?r="left"===r:"justifycenter"===n?r="center"===r:"justifyright"===n?r="right"===r:"justifyfull"===n?r="justify"===r:"insertorderedlist"===n?r="ol"===r:"insertunorderedlist"===n?r="ul"===r:"inserttodolist"===n&&(r="todolist"===r),this.config.trackChanges.allowMixedChanges?{value:!0===r,mixed:r===cs}:!0===r}},{key:"queryCommandValue",value:function(e,t){var n=Em(e),r=this.commands.queryValue[n];if("function"!=typeof r)return!1;var o=this.view,a=r(n,t,o.state,o.dispatch,this.view);return this.config.trackChanges.allowMixedChanges?{value:a===cs?"":a,mixed:a===cs}:a===cs?"":a}},{key:"queryCommandEnabled",value:function(e,t){var n=Em(e);if(!this.commands.names.has(n))return!1;var r=this.commands.queryEnabled[e];if("function"!=typeof r)return!0;var o=this.view,a=o.state,i=o.dispatch;return r(n,t,a,function(e){return i(e.setMeta("execCommand",n))},this.view)||!1}},{key:"notify",value:function(e,t){this.view.props.notify(e,t)}},{key:"maybeContextChangedNotification",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.view.props.config.trackChanges.trackContext){var t=Cy(this);!e&&_e()(t,this.contextChangedNotification)||(this.notify("contextChanged",t),this.contextChangedNotification=t)}else this.maybeStyleChangedNotification(e)}},{key:"maybeStyleChangedNotification",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.styleChangedNotification||(this.styleChangedNotification={state:{},value:{},enabled:{},module:"content",version:"1.0"});var n=this.styleChangedNotification,r=this.view.props.config.trackChanges,o=r.stateChanges,a=r.valueChanges,i=r.enabledChanges,l=!1;o.map(Em).forEach(function(t){var r=e.queryCommandState(t);_e()(n.state[t],r)||(n.state[t]=r,l=!0)}),a.map(Em).forEach(function(t){var r=e.queryCommandValue(t);n.value[t]!==r&&(n.value[t]=r,l=!0)}),i.map(Em).forEach(function(t){var r=e.queryCommandEnabled(t);n.enabled[t]!==r&&(n.enabled[t]=r,l=!0)}),(l||t)&&this.notify("styleChanged",n)}},{key:"field",get:function(){return this.view&&this.view.dom}},{key:"config",get:function(){return we()(this.view,"props.config",{})}}])&&RS(t.prototype,n),o&&RS(t,o),e}(),BS=(n(1775),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.EN.getEditor(),n=t.editor;return n&&n.config&&n.config.user.userID&&"mac"===n.config.client?e.replace(/^http?s:\/\/([^\/]+)\/(.*)\/?$/,function(e,t,r){return"enavatar://".concat(t,"/").concat(t.replace(/\./g,""),"/").concat(n.config.user.userID,"/").concat(r,"/3")}):e}),FS=n(1776),WS=n.n(FS),HS=function(e){var t=e.initial,n=e.color,r=e.photoUrl,o=e.className,a=e.onMouseOver,i=e.onMouseOut,l=e.onClick;return jm.a.createElement("div",{onMouseOver:a,onMouseOut:i,onClick:l,className:Object(Um.a)(WS.a.avatar,o&&o),"data-initial":t,style:{backgroundColor:n}},r&&jm.a.createElement("div",{className:WS.a.photo,style:{backgroundImage:"url(".concat(BS(r),")")}}))};function $S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qS=function(){function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.kind=t,this.start=n,this.end=r,this.data=o,this.prev=a,this.next=i,this.selected=!1}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return this.data?"".concat(this.kind,' "').concat(JSON.stringify(this.data),'"'):this.kind}},{key:"inspect",value:function(){return{kind:this.kind,data:this.data,start:this.start,end:this.end}}}])&&$S(t.prototype,n),r&&$S(t,r),e}();function VS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var US="<SOF>",KS={SOF:US,EOF:"<EOF>",MARK_CODE:"`",MARK_CODEBLOCK:"Codeblock",MARK_STRIKE_THROUGH:"~",MARK_BOLD:"*",MARK_ITALIC:"_",MARK_MENTION:"Mention",TEXT:"Text",NEW_LINE:"\n"},YS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.source=t,this.lastToken=new qS(US,0,0),this.token=this.lastToken}var t,n,r;return t=e,(n=[{key:"advance",value:function(){var e=this.lastToken=this.token;return"<EOF>"!==e.kind&&(e=e.next=XS(this,e),this.token=e),e}}])&&VS(t.prototype,n),r&&VS(t,r),e}(),XS=function(e,t){if(t.next)return t.next.prev=t,t.next;var n=e.source,r=n.length,o=!1,a=null,i=t.end;if(i>=r)return new qS("<EOF>",r,r,null,t);for(;i<r;){var l=n.charCodeAt(i);switch(l){case 160:if(64===n.charCodeAt(i+1)){a=ZS(n,i,!0);break}case 64:a=ZS(n,i);break;case 42:case 95:case 96:case 126:a=GS(n,i,l);break;case 10:a=new qS("\n",i,i+1,{text:"\n"})}if(a)break;i+=1,o=!0}if(o){var s={text:n.slice(t.end,i)};return new qS("Text",t.end,i,s,t,a)}return a.prev=t,a},ZS=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!n&&t>0&&!JS(e.charCodeAt(t-1)))return null;for(var r=t+1;r<e.length;){var o=e.charCodeAt(r);if(n&&160===o){r+=1;break}if(QS(o)){n&&(r=-1);break}r+=1}if(-1===r)return null;var a={user:null,decorated:n,text:n?e.slice(t+2,r-1):e.slice(t+1,r)};return new qS("Mention",t,r,a)},GS=function(e,t,n){var r=96===n&&96===e.charCodeAt(t+1)&&96===e.charCodeAt(t+2)?3:1,o=0===t,a=t>=e.length-r;if(o||(o=ex(e.charCodeAt(t-1))),a||(a=tx(e.charCodeAt(t+r))),!o&&!a)return null;var i=r>1?"```":e.charAt(t);return new qS(r>1?"Codeblock":i,t,t+r,{ahead:o,behind:a,text:i})},JS=function(e){switch(e){case 9:case 10:case 32:case 42:case 40:case 47:case 91:case 95:case 123:return!0}return!1},QS=function(e){switch(e){case 9:case 10:case 32:case 33:case 34:case 39:case 41:case 42:case 44:case 46:case 47:case 58:case 59:case 93:case 96:case 125:case 126:return!0}return!1},ex=function(e){switch(e){case 9:case 10:case 32:case 33:case 34:case 35:case 36:case 37:case 39:case 40:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 61:case 63:case 91:case 94:case 95:case 96:case 123:case 126:return!0}return!1},tx=function(e){switch(e){case 9:case 10:case 32:case 33:case 34:case 35:case 36:case 37:case 39:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 93:case 94:case 95:case 96:case 125:case 126:return!0}return!1};function nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var rx=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.markEndPos_={},this.styles=t}var t,n,r;return t=e,(n=[{key:"mentionToHTML_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.data,r=n.text,o=n.user;if(t>=0)return'<span data-token-start="'.concat(t,'"><span></span>@').concat(r,"</span>");if(o){var a=o.initial,i=o.username,l=o.title,s=o.email,c=o.name,u=o.photoUrl,d={initial:a,username:i,title:l,email:s,name:c},f=Object.keys(d).reduce(function(e,t){return d[t]&&e.push("data-".concat(t,'="').concat(d[t],'"')),e},[]);return u&&f.push('data-photo-url="'.concat(u,'"')),"<span ".concat(f.join(" "),">@").concat(r,"</span>")}return"@".concat(r)}},{key:"markToHTML_",value:function(e,t){return e===KS.MARK_CODE?t?"<code>":"</code>":e===KS.MARK_CODEBLOCK?t?"<pre>":"</pre>":e===KS.MARK_STRIKE_THROUGH?t?"<s>":"</s>":e===KS.MARK_BOLD?t?"<b>":"</b>":e===KS.MARK_ITALIC?t?"<em>":"</em>":(console.error("Invalid mark ".concat(t?"ahead":"behind",' "').concat(e,'"')),"")}},{key:"shouldMarkStart_",value:function(e){var t=e.kind;if(!e.data||!e.data.ahead||t===e.prev.kind||t===e.next.kind)return!1;var n=this.markEndPos_[t];if(n&&n>e.start)return!1;for(var r=e.next;r;){if(r.kind===KS.NEW_LINE&&t!==KS.MARK_CODEBLOCK)return!1;if(r.kind===t&&r.data.behind)return r.prev.kind!==t&&r.next.kind!==t&&(this.markEndPos_[t]=r.start,!0);r=r.next}return!1}},{key:"shouldMarkEnd_",value:function(e){return this.markEndPos_[e.kind]===e.start&&(this.markEndPos_[e.kind]=null,!0)}},{key:"escapeHTML",value:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&amp;([lg]t;)/g,"&$1")}},{key:"renderRichtText",value:function(e){if(!e)return"";this.markEndPos_={};for(var t="";e=e.next;){var n=e,r=n.kind,o=n.data,a=this.markEndPos_[KS.MARK_CODE]||this.markEndPos_[KS.MARK_CODEBLOCK];!a&&r===KS.MARK_MENTION&&o.user?t+=this.mentionToHTML_(e):r===KS.MARK_MENTION?t+="@".concat(o.text):!a&&this.shouldMarkStart_(e)?t+=this.markToHTML_(r,!0):this.shouldMarkEnd_(e)?t+=this.markToHTML_(r,!1):a||r!==KS.NEW_LINE?o&&(t+=this.escapeHTML(o.text)):e.prev.kind===KS.MARK_CODEBLOCK&&e.prev.data.behind||(t+="<br>")}return t.replace(/\u00a0/g,"").trim()}},{key:"renderEditText",value:function(e){if(!e)return"";for(var t="";e=e.next;)e.kind===KS.MARK_MENTION&&e.data.decorated?t+=" @".concat(e.data.text," "):e.kind===KS.MARK_MENTION?t+="@".concat(e.data.text):e.data&&(t+=e.data.text);return t}},{key:"renderPreview",value:function(e){if(!e)return"";for(var t="";e=e.next;)e.kind===KS.MARK_MENTION&&e.data.decorated&&!e.data.user?t+=this.mentionToHTML_(e,e.start+1):e.kind===KS.MARK_MENTION&&e.data.decorated?t+=this.mentionToHTML_(e):e.kind===KS.MARK_MENTION?t+="@".concat(e.data.text):e.data&&(t+=this.escapeHTML(e.data.text));return t}}])&&nx(t.prototype,n),r&&nx(t,r),e}();function ox(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ax(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ix(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var lx=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matcher_=n,this.renderer_=new rx(r),this.mentionToken_=null,this.firstToken_=null,this.cache_={},this.selectionStart_=-1,this.selectionEnd_=-1,this.source=null,this.parse(this.preprocess(t)),this.decorateMentions(null,!0,-1,-1)}var t,n,r;return t=e,(n=[{key:"clear",value:function(){this.mentionToken_=null,this.firstToken_=null,this.selectionStart_=-1,this.selectionEnd_=-1,this.source=""}},{key:"preprocess",value:function(e){var t=this;return e.replace(/<\/?b>/g,"*").replace(/<\/?em>/g,"_").replace(/<\/?s>/g,"~").replace(/<\/?pre>/g,"```").replace(/<\/?code>/g,"`").replace(/<br\/?>/g,"\n").replace(/\u00a0/g,"").replace(/<span\s(.*?)>(@.*?)<\/span>/g,function(e,n,r){var o=n.trim().split(" ").reduce(function(e,t){var n=t.match(/^data-(.*?)=["'](.*)["']$/);n&&(e[n[1].trim().toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=n[2].trim());return e},{});return o.username&&(t.cache_[o.username]=o)," ".concat(r," ")}).replace(/<[^>]+?>/g,"").replace(/(?:^[\u0008-\u0013\u0020]+|[\u0008-\u0013\u0020]+$)/g,"")}},{key:"parse",value:function(e){if(this.source!==e){var t=new YS(e);this.firstToken_=t.token,cx(t,KS.SOF);do{t.token.kind===KS.MARK_MENTION&&ux(t.token,this.cache_,this.matcher_)}while(!sx(t,KS.EOF));cx(t,KS.EOF),this.source=e,this.selectionStart_=-1,this.selectionEnd_=-1}}},{key:"applyChange",value:function(e){this.parse(e.value);var t=e.selectionStart,n=e.selectionEnd,r=null,o=null,a=null,i=!0;if(-1!==t&&t===n)for(r=this.firstToken_;r=r.next;)r.start<=t&&r.end>=t&&r.kind!==KS.EOF?(o=r,r.kind===KS.MARK_MENTION&&!r.data.decorated&&Math.max(t,r.start)-Math.min(n,r.end)<=0&&(a=r)):r.kind!==KS.MARK_MENTION||r.data.decorated||(i=!0);return!a&&o&&o.kind===KS.TEXT&&this.matcher_&&(a=dx(o,e,this.matcher_)),this.mentionToken_=a,i&&this.decorateMentions(e),!0}},{key:"applySelection",value:function(e){if(!this.firstToken_)return!1;var t=e.selectionStart,n=e.selectionEnd,r=!1;if(this.selectionStart_===t&&this.selectionEnd_===n)return!1;this.mentionToken_&&(r=!0,this.mentionToken_=null);for(var o=this.firstToken_;o=o.next;)if(o.kind===KS.MARK_MENTION&&o.data.decorated&&(o.start<t&&o.end>t&&(t=o.start),o.start<n&&o.end>n)){n=o.end;break}return t===e.selectionStart&&n===e.selectionEnd||(e.value=this.getEditText(),e.setSelectionRange(t,n),r=!0,o.data.user||(this.mentionToken_=o),this.selectionStart_=e.selectionStart,this.selectionEnd_=e.selectionEnd),r}},{key:"allowDelete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.selectionStart,r=e.selectionEnd;if(n!==r)return!0;for(var o=this.firstToken_,a=!0;o=o.next;)o.kind===KS.MARK_MENTION&&o.data.decorated&&(t&&o.start===n?(n+=1,a=!1):t||o.end!==n||(n-=1,a=!1));return a||e.setSelectionRange(n,n),a}},{key:"decorateMentions",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selectionStart,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.selectionEnd,o=this.firstToken_,a=!1,i=[];o=o.next;){var l=o.kind===KS.MARK_MENTION,s=o.start<=n&&o.end>=r;if(l&&t&&!s&&!o.data.decorated&&o.data.suggestions.length>0&&(a=!0,i.push(o),o.end<=n&&(n+=2,r+=2),o.data.decorated=!0,o.end+=2),o.next){var c=o.next.end-o.next.start;o.next.start=o.end,o.next.end=o.next.start+c}}return a&&(this.source=this.getEditText(),e&&(e.value=this.source,e.setSelectionRange(n,r),n=e.selectionStart,r=e.selectionEnd)),this.selectionStart_=n,this.selectionEnd_=r,a}},{key:"setSuggestion",value:function(e,t){if(this.mentionToken_){var n=this.mentionToken_,r=n.start+t.length+2;e.value=this.source.substr(0,n.start)+"@".concat(t).concat(" ")+this.source.substr(n.end),e.focus(),e.setSelectionRange(r,r),this.parse(e.value),this.decorateMentions(e)}}},{key:"getSuggestions",value:function(){return this.mentionToken_?this.mentionToken_.data.suggestions:[]}},{key:"getMentionRect",value:function(e,t){if(!this.mentionToken_)return{x:0,y:0,width:0,height:0};e.innerHTML=this.renderer_.escapeHTML(this.source),this.measureRange_||(this.measureRange_=document.createRange());var n=e.firstChild;return this.measureRange_.setStart(n,this.mentionToken_.start),this.measureRange_.setEnd(n,this.mentionToken_.end),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ox(n,!0).forEach(function(t){ax(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ox(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},wt(this.measureRange_,t),{x:t})}},{key:"getRichText",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.renderer_.renderRichtText(this.firstToken_);return e?t.replace(/(<br\/?\s?>)+$/,"").replace(/^(<br\/?\s?>)+/,""):t}},{key:"getEditText",value:function(){return this.renderer_.renderEditText(this.firstToken_)}},{key:"getPreview",value:function(){return this.renderer_.renderPreview(this.firstToken_)}}])&&ix(t.prototype,n),r&&ix(t,r),e}(),sx=function(e,t){var n=e.token.kind===t;return n||e.advance(),n},cx=function(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw new Error("Parser synax error, expected ".concat(t,", found ").concat(n))},ux=function(e,t,n){var r=e.data.text,o=n?n(r):[];e.data.suggestions=[],e.data.user=null,!o.length&&t[r]?e.data.user=t[r]:1===o.length&&o[0].username===r?(e.data.user=o[0],e.data.suggestions=o):o.length>0&&(e.data.suggestions=o)},dx=function(e,t,n){var r=t.selectionEnd,o=e.prev;do{if(o.kind===KS.MARK_MENTION&&!o.data.decorated&&o.data.suggestions.length>0){var a=n(t.value.slice(o.start+1,r));if(a.length>0)return o.data.suggestions=a,e.end===r?(o.next.prev=null,o.next=e.next,o.end=r,e.next=null):(e.prev.next=null,o.next&&(o.next.prev=null),e.start=r,o.end=r,e.prev.next=null,e.prev=o,o.next=e),o}}while((o=o.prev)&&o.kind===KS.TEXT);return null},fx=n(1777),px=n.n(fx);function hx(e){return(hx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mx(){return(mx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yx(e){return(yx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bx(e,t){return(bx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wx=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=yx(t).call(this,e))||"object"!==hx(o)&&"function"!=typeof o?vx(r):o).container=document.createElement("div"),n.handleWheel=n.handleWheel.bind(vx(n)),n.handleMouseDown=n.handleMouseDown.bind(vx(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bx(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"updatePosition",value:function(){if(this.modalRef){var e=this.props.rect,t=this.modalRef,n=(t.clientWidth,t.clientHeight),r=window,o=(r.innerWidth,r.innerHeight),a=r.scrollY,i=e.y+e.height+6-a;i=i+168<=o-4?i+a:e.y-n-6,this.modalRef.style.top="".concat(Math.round(i),"px"),this.modalRef.style.left="".concat(Math.round(e.x),"px")}}},{key:"updateScrollTop",value:function(){var e=this.props.selectedIndex;if(this.modalRef||!(e<4)){var t=this.modalRef.scrollTop,n=t+168,r=42*e,o=r+42;r<t?this.modalRef.scrollTop=r:o>n&&(this.modalRef.scrollTop=o-168)}}},{key:"handleChange",value:function(e){e!==this.props.selectedIndex&&this.props.onChange(e)}},{key:"handleMouseDown",value:function(e){e.preventDefault()}},{key:"handleWheel",value:function(e){this.modalRef.scrollTop+=e.deltaY,e.preventDefault()}},{key:"componentDidUpdate",value:function(e){e.selectedIndex!==this.props.selectedIndex&&this.updateScrollTop(),Object(Um.b)(e.rect,this.props.rect)||this.updatePosition()}},{key:"componentDidMount",value:function(){document.body.appendChild(this.container),this.updateScrollTop(),this.updatePosition()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.users,r=t.onSelect,o=t.selectedIndex;return Object(Nm.createPortal)(jm.a.createElement("div",{className:px.a.suggestbox,onWheel:this.handleWheel,onMouseDown:this.handleMouseDown,ref:function(t){e.modalRef=t}},n.map(function(t,n){return jm.a.createElement("div",{className:Object(Um.a)(px.a.cell,o===n&&px.a.selected),key:t.id,onMouseOver:function(){return e.handleChange(n)},onClick:function(){return r(n)}},jm.a.createElement(HS,mx({},t,{className:px.a.avatar})),jm.a.createElement("div",{className:px.a.title},t.name),jm.a.createElement("div",{className:px.a.subtitle},t.email))})),this.container)}}])&&gx(n.prototype,r),o&&gx(n,o),t}(),kx=n(1778),_x=n.n(kx);function Ox(e){return(Ox="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sx(e,t){return!t||"object"!==Ox(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xx(e){return(xx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ex(e,t){return(Ex=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Px=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Sx(this,xx(t).call(this,e))).container=document.createElement("div"),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ex(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"updatePosition",value:function(){if(this.tooltipRef){var e=this.props.rect,t=this.tooltipRef,n=t.clientWidth,r=t.clientHeight,o=window,a=o.innerWidth,i=(o.innerHeight,o.scrollY),l=e.x+e.width/2-n/2,s=Math.min(Math.max(l,4),a-4-n),c=e.y-r-i-10;c>=4?(c+=i,this.arrowRef.classList.remove(_x.a.flipped)):(c=e.y+e.height+10,this.arrowRef.classList.add(_x.a.flipped)),this.tooltipRef.style.top="".concat(Math.round(c),"px"),this.tooltipRef.style.left="".concat(Math.round(s),"px"),s!==l&&(this.arrowRef.style.left="calc(50% + ".concat(Math.round(l-s-6),"px)"))}}},{key:"componentDidUpdate",value:function(e){Object(Um.b)(e.rect,this.props.rect)||this.updatePosition()}},{key:"componentDidMount",value:function(){document.body.appendChild(this.container),this.updatePosition()}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className;return Object(Nm.createPortal)(jm.a.createElement("div",{ref:function(t){e.tooltipRef=t},className:Object(Um.a)(_x.a.tooltip,r&&r)},jm.a.createElement("div",{ref:function(t){e.arrowRef=t},className:_x.a.arrow}),n),this.container)}}])&&Cx(n.prototype,r),o&&Cx(n,o),t}(),jx=n(1779),Mx=n.n(jx);function Ax(){return(Ax=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Tx=function(e){var t=e.user,n=e.rect;return jm.a.createElement(Px,{rect:n,className:Mx.a.tooltip},jm.a.createElement(HS,Ax({className:Mx.a.avatar},t)),jm.a.createElement("span",{className:Mx.a.title},t.name,t.title&&jm.a.createElement("span",{className:Mx.a.dim},"• ".concat(t.title))),t.email&&jm.a.createElement("span",{className:Mx.a.subtitle},t.email))},Nx=n(1703),Dx=n.n(Nx);function Lx(e){return(Lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rx(){return(Rx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ix(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ix(n,!0).forEach(function(t){Bx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ix(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Bx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wx(e){return(Wx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $x(e,t){return($x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qx=function(e){function t(e,n){var r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(r=!(a=Wx(t).call(this,e,n))||"object"!==Lx(a)&&"function"!=typeof a?Hx(o):a).editingStarted=e.editing||e.creating&&e.initiater,r.content=new lx(e.text,n.findMentions,Dx.a),r.state={editText:r.editingStarted?e.text:"",suggestions:null,tooltip:null},r.handleMouseOver=r.handleMouseOver.bind(Hx(r)),r.handleMouseOut=r.handleMouseOut.bind(Hx(r)),r.handleMouseDown=r.handleMouseDown.bind(Hx(r)),r.handleMentionChange=r.handleMentionChange.bind(Hx(r)),r.handleBlur=r.handleBlur.bind(Hx(r)),r.handleChange=r.handleChange.bind(Hx(r)),r.handleSelectionChange=r.handleSelectionChange.bind(Hx(r)),r.handleKeyDown=r.handleKeyDown.bind(Hx(r)),r.handleCancel=r.handleCancel.bind(Hx(r)),r.handleSubmit=r.handleSubmit.bind(Hx(r)),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$x(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"resizeAndFocusIfNeeded",value:function(){var e=this;(this.editingStarted||this.props.creating)&&this.textareaRef&&Vx(this.textareaRef),this.editingStarted&&this.textareaRef&&(setTimeout(function(){e.textareaRef&&e.textareaRef.focus()},310),this.editingStarted=!1)}},{key:"selectMention",value:function(e){var t=this.state.suggestions;this.textareaRef&&t&&t.users[e]&&(this.content.setSuggestion(this.textareaRef,t.users[e].username),Vx(this.textareaRef),this.setState({editText:this.textareaRef.value,suggestions:null}))}},{key:"setChangeWithSuggestions",value:function(e){var t=this.content.getSuggestions(),n=t.length?{users:t,selectedIndex:0,rect:this.content.getMentionRect(this.measureRef,e.getBoundingClientRect().left-59)}:null;this.setState({editText:e.value,suggestions:n,tooltip:null})}},{key:"handleMouseOver",value:function(e){var t=e.target;if(t.dataset&&t.dataset.username){var n={};Object.keys(t.dataset).forEach(function(e){n[e]=t.dataset[e]}),this.setState({tooltip:jm.a.createElement(Tx,{rect:wt(t),user:n})})}else if(t.dataset&&t.dataset.tokenStart&&!this.state.suggestions){var r="Several matches for ".concat(t.textContent);this.setState({tooltip:jm.a.createElement(Px,{rect:wt(t)},r)})}}},{key:"handleMouseOut",value:function(){this.state.tooltip&&this.setState({tooltip:null})}},{key:"handleMouseDown",value:function(e){var t=e.target;if(t&&t.dataset&&t.dataset.tokenStart){e.preventDefault();var n=parseInt(t.dataset.tokenStart,10);!isNaN(n)&&this.textareaRef.value.length>=n&&(this.textareaRef.setSelectionRange(n,n),this.setState({tooltip:null}))}}},{key:"handleMentionChange",value:function(e){this.setState({suggestions:zx({},this.state.suggestions,{selectedIndex:e})})}},{key:"handleBlur",value:function(){this.setState({suggestions:null})}},{key:"handleChange",value:function(e){var t=e.target;this.content.applyChange(t),Vx(t),this.setChangeWithSuggestions(t)}},{key:"handleSelectionChange",value:function(){var e=this.textareaRef;e&&document.activeElement===e&&this.content.applySelection(e)&&this.setChangeWithSuggestions(e)}},{key:"handleKeyDown",value:function(e){var t=this.state.suggestions,n=e.keyCode,r=e.metaKey,o=e.ctrlKey;8===n||46===n?this.content.allowDelete(e.target,46===n)||e.preventDefault():t?9===n||13===n?(e.preventDefault(),this.selectMention(t.selectedIndex)):38===n?(e.preventDefault(),t.selectedIndex>0&&this.setState({suggestions:zx({},t,{selectedIndex:t.selectedIndex-1})})):40===n&&(e.preventDefault(),t.users.length-1>t.selectedIndex&&this.setState({suggestions:zx({},t,{selectedIndex:t.selectedIndex+1})})):(r||o)&&13===n&&(e.preventDefault(),this.handleSubmit())}},{key:"handleCancel",value:function(e){var t=this.props,n=(t.creating,t.editing),r=t.initiater,o=t.id;t.threadId;n?EN.execCommand("comment",{action:"canceledit",id:o}):r?EN.execCommand("comment",{action:"highlight"}):(this.editingStarted=!0,this.content.clear(),this.setState({editText:"",suggestions:null}))}},{key:"handleSubmit",value:function(){var e=this.props,t=e.creating,n=e.editing,r=e.id,o=e.threadId,a=this.content.getRichText();n&&a?EN.execCommand("comment",{action:"edit",id:r,text:a}):n?EN.execCommand("comment",{action:"remove",id:r}):t&&(this.content.clear(),this.setState({editText:"",suggestions:null},function(){EN.execCommand("comment",{action:"insert",threadId:o,text:a})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.editing,n=e.text;t&&!this.props.editing&&(this.editingStarted=!0,this.content=new lx(n,this.context.findMentions,Dx.a),this.setState({editText:this.content.getEditText(),suggestions:null}))}},{key:"componentDidUpdate",value:function(e,t){this.resizeAndFocusIfNeeded();var n=this.props,r=n.editing,o=n.creating;(r||o)&&this.state.editText!==t.editText&&this.props.onLayout(),!r&&!o||e.editing||e.creating||document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentDidMount",value:function(){this.resizeAndFocusIfNeeded(),(this.props.editing||this.props.creating)&&document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentWillUnmount",value:function(){(this.props.editing||this.props.creating)&&document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.id,t.editing),r=t.creating,o=(t.text,t.initiater),a=this.state,i=a.editText,l=a.tooltip,s=a.suggestions,c=n&&!i?Dx.a.destroy:Dx.a.primary,u=n||r,d=n||r&&i,f=u?this.content.getPreview():this.content.getRichText(!1),p=null,h=null;return n&&!i?h="Delete":n?h="Save Changes":r&&(h="Post",p=o?"Add a comment...":"Reply..."),jm.a.createElement("div",{className:Dx.a.wrapper},jm.a.createElement("div",{className:Dx.a.body},jm.a.createElement("div",{className:Dx.a.text,dangerouslySetInnerHTML:{__html:f},onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,onMouseDown:this.handleMouseDown}),u&&jm.a.createElement("textarea",{maxLength:"700",onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,placeholder:p,ref:function(t){e.textareaRef=t},value:i}),u&&jm.a.createElement("div",{ref:function(t){e.measureRef=t},className:Dx.a.text},i)),d&&jm.a.createElement("div",{className:Dx.a.controls},jm.a.createElement("button",{onClick:this.handleSubmit,className:c},h),jm.a.createElement("button",{onClick:this.handleCancel},"Cancel")),s&&jm.a.createElement(wx,Rx({},s,{onChange:this.handleMentionChange,onSelect:function(t){return e.selectMention(t)}})),l)}}])&&Fx(n.prototype,r),o&&Fx(n,o),t}();qx.contextTypes={findMentions:Am.a.func};var Vx=function(e){e.style.height="",e.style.height=e.scrollHeight+"px"},Ux=new ev.a({id:"ise7I",use:"ise7I-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="ise7I">\n  <path d="M7.5,13 C6.67157288,13 6,12.3284271 6,11.5 C6,10.6715729 6.67157288,10 7.5,10 C8.32842712,10 9,10.6715729 9,11.5 C9,12.3284271 8.32842712,13 7.5,13 Z M12.5,13 C11.6715729,13 11,12.3284271 11,11.5 C11,10.6715729 11.6715729,10 12.5,10 C13.3284271,10 14,10.6715729 14,11.5 C14,12.3284271 13.3284271,13 12.5,13 Z M17.5,13 C16.6715729,13 16,12.3284271 16,11.5 C16,10.6715729 16.6715729,10 17.5,10 C18.3284271,10 19,10.6715729 19,11.5 C19,12.3284271 18.3284271,13 17.5,13 Z" />\n</symbol>'}),Kx=(nv.a.add(Ux),Ux);function Yx(e){return(Yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xx(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Zx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gx(e){return(Gx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qx(e,t){return(Qx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eE=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Gx(t).call(this,e))||"object"!==Yx(o)&&"function"!=typeof o?Jx(r):o).handleOptClick=n.handleOptClick.bind(Jx(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qx(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"handleOptClick",value:function(e){var t=e.target.getBoundingClientRect();e.stopPropagation(),EN.execCommand("comment",{action:"menu",threadId:this.props.threadId,id:this.props.id,x:t.left+t.width,y:t.top+t.height})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.initial,r=e.photoUrl,o=e.updated,a=e.editable,i=e.color,l=Xx(e,["name","initial","photoUrl","updated","editable","color"]),s=l.editing,c=l.creating,u=Object(Um.a)(Dx.a.comment,s&&Dx.a.edit,c&&Dx.a.new);return jm.a.createElement("div",{className:u},jm.a.createElement(HS,{className:Dx.a.avatar,initial:n,color:i,photoUrl:r}),!s&&!c&&jm.a.createElement("div",{key:"header",className:Dx.a.header},jm.a.createElement("div",{className:Dx.a.name},t),jm.a.createElement("div",{className:Dx.a.time},Object(Um.d)(o)),a&&jm.a.createElement("button",{className:Dx.a.options,onClick:this.handleOptClick},jm.a.createElement(Ng.a,{svg:Kx}))),jm.a.createElement(qx,l))}}])&&Zx(n.prototype,r),o&&Zx(n,o),t}(),tE=new ev.a({id:"UJcC_",use:"UJcC_-usage",viewBox:"0 0 32 32",content:'<symbol viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="UJcC_">\n  <path d="M9.97861401,23.8640938 C11.7417413,25.2044152 13.9415355,26 16.3271484,26 C22.1261383,26 26.8271484,21.2989899 26.8271484,15.5 C26.8271484,9.70101013 22.1261383,5 16.3271484,5 C10.5281586,5 5.82714844,9.70101013 5.82714844,15.5 C5.82714844,17.1794923 6.22146275,18.7668876 6.92256379,20.1746583 L5,24.7011719 L9.97861401,23.8640938 Z" />\n</symbol>'}),nE=(nv.a.add(tE),tE);function rE(e){return(rE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oE(){return(oE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function aE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iE(e){return(iE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sE(e,t){return(sE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cE=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=iE(t).call(this,e))||"object"!==rE(o)&&"function"!=typeof o?lE(r):o).handleLayout=n.handleLayout.bind(lE(n)),n.handleActivationClick=n.handleActivationClick.bind(lE(n)),n.handleBubbleClick=n.handleBubbleClick.bind(lE(n)),n.handleResolveClick=n.handleResolveClick.bind(lE(n)),n.handleReopenClick=n.handleReopenClick.bind(lE(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sE(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"handleActivationClick",value:function(e){var t=this.props,n=t.id;t.active||EN.execCommand("comment",{action:"highlight",threadId:n})}},{key:"handleBubbleClick",value:function(e){this.props.collapsed||this.props.compact||(e.preventDefault(),e.stopPropagation(),EN.execCommand("comment",{action:"collapse"}))}},{key:"handleResolveClick",value:function(e){e.stopPropagation(),EN.execCommand("comment",{action:"resolve",threadId:this.props.id})}},{key:"handleReopenClick",value:function(e){e.stopPropagation(),EN.execCommand("comment",{action:"reopen",threadId:this.props.id})}},{key:"handleLayout",value:function(){this.elementRef&&this.props.floating&&this.props.updateHeight({height:this.elementRef.clientHeight,id:this.props.id})}},{key:"componentDidMount",value:function(){this.handleLayout()}},{key:"componentDidUpdate",value:function(e){e.active===this.props.active&&e.collapsed===this.props.collapsed&&e.compact===this.props.compact&&e.comments===this.props.comments&&e.readonly===this.props.readonly||this.handleLayout()}},{key:"render",value:function(){var e=this,t=this.props,n=t.comments,r=t.top,o=t.id,a=t.active,i=t.collapsed,l=t.compact,s=t.user,c=t.readonly,u=t.floating,d=t.archive,f=Object(Um.a)(Dx.a.thread,a&&!d&&Dx.a.active,i&&Dx.a.collapsed,l&&Dx.a.compact,u&&Dx.a.floating),p=d?null:{top:r},h=null,m=null,g=null,y=!1;return i||l||(m=n.map(function(t){return t.editing&&(y=!0),jm.a.createElement(eE,oE({},t,{editable:!d&&t.editable,key:t.id,threadId:o,onLayout:e.handleLayout}))}),g=s&&!y&&!c&&a&&!d&&jm.a.createElement(eE,{initial:s.initial,name:s.name,color:s.color,threadId:o,onLayout:this.handleLayout,initiater:0===n.length,creating:!0})),d?h=jm.a.createElement("div",{className:Dx.a.toolbar},n[0].selectedText&&jm.a.createElement("div",{className:Dx.a.highlight},jm.a.createElement("span",null,n[0].selectedText)),n[0].resolved&&null!=r&&jm.a.createElement("button",{className:Dx.a.reopen,onClick:this.handleReopenClick},"Unresolve")):n.length>0&&(h=jm.a.createElement("div",{className:Dx.a.toolbar},!i&&!l&&a&&jm.a.createElement("button",{className:Dx.a.resolve,onClick:this.handleResolveClick},"Resolve"),jm.a.createElement("button",{className:Dx.a.bubble,"data-count":n.length,onClick:this.handleBubbleClick},jm.a.createElement(Ng.a,{svg:nE})))),jm.a.createElement("div",{className:f,style:p,ref:function(t){e.elementRef=t},onClick:this.handleActivationClick},h,m,g)}}])&&aE(n.prototype,r),o&&aE(n,o),t}();cE.defaultProps={collapsed:!1,compact:!1,active:!1,readonly:!1,floating:!1,archive:!1,user:null,comments:[]};var uE=new ev.a({id:"3IsE-",use:"3IsE--usage",viewBox:"0 0 12 12",content:'<symbol viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="3IsE-">\n    <g id="3IsE-_Final-for-MVP" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="3IsE-_Artboard-Copy-11" transform="translate(-1057.000000, -207.000000)" fill="#C3C3C3">\n            <g id="3IsE-_Title-Area" transform="translate(414.000000, 181.000000)">\n                <g id="3IsE-_Close" transform="translate(648.899495, 31.899495) rotate(-315.000000) translate(-648.899495, -31.899495) translate(641.899495, 24.899495)">\n                    <rect id="3IsE-_Rectangle-26" x="6" y="0" width="2" height="14" />\n                    <rect id="3IsE-_Rectangle-26" transform="translate(7.000000, 7.000000) rotate(-90.000000) translate(-7.000000, -7.000000) " x="6" y="0" width="2" height="14" />\n                </g>\n            </g>\n        </g>\n    </g>\n</symbol>'}),dE=(nv.a.add(uE),uE),fE=new ev.a({id:"34UlQ",use:"34UlQ-usage",viewBox:"0 0 12 14",content:'<symbol viewBox="0 0 12 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="34UlQ">\n    <g id="34UlQ_Assets" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="34UlQ_Artboard" fill="#A0A0A0">\n            <path d="M8.538,13.75 L1.5,13.75 C0.87,13.75 0.384,13.246 0.384,12.634 L0.384,1.366 C0.384,0.754 0.87,0.25 1.5,0.25 L10.5,0.25 C11.13,0.25 11.616,0.754 11.616,1.366 L11.616,10.654 L8.538,13.75 Z M10.5,9.808 L10.5,1.366 L1.5,1.366 L1.5,12.616 L7.692,12.616 L7.692,10.942 C7.692,10.312 8.196,9.808 8.808,9.808 L10.5,9.808 Z M3.192,3.904 L3.192,3.058 L8.808,3.058 L8.808,3.904 L3.192,3.904 Z M3.192,6.154 L3.192,5.308 L8.808,5.308 L8.808,6.154 L3.192,6.154 Z M3.192,8.404 L3.192,7.558 L8.808,7.558 L8.808,8.404 L3.192,8.404 Z M6.558,9.808 L6.558,10.654 L3.192,10.654 L3.192,9.808 L6.558,9.808 Z M8.538,12.346 L10.212,10.654 L8.538,10.654 L8.538,12.346 Z" id="34UlQ_Note_Icon_Comment_History" />\n        </g>\n    </g>\n</symbol>'}),pE=(nv.a.add(fE),fE),hE=n(1780),mE=n.n(hE);function gE(e){return(gE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yE(){return(yE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bE(e){return(bE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kE(e,t){return(kE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _E=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=bE(t).call(this,e))||"object"!==gE(o)&&"function"!=typeof o?wE(r):o).container=document.createElement("div"),n.handleClose=n.handleClose.bind(wE(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kE(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"handleClose",value:function(e){e.target===this.overlayRef&&this.props.close()}},{key:"componentDidMount",value:function(){document.body.appendChild(this.container)}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=(t.handleClose,t.threads),r=t.user,o=t.title,a=t.close;return Object(Nm.createPortal)(jm.a.createElement("div",{className:mE.a.overlay,onClick:this.handleClose,ref:function(t){e.overlayRef=t}},jm.a.createElement("div",{className:mE.a.archive},jm.a.createElement("div",{className:mE.a.header},jm.a.createElement("div",{className:mE.a.wrapper},jm.a.createElement("h1",null,"Comment archive"),jm.a.createElement("h2",null,jm.a.createElement(Ng.a,{svg:pE}),o)),jm.a.createElement("button",{className:mE.a.btnClose,onClick:a},jm.a.createElement(Ng.a,{svg:dE}))),jm.a.createElement("div",{className:mE.a.content},n.map(function(e){return jm.a.createElement(cE,yE({},e,{top:e.y,key:e.id,user:r,archive:!0}))})))),this.container)}}])&&vE(n.prototype,r),o&&vE(n,o),t}(),OE=new ev.a({id:"1Ejmu",use:"1Ejmu-usage",viewBox:"0 0 24 24",content:'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="1Ejmu">\n    <g transform="translate(3.000000, 3.000000)" fill="#666666">\n        <path d="M-0.819413277,16.762739 L3.97955612,15.962205 C5.5266647,17.0728542 7.38797437,17.6818182 9.34105857,17.6818182 C14.3985232,17.6818182 18.5,13.6125663 18.5,8.59090909 C18.5,8.10983109 18.4623084,7.63327193 18.3877934,7.1642387 L17.4001792,7.32114027 C17.4664577,7.73832922 17.5,8.16242622 17.5,8.59090909 C17.5,13.0585081 13.8479965,16.6818182 9.34105857,16.6818182 C7.53279169,16.6818182 5.81537718,16.09749 4.40674699,15.0350692 L4.23526252,14.9057317 L0.819413277,15.4755423 L2.13651926,12.3988921 L2.03232517,12.1913202 C1.47572456,11.0824791 1.18211713,9.85800197 1.18211713,8.59090909 C1.18211713,4.1233101 4.83412062,0.5 9.34105857,0.5 C9.85433737,0.5 10.3613051,0.546939794 10.8576375,0.639424924 L11.0408215,-0.343653719 C10.4841477,-0.447382703 9.9158607,-0.5 9.34105857,-0.5 C4.2835939,-0.5 0.182117131,3.56925192 0.182117131,8.59090909 C0.182117131,9.9348049 0.476480421,11.2378669 1.03597896,12.4286969 L-0.819413277,16.762739 Z" fill-rule="nonzero" />\n        <g transform="translate(13.000000, 0.000000)">\n            <rect x="2" y="0" width="1" height="5" />\n            <rect transform="translate(2.500000, 2.500000) rotate(-90.000000) translate(-2.500000, -2.500000) " x="2" y="0" width="1" height="5" />\n        </g>\n        <rect x="5" y="8" width="9" height="1" />\n        <rect x="5" y="11" width="7" height="1" />\n        <rect x="5" y="5" width="7" height="1" />\n    </g>\n</symbol>'}),CE=(nv.a.add(OE),OE);function SE(e){return(SE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xE(){return(xE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function EE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PE(e){return(PE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ME(e,t){return(ME=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var AE=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=PE(t).call(this,e))||"object"!==SE(o)&&"function"!=typeof o?jE(r):o).state={offsets:{}},n.heights={},n.paddingBottom=0,n.lastActiveId=null,n.lastActiveIndex=-1,n.pendingLayout=!0,n.batchedLayout=!0,n.handleHeightChange=n.handleHeightChange.bind(jE(n)),n.handleInsert=n.handleInsert.bind(jE(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ME(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"getChildContext",value:function(){return{findMentions:this.props.findMentions}}},{key:"layout",value:function(){var e=this.props,t=e.threads,n=e.collapsed,r=e.compact,o=e.field,a={},i=null,l=null,s=null,c=null,u=null,d=t.findIndex(function(e){return!0===e.active});-1===d&&this.lastActiveIndex>-1&&t.length>0&&(d=Math.min(this.lastActiveIndex,t.length-1)),this.lastActiveIndex=d,d>-1?(u=(s=(i=t[d]).y-12)-(i.active?12:4),c=s+this.heights[i.id]+4,a[i.id]=s,this.lastActiveId=i.id):this.lastActiveId=null;for(var f=d-1;f>=0;f--)i=t[f],l=r||n?26:this.heights[i.id],u=(s=Math.min(i.y-12,u-l))-4,a[i.id]=s;for(var p=d+1;p<t.length;p++)i=t[p],l=r||n?26:this.heights[i.id],c=(s=Math.max(i.y-12,c))+l+4,a[i.id]=s;var h=Math.max(o.scrollHeight-this.paddingBottom,window.innerHeight),m=Math.max(0,c+64-h);m!==this.paddingBottom&&(this.paddingBottom=m,o.style.paddingBottom=m?"".concat(64+this.paddingBottom,"px"):""),this.needsLayout=!1,this.setState({offsets:a})}},{key:"handleHeightChange",value:function(e){var t=e.height,n=e.id,r=this.heights[n]!==t,o=this.lastActiveId!==n;this.heights[n]=t,(r||o)&&(this.batchedLayout?this.needsLayout=!0:this.layout())}},{key:"handleInsert",value:function(e){e.preventDefault(),EN.execCommand("comment")}},{key:"componentWillUpdate",value:function(){this.batchedLayout=!0}},{key:"componentDidUpdate",value:function(e){e.collapsed!==this.props.collapsed&&(this.lastActiveId=null,this.lastActiveIndex=-1),(this.needsLayout||e.threads!==this.props.threads)&&this.layout(),this.batchedLayout=!1}},{key:"componentDidMount",value:function(){this.layout(),this.batchedLayout=!1}},{key:"componentWillUnmount",value:function(){0!==this.paddingBottom&&this.props.field&&(this.props.field.style.paddingBottom="")}},{key:"render",value:function(){var e=this,t=this.props,n=t.threads,r=t.user,o=t.collapsed,a=t.compact,i=t.readonly,l=t.focusY,s=t.archive,c=this.state.offsets,u=l?l-4:0,d=0===n.length?12:o||a?52:260,f=Object(Um.a)("commentscontainer",Dx.a.comments);return jm.a.createElement("div",{className:f},!!l&&jm.a.createElement("button",{className:Dx.a.adder,style:{top:u,right:d},onMouseDown:this.handleInsert},jm.a.createElement(Ng.a,{svg:CE})),n.map(function(t){return jm.a.createElement(cE,xE({},t,{key:t.id,user:r,collapsed:o,compact:!t.active&&a,top:c[t.id]||t.y,updateHeight:e.handleHeightChange,readonly:i,floating:!0}))}),s&&jm.a.createElement(_E,xE({},s,{user:r})))}}])&&EE(n.prototype,r),o&&EE(n,o),t}();AE.childContextTypes={findMentions:Am.a.func};var TE=n(1725),NE=n.n(TE);function DE(e){return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RE(e){return(RE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function IE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zE(e,t){return(zE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BE(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var FE=-25,WE=12,HE=437,$E=188+WE,qE=function(e){function t(e,n){var r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,a=RE(t).call(this,e,n),r=!a||"object"!==DE(a)&&"function"!=typeof a?IE(o):a,BE(IE(r),"reposition",function(){r.repositionTimeout&&clearTimeout(r.repositionTimeout),r.repositionTimeout=window.setTimeout(function(){r.updateOriginationArea()},10)}),BE(IE(r),"updateOriginationArea",function(){var e=r.props.editor;if(e&&e.view&&e.view.state){var t,n,o,a=e.view.state.selection,i=a.$from,l=a.$to,s=e.view.state.doc.type.schema.marks.link,c=ds(i,s)||ds(l,s);c?(t=e.view.coordsAtPos(c.from),n=e.view.coordsAtPos(c.to)):(t=e.view.coordsAtPos(i.pos),n=e.view.coordsAtPos(l.pos));var u=!0;(o=t.top===n.top&&t.bottom===n.bottom?kt([t,n]):n).bottom+$E>document.scrollingElement.clientHeight&&$E<o.top&&(u=!1,o===n&&$E<t.top&&(o=t));var d=0,f=.5*(o.left+o.right),p=f<=.5*document.scrollingElement.clientWidth,h=p?document.scrollingElement.clientWidth-(f+HE)-FE:f-HE-FE;h<0&&(d=Math.round(-1*h));var m=Math.round(f-d);m=p?m+FE:document.scrollingElement.scrollWidth-m+FE;var g=Math.round((u?o.bottom:o.top)+document.scrollingElement.scrollTop);g=u?g+WE:document.scrollingElement.scrollHeight-g+WE,m<0?(d+=m,m=0):!p&&m+HE>document.scrollingElement.clientWidth&&(m+=document.scrollingElement.clientWidth-(m+HE)),d-=FE+(p?0:14),r.setState({popoverX:m,popoverY:g,popoverTipOffset:d,popoverToRight:p,popoverBelow:u,popoverVisible:!0})}}),BE(IE(r),"validateHref",function(){var e,t=r.state.href,n=t&&(e=t.trim(),Po.test(e));return r.setState({hrefIsValid:n}),n}),BE(IE(r),"handleLinkClick",function(e){var t=r.props.editor,n=r.state.href;e.preventDefault();var o=we()(t,"view.props.notify");"function"==typeof o&&n.length&&o("openLink",{action:"open",module:"link",href:n})}),BE(IE(r),"handleEditLink",function(){var e,t=r.props.editor;(e=t.view)&&e.dispatch(e.state.tr.setMeta(Os,{enterEdit:!0}))}),BE(IE(r),"handleRemoveLink",function(){var e=r.props.editor,t=gs(e.view.state.tr);e.view.dispatch(t)}),BE(IE(r),"handleTextChange",function(e){r.setState({text:e})}),BE(IE(r),"handleLinkChange",function(e){r.state.hrefIsValid||r.validateHref(),r.setState({href:e})}),BE(IE(r),"handleCancelEdit",function(){var e,t=r.props,n=t.editor,o=t.href,a=t.text;(e=n.view)&&e.dispatch(e.state.tr.setMeta(Os,{closePopover:!0})),n.view.focus(),r.setState({href:o,text:a})}),BE(IE(r),"handleApplyChanges",function(){var e=r.props,t=e.editor,n=e.modifyText,o=r.state,a=o.href,i=o.text;if("string"==typeof a&&r.validateHref()){var l=ys(t.view.state.tr,a.trim(),n?i:null);t.view.dispatch(l),t.view.focus()}}),BE(IE(r),"handleKeyUp",function(e){27===e.keyCode&&r.handleCancelEdit()}),BE(IE(r),"handleKeyPress",function(e){"Enter"===e.key&&r.handleApplyChanges()});var i=e.text,l=e.href;return r.state={text:i||"",href:l||"",hrefIsValid:!0,popoverX:0,popoverY:-2500,popoverTipOffset:0,popoverToRight:!0,popoverBelow:!0,popoverVisible:!1},r.textInputRef=jm.a.createRef(),r.hrefInputRef=jm.a.createRef(),r.repositionTimeout=null,r.handleResize=ve()(r.reposition,400,{leading:!0,maxWait:200,trailing:!0}),r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zE(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){this.reposition(),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.timestamp,o=n.displayMode,a=n.from,i=n.to,l=n.modifyText,s=n.text,c=n.href,u=this.state.hrefIsValid,d={};if(r!==e.timestamp&&(d.text=l?s:"",d.href=c,d.hrefIsValid=!0,this.reposition(),(Math.abs(a-e.from)>5||Math.abs(i-e.to)>5)&&(d.popoverVisible=!1)),c!==e.href&&(d.href=c,u||this.validateHref()),Object.keys(d).length&&this.setState(d),("edit"===o||"create"===o)&&"edit"!==e.displayMode&&"create"!==e.displayMode){var f,p=this.textInputRef.current&&document.contains(this.textInputRef.current),h=this.hrefInputRef.current&&document.contains(this.hrefInputRef.current);p&&!d.text?f=this.textInputRef.current:h&&!d.href?f=this.hrefInputRef.current:p?f=this.textInputRef.current:h&&(f=this.hrefInputRef.current),setTimeout(function(){if(f){f.focus();var e=t.state,n=e.popoverY,r=e.popoverBelow,o=document.scrollingElement,a=o.scrollTop,i=o.clientHeight,l=o.scrollHeight,s=r?n-40:l-n-$E,c=r?n+$E:l-n+40;s<a?document.scrollingElement.scrollTop=Math.max(0,s):c>a+i&&(document.scrollingElement.scrollTop=Math.min(l,c)-i)}},15)}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),clearTimeout(this.repositionTimeout)}},{key:"render",value:function(){var e,t=this.props,n=t.displayMode,r=t.modifyText,o=t.href,a=t.text,i=this.state,l=i.hrefIsValid,s=i.popoverX,c=i.popoverY,u=i.popoverTipOffset,d=i.popoverToRight,f=i.popoverBelow,p=(BE(e={opacity:i.popoverVisible?1:0},d?"left":"right",s),BE(e,f?"top":"bottom",c),e),h=BE({},d?"left":"right",u),m=null;return"edit"===n||"create"===n?m=jm.a.createElement(Pm.Fragment,null,r&&jm.a.createElement("div",{key:"textInputRow-".concat(a),className:NE.a.inputRow,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp},jm.a.createElement("label",{className:NE.a.inputLabel,htmlFor:"linkPopoverText"},fh.a.t("Text")),jm.a.createElement(Vm,{className:NE.a.input,name:"linkPopoverText",inputRef:this.textInputRef,autoComplete:"off",defaultValue:a,onChange:this.handleTextChange})),jm.a.createElement("div",{key:"linkInputRow-".concat(o),className:NE.a.inputRow,onKeyPress:this.handleKeyPress,onKeyUp:this.handleKeyUp},jm.a.createElement("label",{className:NE.a.inputLabel,htmlFor:"linkPopoverLink"},fh.a.t("Link")),jm.a.createElement(Vm,{className:Object(Um.a)(NE.a.input,!l&&NE.a.invalid),name:"linkPopoverLink",inputRef:this.hrefInputRef,autoComplete:"off",defaultValue:o,placeholder:fh.a.t("Add a link"),onChange:this.handleLinkChange})),jm.a.createElement("div",{key:"buttonGroup",className:NE.a.buttonGroup},jm.a.createElement("button",{key:"btnApply",className:Object(Um.a)(NE.a.button,NE.a.primary),onClick:this.handleApplyChanges},fh.a.t("Apply")),jm.a.createElement("button",{key:"btnCancel",className:Object(Um.a)(NE.a.button,NE.a.secondary),onClick:this.handleCancelEdit},fh.a.t("Cancel")))):"info"===n&&(m=jm.a.createElement(Pm.Fragment,null,jm.a.createElement("a",{key:"linkPreview",className:NE.a.linkPreview,href:o,onClick:this.handleLinkClick},o),jm.a.createElement("button",{key:"btnEdit",className:NE.a.linkAction,onClick:this.handleEditLink},fh.a.t("Edit")),jm.a.createElement("div",{key:"divider",className:NE.a.linkActionDivider}),jm.a.createElement("button",{key:"btnRemove",className:NE.a.linkAction,onClick:this.handleRemoveLink},fh.a.t("Remove")))),m?jm.a.createElement("div",{key:"popover",className:"info"===n?NE.a.infoPopover:NE.a.editPopover,style:p},jm.a.createElement("div",{key:"popoverAnchorShadow",className:Object(Um.a)(NE.a.popoverAnchorShadow,d?NE.a.popoverToRight:NE.a.popoverToLeft,f?NE.a.popoverBelow:NE.a.popoverAbove),style:h}),jm.a.createElement("div",{key:"popoverBackground",className:NE.a.popoverBackground}),jm.a.createElement("div",{key:"popoverAnchorTip",className:Object(Um.a)(NE.a.popoverAnchorTip,d?NE.a.popoverToRight:NE.a.popoverToLeft,f?NE.a.popoverBelow:NE.a.popoverAbove),style:h}),m):null}}])&&LE(n.prototype,r),o&&LE(n,o),t}();BE(qE,"propTypes",{displayMode:Am.a.string.isRequired,from:Am.a.number.isRequired,href:Am.a.string.isRequired,modifyText:Am.a.bool.isRequired,text:Am.a.string.isRequired,to:Am.a.number.isRequired,editor:Am.a.object}),BE(qE,"defaultProps",{editor:{}});var VE=Object(Mg.a)(Lg.b,Object(Tm.b)(function(e){return{from:e.linkPopover.from,href:e.linkPopover.href,modifyText:e.linkPopover.modifyText,text:e.linkPopover.text,timestamp:e.linkPopover.timestamp,to:e.linkPopover.to}}))(qE);function UE(e){var t=e.displayMode,n=Object(Um.a)("linkpopovercontainer",NE.a.container);return jm.a.createElement("div",{className:n},jm.a.createElement(VE,{displayMode:t}))}var KE=Object(Tm.b)(function(e){return{displayMode:e.linkPopover.displayMode}})(UE),YE=n(1676),XE=n(1675),ZE=n(1726),GE=n.n(ZE),JE=n(1141),QE=n.n(JE),eP=n(1143),tP=n(1144),nP=n(1781),rP=n.n(nP);function oP(e){return(oP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iP(e){return(iP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sP(e,t){return(sP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uP=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=iP(t).call(this,e),n=!o||"object"!==oP(o)&&"function"!=typeof o?lP(r):o,cP(lP(n),"claimFocus",function(){var e=n.props,t=e.id,r=e.claimFocus;"function"==typeof r&&r(t)}),cP(lP(n),"isMenuOpen",function(){}),cP(lP(n),"openSubmenu",function(){var e=n.props,t=e.submenuItems,r=e.onSubmenuOpen,o=e.cleanupMenu,a=e.createMenu,i=e.parentMenu,l=n.state.submenuId,s=0,c=0;if(n.itemElement){var u=n.itemElement.getBoundingClientRect();s=u.right,c=u.top-10}null!==l&&n.isMenuOpen(l)&&o(l);var d=a({parentMenu:i,xPosition:s,yPosition:c,items:t});n.setState({submenuId:d}),"function"==typeof r&&r(n.submenuId)}),cP(lP(n),"isMenuOpen",function(e){var t=n.props.allMenus;return Boolean(t&&t[e]&&t[e].enabled)}),cP(lP(n),"isSubmenuOpen",function(){return Boolean(n.state.submenuId&&n.isMenuOpen(n.state.submenuId))}),cP(lP(n),"handleGainFocus",function(){n.itemElement&&n.itemElement.focus(),document.body.addEventListener("keydown",n.handleKeyPress)}),cP(lP(n),"handleLoseFocus",function(){document.body.removeEventListener("keydown",n.handleKeyPress)}),cP(lP(n),"handleHover",function(e){var t=n.props,r=t.isFocused,o=t.submenuItems;r||n.claimFocus(),!o||n.isSubmenuOpen()||n.hoverTimeout||(n.hoverTimeout=window.setTimeout(n.openSubmenu,200))}),cP(lP(n),"handleUnhover",function(e){n.hoverTimeout&&(window.clearTimeout(n.hoverTimeout),n.hoverTimeout=null)}),cP(lP(n),"handleClick",function(e){var t=n.props,r=t.submenuItems,o=t.id,a=t.doAction;r&&!n.isSubmenuOpen()?n.openSubmenu():"function"==typeof a&&a(o)}),cP(lP(n),"handleKeyPress",function(e){var t=e.keyCode,r=e.shiftKey,o=n.props,a=o.submenuItems,i=o.id,l=o.doAction,s=o.delegateFocus,c=n.isSubmenuOpen(),u=!1;return 13===t||32===t?a&&!c?(n.openSubmenu(),u=!0):"function"==typeof l&&(l(i),u=!0):a&&39===t?c||(n.openSubmenu(),u=!0):38===t||r&&9===t?c||"function"!=typeof s||(s(i,-1),u=!0):(40===t||!r&&9===t)&&(c||"function"!=typeof s||(s(i,1),u=!0)),u&&(e.preventDefault(),e.stopImmediatePropagation()),u}),n.hoverTimeout=null,n.itemElement=null,n.state={submenuId:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sP(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"componentWillUnmount",value:function(){this.hoverTimeout&&window.clearTimeout(this.hoverTimeout),this.handleLoseFocus()}},{key:"componentDidUpdate",value:function(e,t){!e.isFocused&&this.props.isFocused?this.handleGainFocus():e.isFocused&&!this.props.isFocused&&this.handleLoseFocus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFocused,r=t.submenuItems,o=t.value,a=t.label,i=Object(Um.a)(rP.a.item,n&&rP.a.focused,r&&rP.a.submenu,"boolean"==typeof o&&rP.a.option,!0===o&&rP.a.checked),l=r?jm.a.createElement(Ng.a,{className:rP.a.submenuindicator,svg:eP.a}):null,s="boolean"==typeof o?jm.a.createElement(Ng.a,{className:rP.a.valueindicator,svg:tP.a}):null;return jm.a.createElement("div",{className:i,onMouseEnter:this.handleHover,onMouseLeave:this.handleUnhover,onClick:this.handleClick,tabIndex:"-1",ref:function(t){return e.itemElement=t}},s,fh.a.t(a),l)}}])&&aP(n.prototype,r),o&&aP(n,o),t}();cP(uP,"propTypes",{id:Am.a.number.isRequired,claimFocus:Am.a.func,isFocused:Am.a.bool,submenuItems:Am.a.array,onSubmenuOpen:Am.a.func,cleanupMenu:Am.a.func.isRequired,createMenu:Am.a.func.isRequired,parentMenu:Am.a.string,label:Am.a.string.isRequired,doAction:Am.a.func,delegateFocus:Am.a.func,allMenus:Am.a.object.isRequired});var dP={createMenu:Pe.createMenu,cleanupMenu:Pe.cleanupMenu},fP=Object(Tm.b)(function(e){return{allMenus:e.menu.menus}},dP)(uP),pP=n(1782),hP=n.n(pP);function mP(e){return(mP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yP(e){return(yP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bP(e,t){return(bP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wP=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=yP(t).call(this,e))||"object"!==mP(o)&&"function"!=typeof o?vP(r):o).itemsPerRow=6,n.state={selectedColor:Object(Um.f)(n.props.value)||n.colorOptions[0],focusedColor:null},n.colorElements={},n.focusColor=n.focusColor.bind(vP(n)),n.finalizeColor=n.finalizeColor.bind(vP(n)),n.handleKeyPress=n.handleKeyPress.bind(vP(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bP(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"focusColor",value:function(e){var t=this.props,n=t.id,r=t.claimFocus;"function"==typeof r&&r(n),this.setState({focusedColor:e}),this.colorElements&&this.colorElements[e]&&this.colorElements[e].focus()}},{key:"focusNextColor",value:function(e){var t=this.colorOptions.indexOf(this.state.focusedColor),n=t+e;return-1===t?e<0?(this.focusColor(this.colorOptions[this.colorOptions.length-1]),!0):(this.focusColor(this.colorOptions[0]),!0):n>=0&&n<this.colorOptions.length&&(this.focusColor(this.colorOptions[n]),!0)}},{key:"finalizeColor",value:function(e){var t=this.props,n=t.id,r=t.doAction;this.focusColor(e),this.setState({selectedColor:e}),"function"==typeof r&&r(n,e)}},{key:"handleGainFocus",value:function(){this.focusColor(this.state.selectedColor),document.body.addEventListener("keydown",this.handleKeyPress)}},{key:"handleLoseFocus",value:function(){document.body.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleKeyPress",value:function(e){var t=e.keyCode,n=e.shiftKey,r=this.props,o=r.id,a=(r.doAction,r.delegateFocus),i=this.state.focusedColor,l=!1;return 13===t||32===t?i&&(this.finalizeColor(i),l=!0):37===t?(this.focusNextColor(-1),l=!0):39===t?(this.focusNextColor(1),l=!0):38===t?(this.focusNextColor(-1*this.itemsPerRow)||a(o,-1),l=!0):40===t?(this.focusNextColor(this.itemsPerRow)||a(o,1),l=!0):n&&9===t?(a(o,-1),l=!0):n||9!==t||(a(o,1),l=!0),l&&(e.preventDefault(),e.stopImmediatePropagation()),l}},{key:"componentWillUnmount",value:function(){this.handleLoseFocus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){void 0!==e.value&&this.setState({selectedColor:Object(Um.f)(e.value)}),e.isFocused&&!this.props.isFocused?this.handleGainFocus():!e.isFocused&&this.props.isFocused&&this.handleLoseFocus()}},{key:"render",value:function(){var e=this,t=this.props.isFocused,n=this.state,r=n.selectedColor,o=n.focusedColor;return jm.a.createElement("div",{key:"colorpicker",className:hP.a.colorpicker},jm.a.createElement("div",{key:"label",className:hP.a.title},fh.a.t(this.props.label)),jm.a.createElement("div",{key:"colors-container",className:hP.a.colors},this.colorOptions.map(function(n,a){var i=Object(Um.a)(hP.a.color,0===a&&hP.a.bordered,t&&n===o&&hP.a.focused,n===r&&hP.a.selected);return jm.a.createElement("div",{key:"color-wrapper-".concat(a),className:hP.a.colorwrapper,onMouseEnter:function(){return e.focusColor(n)},onMouseOver:function(){return e.focusColor(n)},onClick:function(){return e.finalizeColor(n)},tabIndex:"-1",ref:function(t){return e.colorElements[n]=t}},jm.a.createElement("div",{key:"color-".concat(a),className:i,style:{backgroundColor:n}}))})))}},{key:"colorOptions",get:function(){return this.props.darkmodeEnabled?Ha.dark:Ha.light}}])&&gP(n.prototype,r),o&&gP(n,o),t}();function kP(e){return(kP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OP(e){return(OP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function SP(e,t){return(SP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var EP=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=OP(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==kP(o)&&"function"!=typeof o?CP(r):o,xP(CP(n),"state",{focusedItem:null,actualXPosition:0,actualYPosition:0,menuHeight:null,activeSubmenu:null}),xP(CP(n),"menuElement",jm.a.createRef()),xP(CP(n),"doAction",function(e,t,r){var o=n.props,a=o.menu,i=a.items,l=a.parentMenu,s=o.cleanupMenu,c=(i&&i.length>e&&i[e]||{}).action;"function"==typeof c&&c(t,r),n.closeMenu(!0),void 0!==l&&s(l)}),xP(CP(n),"closeMenu",function(e){var t=n.props,r=t.menu,o=r.id,a=r.onClose;(0,t.cleanupMenu)(o),"function"==typeof a&&a(e)}),xP(CP(n),"itemIsFocusable",function(e){return(e.enabled||void 0===e.enabled)&&("colorpicker"===e.type||"item"===e.type||"submenu"===e.type)}),xP(CP(n),"claimFocus",function(e){n.setState({focusedItem:e}),n.closeSubmenu()}),xP(CP(n),"delegateFocus",function(e,t){var r=n.props.menu.items,o=t>0?1:-1;if(!r||!r.length||"number"!=typeof e)return!1;var a=(e+r.length)%r.length,i=0;do{a=((a+=o)+r.length)%r.length,i+=1}while(!n.itemIsFocusable(r[a])&&i<r.length);return!!n.itemIsFocusable(r[a])&&(n.claimFocus(a),!0)}),xP(CP(n),"closeSubmenu",function(){var e=n.props.cleanupMenu;n.hasActiveSubmenu()&&(e(n.state.activeSubmenu),n.activeSubmenu=null)}),xP(CP(n),"hasActiveSubmenu",function(){var e=n.props.isMenuOpen,t=n.state.activeSubmenu;if(!t)return!1;var r=e(t);return r||n.setState({activeSubmenu:null}),r}),xP(CP(n),"onSubmenuOpen",function(e){n.hasActiveSubmenu()&&n.state.activeSubmenu!==e&&n.closeSubmenu(),n.setState({activeSubmenu:e})}),xP(CP(n),"normalizeMenuPosition",function(){var e,t,r=n.props.menu,o=r.xPosition,a=r.yPosition,i=r.anchorElement,l=window.innerHeight,s=window.innerWidth,c=n.menuElement.current.getBoundingClientRect(),u=i&&i.getBoundingClientRect();u?(e=o<0?u.left+o:o>0?u.right+o:u.left+u.width/2,t=a<0?u.top+a:a>0?u.bottom+a:u.top+u.height/2):(e=o,t=a),t<4&&(u&&a<0&&(t=u.bottom-a),t=Math.max(t,4)),e+c.width+4>s&&(u&&(e=o<0?u.right-o:o>0?u.left-o:e),e=Math.max(e-c.width,4));var d=c.height;d+8>l&&(d=l-8),t+d+4>l&&(u&&a>0&&(t=u.top-a),t=Math.max(Math.min(t-d,l-d-4),4));var f=document.scrollingElement||document.body;e+=f.scrollLeft,t+=f.scrollTop,n.setState({actualXPosition:e,actualYPosition:t,menuHeight:d!==c.height?d:null})}),xP(CP(n),"handleBodyClick",function(e){n.closeMenu()}),xP(CP(n),"handleMenuClick",function(e){e.stopImmediatePropagation()}),xP(CP(n),"handleContextMenu",function(e){e.preventDefault(),e.stopPropagation()}),xP(CP(n),"handleKeyPress",function(e){var t=e.keyCode,r=void 0===n.props.menu.parentMenu;return r&&e.preventDefault(),!n.hasActiveSubmenu()&&(27===t||!r&&37===t)&&(e.stopImmediatePropagation(),e.stopPropagation(),n.closeMenu(),!0)}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SP(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props.menu.items;this.normalizeMenuPosition();var n=t.filter(this.itemIsFocusable);this.claimFocus(null),setTimeout(function(){n&&n.length&&e.claimFocus(t.indexOf(n[0]))}),document.body.addEventListener("mousedown",this.handleBodyClick),this.menuElement.current.addEventListener("mousedown",this.handleMenuClick),document.body.addEventListener("keydown",this.handleKeyPress)}},{key:"componentDidUpdate",value:function(e,t){e.menu.xPosition===this.props.menu.xPosition&&e.menu.yPosition===this.props.menu.yPosition&&e.menu.anchorElement===this.props.menu.anchorElement||this.normalizeMenuPosition()}},{key:"componentWillUnmount",value:function(){this.claimFocus(null),document.body.removeEventListener("mousedown",this.handleBodyClick),this.menuElement&&this.menuElement.current.removeEventListener("mousedown",this.handleMenuClick),document.body.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.focusedItem,o=n.actualXPosition,a=n.actualYPosition,i=n.menuHeight,l=this.props,s=l.darkmodeEnabled,c=l.menu,u=c.id,d=c.items,f="undefined"==typeof parentMenu,p=Object(Um.a)(GE.a.menu),h={left:o,top:a,height:"number"!=typeof i||isNaN(i)?void 0:i};return jm.a.createElement("div",{key:u,className:p,style:h,onContextMenu:this.handleContextMenu,ref:this.menuElement},f?jm.a.createElement(QE.a,null):null,d.map(function(n,o){if(void 0!==n.enabled&&!n.enabled)return null;switch(n.type){case"item":return e=n.type,jm.a.createElement(fP,{key:o,id:o,label:n.label,value:n.value,doAction:t.doAction,isFocused:o===r,claimFocus:t.claimFocus,delegateFocus:t.delegateFocus});case"colorpicker":return e=n.type,jm.a.createElement(wP,{key:o,id:o,label:n.label,value:n.value,darkmodeEnabled:s,doAction:t.doAction,isFocused:o===r,claimFocus:t.claimFocus,delegateFocus:t.delegateFocus});case"divider":return"divider"===e||null===e?null:(e=n.type,jm.a.createElement("div",{key:o,className:GE.a.divider}));case"submenu":return e=n.type,jm.a.createElement(fP,{key:o,id:o,label:n.label,value:n.value,isFocused:o===r,claimFocus:t.claimFocus,delegateFocus:t.delegateFocus,parentMenu:u,submenuItems:n.items,onSubmenuOpen:t.onSubmenuOpen});default:return null}}))}}])&&_P(n.prototype,r),o&&_P(n,o),t}();xP(EP,"propTypes",{menu:Am.a.shape({xPosition:Am.a.number.isRequired,yPosition:Am.a.number.isRequired,items:Am.a.array.isRequired,parentMenu:Am.a.string,onClose:Am.a.func,id:Am.a.string.isRequired,anchorElement:Am.a.object}).isRequired,cleanupMenu:Am.a.func.isRequired,isMenuOpen:Am.a.func.isRequired,darkmodeEnabled:Am.a.bool});var PP=EP;function jP(e){var t=e.menus,n=void 0===t?{}:t,r=e.cleanupMenu,o=e.darkmodeEnabled,a=Object(Um.a)("menucontainer",GE.a.container),i=Object.keys(n),l=function(e){return i.includes(e)};return jm.a.createElement(YE.a,{className:a},i.map(function(e){return jm.a.createElement(XE.a,{key:e,classNames:{enter:GE.a.menu_enter,enterActive:GE.a.menu_enter_active,exit:GE.a.menu_exit,exitActive:GE.a.menu_exit_active},unmountOnExit:!0,appear:!0,timeout:{enter:300,exit:200}},jm.a.createElement(PP,{key:e,menu:n[e],cleanupMenu:r,darkmodeEnabled:o,isMenuOpen:l}))}))}jP.propTypes={menus:Am.a.object.isRequired,cleanupMenu:Am.a.func.isRequired,darkmodeEnabled:Am.a.bool.isRequired};var MP={cleanupMenu:Pe.cleanupMenu},AP=Object(Tm.b)(function(e){return{menus:e.menu.menus,darkmodeEnabled:Gi.isDarkmodeEnabled(e)}},MP)(jP),TP=n(1727),NP=n.n(TP),DP=n(1783),LP=n.n(DP);function RP(e){return(RP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zP(e){return(zP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FP(e,t){return(FP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function WP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HP=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=zP(t).call(this,e),n=!o||"object"!==RP(o)&&"function"!=typeof o?BP(r):o,WP(BP(n),"showTooltip",function(e){n.setState({tooltip:jm.a.createElement(Px,{rect:wt(e)},fh.a.t(n.props.label))})}),WP(BP(n),"handleHover",function(e){n.hoverTimeout||(n.hoverTimeout=window.setTimeout(n.showTooltip.bind(BP(n),e.target),400)),n.setState({isHovered:!0})}),WP(BP(n),"handleUnhover",function(e){n.hoverTimeout&&(window.clearTimeout(n.hoverTimeout),n.hoverTimeout=null),n.setState({isHovered:!1,tooltip:null})}),WP(BP(n),"handleClick",function(e){var t=n.props.doAction;"function"==typeof t&&t(e.clientX,e.clientY)}),n.hoverTimeout=null,n.state={isHovered:!1,tooltip:null},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&FP(e,t)}(t,Pm["PureComponent"]),n=t,(r=[{key:"componentWillUnmount",value:function(){this.hoverTimeout&&window.clearTimeout(this.hoverTimeout)}},{key:"render",value:function(){var e=this.props.icon,t=this.state,n=t.isHovered,r=t.tooltip,o=Object(Um.a)(LP.a.actionbutton,n&&LP.a.hover);return jm.a.createElement("div",{className:o,onMouseEnter:this.handleHover,onMouseLeave:this.handleUnhover,onClick:this.handleClick},jm.a.createElement(Ng.a,{className:LP.a.icon,svg:e}),r)}}])&&IP(n.prototype,r),o&&IP(n,o),t}();function $P(e){return($P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VP(e){return(VP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UP(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function KP(e,t){return(KP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}WP(HP,"propTypes",{id:Am.a.number.isRequired,icon:Am.a.object.isRequired,label:Am.a.string.isRequired,doAction:Am.a.func});var XP=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=VP(t).call(this,e),n=!o||"object"!==$P(o)&&"function"!=typeof o?UP(r):o,YP(UP(n),"handleContextMenu",function(e){e.preventDefault(),e.stopPropagation()}),YP(UP(n),"handleTargetMutation",function(e){n.reposition()}),YP(UP(n),"handleResize",function(e){n.reposition(),n.resizeTimeout=window.setTimeout(function(){n.reposition()},150)}),YP(UP(n),"reinitalizeObserver",function(){var e=n.props.popoverMenu.targetElement;n.mutationObserver||(n.mutationObserver=new window.MutationObserver(n.handleTargetMutation)),n.mutationObserver.disconnect(),n.mutationObserver.observe(e,{attributes:!0,attributeFilter:["src","width","height","style","data-popover-update"]})}),n.state={xPosition:0,yPosition:0},n.mutationObserver=null,n.resizeTimeout=null,n.popoverMenuElement=jm.a.createRef(),n.handleResize=ve()(n.handleResize,400,{leading:!0,maxWait:200,trailing:!0}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KP(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"reposition",value:function(){var e=this.props.popoverMenu.targetElement;if(e&&"function"==typeof e.getBoundingClientRect&&this.popoverMenuElement.current&&"function"==typeof this.popoverMenuElement.current.getBoundingClientRect){var t=document.scrollingElement||document.body,n=t.scrollHeight,r=t.scrollWidth,o=e.getBoundingClientRect();if(0!==o.x||0!==o.y){var a=.5*(o.left+o.right),i=o.top;a+=t.scrollLeft,i+=t.scrollTop;var l=this.popoverMenuElement.current.getBoundingClientRect();a-=.5*l.width,i-=l.height+2,a=Math.min(a,r-4-l.width),a=Math.max(a,4),i=Math.min(i,n-4-l.height),i=Math.max(i,4),this.setState({xPosition:Math.round(a),yPosition:Math.round(i)})}}}},{key:"componentDidMount",value:function(){this.props.popoverMenu.targetElement&&(this.reposition(),this.reinitalizeObserver()),window.addEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e,t){e.popoverMenu.targetElement!==this.props.popoverMenu.targetElement&&(this.reposition(),this.reinitalizeObserver())}},{key:"componentWillUnmount",value:function(){this.mutationObserver&&this.mutationObserver.disconnect(),window.removeEventListener("resize",this.handleResize),clearTimeout(this.resizeTimeout)}},{key:"render",value:function(){var e=this.state,t=e.xPosition,n=e.yPosition,r=this.props,o=r.popoverMenu,a=o.id,i=o.items,l=r.className,s=Object(Um.a)(NP.a.popovermenu,l);return jm.a.createElement("div",{key:a,className:s,style:{left:t,top:n},onContextMenu:this.handleContextMenu,ref:this.popoverMenuElement},i.map(function(e,t){return void 0===e.enabled||e.enabled?jm.a.createElement(HP,{key:t,id:t,icon:e.icon,label:e.label,doAction:e.action}):null}))}}])&&qP(n.prototype,r),o&&qP(n,o),t}();YP(XP,"propTypes",{popoverMenu:Am.a.shape({targetElement:Am.a.instanceOf(window.Node).isRequired,id:Am.a.string.isRequired,enabled:Am.a.bool.isRequired,items:Am.a.array.isRequired,darkmodeEnabled:Am.a.bool}).isRequired});var ZP=XP;function GP(e){var t=e.popoverMenus,n=void 0===t?{}:t,r=Object(Um.a)("popovermenucontainer",NP.a.container);return jm.a.createElement(YE.a,{className:r},Object.keys(n).map(function(e,t){return jm.a.createElement(XE.a,{key:e,classNames:{enter:NP.a.popovermenu_enter,enterActive:NP.a.popovermenu_enter_active,exit:NP.a.popovermenu_exit,exitActive:NP.a.popovermenu_exit_active},unmountOnExit:!0,appear:!0,timeout:{enter:300,exit:200}},jm.a.createElement(ZP,{key:e,popoverMenu:n[e]}))}))}GP.propTypes={popoverMenus:Am.a.object};var JP=Object(Tm.b)(function(e){return{popoverMenus:e.popoverMenu.popoverMenus}},{})(GP),QP=n(1707),ej=n.n(QP);function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rj(e){return(rj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aj(e,t){return(aj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ij=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=rj(t).call(this,e),(n=!o||"object"!==tj(o)&&"function"!=typeof o?oj(r):o).getScalerRef=function(e){n.scalerRef_=e},n.getPositionerRef=function(e){n.positionerRef_=e},n.handleTransitionEnd=n.handleTransitionEnd.bind(oj(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aj(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"addTransitionListeners",value:function(){this.scalerRef_&&this.scalerRef_.addEventListener("transitionend",this.handleTransitionEnd),this.positionerRef_&&this.positionerRef_.addEventListener("transitionend",this.handleTransitionEnd)}},{key:"removeTransitionListeners",value:function(){this.scalerRef_&&this.scalerRef_.removeEventListener("transitionend",this.handleTransitionEnd),this.positionerRef_&&this.positionerRef_.removeEventListener("transitionend",this.handleTransitionEnd)}},{key:"handleTransitionEnd",value:function(){this.props.onTransitionEnd()}},{key:"componentDidMount",value:function(){this.props.animating&&this.addTransitionListeners()}},{key:"componentWillUnmount",value:function(){this.props.animating&&this.removeTransitionListeners()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.animating&&!e.animating?this.removeTransitionListeners():!this.props.animating&&e.animating&&this.addTransitionListeners()}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.opacity,r=e.transform,o=e.height,a=e.width,i=e.viewportWidth,l=e.viewportHeight,s=e.onMouseLeave,c=Math.round(i/2+r.center.x),u=Math.round(l/2+r.center.y),d={transform:"translate3d(".concat(c,"px, ").concat(u,"px, 0)")},f={opacity:n,width:a,height:o,transform:["translate3d(-50%, -50%, 0)","scale(".concat(r.scale,", ").concat(r.scale,")")].join(" ")};return jm.a.createElement("div",{className:ej.a.item,onMouseLeave:s},jm.a.createElement("div",{className:ej.a.positioner,style:d,ref:this.getPositionerRef},jm.a.createElement("div",{className:ej.a.scaler,style:f,ref:this.getScalerRef},jm.a.createElement("img",{src:t,"data-item":"true"}))))}}])&&nj(n.prototype,r),o&&nj(n,o),t}();function lj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var uj=60,dj=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t||{},o=r.$node,a=r.dom,i=o.nodeAfter;this.dom=a,this.src=i.attrs.url,this.reference=i.attrs.reference,this.width=a.naturalWidth,this.height=a.naturalHeight,this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight-uj,this.title=i.attrs.filename||"Untitled",this.opacity=1,this.paddings={top:30,right:80,bottom:30,left:80},this.drag_={event:null,item:null},this.updater_=n,this.animating_=!1,this.animationSafatyTimer_=null,this.animationCallback_=null,this.fit_=null,this.current=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lj(n,!0).forEach(function(t){sj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lj(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.fit),this.startAnimatedChange=this.startAnimatedChange.bind(this),this.stopAnimatedChange=this.stopAnimatedChange.bind(this),this.cleanup=this.cleanup.bind(this)}var t,n,r;return t=e,r=[{key:"ToolbarHeight",get:function(){return uj}},{key:"AnimationSafetyInterval",get:function(){return 300}}],(n=[{key:"startDragging",value:function(e,t){return!this.drag_.event&&!this.drag_.img&&(this.drag_={event:{x:e,y:t},img:this.current.center},!0)}},{key:"stopDragging",value:function(){return!(!this.drag_.event&&!this.drag_.img)&&(this.drag_={event:null,img:null},this.rebalance(),!0)}},{key:"drag",value:function(e,t){if(!this.drag_.event||!this.drag_.img)return!1;var n=this.drag_.event.x-e,r=this.drag_.event.y-t;return this.current={scale:this.current.scale,center:{x:this.drag_.img.x-n,y:this.drag_.img.y-r}},!0}},{key:"deltaScale",value:function(e,t,n){var r=Math.max(.5*this.fit.scale,Math.min(2,this.current.scale*(1+-e/500))),o=this.current,a=o.scale,i=o.center;return r!==a&&(this.current={scale:r,center:this.recalculateBoundedCenter({scale:r,center:i})},!0)}},{key:"clickScale",value:function(e){if(e>0&&!this.zoomInEnabled||e<0&&!this.zoomOutEnabled)return!1;var t,n=.5*this.fit.scale,r=this.current,o=r.scale,a=r.center;if(o>1||o>=1&&e>0){t=e>0?o+.25:o-.25,t=Math.max(1,Math.min(2,t))}else{var i=(1-n)/4;t=e>0?o+i:o-i,t=Math.max(n,Math.min(1,t))}return this.startAnimatedChange({scale:t,center:this.recalculateBoundedCenter({scale:t,center:a})}),!0}},{key:"recalculateOriginTransform",value:function(){var e=this.dom.getBoundingClientRect();return{scale:Math.min(e.height/this.height,e.width/this.width),center:{x:e.left+e.width/2-this.viewportWidth/2,y:e.top+e.height/2-this.viewportHeight/2-uj}}}},{key:"recalculateBoundedCenter",value:function(e){var t=e.center,n=t.x,r=t.y,o=this.width*e.scale,a=this.height*e.scale;if(this.viewportWidth>o)n=0;else{var i=(o-this.viewportWidth)/2;n=Math.max(-i,Math.min(i,n))}if(this.viewportHeight>a)r=0;else{var l=(a-this.viewportHeight)/2;r=Math.max(-l,Math.min(l,r))}return{x:n,y:r}}},{key:"resize",value:function(){this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight-uj;var e=this.fit_.scale,t=this.current.scale;this.fit_=null;var n=this.fit.scale,r=e===t?n:t<n?Math.max(t,n):t,o=this.current.center;this.startAnimatedChange({scale:r,center:this.recalculateBoundedCenter({scale:r,center:o})})}},{key:"rebalance",value:function(){var e=this.recalculateBoundedCenter(this.current),t=this.current.scale<this.fit.scale?this.fit.scale:this.current.scale;e.x===this.current.center.x&&e.y===this.current.center.y&&t===this.current.scale||this.startAnimatedChange({scale:t,center:e})}},{key:"stopAnimatedChange",value:function(){this.animating_&&(this.animating_=!1,this.updater_(this),this.animationCallback_&&this.animationCallback_()),this.animationCallback_=null}},{key:"startAnimatedChange",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.animatedChangedTimeout=setTimeout(function(){clearTimeout(t.animationSafatyTimer_),t.animationSafatyTimer_=setTimeout(function(){t.stopAnimatedChange()},300),t.animationCallback_=r,t.current=e,t.opacity=n,t.animating_=!0,t.updater_(t)},10)}},{key:"cleanup",value:function(){clearTimeout(this.animatedChangedTimeout)}},{key:"animating",get:function(){return this.animating_}},{key:"zoomable",get:function(){return.5*this.fit.scale<2}},{key:"zoomInEnabled",get:function(){return this.current.scale<2}},{key:"zoomOutEnabled",get:function(){return this.current.scale>.5*this.fit.scale}},{key:"fit",get:function(){if(!this.fit_){var e=this.viewportWidth-this.paddings.left-this.paddings.right,t=this.viewportHeight-this.paddings.top-this.paddings.bottom,n=1;(t<this.height||e<this.width)&&(n=Math.min(t/this.height,e/this.width)),this.fit_={scale:n,center:{x:0,y:0}}}return this.fit_}}])&&cj(t.prototype,n),r&&cj(t,r),e}(),fj=function(e){var t=e.zoom,n=e.zoomInEnabled,r=e.zoomIn,o=e.zoomOutEnabled,a=e.zoomOut;return jm.a.createElement("div",{className:ej.a.zoomControl},jm.a.createElement("button",{className:Object(Um.a)(ej.a.btnZoomIn,!o&&ej.a.disabled),onClick:a},"-"),jm.a.createElement("span",{className:ej.a.lblZoom},"".concat(100*t|0,"%")),jm.a.createElement("button",{className:Object(Um.a)(ej.a.btnZoomIn,!n&&ej.a.disabled),onClick:r},"+"))},pj=new ev.a({id:"YCLVq",use:"YCLVq-usage",viewBox:"0 0 20 34",content:'<symbol viewBox="0 0 20 34" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="YCLVq">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-19.000000, -13.000000)">\n            <polyline stroke="#000000" stroke-width="3" transform="translate(30.000000, 30.000000) rotate(90.000000) translate(-30.000000, -30.000000) " points="14 38 30.0000003 22 46 38" />\n        </g>\n    </g>\n</symbol>'}),hj=(nv.a.add(pj),pj),mj=new ev.a({id:"-BRGz",use:"-BRGz-usage",viewBox:"0 0 20 34",content:'<symbol viewBox="0 0 20 34" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="-BRGz">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-19.000000, -13.000000)">\n            <polyline stroke="#000000" stroke-width="3" transform="translate(30.000000, 30.000000) rotate(-90.000000) translate(-30.000000, -30.000000) " points="14 38 30.0000003 22 46 38" />\n        </g>\n    </g>\n</symbol>'}),gj=(nv.a.add(mj),mj),yj=new ev.a({id:"zUy_u",use:"zUy_u-usage",viewBox:"0 0 18 18",content:'<symbol viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="zUy_u">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g transform="translate(-11.000000, -11.000000)">\n            <g transform="translate(20.000000, 20.000000) rotate(-135.000000) translate(-20.000000, -20.000000) translate(9.000000, 9.000000)" fill="#000000">\n                <rect x="10" y="-9.05941988e-14" width="2" height="22" />\n                <rect transform="translate(11.000000, 11.000000) rotate(-90.000000) translate(-11.000000, -11.000000) " x="10" y="1.72306613e-13" width="2" height="22" />\n            </g>\n        </g>\n    </g>\n</symbol>'}),vj=(nv.a.add(yj),yj);function bj(e){return(bj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kj(e){return(kj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oj(e,t){return(Oj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cj=function(e){function t(e){var n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,o=kj(t).call(this,e),n=!o||"object"!==bj(o)&&"function"!=typeof o?_j(r):o;var a=e.initialIndex>-1?e.initialIndex:0;e.translucent;return n.updater_=function(e){e===n.state.meta&&n.setState({meta:e})},n.timer_=null,n.dragPoint_=null,n.state={index:a,opaque:!1,active:!1,dragging:!1,navigation:e.items.length>1,meta:null,altKey:!1},n.handleButtonClose=n.handleButtonClose.bind(_j(n)),n.handleNext=n.handleNext.bind(_j(n)),n.handlePrevious=n.handlePrevious.bind(_j(n)),n.handleZoomIn=n.handleZoomIn.bind(_j(n)),n.handleZoomOut=n.handleZoomOut.bind(_j(n)),n.handleScale=n.handleScale.bind(_j(n)),n.handleDragStart=n.handleDragStart.bind(_j(n)),n.handleDragStop=n.handleDragStop.bind(_j(n)),n.handleDragging=n.handleDragging.bind(_j(n)),n.handleMouseOut=n.handleMouseOut.bind(_j(n)),n.handleItemMouseLeave=n.handleItemMouseLeave.bind(_j(n)),n.handleResize=n.handleResize.bind(_j(n)),n.handleKeyDown=n.handleKeyDown.bind(_j(n)),n.handleKeyUp=n.handleKeyUp.bind(_j(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oj(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"appear",value:function(){var e=this,t=this.props,n=t.animated,r=t.isVisibleInView;clearTimeout(this.timer_),this.timer_=setTimeout(function(){var t=e.props.items[e.state.index],o=new dj(t,e.updater_);n&&r(t)?o.current=o.recalculateOriginTransform():n&&(o.opacity=0),e.setState({meta:o,active:!0}),o.startAnimatedChange(o.fit,1)},10)}},{key:"disappear",value:function(){var e=this.props,t=e.animated,n=e.isVisibleInView,r=e.onClose,o=this.state,a=o.opaque,i=o.meta;if(clearTimeout(this.timer_),!t||a)this.props.onClose();else{n(this.props.items[this.state.index])?i.startAnimatedChange(i.recalculateOriginTransform(),1,r):i.startAnimatedChange(i.current,0,r),this.setState({active:!1})}}},{key:"go",value:function(e){var t=this.props,n=t.items,r=t.onChange,o=this.state.index;e!==o&&(e=Math.max(Math.min(n.length-1,e),0),this.setState({dragging:!1,index:e,meta:new dj(n[e],this.updater_)},function(){r(n[e])}))}},{key:"goNext",value:function(){this.go(this.state.index+1>=this.props.items.length?0:this.state.index+1)}},{key:"goPrevious",value:function(){this.go(0===this.state.index?this.props.items.length-1:this.state.index-1)}},{key:"handleButtonClose",value:function(){this.disappear()}},{key:"handleNext",value:function(){this.goNext()}},{key:"handlePrevious",value:function(){this.goPrevious()}},{key:"handleZoomIn",value:function(){this.state.meta.clickScale(1)}},{key:"handleZoomOut",value:function(){this.state.meta.clickScale(-1)}},{key:"handleKeyDown",value:function(e){if(this.state.active){var t=e.keyCode;18===t?(this.setState({altKey:!0}),e.preventDefault()):27===t||32===t?(this.disappear(),e.preventDefault()):39===t?(this.goNext(),e.preventDefault()):37===t?(this.goPrevious(),e.preventDefault()):40===t?(this.state.meta.clickScale(-1),e.preventDefault()):38===t&&(this.state.meta.clickScale(1),e.preventDefault())}}},{key:"handleKeyUp",value:function(e){this.state.active&&18===e.keyCode&&(this.setState({altKey:!1}),e.preventDefault())}},{key:"handleDragStart",value:function(e){var t=this.state,n=t.active,r=(t.meta,"IMG"===e.target.tagName&&e.target.hasAttribute("data-item"));this.dragPoint_=null,n&&r&&ms(e)===ss.Left&&(this.dragPoint_={x:e.clientX,y:e.clientY},e.preventDefault())}},{key:"handleDragging",value:function(e){if(this.dragPoint_){var t=this.state,n=t.dragging,r=t.meta,o=this.dragPoint_,a=o.x,i=o.y,l=e.clientX,s=e.clientY;n&&r.drag(l,s)?this.setState({meta:r}):!n&&Math.sqrt(Math.pow(a-l,2)+Math.pow(i-s,2))>4&&r.startDragging(l,s)&&this.setState({dragging:!0,meta:r})}}},{key:"handleDragStop",value:function(e){e.preventDefault();var t=this.state,n=t.meta,r=t.dragging,o=(t.active,t.altKey),a=e.target.classList.contains(ej.a.item),i="IMG"===e.target.tagName&&e.target.hasAttribute("data-item");this.dragPoint_=null,r&&n.stopDragging()?this.setState({dragging:!1,meta:n}):!r&&i&&o?this.handleZoomOut():!r&&i?this.handleZoomIn():!r&&a&&this.disappear()}},{key:"handleItemMouseLeave",value:function(e){var t=this.state,n=t.meta,r=t.dragging;this.dragPoint_=null,r&&n.stopDragging()&&this.setState({dragging:!1,meta:n})}},{key:"handleMouseOut",value:function(e){var t=this.state,n=t.meta;t.dragging&&!e.relatedTarget&&n.stopDragging()&&this.setState({dragging:!1,meta:n})}},{key:"handleScale",value:function(e){var t=this.state,n=t.active,r=t.dragging,o=t.meta;n&&!r&&o.zoomable&&o.deltaScale(e.deltaY,e.clientX,e.clientY)&&this.setState({meta:o})}},{key:"handleResize",value:function(){this.state.active&&(this.state.meta.resize(),this.state.opaque||this.setState({opaque:!0}))}},{key:"componentDidMount",value:function(){document.body.addEventListener("keydown",this.handleKeyDown),document.body.addEventListener("keyup",this.handleKeyUp),window.addEventListener("mouseout",this.handleMouseOut),window.addEventListener("resize",this.handleResize),this.appear()}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.handleKeyDown),document.body.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("mouseout",this.handleMouseOut),window.removeEventListener("resize",this.handleResize),clearTimeout(this.timer_),this.state.meta&&this.state.meta.cleanup()}},{key:"render",value:function(){var e=this.state,t=e.meta,n=e.navigation,r=e.opaque,o=e.active,a=e.dragging,i=e.altKey,l=this.props.animated,s=Object(Um.a)("previewcontainer",ej.a.preview,t&&l&&ej.a.animated,o&&ej.a.active,r&&ej.a.opaque,!n&&ej.a.nonav,a&&ej.a.dragging,t&&t.animating&&ej.a.animating,t&&t.zoomInEnabled&&!i&&ej.a.zoomIn,t&&t.zoomOutEnabled&&i&&ej.a.zoomOut);return jm.a.createElement("div",{className:s,onWheel:this.handleScale,onMouseDown:this.handleDragStart,onMouseUp:this.handleDragStop,onMouseMove:this.handleDragging},jm.a.createElement("div",{className:ej.a.toolbar},t&&jm.a.createElement(fj,{zoom:t.current.scale,zoomIn:this.handleZoomIn,zoomInEnabled:t.zoomInEnabled,zoomOut:this.handleZoomOut,zoomOutEnabled:t.zoomOutEnabled}),jm.a.createElement("div",{className:ej.a.lblTitle},t?t.title:""),jm.a.createElement("div",{className:ej.a.lblFlex}),jm.a.createElement("button",{className:ej.a.btnClose,onClick:this.handleButtonClose},jm.a.createElement(Ng.a,{svg:vj}))),jm.a.createElement("button",{className:ej.a.btnPrev,onClick:this.handlePrevious},jm.a.createElement(Ng.a,{svg:gj})),jm.a.createElement("button",{className:ej.a.btnNext,onClick:this.handleNext},jm.a.createElement(Ng.a,{svg:hj})),t&&jm.a.createElement(ij,{onAction:this.handleItemAction,onTransitionEnd:t.stopAnimatedChange,animating:t.animating,src:t.src,transform:t.current,opacity:t.opacity,height:t.height,width:t.width,viewportHeight:t.viewportHeight,viewportWidth:t.viewportWidth,onMouseLeave:this.handleItemMouseLeave}))}}])&&wj(n.prototype,r),o&&wj(n,o),t}();Cj.defaultProps={animated:!0,translucent:!0,initialIndex:-1,items:[]};ej.a;var Sj=n(1146),xj=n(1784),Ej=n.n(xj);function Pj(e){return(Pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mj(e){return(Mj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tj(e,t){return(Tj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nj=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=Mj(t).call(this,e))||"object"!==Pj(o)&&"function"!=typeof o?Aj(r):o).state={value:e.value||"",isFocused:!1},n.handleFocus=n.handleFocus.bind(Aj(n)),n.handleBlur=n.handleBlur.bind(Aj(n)),n.handleInput=n.handleInput.bind(Aj(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tj(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"handleFocus",value:function(){this.setState({isFocused:!0})}},{key:"handleBlur",value:function(){this.setState({isFocused:!1})}},{key:"handleInput",value:function(e){var t=this.props.onChange,n=e.target.value;this.setState({value:n}),"function"==typeof t&&t(n)}},{key:"componentDidMount",value:function(){this.inputEl.value=this.state.value}},{key:"componentDidUpdate",value:function(e,t){!e.active&&this.props.active&&(this.setState({value:this.props.value}),this.inputEl.value=this.props.value||"")}},{key:"render",value:function(){var e=this,t=this.props.placeholder,n=this.state,r=(n.value,n.isFocused),o=Object(Um.a)(Ej.a.container,r&&Ej.a.focus);return jm.a.createElement("div",{className:o},jm.a.createElement("input",{className:Ej.a.field,type:"text",placeholder:fh.a.t(t),onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleInput,ref:function(t){return e.inputEl=t}}))}}])&&jj(n.prototype,r),o&&jj(n,o),t}(),Dj=n(1785),Lj=n.n(Dj);function Rj(e){return(Rj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ij(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zj(e){return(zj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fj(e,t){return(Fj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wj=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=zj(t).call(this,e))||"object"!==Rj(o)&&"function"!=typeof o?Bj(r):o).state={type:e.type||"none",title:e.title||"",access:e.access||"private",hasResources:e.hasResources},n.dialogElement=null,n.textfield=null,n.handleBodyClick=n.handleBodyClick.bind(Bj(n)),n.handleSubmit=n.handleSubmit.bind(Bj(n)),n.handleCancelClick=n.handleCancelClick.bind(Bj(n)),n.handleTitleChange=n.handleTitleChange.bind(Bj(n)),n.handleAccessChange=n.handleAccessChange.bind(Bj(n)),n.handleKeyPress=n.handleKeyPress.bind(Bj(n)),n.handleBlur=n.handleBlur.bind(Bj(n)),n.handleFocusBefore=n.handleFocusBefore.bind(Bj(n)),n.handleFocusAfter=n.handleFocusAfter.bind(Bj(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fj(e,t)}(t,Pm["PureComponent"]),n=t,o=[{key:"defaultProps",get:function(){return{active:!1,closeDialog:function(){},doAction:function(){}}}}],(r=[{key:"handleActivate",value:function(){var e=this;this.documentOverflowY=document.scrollingElement.style.overflowY,document.scrollingElement.style.overflowY="hidden",this.dialogElement.classList.add(Lj.a.notransition),this.dialogElement.classList.add(Lj.a.intro),this.dialogElement.offsetHeight,this.dialogElement.classList.remove(Lj.a.notransition),this.dialogElement.classList.remove(Lj.a.intro),this.dialogElement.contains(document.activeElement)||this.dialogElement.focus(),setTimeout(function(){e.focusInput()}),document.body.addEventListener("mousedown",this.handleBodyClick),this.dialogElement.addEventListener("mousedown",this.handleDialogClick),document.body.addEventListener("keydown",this.handleKeyPress)}},{key:"handleDeactivate",value:function(){document.scrollingElement.style.overflowY=this.documentOverflowY,document.body.removeEventListener("mousedown",this.handleBodyClick),this.dialogElement.removeEventListener("mousedown",this.handleDialogClick),document.body.removeEventListener("keydown",this.handleKeyPress)}},{key:"close",value:function(e){var t=this.props,n=t.closeDialog,r=t.restoreRange;"function"==typeof n&&n(),e&&"function"==typeof r&&r()}},{key:"focusInput",value:function(e){if(!this.dialogElement)return!1;var t,n=Object(Um.c)(this.dialogElement);return n.length&&(t=e?n[n.length-1]:n[0]),!!t&&(t.focus(),!0)}},{key:"handleBodyClick",value:function(e){this.close(!1)}},{key:"handleDialogClick",value:function(e){e.stopPropagation()}},{key:"handleSubmit",value:function(e){var t=this.props.doAction,n=this.state,r=n.type,o=n.title,a=n.access;e.preventDefault(),("create"===r||"update"===r)&&o.trim().length<1||("function"==typeof t&&t({title:o.trim(),access:a}),this.close(!0))}},{key:"handleCancelClick",value:function(e){this.close(!0)}},{key:"handleTitleChange",value:function(e){this.setState({title:e})}},{key:"handleAccessChange",value:function(e){this.setState({access:e})}},{key:"handleKeyPress",value:function(e){return 27===e.keyCode&&(e.stopImmediatePropagation(),e.stopPropagation(),this.close(!0),!0)}},{key:"handleBlur",value:function(e){var t=this;setTimeout(function(){t.dialogElement&&t.dialogElement.contains(document.activeElement)||t.close(!1)})}},{key:"handleFocusBefore",value:function(){this.focusInput(!0)}},{key:"handleFocusAfter",value:function(){this.focusInput(!1)}},{key:"componentWillUnmount",value:function(){this.handleDeactivate()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.active&&!this.props.active?(this.setState({type:e.type||"none",title:e.title||"",access:e.access||"private",hasResources:e.hasResources}),this.handleActivate()):!e.active&&this.props.active&&this.handleDeactivate()}},{key:"render",value:function(){var e=this,t=this.props.active,n=this.state,r=n.type,o=n.title,a=n.hasResources,i=Object(Um.a)("templatedialogcontainer",Lj.a.container,t&&Lj.a.active),l=[];switch(r){case"create":l.push(jm.a.createElement("h3",{key:"title",className:Lj.a.title},fh.a.t("Save as template")));break;case"update":l.push(jm.a.createElement("h3",{key:"title",className:Lj.a.title},fh.a.t("Rename template")));break;case"delete":l.push(jm.a.createElement("h3",{key:"title",className:Lj.a.title},fh.a.t("Delete template")))}if("create"===r&&a&&l.push(jm.a.createElement("div",{key:"attachment-warning",className:Lj.a.warning},jm.a.createElement(Ng.a,{className:Lj.a.icon,svg:Sj.a}),fh.a.t("template-dialogs-create-warning"))),"delete"===r){var s="string"==typeof o?o.length>40?o.substring(0,40)+"…":o:"";fh.a.t("template-dialogs-delete-info",{TITLE:s}).split("\n\n").forEach(function(e,t){l.push(jm.a.createElement("p",{key:"delete-message-"+t,className:Lj.a.message},e))})}"create"!==r&&"update"!==r||(l.push(jm.a.createElement("h4",{key:"title-field-label",className:Lj.a.fieldlabel},fh.a.t("Title"))),l.push(jm.a.createElement(Nj,{key:"title-input",value:o,onChange:this.handleTitleChange,placeholder:"Title",active:t})));var c="Submit";switch(r){case"create":case"update":c=fh.a.t("Save");break;case"delete":c=fh.a.t("Delete")}return jm.a.createElement(Pm.Fragment,null,jm.a.createElement("div",{className:Lj.a.focusbumper,tabIndex:"0",onFocus:this.handleFocusBefore}),jm.a.createElement("form",{className:i,tabIndex:"-1",ref:function(t){return e.dialogElement=t},onSubmit:this.handleSubmit,onBlur:this.handleBlur},l,jm.a.createElement("div",{className:Lj.a.buttonsContainer},jm.a.createElement("button",{className:Object(Um.a)(Lj.a.button,Lj.a.primary),tabIndex:"0"},c),jm.a.createElement("button",{type:"button",className:Lj.a.button,tabIndex:"0",onClick:this.handleCancelClick},fh.a.t("Cancel")))),jm.a.createElement("div",{className:Lj.a.focusbumper,tabIndex:"0",onFocus:this.handleFocusAfter}))}}])&&Ij(n.prototype,r),o&&Ij(n,o),t}();Lj.a;function Hj(e){return(Hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $j(){return($j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qj(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vj(e,t){return!t||"object"!==Hj(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uj(e){return(Uj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kj(e,t){return(Kj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yj,Xj,Zj,Gj={comments:AE,linkPopover:KE,popoverMenu:JP,preview:Cj,templateDialog:Wj},Jj=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vj(this,Uj(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kj(e,t)}(t,Pm["Component"]),n=t,(r=[{key:"render",value:function(){var e=this,t=Object.keys(Gj).map(function(t){var n=e.props[t],r=Gj[t];return n&&r&&jm.a.createElement(r,$j({key:t},n))}).filter(Boolean);return jm.a.createElement(Pm.Fragment,null,t,jm.a.createElement(AP,null))}}])&&qj(n.prototype,r),o&&qj(n,o),t}();Zj={},(Xj="propTypes")in(Yj=Jj)?Object.defineProperty(Yj,Xj,{value:Zj,enumerable:!0,configurable:!0,writable:!0}):Yj[Xj]=Zj;var Qj=Object(Tm.b)(function(e){return e},{})(Jj);function eM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,"default",function(){return nM});var tM="81.0.9857",nM=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"updateWithStore",function(){var e=Me.default.getState(),n=Object(Gi.isDarkmodeEnabled)(e);t.currentValues.darkmode!==n&&(t.currentValues.darkmode=n,t.editor.syncDarkmode(n));var r=Object(Gi.getMargin)();t.currentValues.margin!==r&&(t.currentValues.margin=r,t.editor.setMarginAttributes(r));var o=Object(Gi.getClient)(),a=Object(Gi.getPlatform)();t.currentValues.client===o&&t.currentValues.platform===a||(t.currentValues.client=o,t.currentValues.platform=a,t.editor.setBodyClasses(o,a))}),this.editor=null,this.version=tM,this.isEditor=!0}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t){this.mediator=e,this.notify=t.notify,this.notifyAsync=t.notifyAsync,this.trigger=t.trigger,Te=this}},{key:"getVersion",value:function(){return this.version}},{key:"setup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.version=this.version,e.realtime={enabled:!1},e.id=e.peso&&e.peso.id||e.id,this.cleanup(),this.editor=new zS(e),ES(this.editor),this.editor.notify("setupDone",{module:"document"}),!0}},{key:"cleanup",value:function(){this.editor&&(this.editor.cleanup(),this.editor=null),this.storeUnsubscribe&&this.storeUnsubscribe()}},{key:"activate",value:function(){this.currentValues={},this.updateWithStore(),this.storeUnsubscribe=Me.default.subscribe(this.updateWithStore),document.body.classList.toggle("peso-activated",!0);var e=this.editor.view;return e.hasFocus()&&e.someProp("onFocus",function(t){return t(e)}),this.editor.setEditorMode("semantic"),this.editor.setActive(!0),this.editor.maybeContextChangedNotification(!0),!0}},{key:"deactivate",value:function(){document.body.classList.toggle("peso-activated",!1),this.storeUnsubscribe&&this.storeUnsubscribe(),this.editor&&this.editor.setActive(!1)}},{key:"run",value:function(){return!1}},{key:"execCommand",value:function(e,t,n){var r=this.editor.execCommand(e,t,n);return r="string"==typeof r?r:JSON.stringify(r)}},{key:"queryCommandState",value:function(e,t){return!!this.editor.queryCommandValue(e,t)}},{key:"queryCommandValue",value:function(e,t){var n=this.editor.queryCommandValue(e,t);return"string"==typeof n?n:JSON.stringify(n)}},{key:"queryCommandEnabled",value:function(e,t){return!!this.editor.queryCommandEnabled(e,t)}},{key:"getComponentManager",value:function(){return Qj}},{key:"getEditor",value:function(){return this.editor}}])&&eM(t.prototype,n),r&&eM(t,r),e}()},422:function(e,t,n){"use strict";var r=n(0),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.a=function(e){var t=e.svg,n=i(e,["svg"]);return o.a.createElement("svg",a({viewBox:t.viewBox},n),o.a.createElement("use",{xlinkHref:"#".concat(t.id)}))}}}]);