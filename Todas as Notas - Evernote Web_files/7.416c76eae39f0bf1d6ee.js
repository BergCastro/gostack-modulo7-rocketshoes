(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{3400:function(e,t,n){"use strict";n.r(t);var r={};n.d(r,"acquireNoteLock",function(){return c}),n.d(r,"authenticateToSharedNotebook",function(){return f}),n.d(r,"copyNote",function(){return v}),n.d(r,"createLinkedNotebook",function(){return m}),n.d(r,"createNote",function(){return w}),n.d(r,"createNotebook",function(){return P}),n.d(r,"createOrUpdateNotebookShares",function(){return O}),n.d(r,"createOrUpdateSharedNotes",function(){return L}),n.d(r,"createTag",function(){return I}),n.d(r,"deleteNote",function(){return G}),n.d(r,"expungeLinkedNotebook",function(){return D}),n.d(r,"expungeNote",function(){return F}),n.d(r,"expungeNotes",function(){return V}),n.d(r,"expungeNotebook",function(){return J}),n.d(r,"expungeTag",function(){return X}),n.d(r,"filteredSearch",function(){return $}),n.d(r,"findNotesMetadata",function(){return ne}),n.d(r,"findSearchSuggestionsV2",function(){return ae}),n.d(r,"findNoteCounts",function(){return ce}),n.d(r,"getDefaultNotebook",function(){return fe}),n.d(r,"getUserNotebook",function(){return ve}),n.d(r,"getFilteredSyncChunk",function(){return me}),n.d(r,"getLinkedNotebookSyncChunk",function(){return we}),n.d(r,"getLinkedNotebookSyncState",function(){return Pe}),n.d(r,"getNoteTagNames",function(){return Oe}),n.d(r,"getNoteLockStatus",function(){return Le}),n.d(r,"getNoteSnippets",function(){return Ie}),n.d(r,"getNoteWithResultSpec",function(){return Ge}),n.d(r,"getNotebook",function(){return De}),n.d(r,"getNotebookShares",function(){return Fe}),n.d(r,"getNoteShares",function(){return Ve}),n.d(r,"getOrCreateLinkedNotebook",function(){return Je}),n.d(r,"getPreferences",function(){return Xe}),n.d(r,"getSharedNotebookByAuth",function(){return $e}),n.d(r,"getSyncState",function(){return nt}),n.d(r,"getSyncStateWithMetrics",function(){return at}),n.d(r,"getWorkspaceUserInterfaceProperties",function(){return ct}),n.d(r,"setWorkspaceUserInterfaceLayoutStyle",function(){return ft}),n.d(r,"setNoteUserInterfaceDisplayOrder",function(){return vt}),n.d(r,"setNotebookUserInterfaceDisplayOrder",function(){return bt}),n.d(r,"setNotebookUserInterfaceColors",function(){return wt}),n.d(r,"listAccessibleBusinessNotebooks",function(){return Pt}),n.d(r,"listLinkedNotebooks",function(){return Ot}),n.d(r,"listNotebooks",function(){return Lt}),n.d(r,"listPublishedBusinessNotebooks",function(){return It}),n.d(r,"listSharedNotebooks",function(){return Gt}),n.d(r,"listTags",function(){return Dt}),n.d(r,"listTagsByNotebook",function(){return Ft}),n.d(r,"manageNotebookShares",function(){return Vt}),n.d(r,"manageNoteShares",function(){return Jt}),n.d(r,"releaseNoteLock",function(){return Xt}),n.d(r,"renameNotebook",function(){return $t}),n.d(r,"sendLogRequest",function(){return nn}),n.d(r,"setNotebookRecipientSettings",function(){return an}),n.d(r,"shareNote",function(){return sn}),n.d(r,"stopSharingNote",function(){return ln}),n.d(r,"updateNoteIfUsnMatches",function(){return dn}),n.d(r,"updateNotebook",function(){return yn}),n.d(r,"updatePreferences",function(){return kn}),n.d(r,"updateTag",function(){return Rn});var o=n(363),a=n(367);function u(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function i(){return(i=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function i(e){u(a,r,o,i,c,"next",e)}function c(e){u(a,r,o,i,c,"throw",e)}i(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","acquireNoteLock",function(e){return t.acquireNoteLock(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var c=function(e,t,n){return i.apply(this,arguments)};function s(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function p(){return(p=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){s(a,r,o,u,i,"next",e)}function i(e){s(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","authenticateToSharedNotebook",function(e){return t.authenticateToSharedNotebook(n,r||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var f=function(e,t,n){return p.apply(this,arguments)};function l(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function h(){return(h=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){l(a,r,o,u,i,"next",e)}function i(e){l(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","copyNote",function(e){return t.copyNote(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var v=function(e,t,n,r){return h.apply(this,arguments)};function d(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function b(){return(b=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){d(a,r,o,u,i,"next",e)}function i(e){d(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createLinkedNotebook",function(e){return t.createLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var m=function(e,t,n){return b.apply(this,arguments)};function y(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function g(){return(g=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){y(a,r,o,u,i,"next",e)}function i(e){y(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createNote",function(e){return t.createNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var w=function(e,t,n){return g.apply(this,arguments)};function k(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function x(){return(x=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){k(a,r,o,u,i,"next",e)}function i(e){k(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createNotebook",function(e){return t.createNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var P=function(e,t,n){return x.apply(this,arguments)};function R(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function N(){return(N=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){R(a,r,o,u,i,"next",e)}function i(e){R(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createOrUpdateNotebookShares",function(e){return t.createOrUpdateNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var O=function(e,t,n){return N.apply(this,arguments)};function S(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function j(){return(j=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){S(a,r,o,u,i,"next",e)}function i(e){S(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createOrUpdateSharedNotes",function(e){return t.createOrUpdateSharedNotes(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var L=function(e,t,n){return j.apply(this,arguments)};function T(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function E(){return(E=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){T(a,r,o,u,i,"next",e)}function i(e){T(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","createTag",function(e){return t.createTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var I=function(e,t,n){return E.apply(this,arguments)};function U(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function C(){return(C=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){U(a,r,o,u,i,"next",e)}function i(e){U(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","deleteNote",function(e){return t.deleteNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var G=function(e,t,n){return C.apply(this,arguments)};function _(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function W(){return(W=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_(a,r,o,u,i,"next",e)}function i(e){_(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeLinkedNotebook",function(e){return t.expungeLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var D=function(e,t,n){return W.apply(this,arguments)};function A(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function M(){return(M=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){A(a,r,o,u,i,"next",e)}function i(e){A(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNote",function(e){return t.expungeNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var F=function(e,t,n){return M.apply(this,arguments)};function q(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function B(){return(B=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){q(a,r,o,u,i,"next",e)}function i(e){q(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNotes",function(e){return t.expungeNotes(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var V=function(e,t,n){return B.apply(this,arguments)};function H(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Y(){return(Y=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){H(a,r,o,u,i,"next",e)}function i(e){H(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeNotebook",function(e){return t.expungeNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var J=function(e,t,n){return Y.apply(this,arguments)};function K(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function z(){return(z=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){K(a,r,o,u,i,"next",e)}function i(e){K(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","expungeTag",function(e){return t.expungeTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var X=function(e,t,n){return z.apply(this,arguments)};function Q(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Z(){return(Z=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Q(a,r,o,u,i,"next",e)}function i(e){Q(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","filteredSearch",function(e){return t.filteredSearch(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $=function(e,t,n,r){return Z.apply(this,arguments)};function ee(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function te(){return(te=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ee(a,r,o,u,i,"next",e)}function i(e){ee(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i,c){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findNotesMetadata",function(e){return t.findNotesMetadata(c||Object(o.a)(),n,r,u,i,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ne=function(e,t,n,r,o,a){return te.apply(this,arguments)};function re(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function oe(){return(oe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){re(a,r,o,u,i,"next",e)}function i(e){re(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findSearchSuggestionsV2",function(e){return t.findSearchSuggestionsV2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ae=function(e,t,n){return oe.apply(this,arguments)};function ue(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ie(){return(ie=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ue(a,r,o,u,i,"next",e)}function i(e){ue(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","findNoteCounts",function(e){return t.findNoteCounts(r||Object(o.a)(),n,!1,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ce=function(e,t,n){return ie.apply(this,arguments)};function se(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function pe(){return(pe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){se(a,r,o,u,i,"next",e)}function i(e){se(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getDefaultNotebook",function(e){return t.getDefaultNotebook(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var fe=function(e,t){return pe.apply(this,arguments)};function le(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function he(){return(he=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){le(a,r,o,u,i,"next",e)}function i(e){le(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getUserNotebook",function(e){return t.getUserNotebook(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ve=function(e,t){return he.apply(this,arguments)};function de(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function be(){return(be=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){de(a,r,o,u,i,"next",e)}function i(e){de(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getFilteredSyncChunk",function(e){return t.getFilteredSyncChunk(i||Object(o.a)(),n,r,u,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var me=function(e,t,n,r,o){return be.apply(this,arguments)};function ye(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ge(){return(ge=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ye(a,r,o,u,i,"next",e)}function i(e){ye(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u,i,c){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getLinkedNotebookSyncChunk",function(e){return t.getLinkedNotebookSyncChunk(c||Object(o.a)(),n,r,u,i,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var we=function(e,t,n,r,o,a){return ge.apply(this,arguments)};function ke(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xe(){return(xe=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ke(a,r,o,u,i,"next",e)}function i(e){ke(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getLinkedNotebookSyncState",function(e){return t.getLinkedNotebookSyncState(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Pe=function(e,t,n){return xe.apply(this,arguments)};function Re(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ne(){return(Ne=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Re(a,r,o,u,i,"next",e)}function i(e){Re(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteTagNames",function(e){return t.getNoteTagNames(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Oe=function(e,t,n){return Ne.apply(this,arguments)};function Se(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function je(){return(je=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Se(a,r,o,u,i,"next",e)}function i(e){Se(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteLockStatus",function(e){return t.getNoteLockStatus(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Le=function(e,t,n){return je.apply(this,arguments)};function Te(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ee(){return(Ee=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Te(a,r,o,u,i,"next",e)}function i(e){Te(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteSnippets",function(e){return t.getNoteSnippets(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ie=function(e,t,n,r){return Ee.apply(this,arguments)};function Ue(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ce(){return(Ce=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ue(a,r,o,u,i,"next",e)}function i(e){Ue(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteWithResultSpec",function(e){t.getNoteWithResultSpec(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ge=function(e,t,n,r){return Ce.apply(this,arguments)};function _e(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function We(){return(We=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_e(a,r,o,u,i,"next",e)}function i(e){_e(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNotebook",function(e){return t.getNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var De=function(e,t,n){return We.apply(this,arguments)};function Ae(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Me(){return(Me=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ae(a,r,o,u,i,"next",e)}function i(e){Ae(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNotebookShares",function(e){return t.getNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Fe=function(e,t,n){return Me.apply(this,arguments)};function qe(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Be(){return(Be=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qe(a,r,o,u,i,"next",e)}function i(e){qe(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getNoteShares",function(e){return t.getNoteShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ve=function(e,t,n){return Be.apply(this,arguments)};function He(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ye(){return(Ye=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){He(a,r,o,u,i,"next",e)}function i(e){He(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getOrCreateLinkedNotebook",function(e){return t.getOrCreateLinkedNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Je=function(e,t,n){return Ye.apply(this,arguments)};function Ke(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ze(){return(ze=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ke(a,r,o,u,i,"next",e)}function i(e){Ke(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getPreferences",function(e){return t.getPreferences(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Xe=function(e,t,n){return ze.apply(this,arguments)};function Qe(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ze(){return(Ze=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qe(a,r,o,u,i,"next",e)}function i(e){Qe(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSharedNotebookByAuth",function(e){return t.getSharedNotebookByAuth(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $e=function(e,t){return Ze.apply(this,arguments)};function et(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function tt(){return(tt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){et(a,r,o,u,i,"next",e)}function i(e){et(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSyncState",function(e){return t.getSyncState(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var nt=function(e,t){return tt.apply(this,arguments)};function rt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ot(){return(ot=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rt(a,r,o,u,i,"next",e)}function i(e){rt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getSyncStateWithMetrics",function(e){return t.getSyncStateWithMetrics(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var at=function(e,t,n){return ot.apply(this,arguments)};function ut(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function it(){return(it=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ut(a,r,o,u,i,"next",e)}function i(e){ut(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","getWorkspaceUserInterfaceProperties",function(e){return t.getWorkspaceUserInterfaceProperties(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ct=function(e,t,n){return it.apply(this,arguments)};function st(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function pt(){return(pt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){st(a,r,o,u,i,"next",e)}function i(e){st(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setWorkspaceUserInterfaceLayoutStyle",function(e){return t.setWorkspaceUserInterfaceLayoutStyle(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ft=function(e,t,n,r){return pt.apply(this,arguments)};function lt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ht(){return(ht=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){lt(a,r,o,u,i,"next",e)}function i(e){lt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNoteUserInterfaceDisplayOrder",function(e){return t.setNoteUserInterfaceDisplayOrder(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var vt=function(e,t,n,r){return ht.apply(this,arguments)};function dt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function bt(e,t,n,r){return mt.apply(this,arguments)}function mt(){return(mt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){dt(a,r,o,u,i,"next",e)}function i(e){dt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookUserInterfaceDisplayOrder",function(e){return t.setNotebookUserInterfaceDisplayOrder(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function yt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gt(){return(gt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yt(a,r,o,u,i,"next",e)}function i(e){yt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookUserInterfaceColors",function(e){return t.setNotebookUserInterfaceColors(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var wt=function(e,t,n,r){return gt.apply(this,arguments)};function kt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function xt(){return(xt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){kt(a,r,o,u,i,"next",e)}function i(e){kt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listAccessibleBusinessNotebooks",function(e){return t.listAccessibleBusinessNotebooks(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Pt=function(e,t,n){return xt.apply(this,arguments)};function Rt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Nt(){return(Nt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Rt(a,r,o,u,i,"next",e)}function i(e){Rt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listLinkedNotebooks",function(e){return t.listLinkedNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ot=function(e,t){return Nt.apply(this,arguments)};function St(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function jt(){return(jt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){St(a,r,o,u,i,"next",e)}function i(e){St(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listNotebooks",function(e){return t.listNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Lt=function(e,t){return jt.apply(this,arguments)};function Tt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Et(){return(Et=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Tt(a,r,o,u,i,"next",e)}function i(e){Tt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listPublishedBusinessNotebooks",function(e){return t.listPublishedBusinessNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var It=function(e,t){return Et.apply(this,arguments)};function Ut(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ct(){return(Ct=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ut(a,r,o,u,i,"next",e)}function i(e){Ut(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listSharedNotebooks",function(e){return t.listSharedNotebooks(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Gt=function(e,t){return Ct.apply(this,arguments)};function _t(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Wt(){return(Wt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_t(a,r,o,u,i,"next",e)}function i(e){_t(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listTags",function(e){return t.listTags(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Dt=function(e,t){return Wt.apply(this,arguments)};function At(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Mt(){return(Mt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){At(a,r,o,u,i,"next",e)}function i(e){At(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","listTagsByNotebook",function(e){return t.listTagsByNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ft=function(e,t,n){return Mt.apply(this,arguments)};function qt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Bt(){return(Bt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qt(a,r,o,u,i,"next",e)}function i(e){qt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","manageNotebookShares",function(e){t.manageNotebookShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Vt=function(e,t,n){return Bt.apply(this,arguments)};function Ht(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yt(){return(Yt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ht(a,r,o,u,i,"next",e)}function i(e){Ht(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","manageNoteShares",function(e){t.manageNoteShares(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Jt=function(e,t,n){return Yt.apply(this,arguments)};function Kt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function zt(){return(zt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Kt(a,r,o,u,i,"next",e)}function i(e){Kt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","releaseNoteLock",function(e){return t.releaseNoteLock(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Xt=function(e,t,n){return zt.apply(this,arguments)};function Qt(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Zt(){return(Zt=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qt(a,r,o,u,i,"next",e)}function i(e){Qt(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","renameNotebook",function(e){t.renameNotebook(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $t=function(e,t,n,r){return Zt.apply(this,arguments)};function en(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function tn(){return(tn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){en(a,r,o,u,i,"next",e)}function i(e){en(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","sendLogRequest",function(e){return t.sendLogRequest(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var nn=function(e,t,n){return tn.apply(this,arguments)};function rn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function on(){return(on=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rn(a,r,o,u,i,"next",e)}function i(e){rn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","setNotebookRecipientSettings",function(e){return t.setNotebookRecipientSettings(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var an=function(e,t,n,r){return on.apply(this,arguments)};function un(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cn(){return(cn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){un(a,r,o,u,i,"next",e)}function i(e){un(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","shareNote",function(e){return t.shareNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var sn=function(e,t,n){return cn.apply(this,arguments)};function pn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function fn(){return(fn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){pn(a,r,o,u,i,"next",e)}function i(e){pn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","stopSharingNote",function(e){return t.stopSharingNote(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ln=function(e,t,n){return fn.apply(this,arguments)};function hn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function vn(){return(vn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){hn(a,r,o,u,i,"next",e)}function i(e){hn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateNoteIfUsnMatches",function(e){return t.updateNoteIfUsnMatches(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var dn=function(e,t,n){return vn.apply(this,arguments)};function bn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function mn(){return(mn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bn(a,r,o,u,i,"next",e)}function i(e){bn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateNotebook",function(e){t.updateNotebook(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var yn=function(e,t,n){return mn.apply(this,arguments)};function gn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function wn(){return(wn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){gn(a,r,o,u,i,"next",e)}function i(e){gn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updatePreferences",function(e){t.updatePreferences(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var kn=function(e,t,n){return wn.apply(this,arguments)};function xn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pn(){return(Pn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xn(a,r,o,u,i,"next",e)}function i(e){xn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("notestore","updateTag",function(e){return t.updateTag(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Rn=function(e,t,n){return Pn.apply(this,arguments)},Nn=n(103),On=n(379),Sn=n(466),jn=n(29);function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tn=Object(jn.b)(),En=Tn.thriftProtocol,In=Tn.thriftTransport,Un=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=void 0,this.InterfaceConstructor=void 0}return function(e,t,n){t&&Ln(e.prototype,t),n&&Ln(e,n)}(e,[{key:"create",value:function(e){var t=In(e),n=En(t);return this.InterfaceConstructor(n)}},{key:"fromLocator",value:function(e){return this.fromString(Sn.a.fromLocator(e,this.endpoint))}},{key:"fromString",value:function(e){var t=this;return new Promise(function(n){n(t.create(e))})}}]),e}();function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gn(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _n(e){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Gn(this,(e=_n(t)).call.apply(e,[this].concat(o)))).endpoint="notestore",n.InterfaceConstructor=function(e){return new On.NoteStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(t,Un),t}()),An=n(366);function Mn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Fn(e){return qn.apply(this,arguments)}function qn(){return(qn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Mn(a,r,o,u,i,"next",e)}function i(e){Mn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebookGuid,r=t.notebookIdentifier,o=t.shardId,e.prev=1,a=An.a.newPersonalLocator(!0,o,null),e.next=5,Dn.fromLocator(a);case 5:return u=e.sent,e.next=8,f(u,r,null);case 8:return i=e.sent,e.abrupt("return",i.authenticationToken);case 12:e.prev=12,e.t0=e.catch(1),n&&Nn.a.publish("notebook","expungeNotebook",n);case 15:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var Bn=Fn;function Vn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Hn(){return(Hn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vn(a,r,o,u,i,"next",e)}function i(e){Vn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","addResource",function(e){return t.addResource(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.authenticateToSharedNotebook",function(e){return Fn(e)});var Yn=function(e,t,n){return Hn.apply(this,arguments)};function Jn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Kn(){return(Kn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Jn(a,r,o,u,i,"next",e)}function i(e){Jn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","createWorkspace",function(e){return t.createWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var zn=function(e,t,n){return Kn.apply(this,arguments)};function Xn(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Qn(){return(Qn=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Xn(a,r,o,u,i,"next",e)}function i(e){Xn(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","fileSupportTicket",function(e){return t.fileSupportTicket(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Zn=function(e,t,n){return Qn.apply(this,arguments)};function $n(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function er(){return(er=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$n(a,r,o,u,i,"next",e)}function i(e){$n(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getCrossPromotionInfo",function(e){return t.getCrossPromotionInfo(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var tr=function(e,t){return er.apply(this,arguments)};function nr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function rr(){return(rr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){nr(a,r,o,u,i,"next",e)}function i(e){nr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getPromotionStatus",function(e){return t.getPromotionStatus(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var or=function(e,t,n){return rr.apply(this,arguments)};function ar(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ur(){return(ur=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ar(a,r,o,u,i,"next",e)}function i(e){ar(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getTsdEligibility",function(e){return t.getTsdEligibility(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ir=function(e,t,n){return ur.apply(this,arguments)};function cr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function sr(){return(sr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){cr(a,r,o,u,i,"next",e)}function i(e){cr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getUserRestrictions",function(e){return t.getUserRestrictions(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var pr=function(e,t){return sr.apply(this,arguments)};function fr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function lr(){return(lr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fr(a,r,o,u,i,"next",e)}function i(e){fr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","getWorkspace",function(e){return t.getWorkspace(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var hr=function(e,t,n,r){return lr.apply(this,arguments)};function vr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function dr(){return(dr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vr(a,r,o,u,i,"next",e)}function i(e){vr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","leaveWorkspace",function(e){t.leaveWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var br=function(e,t,n){return dr.apply(this,arguments)};function mr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yr(){return(yr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){mr(a,r,o,u,i,"next",e)}function i(e){mr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","listNotebooksForIonOnly",function(e){t.listNotebooksForIonOnly(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var gr=function(e,t){return yr.apply(this,arguments)};function wr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function kr(){return(kr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){wr(a,r,o,u,i,"next",e)}function i(e){wr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","listWorkspacesWithResultSpec",function(e){return t.listWorkspacesWithResultSpec(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var xr=function(e,t,n,r){return kr.apply(this,arguments)};function Pr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Rr(){return(Rr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Pr(a,r,o,u,i,"next",e)}function i(e){Pr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","manageWorkspaceSharing",function(e){return t.manageWorkspaceSharing(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Nr=function(e,t,n){return Rr.apply(this,arguments)};function Or(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sr(){return(Sr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Or(a,r,o,u,i,"next",e)}function i(e){Or(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","moveNotebookToAccount",function(e){return t.moveNotebookToAccount(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var jr=function(e,t,n){return Sr.apply(this,arguments)};function Lr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Tr(){return(Tr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Lr(a,r,o,u,i,"next",e)}function i(e){Lr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","promotionOptedOut",function(e){return t.promotionOptedOut(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Er=function(e,t,n){return Tr.apply(this,arguments)};function Ir(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ur(){return(Ur=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ir(a,r,o,u,i,"next",e)}function i(e){Ir(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","promotionsShown",function(e){return t.promotionsShown(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Cr=function(e,t,n){return Ur.apply(this,arguments)};function Gr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function _r(){return(_r=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Gr(a,r,o,u,i,"next",e)}function i(e){Gr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","sendWorkspaceViewedEvent",function(e){return t.sendWorkspaceViewedEvent(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Wr=function(e,t,n){return _r.apply(this,arguments)};function Dr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ar(){return(Ar=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dr(a,r,o,u,i,"next",e)}function i(e){Dr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","sendVerificationEmail",function(e){return t.sendVerificationEmail(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Mr=function(e,t){return Ar.apply(this,arguments)};function Fr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function qr(){return(qr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fr(a,r,o,u,i,"next",e)}function i(e){Fr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r,u){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","updateNoteIfUsnMatches",function(e){return t.updateNoteIfUsnMatches(u||Object(o.a)(),n,r,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Br=function(e,t,n,r){return qr.apply(this,arguments)};function Vr(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Hr(){return(Hr=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vr(a,r,o,u,i,"next",e)}function i(e){Vr(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("utility","updateWorkspace",function(e){return t.updateWorkspace(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Yr=function(e,t,n){return Hr.apply(this,arguments)},Jr=n(462);function Kr(e){return(Kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){return!t||"object"!==Kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xr(e){return(Xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zr=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=zr(this,(e=Xr(t)).call.apply(e,[this].concat(o)))).endpoint="utility",n.InterfaceConstructor=function(e){return new Jr.Utility.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,Un),t}()),$r=n(378);function eo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function to(e){return no.apply(this,arguments)}function no(){return(no=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){eo(a,r,o,u,i,"next",e)}function i(e){eo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dn.fromLocator(t);case 3:return n=e.sent,e.next=6,Gt(n,t.authenticationToken);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}},e,this,[[0,10]])}))).apply(this,arguments)}var ro=to;function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ao(e,t,n[t])})}return e}function ao(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function io(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){uo(a,r,o,u,i,"next",e)}function i(e){uo(a,r,o,u,i,"throw",e)}u(void 0)})}}function co(){return so.apply(this,arguments)}function so(){return(so=io(regeneratorRuntime.mark(function e(){var t,n,r,o,a,u,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]&&c[0],e.prev=1,e.next=4,An.a.getDefaultLocator();case 4:return n=e.sent,r=[],o=[],a=function(){var e=io(regeneratorRuntime.mark(function e(){var t,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object($r.d)()){e.next=9;break}return e.next=3,Zr.fromLocator(n);case 3:return t=e.sent,e.next=6,gr(t,n.authenticationToken);case 6:r=e.sent,e.next=15;break;case 9:return e.next=11,Dn.fromLocator(n);case 11:return o=e.sent,e.next=14,Lt(o,n.authenticationToken);case 14:r=e.sent;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=io(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(n);case 2:o=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),i=[a()],t&&i.push(u()),e.next=13,Promise.all(i);case 13:return n.isTrueOwner&&(r=r.map(function(e){return oo({},e,{isTrueOwner:!0})})),Nn.a.publish("notebook","updateNotebooks",{notebooks:r,sharedNotebooks:o}),e.abrupt("return",r);case 18:throw e.prev=18,e.t0=e.catch(1),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,18]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.listShared",to);var po=co;function fo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function lo(){return ho.apply(this,arguments)}function ho(){return(ho=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fo(a,r,o,u,i,"next",e)}function i(e){fo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",po());case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.list",co);var vo=lo;function bo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){mo(e,t,n[t])})}return e}function mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function go(e){return wo.apply(this,arguments)}function wo(){return(wo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yo(a,r,o,u,i,"next",e)}function i(e){yo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.notebook,e.prev=1,null!=n&&null!=r&&null!=r.name){e.next=4;break}throw Error("#createNotebookInWorkspace requires a workspaceGuid and notebook object with a name");case 4:return e.next=6,An.a.getLocationForWorkspaceGuid();case 6:return o=e.sent,e.next=9,Dn.fromLocator(o);case 9:return a=e.sent,e.next=12,P(a,bo({},r,{workspaceGuid:n}),o.authenticationToken);case 12:return u=e.sent,Nn.a.publish("notebook","updateNotebook",{notebook:u}),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0;case 20:case"end":return e.stop()}},e,this,[[1,17]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.bootstrapAllNotebooks",lo);var ko=go;function xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Po(e,t,n[t])})}return e}function Po(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function No(e){return Oo.apply(this,arguments)}function Oo(){return(Oo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ro(a,r,o,u,i,"next",e)}function i(e){Ro(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,Dn.fromLocator(n);case 5:return r=e.sent,delete(o=xo({},t)).guid,e.next=10,P(r,o,n.authenticationToken);case 10:return a=e.sent,Nn.a.publish("notebook","updateNotebook",{notebook:xo({},a,{isTrueOwner:n.isTrueOwner})}),e.abrupt("return",a);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.createnotebookinworkspace",go),Nn.a.register("notebook.actions.createNotebook",No);var So=No;function jo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Lo(e){return To.apply(this,arguments)}function To(){return(To=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){jo(a,r,o,u,i,"next",e)}function i(e){jo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return(n=e.sent).personal=!0,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,D(r,t,n.authenticationToken);case 9:Nn.a.publish("linkednotebook","expungeLinkedNotebook",t);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.expungeLinkedNotebook",Lo);var Eo=Lo,Io=n(371);function Uo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Co(e){return Go.apply(this,arguments)}function Go(){return(Go=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Uo(a,r,o,u,i,"next",e)}function i(e){Uo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,Dn.fromLocator(n);case 5:return r=e.sent,e.next=8,J(r,t,n.authenticationToken);case 8:return o=e.sent,Io.a.isUpSyncDisabled()&&Nn.a.publish("notebook","expungeNotebook",t),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.expungeNotebookService",Co);var _o=Co;function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Do(e,t,n[t])})}return e}function Do(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ao(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Mo(e){return Fo.apply(this,arguments)}function Fo(){return(Fo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ao(a,r,o,u,i,"next",e)}function i(e){Ao(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,null!=t){e.next=4;break}throw new Error("#getNotebook Guid is required");case 4:return e.next=6,Nn.a.call("notebook.actions.getnotebook",t);case 6:if(null==(r=e.sent)||n&&!(r.dirtyFlags&&r.dirtyFlags.size>0)){e.next=9;break}return e.abrupt("return",r);case 9:return e.next=11,An.a.getLocationForNotebookGuid(t);case 11:return o=e.sent,e.next=14,Dn.fromLocator(o);case 14:return a=e.sent,e.next=17,De(a,t,o.authenticationToken);case 17:return u=e.sent,i=Wo({},u,{isTrueOwner:o.isTrueOwner}),Nn.a.publish("notebook","updateNotebook",{notebook:i}),e.abrupt("return",i);case 23:throw e.prev=23,e.t0=e.catch(1),e.t0;case 26:case"end":return e.stop()}},e,this,[[1,23]])}))).apply(this,arguments)}var qo=Mo;function Bo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Vo(e){return Ho.apply(this,arguments)}function Ho(){return(Ho=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Bo(a,r,o,u,i,"next",e)}function i(e){Bo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNotebookShares Guid is required");case 2:return e.prev=2,e.next=5,An.a.getLocationForNotebookGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,Fe(r,t,n.authenticationToken);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.get",Mo);var Yo=Vo;function Jo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ko(){return zo.apply(this,arguments)}function zo(){return(zo=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Jo(a,r,o,u,i,"next",e)}function i(e){Jo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,Dn.fromLocator(t);case 6:return n=e.sent,e.next=9,fe(n,t.authenticationToken);case 9:return r=e.sent,Nn.a.publish("notebook","defaultNotebook",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.getnotebookshares",Vo);var Xo=Ko;function Qo(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Zo(){return $o.apply(this,arguments)}function $o(){return($o=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qo(a,r,o,u,i,"next",e)}function i(e){Qo(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,Dn.fromLocator(t);case 6:return n=e.sent,e.next=9,ve(n,t.authenticationToken);case 9:return r=e.sent,Nn.a.publish("notebook","userNotebook",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.getDefaultNotebook",Ko);var ea=Zo;Nn.a.register("notebook.actions.getUserNotebook",Zo);var ta=n(383),na=n(368),ra=n.n(na),oa=n(21);function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ua(e,t,n[t])})}return e}function ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ia(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ca(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ia(a,r,o,u,i,"next",e)}function i(e){ia(a,r,o,u,i,"throw",e)}u(void 0)})}}var sa=Object(oa.default)("ion:actions:processSyncChunk");function pa(e){return fa.apply(this,arguments)}function fa(){return(fa=ca(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chunk,r=t.firstUpdateCount,o=t.shouldCatchup,a=void 0===o||o,u=t.locator,e.next=3,Promise.resolve();case 3:if(sa.log("Processing a sync chunk",n,a),n.expungedNotes&&n.expungedNotes.length>0&&Nn.a.publish("note","expungeNotes",n.expungedNotes),n.expungedNotebooks&&n.expungedNotebooks.length>0&&Nn.a.publish("notebook","expungeNotebooks",n.expungedNotebooks),n.expungedLinkedNotebooks&&n.expungedLinkedNotebooks.length>0&&Nn.a.publish("linkednotebook","expungeLinkedNotebooks",n.expungedLinkedNotebooks),n.expungedTags&&n.expungedTags.length>0&&Nn.a.publish("tag","deleteTags",n.expungedTags),n.expungedWorkspaces&&n.expungedWorkspaces.length>0&&Nn.a.publish("workspace","expungeWorkspaces",n.expungedWorkspaces),n.notesNoLongerSharedWithMe&&n.notesNoLongerSharedWithMe.length>0&&Nn.a.publish("note","expungeNotesNoLongerSharedWithMe",{noteGuids:n.notesNoLongerSharedWithMe}),n.linkedNotebooks&&n.linkedNotebooks.length>0&&Nn.a.publish("linkednotebook","updateLinkedNotebooks",n.linkedNotebooks),n.notes&&n.notes.length>0&&Nn.a.publish("note","updateNotes",{notes:n.notes,resultSpec:new On.NoteResultSpec({includeSharedNotes:!0}),locator:u}),i=[],!(n.notebooks&&n.notebooks.length>0)){e.next=17;break}return e.next=16,Promise.all(n.notebooks.map(function(){var e=ca(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=t.guid,!e.t1){e.next=5;break}return e.next=4,Nn.a.call("notebook.actions.hasnotebook",t.guid);case 4:e.t1=!e.sent;case 5:if(e.t0=e.t1,!e.t0){e.next=8;break}e.t0=a||null!=t.updateSequenceNum&&t.updateSequenceNum>r;case 8:if(!e.t0){e.next=10;break}i.push(t.guid);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 16:n.notebooks?(c=n.notebooks.map(function(e){return aa({},e,{isTrueOwner:u.isTrueOwner,isOwnedByMyVaultUser:!u.personal&&!u.globalId})}),s={notebooks:c,locator:u},Nn.a.publish("notebook","updateNotebooks",s)):sa.error("notebooks array in sync chunk is removed!");case 17:if(p=[],!(n.workspaces&&n.workspaces.length>0)){e.next=22;break}return e.next=21,Promise.all(n.workspaces.map(function(){var e=ca(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t1=t.workspace&&t.workspace.guid,!e.t1){e.next=6;break}return e.next=4,Nn.a.call("notebook.actions.hasnotebooks",t.notebookGuids||[]);case 4:e.t2=e.sent.length,e.t1=e.t2>0;case 6:if(e.t0=e.t1,!e.t0){e.next=9;break}e.t0=a||null!=t.workspace.updateSequenceNum&&t.workspace.updateSequenceNum>r;case 9:if(!e.t0){e.next=11;break}p.push(t.workspace.guid);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 21:Nn.a.publish("workspace","updateWorkspaces",n.workspaces);case 22:return i.length>0&&Nn.a.publish("notebook","needsCatchup",{guids:i,locator:u}),n.preferences&&Nn.a.publish("preference","updatePreferences",{preferences:n.preferences.preferences}),n.tags&&n.tags.length>0&&Nn.a.publish("tag","updateTags",n.tags),sa.log("Notebooks that need to be caught up:",i),sa.log("Workspaces that need to be caught up",p),e.abrupt("return",[i,p]);case 28:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var la=pa;function ha(e){return new da(e)}function va(e){var t,n;function r(t,n){try{var a=e[t](n),u=a.value,i=u instanceof da;Promise.resolve(i?u.wrapped:u).then(function(e){i?r("next",e):o(a.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(a,u){var i={key:e,arg:o,resolve:a,reject:u,next:null};n?n=n.next=i:(t=n=i,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function da(e){this.wrapped=e}Nn.a.register("sync.actions.process",pa),"function"==typeof Symbol&&Symbol.asyncIterator&&(va.prototype[Symbol.asyncIterator]=function(){return this}),va.prototype.next=function(e){return this._invoke("next",e)},va.prototype.throw=function(e){return this._invoke("throw",e)},va.prototype.return=function(e){return this._invoke("return",e)};var ba=Object(oa.default)("ion:actions:linkedNotebookSyncChunkGenerator");function ma(){return(ma=function(e){return function(){return new va(e.apply(this,arguments))}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.linkedNotebook,r=t.locator,o=t.afterUSN,a=void 0===o?0:o,u=t.maxEntries,i=void 0===u?255:u,e.prev=1,e.next=4,ha(Dn.fromLocator(r));case 4:return c=e.sent,e.next=7,ha(Pe(c,n,r.authenticationToken));case 7:if(s=e.sent,p=s.updateCount||0,f=p,l=a,!(a>=p)){e.next=14;break}return ba.log("afterUSN: ".concat(a," has hit or exceeded firstUpdateCount ").concat(p)),e.abrupt("return",Promise.resolve({chunk:null,firstUpdateCount:p}));case 14:if(l===f){e.next=24;break}return e.next=17,ha(we(c,n,l,i,0===a,null));case 17:return h=e.sent,f=h.updateCount||0,l=h.chunkHighUSN||0,e.next=22,Promise.resolve({chunk:h,firstUpdateCount:p});case 22:e.next=14;break;case 24:e.next=29;break;case 26:throw e.prev=26,e.t0=e.catch(1),e.t0;case 29:case"end":return e.stop()}},e,this,[[1,26]])}))).apply(this,arguments)}var ya=function(e){return ma.apply(this,arguments)};function ga(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var wa=Object(oa.default)("ion:actions:getLinkedNotebookSyncChunk");function ka(){return(ka=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ga(a,r,o,u,i,"next",e)}function i(e){ga(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.linkedNotebook,r=t.locator,o=t.afterUSN,a=void 0===o?0:o,u=t.maxEntries,i=ya({linkedNotebook:n,locator:r,afterUSN:a,maxEntries:void 0===u?255:u});case 2:return e.next=4,i.next();case 4:if(null==(c=e.sent).value){e.next=10;break}if(p=c.value,f=p.chunk,!(null!=(l=p.firstUpdateCount)&&a>=l)){e.next=9;break}return e.abrupt("return",{updateCount:l});case 9:null!=f&&"number"==typeof f.chunkHighUSN?a<f.chunkHighUSN&&(la({chunk:f,firstUpdateCount:l,locator:r,shouldCatchup:!1}),s=f.chunkHighUSN):c.done||(wa.error("Bad linked notebook sync chunk data from generator:",c),null==s&&(s=l));case 10:if(c&&!c.done){e.next=2;break}case 11:return e.abrupt("return",{updateCount:s||0});case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var xa=function(e){return ka.apply(this,arguments)},Pa=Object(oa.default)("ion-actions:sync:error"),Ra=function(e){return function(t){Pa.error(t),"function"==typeof ProgressEvent&&t instanceof ProgressEvent||("errorCode"in t&&(t.errorCode===ta.EDAMErrorCode.INVALID_AUTH||t.errorCode===ta.EDAMErrorCode.AUTH_EXPIRED)?e.badAuthHandler():"errorCode"in t&&t.errorCode===ta.EDAMErrorCode.PERMISSION_DENIED?e.permissionDeniedHandler():Nn.a.publish("app.service","syncError",{},!1))}};function Na(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Oa=Object(oa.default)("ion:actions:runLinkedNotebookCycle"),Sa=Ra({badAuthHandler:o.e,permissionDeniedHandler:o.e});function ja(){return(ja=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Na(a,r,o,u,i,"next",e)}function i(e){Na(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,An.a.actuallyGetLocationForLinkedNotebookGuid({lnbGuid:t});case 4:e.t0=e.sent;case 5:return r=e.t0,e.next=8,Nn.a.call("linkednotebook.actions.getByGuid",t);case 8:if(null!=(o=e.sent)){e.next=12;break}throw Oa.error("Attempting to runLinkedNotebookCycle without a corresponding lnb",t),Error("Could not find corresponding linkedNotebook ".concat(t));case 12:return e.prev=12,e.t1=xa,e.t2=o,e.t3=r,e.next=18,Nn.a.call("linkednotebook.actions.getLinkedNotebookUsn",t);case 18:return e.t4=e.sent,e.t5={linkedNotebook:e.t2,locator:e.t3,afterUSN:e.t4,maxEntries:255},e.next=22,(0,e.t1)(e.t5);case 22:a=e.sent,u=a.updateCount,Nn.a.publish("linkednotebook","updateLinkedNotebookUsn",{linkedNotebookGuid:t,updateCount:u}),e.next=30;break;case 27:e.prev=27,e.t6=e.catch(12),Sa(e.t6);case 30:case"end":return e.stop()}},e,this,[[12,27]])}))).apply(this,arguments)}var La=function(e,t){return ja.apply(this,arguments)};function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ea(e,t,n[t])})}return e}function Ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ia(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ua(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ca(e){return Ga.apply(this,arguments)}function Ga(){return(Ga=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ua(a,r,o,u,i,"next",e)}function i(e){Ua(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,e.prev=1,null!=n){e.next=4;break}throw Error("#getLinkedNotebook requires a guid");case 4:return e.next=6,An.a.actuallyGetLocationForLinkedNotebookGuid({lnbGuid:n});case 6:return r=e.sent,e.next=9,Dn.fromLocator(r);case 9:return o=e.sent,e.next=12,$e(o,r.authenticationToken);case 12:if(null!=(a=e.sent).notebookGuid){e.next=15;break}throw Error("#getLinkedNotebook: sharedNotebook.notebookGuid can not be null");case 15:return e.next=17,De(o,a.notebookGuid,r.authenticationToken);case 17:if(null!=(u=e.sent).guid){e.next=20;break}throw Error("#getLinkedNotebook: serviceNotebook.guid can not be null");case 20:return e.next=22,an(o,u.guid,new na.NotebookRecipientSettings({recipientStatus:na.RecipientStatus.IN_MY_LIST}));case 22:return i=e.sent,c=function(e,t){var n=e.guid,r=Ia(e,["guid"]),o=t.sharedNotebooks,a=t.sharedNotebookIds;if(null==n)throw Error("invalid service notebook");return Ta({},r,{guid:n,sharedNotebooks:o,sharedNotebookIds:a})}(i,u),s=Ta({},c,{restrictions:u.restrictions,isTrueOwner:r.isTrueOwner,shardIdFromSharedAuth:r.shard||void 0,sharedNotebooks:u.sharedNotebooks}),Nn.a.publish("notebook","updateNotebook",{notebook:s}),Nn.a.publish("linkednotebook","updateLinkedNotebooktoAttachmentMap",{attachmentGuid:s.guid,linkedNotebookGuid:n}),e.next=29,La(n,r);case 29:return e.abrupt("return",s);case 32:if(e.prev=32,e.t0=e.catch(1),e.t0.errorCode!==ta.EDAMErrorCode.PERMISSION_DENIED&&!e.t0.identifier){e.next=41;break}return e.next=37,Nn.a.call("linkednotebook.actions.hasservicenotebook",n);case 37:return(p=e.sent)&&Nn.a.publish("notebook","expungeNotebook",p),e.next=41,Nn.a.call("notebook.actions.expungeLinkedNotebook",n);case 41:throw e.t0;case 42:case"end":return e.stop()}},e,this,[[1,32]])}))).apply(this,arguments)}var _a=Ca;function Wa(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("notebook.actions.getlinkednotebook",Ca);var Da=Object(oa.default)("ion:action:createLinkedNotebook");function Aa(){return(Aa=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Wa(a,r,o,u,i,"next",e)}function i(e){Wa(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Da.log("creating LinkedNotebook:",t),e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,m(r,t);case 9:return o=e.sent,Da.log("created LinkedNotebook:",o),Nn.a.publish("linkednotebook","updateLinkedNotebook",o),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ma=function(e){return Aa.apply(this,arguments)};function Fa(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var qa=Object(oa.default)("ion:action:getOrCreateLinkedNotebook");function Ba(){return(Ba=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fa(a,r,o,u,i,"next",e)}function i(e){Fa(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return qa.log("gettingOrCreating LinkedNotebook:",t),e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,Je(r,t);case 9:return o=e.sent,qa.log("gotOrCreated LinkedNotebook:",o),Nn.a.publish("linkednotebook","updateLinkedNotebook",o),e.abrupt("return",o);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Va=function(e){return Ba.apply(this,arguments)};function Ha(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ya(e){return An.a.newPersonalLocator(!0,e,null)}function Ja(e){return Ka.apply(this,arguments)}function Ka(){return(Ka=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ha(a,r,o,u,i,"next",e)}function i(e){Ha(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.name,o=t.shardId,null!=n){e.next=3;break}throw new Error("#joinLinkedNotebook requires a notebook guid");case 3:return e.prev=3,a=Ya(o),e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,f(u,n,null);case 10:return i=e.sent,e.next=13,$e(u,i.authenticationToken);case 13:return c=e.sent,e.next=16,Nn.a.call("linkednotebook.actions.getFromGlobalId",c.globalId);case 16:if(!((s=e.sent).length>0)){e.next=23;break}return e.next=20,s[0];case 20:e.t0=e.sent,e.next=26;break;case 23:return e.next=25,Va({shareName:r,username:i.user?i.user.username:"",shardId:o,sharedNotebookGlobalId:c.globalId});case 25:e.t0=e.sent;case 26:return p=e.t0,l=p.guid||"",e.next=30,_a({guid:l});case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t1=e.catch(3),e.t1.errorCode!==ta.EDAMErrorCode.PERMISSION_DENIED&&!e.t1.identifier){e.next=43;break}return e.next=38,Nn.a.call("linkednotebook.actions.getlinkednotebookguids",n);case 38:if(h=e.sent,Nn.a.publish("notebook","expungeNotebook",n),!h||!h.length){e.next=43;break}return e.next=43,h.map(function(e){return Nn.a.call("notebook.actions.expungeLinkedNotebook",e)});case 43:throw e.t1;case 44:case"end":return e.stop()}},e,this,[[3,33]])}))).apply(this,arguments)}var za=Ja;Nn.a.register("notebook.actions.joinlinkednotebook",Ja);var Xa=n(446),Qa=n(55),Za=n.n(Qa);function $a(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function eu(){return(eu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$a(a,r,o,u,i,"next",e)}function i(e){$a(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","authenticateToBusiness",function(e){return t.authenticateToBusiness(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var tu=function(e,t){return eu.apply(this,arguments)};function nu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ru(){return(ru=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){nu(a,r,o,u,i,"next",e)}function i(e){nu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","getUser",function(e){return t.getUser(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ou=function(e,t){return ru.apply(this,arguments)};function au(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function uu(){return(uu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){au(a,r,o,u,i,"next",e)}function i(e){au(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("userstore","listBusinessUsers",function(e){return t.listBusinessUsers(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var iu=function(e,t,n){return uu.apply(this,arguments)},cu=n(674);function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pu(e,t){return!t||"object"!==su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fu(e){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lu(e,t){return(lu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hu=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=pu(this,(e=fu(t)).call.apply(e,[this].concat(o)))).endpoint="edam/user",n.InterfaceConstructor=function(e){return new cu.UserStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lu(e,t)}(t,Un),t}());function vu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function du(e){return bu.apply(this,arguments)}function bu(){return(bu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vu(a,r,o,u,i,"next",e)}function i(e){vu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getBusinessLocator();case 3:return n=e.sent,e.next=6,hu.fromLocator(n);case 6:return r=e.sent,e.next=9,iu(r,t,n.authenticationToken||"");case 9:return o=e.sent,Nn.a.publish("profile","set",o.reduce(function(e,t){return t.id&&(e[t.id]=t),e},{})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}var mu=du;function yu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gu(){return(gu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yu(a,r,o,u,i,"next",e)}function i(e){yu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("profile.actions.getbusinessusersupdatecount");case 2:if(!(e.sent<t)){e.next=7;break}return e.next=6,mu({});case 6:Nn.a.publish("profile","setbusinessusersupdatecount",t);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("user.actions.listBusinessUsers",du);var wu=function(e){return gu.apply(this,arguments)},ku=n(70),xu=n(71);function Pu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ru(){return Nu.apply(this,arguments)}function Nu(){return(Nu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Pu(a,r,o,u,i,"next",e)}function i(e){Pu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ku.a.init();case 2:if(null!=(t=ku.a.getValue("user"))){e.next=5;break}return e.abrupt("return",null);case 5:return(n=new xu.JSONProtocol).rstack=[JSON.parse(t)],n.rpos=[],e.abrupt("return",na.User.read(n));case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ou(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Su=Object(oa.default)("ion:actions:getUser");function ju(){return Lu.apply(this,arguments)}function Lu(){return(Lu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ou(a,r,o,u,i,"next",e)}function i(e){Ou(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]&&a[0],n=null,e.prev=2,e.next=5,Ru();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),Su.warn("failed to deserialize embedded user: ".concat(e.t0));case 11:if(null!=n&&!t){e.next=19;break}return r=An.a.newPersonalLocator(),e.next=15,hu.fromLocator(r);case 15:return o=e.sent,e.next=18,ou(o,r.authenticationToken||"");case 18:n=e.sent;case 19:return Nn.a.publish("user","update",n),e.abrupt("return",n);case 21:case"end":return e.stop()}},e,this,[[2,8]])}))).apply(this,arguments)}var Tu=ju;function Eu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("user.actions.get",ju);var Iu=function(e){Nn.a.publish("user","setUserLastUpdated",e),Nn.a.call("crosspromotion.actions.get",!0)};function Uu(e){return Cu.apply(this,arguments)}function Cu(){return(Cu=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Eu(a,r,o,u,i,"next",e)}function i(e){Eu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=t,e.t0){e.next=6;break}return e.next=5,An.a.getDefaultLocator();case 5:e.t0=e.sent;case 6:return n=e.t0,e.next=9,Dn.fromLocator(n);case 9:return r=e.sent,e.next=12,nt(r,n.authenticationToken);case 12:return o=e.sent,e.next=15,Nn.a.call("user.actions.getUserLastUpdated");case 15:if(a=e.sent,null!=o.businessUsersUpdateCount&&wu(o.businessUsersUpdateCount),u=!n.personal||n.personal&&!Object($r.d)(),!(n.personal&&Object($r.e)()||n.personal&&!Object($r.d)())||o.userLastUpdated===a){e.next=23;break}return Iu(o.userLastUpdated),e.next=23,Tu(!0);case 23:return u&&Nn.a.publish("app.progress","syncstate",o),e.abrupt("return",o);case 27:throw e.prev=27,e.t1=e.catch(0),e.t1;case 30:case"end":return e.stop()}},e,this,[[0,27]])}))).apply(this,arguments)}var Gu=Uu;function _u(e){return new Du(e)}function Wu(e){var t,n;function r(t,n){try{var a=e[t](n),u=a.value,i=u instanceof Du;Promise.resolve(i?u.wrapped:u).then(function(e){i?r("next",e):o(a.done?"return":"normal",e)},function(e){r("throw",e)})}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":t.resolve({value:o,done:!0});break;case"throw":t.reject(o);break;default:t.resolve({value:o,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,o){return new Promise(function(a,u){var i={key:e,arg:o,resolve:a,reject:u,next:null};n?n=n.next=i:(t=n=i,r(e,o))})},"function"!=typeof e.return&&(this.return=void 0)}function Du(e){this.wrapped=e}Nn.a.register("sync.actions.get",Uu),"function"==typeof Symbol&&Symbol.asyncIterator&&(Wu.prototype[Symbol.asyncIterator]=function(){return this}),Wu.prototype.next=function(e){return this._invoke("next",e)},Wu.prototype.throw=function(e){return this._invoke("throw",e)},Wu.prototype.return=function(e){return this._invoke("return",e)};var Au=Object(oa.default)("ion:actions:filteredSyncChunkGenerator");function Mu(){return(Mu=function(e){return function(){return new Wu(e.apply(this,arguments))}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.afterUSN,o=void 0===r?0:r,a=t.maxEntries,u=void 0===a?255:a,i=t.syncChunkFilter,e.prev=1,e.t0=n,e.t0){e.next=7;break}return e.next=6,_u(An.a.getBusinessLocator());case 6:e.t0=e.sent;case 7:return c=e.t0,e.next=10,_u(Dn.fromLocator(c));case 10:return s=e.sent,e.next=13,_u(Gu(c));case 13:if(p=e.sent,f=p.updateCount||0,Au.log("".concat(c.personal?"Personal":"Business"," filteredSyncChunkGenerator")),Au.log("First update count set: ".concat(f)),l=f,h=o,!(o>=f)){e.next=22;break}return Au.log("afterUSN: ".concat(o," has hit or exceed firstUpdateCount ").concat(f)),e.abrupt("return",Promise.resolve({chunk:null,firstUpdateCount:f}));case 22:if(h===l){e.next=32;break}return e.next=25,_u(me(s,h,u,i,c.authenticationToken));case 25:return v=e.sent,l=v.updateCount||0,h=v.chunkHighUSN||0,e.next=30,Promise.resolve({chunk:v,firstUpdateCount:f});case 30:e.next=22;break;case 32:e.next=37;break;case 34:throw e.prev=34,e.t1=e.catch(1),e.t1;case 37:case"end":return e.stop()}},e,this,[[1,34]])}))).apply(this,arguments)}var Fu=function(e){return Mu.apply(this,arguments)};function qu(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Bu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Vu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Hu=Object(oa.default)("ion:actions:getFilteredSyncChunk");function Yu(e){return Ju.apply(this,arguments)}function Ju(){return(Ju=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vu(a,r,o,u,i,"next",e)}function i(e){Vu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,b,m,y,g,w,k,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.afterUSN,o=void 0===r?0:r,a=t.maxEntries,u=void 0===a?255:a,i=t.syncChunkFilter,e.prev=1,e.t0=n,e.t0){e.next=7;break}return e.next=6,An.a.getDefaultLocator();case 6:e.t0=e.sent;case 7:c=e.t0,s=Fu({locator:c,afterUSN:o,maxEntries:u,syncChunkFilter:i}),p=!c.personal||c.personal&&!Object($r.d)(),f=p&&!(i.notebookGuids||i.workspaceGuids),l=!(0===o||i.notebookGuids||i.workspaceGuids),h=[];case 13:return e.next=15,s.next();case 15:if(null==(v=e.sent).value){e.next=22;break}if(b=v.value,m=b.chunk,!(null!=(y=b.firstUpdateCount)&&p&&o>=y)){e.next=21;break}return Nn.a.publish("app","synced",!0),e.abrupt("return",{updateCount:y,notebookGuids:[],workspaceGuids:[]});case 21:null!=m&&"number"==typeof m.chunkHighUSN?(o<m.chunkHighUSN&&h.push(la({chunk:m,firstUpdateCount:y,locator:c,shouldCatchup:l})),d=m.chunkHighUSN,f&&Nn.a.publish("app.progress","chunk",m.chunkHighUSN)):v.done||(Hu.error("Bad sync chunk data from generator:",v),null==d&&(d=y));case 22:if(v&&!v.done){e.next=13;break}case 23:return e.t1=Za.a,e.next=26,Promise.all(h);case 26:return e.t2=e.sent,e.t3=function(e){return Za.a.union.apply(Za.a,qu(e))},g=e.t1.unzip.call(e.t1,e.t2).map(e.t3),w=Bu(g,2),k=w[0],x=w[1],e.abrupt("return",{updateCount:d||0,notebookGuids:k,workspaceGuids:x});case 35:throw e.prev=35,e.t4=e.catch(1),e.t4;case 38:case"end":return e.stop()}},e,this,[[1,35]])}))).apply(this,arguments)}var Ku=Yu;function zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Xu(e,t,n[t])})}return e}function Xu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qu(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("sync.actions.filteredsyncchunk",Yu);var Zu=Object(oa.default)("ion:actions:catchupSync");function $u(e){return ei.apply(this,arguments)}function ei(){return(ei=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qu(a,r,o,u,i,"next",e)}function i(e){Qu(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.locator,r=t.notebookGuids,o=void 0===r?[]:r,a=t.workspaceGuids,u=void 0===a?[]:a,e.t0=n,e.t0){e.next=6;break}return e.next=5,An.a.getDefaultLocator();case 5:e.t0=e.sent;case 6:if(i=e.t0,c=new On.SyncChunkFilter({includeNotes:!0,includeSharedNotes:!0,includeWorkspacesContent:!0,includeNotebooks:!0}),s=[],e.prev=9,!o.length){e.next=15;break}return Zu.log("Catching up Notebooks: ".concat(o.toString())),e.next=14,Ku({locator:i,syncChunkFilter:zu({},c,{notebookGuids:o})});case 14:Nn.a.publish("notebook","didCatchup",o);case 15:e.next=36;break;case 17:e.prev=17,e.t1=e.catch(9),Zu.log("Catching up failed for notebookGuids: ".concat(o.toString(),", retrying individually")),p=0;case 21:if(!(p<o.length)){e.next=36;break}return e.prev=22,f=o[p],Zu.log("Catching up Notebook: ".concat(f)),e.next=27,Ku({locator:i,syncChunkFilter:zu({},c,{notebookGuids:[f]})});case 27:Nn.a.publish("notebook","didCatchup",[f]),e.next=33;break;case 30:e.prev=30,e.t2=e.catch(22),s.push(e.t2);case 33:p++,e.next=21;break;case 36:if(e.prev=36,!u.length){e.next=41;break}return e.next=40,Ku({locator:i,syncChunkFilter:zu({},c,{includeWorkspaces:!0,workspaceGuids:u})});case 40:Nn.a.publish("workspace","didCatchup",u);case 41:e.next=62;break;case 43:e.prev=43,e.t3=e.catch(36),Zu.log("Catching up failed for workspaceGuids: ".concat(u.toString(),", retrying individually")),l=0;case 47:if(!(l<u.length)){e.next=62;break}return e.prev=48,h=u[l],Zu.log("Catching up Space: ".concat(h)),e.next=53,Ku({locator:i,syncChunkFilter:zu({},c,{includeWorkspaces:!0,workspaceGuids:[h]})});case 53:Nn.a.publish("workspace","didCatchup",[h]),e.next=59;break;case 56:e.prev=56,e.t4=e.catch(48),s.push(e.t4);case 59:l++,e.next=47;break;case 62:if(!(s.length>0)){e.next=66;break}throw Zu.log("Multiple errors detected in catchupSync, attempting to throw",s),Object(Xa.sendException)({message:"Multiple errors detected in catchupSync ".concat(JSON.stringify(s)),callstack:JSON.stringify(s[0].stack),fatal:!1}),s;case 66:case"end":return e.stop()}},e,this,[[9,17],[22,30],[36,43],[48,56]])}))).apply(this,arguments)}var ti=$u;function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ri(e,t,n[t])})}return e}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ai(e){return ui.apply(this,arguments)}function ui(){return(ui=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){oi(a,r,o,u,i,"next",e)}function i(e){oi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.userId,e.prev=1,null!=n){e.next=4;break}throw new Error("#joinNotebook requires a notebook guid");case 4:return e.next=6,Nn.a.call("notebook.actions.hasnotebook",n);case 6:return o=e.sent,e.next=9,An.a.getLocationForNotebookGuid(n);case 9:if(a=e.sent,!o){e.next=22;break}return e.next=13,Nn.a.call("notebook.actions.getnotebook",n);case 13:if(!(u=e.sent).recipientSettings||u.recipientSettings.recipientStatus===na.RecipientStatus.NOT_IN_MY_LIST){e.next=22;break}if(!(u.published&&u.sharedNotebooks&&u.sharedNotebooks.find(function(e){return null!=r&&r===e.recipientUserId}))){e.next=21;break}return e.next=18,Bn({notebookGuid:n,notebookIdentifier:n,shardId:a.shard||""});case 18:return a.authenticationToken=e.sent,e.next=21,ti({locator:a,notebookGuids:[n]});case 21:return e.abrupt("return",null);case 22:return a.personal=!0,e.next=25,Dn.fromLocator(a);case 25:return i=e.sent,e.next=28,an(i,n,new na.NotebookRecipientSettings({recipientStatus:na.RecipientStatus.IN_MY_LIST}));case 28:if(null!=(c=e.sent).guid){e.next=31;break}throw new Error("malformed notebook returned from service");case 31:return e.next=33,An.a.getLocationForNotebook(ni({},c,{guid:c.guid}));case 33:return s=e.sent,e.next=36,ti({locator:s,notebookGuids:[n]});case 36:return e.abrupt("return",null);case 39:throw e.prev=39,e.t0=e.catch(1),e.t0;case 42:case"end":return e.stop()}},e,this,[[1,39]])}))).apply(this,arguments)}Nn.a.register("sync.actions.catchup",$u);var ii=ai;function ci(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function si(e){return pi.apply(this,arguments)}function pi(){return(pi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ci(a,r,o,u,i,"next",e)}function i(e){ci(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#leaveNotebook requires a notebook guid");case 2:return e.next=4,Nn.a.call("notebook.actions.getparentworkspace",t);case 4:if(null==e.sent){e.next=7;break}throw new Error("Cannot leave a notebook that is in a workspace");case 7:return e.next=9,An.a.getLocationForNotebookGuid(t);case 9:return(n=e.sent).personal=!0,e.next=13,Dn.fromLocator(n);case 13:return r=e.sent,e.next=16,an(r,t,new na.NotebookRecipientSettings({recipientStatus:na.RecipientStatus.NOT_IN_MY_LIST}));case 16:return Nn.a.publish("notebook","expungeNotebook",t),e.abrupt("return",null);case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.joinnotebook",ai);var fi=si;function li(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function hi(){return vi.apply(this,arguments)}function vi(){return(vi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){li(a,r,o,u,i,"next",e)}function i(e){li(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,Dn.fromLocator(t);case 6:return n=e.sent,e.next=9,Ot(n,t.authenticationToken);case 9:return r=e.sent,Nn.a.publish("linkednotebook","updateLinkedNotebooks",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.leavenotebook",si);var di,bi=hi;function mi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){wi(e,t,n[t])})}return e}function yi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gi(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yi(a,r,o,u,i,"next",e)}function i(e){yi(a,r,o,u,i,"throw",e)}u(void 0)})}}function wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Nn.a.register("linkednotebook.actions.list",hi);var ki=Object(oa.default)("ion:action:manageNotebookShares"),xi=(wi(di={},ra.a.SharedNotebookPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY,On.ShareRelationshipPrivilegeLevel.READ_NOTEBOOK_PLUS_ACTIVITY),wi(di,ra.a.SharedNotebookPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY,On.ShareRelationshipPrivilegeLevel.MODIFY_NOTEBOOK_PLUS_ACTIVITY),wi(di,ra.a.SharedNotebookPrivilegeLevel.FULL_ACCESS,On.ShareRelationshipPrivilegeLevel.FULL_ACCESS),wi(di,ra.a.SharedNotebookPrivilegeLevel.BUSINESS_FULL_ACCESS,On.ShareRelationshipPrivilegeLevel.FULL_ACCESS),di);function Pi(e,t,n,r){return Ri.apply(this,arguments)}function Ri(){return(Ri=gi(regeneratorRuntime.mark(function e(t,n,r,o){var a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n?Object.keys(n).map(function(e){return parseInt(e,10)}):[],e.next=3,o.reduce(function(){var e=gi(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("identity.actions.getidentitiesforuser",n);case 2:return r=e.sent,e.next=5,t;case 5:return e.t0=r.map(function(e){return e.id}),e.abrupt("return",e.sent.concat(e.t0));case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve(r));case 3:u=e.sent,t.sharedNotebooks=t.sharedNotebooks&&t.sharedNotebooks.filter(function(e){return!(e.recipientIdentityId&&u.includes(e.recipientIdentityId))}).map(function(e){var t=e.recipientUserId;if(null!=t&&a.includes(t)){var r=mi({},e);return r.privilege=n[t].priv,r}return e}),Nn.a.publish("notebook","updateNotebook",{notebook:t});case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ni(e){return Object.keys(e).map(function(t){var n=e[t].priv,r=xi[n];return{recipientUserId:parseInt(t,10),individualPrivilege:r,displayName:null,bestPrivilege:null,restrictions:null,sharerUserId:null}})}function Oi(e,t){var n=e.map(function(e){return{type:na.UserIdentityType.IDENTITYID,longIdentifier:e}});return t.map(function(e){return n.push({type:na.UserIdentityType.EVERNOTE_USERID,longIdentifier:e})}),n}function Si(e){return ji.apply(this,arguments)}function ji(){return(ji=gi(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebook,r=t.usersToModify,o=void 0===r?{}:r,a=t.invitesToRemove,u=void 0===a?[]:a,i=t.sharesToRemove,c=void 0===i?[]:i,e.prev=1,e.next=4,An.a.getLocationForNotebook(n);case 4:return s=e.sent,e.next=7,Dn.fromLocator(s);case 7:return p=e.sent,f=Ni(o),l=Oi(u,c),h=new On.ManageNotebookSharesParameters({notebookGuid:n.guid,membershipsToUpdate:f,unshares:l,inviteMessage:null}),e.next=13,Vt(p,h,s.authenticationToken);case 13:if(!(v=e.sent).errors){e.next=16;break}throw v.errors;case 16:return e.next=18,Pi(n,o,u,c);case 18:return e.abrupt("return",e.sent);case 21:throw e.prev=21,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach(function(e){e.notFoundException&&ki.error(e.notFoundException),e.userException&&ki.error(e.userException)}):ki.error(e.t0),e.t0;case 25:case"end":return e.stop()}},e,this,[[1,21]])}))).apply(this,arguments)}var Li=Si;function Ti(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ei(e){return Ii.apply(this,arguments)}function Ii(){return(Ii=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ti(a,r,o,u,i,"next",e)}function i(e){Ti(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#moveNotebookToAccount requires a notebook guid");case 2:return e.next=4,An.a.getDefaultLocator();case 4:return n=e.sent,e.next=7,Zr.fromLocator(n);case 7:return r=e.sent,e.next=10,jr(r,t,n.authenticationToken);case 10:return ti({locator:n,notebookGuids:[t]}),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.managenotebookshares",Si);var Ui=Ei;function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Gi(e,t,n[t])})}return e}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _i(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Wi(e){return Di.apply(this,arguments)}function Di(){return(Di=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_i(a,r,o,u,i,"next",e)}function i(e){_i(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,o=t.recipientSettings,e.prev=1,null!=n){e.next=4;break}throw Error("#setNotebookRecipientSettings requires a guid");case 4:return e.next=6,An.a.getPersonalLocator();case 6:return a=e.sent,e.next=9,An.a.getLocationForNotebookGuid(n);case 9:return u=e.sent,e.t0=r,e.next=13,Dn.fromLocator(An.a.newInstance(Ci({},a,{shard:u.shard})));case 13:return e.t1=e.sent,e.t2=n,e.t3=o,e.t4=a.authenticationToken,e.next=19,e.t0.setNotebookRecipientSettings.call(e.t0,e.t1,e.t2,e.t3,e.t4);case 19:return e.t5=r,e.next=22,Dn.fromLocator(u);case 22:return e.t6=e.sent,e.t7=n,e.t8=u.authenticationToken,e.next=27,e.t5.getNotebook.call(e.t5,e.t6,e.t7,e.t8);case 27:return i=e.sent,Nn.a.publish("notebook","updateNotebook",{notebook:i}),e.abrupt("return",i);case 32:throw e.prev=32,e.t9=e.catch(1),e.t9;case 35:case"end":return e.stop()}},e,this,[[1,32]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.movetoaccount",Ei);var Ai=Wi;function Mi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Fi(e){return qi.apply(this,arguments)}function qi(){return(qi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Mi(a,r,o,u,i,"next",e)}function i(e){Mi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.userIds,r=t.notebookGuid,o=t.permLevel,e.prev=1,null!=r){e.next=4;break}throw Error("#shareNotebook requires a guid");case 4:return a=[],Za.a.uniq(n).map(function(e){return a.push(new na.Contact({id:String(e),type:Number.isNaN(Number(e))?na.ContactType.EMAIL:na.ContactType.EVERNOTE}))}),e.next=8,Nn.a.call("notebook.actions.getnotebook",r);case 8:return u=e.sent,e.next=11,An.a.getLocationForNotebook(u);case 11:return i=e.sent,e.next=14,Dn.fromLocator(i);case 14:return c=e.sent,s=new On.NotebookShareTemplate({notebookGuid:r,recipientContacts:a,privilege:o}),e.next=18,O(c,s,i.authenticationToken);case 18:return e.next=20,Nn.a.call("threads.actions.sendmessage",{userIds:n,message:"<msg></msg>",attachment:u,isExternal:null!=i.globalId||!Object($r.d)()});case 20:return e.next=22,qo(r,!0);case 22:e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(1),e.t0;case 27:case"end":return e.stop()}},e,this,[[1,24]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.setNotebookRecipientSettings",Wi);var Bi=Fi;function Vi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Hi(e){return Yi.apply(this,arguments)}function Yi(){return(Yi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vi(a,r,o,u,i,"next",e)}function i(e){Vi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notebook,r=t.userId,e.next=3,An.a.getLocationForNotebook(n);case 3:return o=e.sent,e.next=6,Dn.fromLocator(o);case 6:return a=e.sent,u=n.guid,e.next=10,O(a,{notebookGuid:u,recipientThreadId:null,recipientContacts:[{id:r,type:na.ContactType.EVERNOTE}],privilege:ra.a.SharedNotebookPrivilegeLevel.FULL_ACCESS});case 10:return e.prev=10,i=An.a.newPersonalLocator(o.sharedToMe,o.shard,o.authenticationToken),e.next=14,Dn.fromLocator(i);case 14:if(c=e.sent,s={recipientStatus:ra.a.RecipientStatus.IN_MY_LIST},null==u){e.next=21;break}return e.next=19,f(c,u);case 19:return e.next=21,an(c,u,s);case 21:return p=An.a.newDefaultLocator(o.sharedToMe,o.shard,o.authenticationToken),e.next=24,Dn.fromLocator(p);case 24:if(l=e.sent,null==u){e.next=30;break}return e.next=28,De(l,u);case 28:h=e.sent,Nn.a.publish("service.notebook","joinnotebooksuccess",h);case 30:e.next=36;break;case 32:throw e.prev=32,e.t0=e.catch(10),Nn.a.publish("service.notebook","joinnotebookfailure"),e.t0;case 36:case"end":return e.stop()}},e,this,[[10,32]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.sharenotebook",Fi);var Ji=Hi;function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){zi(e,t,n[t])})}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xi(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Qi(e){return Zi.apply(this,arguments)}function Zi(){return(Zi=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Xi(a,r,o,u,i,"next",e)}function i(e){Xi(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=null,o=!0,null!=n){e.next=5;break}throw Error("#updateNotebook requires a guid");case 5:return e.next=7,Nn.a.call("notebook.actions.getnotebook",n);case 7:return a=e.sent,e.next=10,An.a.getLocationForNotebook(a);case 10:return u=e.sent,e.next=13,Dn.fromLocator(u);case 13:if(i=e.sent,!t.isRenamed||!t.name){e.next=21;break}return e.next=17,$t(i,n,t.name,u.authenticationToken);case 17:r=e.sent,delete t.isRenamed,delete t.name,Object.keys(t).length<=1&&(o=!1);case 21:if(!o){e.next=26;break}return c=Ki({},a,t),e.next=25,yn(i,c,u.authenticationToken);case 25:r=e.sent;case 26:if(!Io.a.isUpSyncDisabled()){e.next=31;break}return e.next=29,De(i,n,u.authenticationToken);case 29:s=e.sent,Nn.a.publish("notebook","updateNotebook",{notebook:s});case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("notebook.actions.sharenotebooktoself",Hi);var $i=Qi;function ec(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function tc(){return nc.apply(this,arguments)}function nc(){return(nc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ec(a,r,o,u,i,"next",e)}function i(e){ec(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=An.a.newPersonalLocator(),e.next=4,hu.fromLocator(t);case 4:return n=e.sent,e.next=7,tu(n,t.authenticationToken);case 7:return(r=e.sent)&&r.user&&Nn.a.publish("user","setvaultuser",r.user),e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Nn.a.register("notebook.actions.updateservice",Qi);var rc=tc;function oc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ac(){return uc.apply(this,arguments)}function uc(){return(uc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){oc(a,r,o,u,i,"next",e)}function i(e){oc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getPersonalLocator();case 2:return t=e.sent,e.next=5,Zr.fromLocator(t);case 5:return n=e.sent,r=new Jr.TierSelectionDisplayEligibilityRequest,e.abrupt("return",ir(n,r));case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("user.actions.authToBusiness",tc);var ic=ac;function cc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function sc(){return(sc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){cc(a,r,o,u,i,"next",e)}function i(e){cc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","createMessageThread",function(e){return t.createMessageThread(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("user.actions.gettsdeligibility",ac);var pc=function(e,t,n){return sc.apply(this,arguments)};function fc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function lc(){return(lc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fc(a,r,o,u,i,"next",e)}function i(e){fc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","getMessageSyncChunk",function(e){return t.getMessageSyncChunk(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var hc=function(e,t,n){return lc.apply(this,arguments)};function vc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function dc(){return(dc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vc(a,r,o,u,i,"next",e)}function i(e){vc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","getThreads",function(e){return t.getThreads(n||Object(o.a)(),e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var bc=function(e,t){return dc.apply(this,arguments)};function mc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function yc(){return(yc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){mc(a,r,o,u,i,"next",e)}function i(e){mc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("messagestore","sendMessageToThread",function(e){return t.sendMessageToThread(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var gc=function(e,t,n){return yc.apply(this,arguments)},wc=n(463);function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xc(e,t){return!t||"object"!==kc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pc(e){return(Pc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rc(e,t){return(Rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Nc=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=xc(this,(e=Pc(t)).call.apply(e,[this].concat(o)))).endpoint="messagestore",n.InterfaceConstructor=function(e){return new wc.MessageStore.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rc(e,t)}(t,Un),t}());function Oc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sc(){return jc.apply(this,arguments)}function jc(){return(jc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Oc(a,r,o,u,i,"next",e)}function i(e){Oc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,Nc.fromLocator(t);case 6:return n=e.sent,e.next=9,bc(n,t.authenticationToken);case 9:return r=e.sent,Nn.a.publish("identity","set",r.identities),Nn.a.publish("service.threads","update",r.threads),e.abrupt("return",r);case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}var Lc=Sc;function Tc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ec(){return Ic.apply(this,arguments)}function Ic(){return(Ic=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Tc(a,r,o,u,i,"next",e)}function i(e){Tc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,Zr.fromLocator(t);case 6:return n=e.sent,e.next=9,pr(n,t.authenticationToken);case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Nn.a.register("user.actions.getThreadsAndIdentities",Sc);var Uc=Ec;function Cc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Gc(){return _c.apply(this,arguments)}function _c(){return(_c=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Cc(a,r,o,u,i,"next",e)}function i(e){Cc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return t=e.sent,e.next=6,Zr.fromLocator(t);case 6:return n=e.sent,e.next=9,Mr(n,t.authenticationToken);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,11]])}))).apply(this,arguments)}Nn.a.register("user.actions.getRestrictions",Ec);var Wc=Gc;function Dc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ac(e){return Mc.apply(this,arguments)}function Mc(){return(Mc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dc(a,r,o,u,i,"next",e)}function i(e){Dc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,Xe(r,t,n.authenticationToken);case 9:return o=e.sent,Nn.a.publish("preference","updatePreferences",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("user.actions.sendVerificationEmail",Gc);var Fc=Ac;function qc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Bc(e){return Vc.apply(this,arguments)}function Vc(){return(Vc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qc(a,r,o,u,i,"next",e)}function i(e){qc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.preferencesToUpdate,r=t.preferenceNames,e.prev=1,e.next=4,An.a.getPersonalLocator();case 4:return o=e.sent,e.next=7,Dn.fromLocator(o);case 7:return a=e.sent,e.next=10,kn(a,n);case 10:return e.next=12,Xe(a,r,o.authenticationToken);case 12:return u=e.sent,Nn.a.publish("preference","updatePreferences",u),e.abrupt("return",u);case 17:throw e.prev=17,e.t0=e.catch(1),e.t0;case 20:case"end":return e.stop()}},e,this,[[1,17]])}))).apply(this,arguments)}Nn.a.register("preference.actions.get",Ac);var Hc=Bc;function Yc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Jc(e){return Kc.apply(this,arguments)}function Kc(){return(Kc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yc(a,r,o,u,i,"next",e)}function i(e){Yc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Zr.fromLocator(n);case 6:return r=e.sent,e.next=9,or(r,t);case 9:return o=e.sent,Nn.a.publish("promotion","updatePromotions",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("preference.actions.update",Bc);var zc=Jc;function Xc(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Qc(e){return Zc.apply(this,arguments)}function Zc(){return(Zc=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Xc(a,r,o,u,i,"next",e)}function i(e){Xc(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Zr.fromLocator(n);case 6:return r=e.sent,e.next=9,Er(r,t);case 9:Nn.a.publish("promotion","updatePromotions",[{promotionId:t,optedOut:!0}]),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}},e,this,[[0,12]])}))).apply(this,arguments)}Nn.a.register("promotion.actions.get",Jc);var $c=Qc;function es(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ts(e){return ns.apply(this,arguments)}function ns(){return(ns=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){es(a,r,o,u,i,"next",e)}function i(e){es(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Zr.fromLocator(n);case 6:return r=e.sent,e.next=9,Cr(r,t);case 9:return o=e.sent,Nn.a.publish("promotion","updatePromotions",o),e.abrupt("return",o);case 14:if(e.prev=14,e.t0=e.catch(0),2!==e.t0.errorCode){e.next=18;break}throw new Error("promotionIds are limited to 32 chars.");case 18:throw e.t0;case 19:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("promotion.actions.optout",Qc);var rs=ts;function os(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function as(){return us.apply(this,arguments)}function us(){return(us=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){os(a,r,o,u,i,"next",e)}function i(e){os(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o,a,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]&&u[0],e.prev=1,e.next=4,Nn.a.call("promotion.actions.getCrossPromotionInfo");case 4:if(null==(n=e.sent)||t){e.next=7;break}return e.abrupt("return",n);case 7:return e.next=9,An.a.getPersonalLocator();case 9:return r=e.sent,e.next=12,Zr.fromLocator(r);case 12:return o=e.sent,e.next=15,tr(o,r.authenticationToken);case 15:return a=e.sent,Nn.a.publish("promotion","updateCrossPromotions",a),e.abrupt("return",a);case 20:throw e.prev=20,e.t0=e.catch(1),e.t0;case 23:case"end":return e.stop()}},e,this,[[1,20]])}))).apply(this,arguments)}Nn.a.register("promotion.actions.show",ts);var is=as;function cs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ss(e){return ps.apply(this,arguments)}function ps(){return(ps=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){cs(a,r,o,u,i,"next",e)}function i(e){cs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#acquireNoteLock Guid is required");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,c(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}Nn.a.register("crosspromotion.actions.get",as);var fs=ss;function ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){hs(e,t,n[t])})}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ds(e,t){return bs.apply(this,arguments)}function bs(){return(bs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vs(a,r,o,u,i,"next",e)}function i(e){vs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n){var r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getLocationForNoteGuid(t);case 2:return r=e.sent,e.next=5,Zr.fromLocator(r);case 5:return o=e.sent,e.abrupt("return",Yn(o,new na.Resource(ls({},n,{noteGuid:t})),r.authenticationToken));case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("note.actions.lock.acquire",ss);var ms=ds;Nn.a.register("note.actions.addResourceToNote",function(e){return ds(e.noteGuid,e.resource)});var ys=n(384),gs=n.n(ys),ws=n(365);function ks(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var xs=gs.a.EDAM_NOTE_TITLE_LEN_MAX;function Ps(e){return Rs.apply(this,arguments)}function Rs(){return(Rs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ks(a,r,o,u,i,"next",e)}function i(e){ks(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.noteGuid,r=t.notebookGuid,o=t.noteTitle,null!=n&&null!=r){e.next=3;break}throw new Error("#copyNote requires a noteGuid and a notebookGuid");case 3:return e.prev=3,e.next=6,An.a.getLocationForNoteGuid(n);case 6:return a=e.sent,e.next=9,Dn.fromLocator(a);case 9:return u=e.sent,e.next=12,v(u,n,r,a.authenticationToken);case 12:if((i=e.sent).title=o.slice(0,xs),c=i.guid){e.next=17;break}throw new Error("service did not return a guid.  This should never happen");case 17:return Nn.a.publish("note","updateNote",{note:i,locator:a}),e.next=20,ws.a.updateNote({guid:c,title:i.title});case 20:return s=e.sent,e.abrupt("return",s);case 24:throw e.prev=24,e.t0=e.catch(3),e.t0;case 27:case"end":return e.stop()}},e,this,[[3,24]])}))).apply(this,arguments)}var Ns=Ps;function Os(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Ss(e,t,n[t])})}return e}function Ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function js(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ls(e){return Ts.apply(this,arguments)}function Ts(){return(Ts=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){js(a,r,o,u,i,"next",e)}function i(e){js(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null==t.content&&(t.content='<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note></en-note>'),n=Date.now(),t.created=t.created||n,t.updated=t.updated||n,t.attributes=t.attributes||new na.NoteAttributes,null==t.attributes){e.next=16;break}if(t.attributes.noteTitleQuality=ys.EDAM_NOTE_TITLE_QUALITY_UNTITLED,null!=t.attributes.author){e.next=16;break}return e.next=11,Nn.a.call("user.actions.getactiveuser");case 11:if(r=e.sent){e.next=14;break}throw new Error("no user???");case 14:o=Os({},t.attributes,{author:r.name}),t.attributes=o;case 16:if(e.prev=16,null!=(u=t.notebookGuid)){e.next=20;break}throw new Error("no notebookguid provided");case 20:return e.next=22,Nn.a.call("notebook.actions.getnotebook",u);case 22:return i=e.sent,e.next=25,An.a.getLocationForNotebook(i);case 25:a=e.sent,e.next=33;break;case 28:return e.prev=28,e.t0=e.catch(16),e.next=32,An.a.getDefaultLocator();case 32:a=e.sent;case 33:return e.next=35,Dn.fromLocator(a);case 35:return c=e.sent,e.next=38,w(c,t,a.authenticationToken);case 38:return s=e.sent,Nn.a.publish("note","updateNote",{note:s,locator:a}),e.abrupt("return",s);case 43:throw e.prev=43,e.t1=e.catch(0),e.t1;case 46:case"end":return e.stop()}},e,this,[[0,43],[16,28]])}))).apply(this,arguments)}Nn.a.register("note.actions.copy",Ps);var Es=Ls;function Is(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Us(e,t,n[t])})}return e}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("note.actions.create",Ls);var Gs=new On.NotesMetadataResultSpec({includeTagGuids:!0,includeTitle:!0,includeUpdated:!0,includeDeleted:!0,includeNotebookGuid:!0,includeAttributes:!0,includeUpdateSequenceNum:!0});function _s(e){return Ws.apply(this,arguments)}function Ws(){return(Ws=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Cs(a,r,o,u,i,"next",e)}function i(e){Cs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=t.offset,o=void 0===r?0:r,a=t.maxNotes,u=void 0===a?128:a,i=t.resultSpec,c=void 0===i?Gs:i,e.prev=1,e.next=4,An.a.getLocationForNoteFilter(n);case 4:if(null!=(s=e.sent)){e.next=7;break}throw new Error("Shard Locator not found for scope ".concat(n.scope));case 7:return e.next=9,Dn.fromLocator(s);case 9:return p=e.sent,e.next=12,ne(p,n,o,u,c,s.authenticationToken);case 12:return f=e.sent,(l=f&&f.notes)&&(h=l.map(function(e){var t=Za.a.omit(e,["largestResourceMime","largestResourceSize"]);return new na.Note(Is({},t,{active:!t.deleted}))}),Nn.a.publish("note","updateNotes",{notes:h,locator:s,resultSpec:c})),e.abrupt("return",f);case 18:throw e.prev=18,e.t0=e.catch(1),e.t0;case 21:case"end":return e.stop()}},e,this,[[1,18]])}))).apply(this,arguments)}var Ds=_s;Nn.a.register("note.actions.findNotesMetadata",_s);var As=n(369);function Ms(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Fs(e,t,n[t])})}return e}function Fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qs(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Bs=Object(oa.default)("ion:actions:getNote");function Vs(e){return Hs.apply(this,arguments)}function Hs(){return(Hs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qs(a,r,o,u,i,"next",e)}function i(e){qs(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.resultSpec,o=void 0===r?new On.NoteResultSpec:r,a=t.forceFetch,u=void 0!==a&&a,null!=n){e.next=3;break}throw new Error("#getNote Guid is required");case 3:return e.next=5,Nn.a.call("note.datasource.getnote",n);case 5:if(i=e.sent,null==i||i&&(null==i.content||i.stale)&&o.includeContent||u){e.next=10;break}return Bs.log("Returning localNote %o",i),e.abrupt("return",i);case 10:return e.next=12,An.a.getLocationForNoteGuid(n);case 12:return c=e.sent,e.next=15,Dn.fromLocator(c);case 15:return s=e.sent,e.next=18,Ge(s,n,o,c.authenticationToken).catch(function(e){throw(e.errorCode===ta.EDAMErrorCode.PERMISSION_DENIED||e.identifier)&&(Bs.error("Permission denied: expunging note guid: ".concat(n)),Nn.a.publish("note","expungeNote",n)),e});case 18:if((p=e.sent).shard=c.shard||"",Nn.a.publish("note","updateNote",{note:Ms({},p,{shardId:c.shard}),resultSpec:o,locator:c}),e.t1=Io.a.isBootstrappingEnabled(),!e.t1){e.next=26;break}return e.next=25,Nn.a.call("attachments.actions.getattachment",p.guid);case 25:e.t1=e.sent;case 26:if(e.t0=e.t1,!e.t0){e.next=31;break}return e.next=30,Nn.a.call("notebook.actions.hasnotebook",p.notebookGuid);case 30:e.t0=e.sent;case 31:if(!e.t0){e.next=35;break}return Bs.log("Fetching notebook in getNote because serviceNote is not an attachment, and we are in bootstrappingView"),e.next=35,Nn.a.call("notebook.actions.get",p.notebookGuid);case 35:return Io.a.isBootstrappingEnabled()&&window.parent!==window&&localStorage.removeItem(As.w),e.abrupt("return",p);case 37:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ys=Vs;Nn.a.register("note.actions.getNote",Vs);var Js=n(407);function Ks(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var zs=Object(oa.default)("ion:action:createNoteShare");function Xs(e){return Qs.apply(this,arguments)}function Qs(){return(Qs=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ks(a,r,o,u,i,"next",e)}function i(e){Ks(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.share,e.prev=1,r=[],Za.a.uniq(n.userIds).map(function(e){return r.push(new na.Contact({id:String(e),type:Number.isNaN(Number(e))?na.ContactType.EMAIL:na.ContactType.EVERNOTE}))}),o=new On.SharedNoteTemplate({noteGuid:n.note.guid,recipientContacts:r,privilege:n.permLevel}),e.next=7,An.a.getLocationForNote(n.note);case 7:return a=e.sent,e.next=10,Dn.fromLocator(a);case 10:return u=e.sent,e.next=13,L(u,o,a.authenticationToken);case 13:if(e.t0=Nn.a,e.t1=n.userIds,e.t2=n.note,e.t3=null!=a.globalId||!Object($r.d)(),e.t3){e.next=21;break}return e.next=20,Object(Js.e)(n.note.guid);case 20:e.t3=e.sent;case 21:return e.t4=e.t3,e.t5={userIds:e.t1,message:"<msg></msg>",attachment:e.t2,isExternal:e.t4},e.next=25,e.t0.call.call(e.t0,"threads.actions.sendmessage",e.t5);case 25:if(!n.note.guid){e.next=28;break}return e.next=28,Ys({guid:n.note.guid,resultSpec:new On.NoteResultSpec({includeSharedNotes:!0}),forceFetch:!0});case 28:e.next=34;break;case 30:throw e.prev=30,e.t6=e.catch(1),zs.error(e.t6),e.t6;case 34:case"end":return e.stop()}},e,this,[[1,30]])}))).apply(this,arguments)}Nn.a.register("note.actions.createNoteShare",Xs);var Zs=Xs;function $s(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var ep=100;function tp(e){return np.apply(this,arguments)}function np(){return(np=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$s(a,r,o,u,i,"next",e)}function i(e){$s(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getPersonalLocator();case 2:return n=e.sent,e.next=5,Dn.fromLocator(n);case 5:r=e.sent,o=null,a=0,u=Za.a.chunk(t,ep),i=!0,c=!1,s=void 0,e.prev=12,p=u[Symbol.iterator]();case 14:if(i=(f=p.next()).done){e.next=23;break}return l=f.value,e.next=18,V(r,l,n.authenticationToken);case 18:o=e.sent,a++;case 20:i=!0,e.next=14;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(12),c=!0,s=e.t0;case 29:e.prev=29,e.prev=30,i||null==p.return||p.return();case 32:if(e.prev=32,!c){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(29);case 37:return Io.a.isUpSyncDisabled()&&Nn.a.publish("note","expungeNotes",t),e.abrupt("return",{lastServerUsn:o,completedServiceCalls:a});case 39:case"end":return e.stop()}},e,this,[[12,25,29,37],[30,,32,36]])}))).apply(this,arguments)}Nn.a.register("note.actions.expungeNotesService",tp);var rp=tp;function op(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ap(e){return up.apply(this,arguments)}function up(){return(up=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){op(a,r,o,u,i,"next",e)}function i(e){op(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNoteLockStatus Guid is required");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,Le(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}var ip=ap;Nn.a.register("note.actions.lock.status",ap);var cp=n(667);function sp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function pp(e){return fp.apply(this,arguments)}function fp(){return(fp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){sp(a,r,o,u,i,"next",e)}function i(e){sp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ys({guid:t,resultSpec:new On.NoteResultSpec({includeContent:!0}),forceFetch:!0});case 2:return n=e.sent,e.next=5,Object(cp.createResourceMapAsync)(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var lp=pp;function hp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function vp(e){return dp.apply(this,arguments)}function dp(){return(dp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){hp(a,r,o,u,i,"next",e)}function i(e){hp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#getNoteShares Guid is required");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,Ve(r,t);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Nn.a.register("note.actions.getnoteresourcemap",pp);var bp=vp;function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){yp(e,t,n[t])})}return e}function yp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gp(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function wp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function kp(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){wp(a,r,o,u,i,"next",e)}function i(e){wp(a,r,o,u,i,"throw",e)}u(void 0)})}}Nn.a.register("note.actions.getnoteshares",vp);var xp=75;function Pp(e){return Rp.apply(this,arguments)}function Rp(){return(Rp=kp(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guids,r=t.isVaryingOrigin,o=void 0!==r&&r,e.prev=1,0!==n.length){e.next=4;break}return e.abrupt("return",null);case 4:if(a={},!o){e.next=13;break}return e.next=8,Promise.all(n.map(function(){var e=kp(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,An.a.getLocationForNoteGuid(t);case 3:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 8:e.t0=function(e,t){var n=gp(t,2),r=n[0],o=n[1],a="".concat(o.shard||"","_").concat(o.personal?"P":"B");return null==e[a]&&(e[a]={notes:[],locator:o}),e[a].notes.push(r),e},e.t1=a,e.sent.reduce(e.t0,e.t1),e.next=17;break;case 13:return e.next=15,An.a.getLocationForNoteGuid(n[0]);case 15:(u=e.sent).shard&&(a[u.shard]={notes:n,locator:u});case 17:return e.next=19,Promise.all(Object.values(a).map(function(){var e=kp(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.notes,r=t.locator,e.next=3,Dn.fromLocator(r);case 3:return o=e.sent,e.t0=Za.a,e.next=7,Promise.all(Za.a.chunk(n,ys.EDAM_SNIPPETS_NOTES_MAX).map(function(){var e=kp(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie(o,t,xp,r.authenticationToken);case 2:return n=e.sent,e.next=5,Nn.a.call("note.actions.getall");case 5:return a=e.sent,e.abrupt("return",Object.keys(n).reduce(function(e,t){var r=n[t].substring(0,xp);r.length===xp&&(r+="…");var o=a[t];return null!=o&&e.push(mp({},o,{snippet:r})),e},[]));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 7:e.t1=e.sent,e.t2=[e.t1],a=e.t0.flatten.call(e.t0,e.t2),u=gp(a,1),i=u[0],Nn.a.publish("note","updateNotes",{notes:i,locator:r});case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 19:return e.abrupt("return",null);case 22:throw e.prev=22,e.t2=e.catch(1),e.t2;case 25:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}var Np=Pp;function Op(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("note.actions.getsnippets",Pp);var Sp=Object(oa.default)("ion:actions:manageNoteShares");function jp(e){var t=[];return e&&(t=Object.keys(e).map(function(t){var n=e[t].priv;return{recipientUserId:parseInt(t,10),privilege:n,displayName:null,restrictions:null,sharerUserId:null}})),t}function Lp(e){return Tp.apply(this,arguments)}function Tp(){return(Tp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Op(a,r,o,u,i,"next",e)}function i(e){Op(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.note,r=t.usersToModify,o=t.sharesToRemove,a=t.invitesToRemove,e.prev=1,null!=(u=n.guid)){e.next=5;break}throw new Error("note requires a guid in #manageNoteShares");case 5:return e.next=7,An.a.getLocationForNote(n);case 7:return i=e.sent,e.next=10,Dn.fromLocator(i);case 10:return c=e.sent,s=jp(r),p=new On.ManageNoteSharesParameters({noteGuid:u,membershipsToUpdate:s,membershipsToUnshare:o,invitationsToUnshare:a}),e.next=15,Jt(c,p,i.authenticationToken);case 15:if(!((f=e.sent).errors&&f.errors.length>0)){e.next=18;break}throw f.errors;case 18:return e.next=20,Ys({guid:u,forceFetch:!0,resultSpec:new On.NoteResultSpec({includeSharedNotes:!0})});case 20:e.next=26;break;case 22:throw e.prev=22,e.t0=e.catch(1),Array.isArray(e.t0)?e.t0.forEach(function(e){e.notFoundException&&Sp.error(e.notFoundException),e.userException&&Sp.error(e.userException)}):Sp.error(e.t0),e.t0;case 26:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}var Ep=Lp;function Ip(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Up(e){return Cp.apply(this,arguments)}function Cp(){return(Cp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ip(a,r,o,u,i,"next",e)}function i(e){Ip(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#releaseNoteLock Guid is required");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,Xt(r,t,n.authenticationToken);case 11:return o=e.sent,e.abrupt("return",o);case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:case"end":return e.stop()}},e,this,[[2,15]])}))).apply(this,arguments)}Nn.a.register("note.actions.managenoteshares",Lp);var Gp=Up;Nn.a.register("note.actions.lock.release",Up);var _p=n(657),Wp=n(447);function Dp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ap(e){return Mp.apply(this,arguments)}function Mp(){return(Mp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dp(a,r,o,u,i,"next",e)}function i(e){Dp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Nn.a.publish("note","selectNote",{guid:t}),null!=t){e.next=3;break}return e.abrupt("return",null);case 3:return n=new On.NoteResultSpec({includeAccountLimits:!0,includeContent:!0,includeSharedNotes:!0}),e.next=6,Ys({guid:t,resultSpec:n,forceFetch:"web"===Wp.a.platformName});case 6:return r=e.sent,e.prev=7,e.next=10,qo(r.notebookGuid,!Object(_p.a)());case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(7);case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this,[[7,12]])}))).apply(this,arguments)}var Fp=Ap;function qp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Bp(e){return Vp.apply(this,arguments)}function Vp(){return(Vp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qp(a,r,o,u,i,"next",e)}function i(e){qp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#shareNote requires a guid");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,sn(r,t,n.authenticationToken);case 11:return o=e.sent,e.next=14,Ys({guid:t,resultSpec:new On.NoteResultSpec({includeSharedNotes:!0}),forceFetch:!0});case 14:return e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(2),e.t0;case 20:case"end":return e.stop()}},e,this,[[2,17]])}))).apply(this,arguments)}Nn.a.register("note.actions.select",Ap);var Hp=Bp;function Yp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Jp(e){return Kp.apply(this,arguments)}function Kp(){return(Kp=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yp(a,r,o,u,i,"next",e)}function i(e){Yp(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#stopSharingNote requires a guid");case 2:return e.prev=2,e.next=5,An.a.getLocationForNoteGuid(t);case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,ln(r,t,n.authenticationToken);case 11:return e.next=13,Ys({guid:t,forceFetch:!0});case 13:return e.abrupt("return",null);case 16:throw e.prev=16,e.t0=e.catch(2),e.t0;case 19:case"end":return e.stop()}},e,this,[[2,16]])}))).apply(this,arguments)}Nn.a.register("note.actions.share",Bp);var zp=Jp;Nn.a.register("note.actions.stopsharing",Jp);var Xp=n(484);function Qp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zp(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function $p(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Zp(a,r,o,u,i,"next",e)}function i(e){Zp(a,r,o,u,i,"throw",e)}u(void 0)})}}function ef(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){nf(e,t,n[t])})}return e}function nf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rf=Object(oa.default)("ion:action:updateNote"),of=["attributes","created","notebookGuid","sharedNotes","tagGuids","tagNames","title","active","deleted"],af=["author","reminderDoneTime","reminderOrder","reminderTime","shareDate","sharedWithBusiness","sourceURL"],uf={};function cf(e,t,n,r){var o=tf({},t);e.attributes&&o.attributes&&(o.attributes=tf({},e.attributes,o.attributes)),Object.assign(e,Za.a.omitBy(o,Za.a.isUndefined),{resources:null}),n.sharedToMe&&!r&&delete e.tagGuids}function sf(e,t){return new Jr.ResourcesUpdateRequest({deactivateResourcesWithBodyHashes:[].concat(ef(e.deactivateResourcesWithBodyHashes||[]),ef(t.deactivateResourcesWithBodyHashes||[])),activateResourcesWithBodyHashes:[].concat(ef(e.activateResourcesWithBodyHashes||[]),ef(t.activateResourcesWithBodyHashes||[]))})}function pf(e){return ff.apply(this,arguments)}function ff(){return(ff=$p(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("note.datasource.getnote",t);case 2:return n=e.sent,e.next=5,Nn.a.call("notebook.actions.hasnotebook",n.notebookGuid);case 5:if(!e.sent){e.next=11;break}return e.next=9,Nn.a.call("notebook.actions.getnotebook",n.notebookGuid);case 9:return r=e.sent,e.abrupt("return",r.restrictions&&!r.restrictions.noUpdateNotes||!1);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function lf(e){return hf.apply(this,arguments)}function hf(){return(hf=$p(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=function(e,t){return function(){var n=df({noteChanges:e,resourcesUpdateRequest:t}),r=n.then(u,u);return uf[a]={nextChanges:{},nextResourcesUpdate:{},inFlightRequest:r},n}},u=function(){uf[a].nextRequest||delete uf[a]},n=t.noteChanges,r=t.resourcesUpdateRequest,o=void 0===r?new Jr.ResourcesUpdateRequest:r,rf.log("updateNote called with:",n,o),null!=(a=n.guid)){e.next=7;break}return e.abrupt("return",Promise.reject(new Error("#updateNote requires a guid")));case 7:if(!uf[a]){e.next=19;break}return c=uf[a],e.next=11,An.a.getLocationForNoteGuid(a);case 11:return s=e.sent,e.next=14,pf(a);case 14:return p=e.sent,cf(c.nextChanges,n,s,p),c.nextResourcesUpdate=sf(c.nextResourcesUpdate,o),c.nextRequest||(c.nextRequest=c.inFlightRequest.then(i(c.nextChanges,c.nextResourcesUpdate))),e.abrupt("return",c.nextRequest);case 19:return e.abrupt("return",i(n,o)());case 20:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var vf=function(){function e(t,n,r,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sentNote=void 0,this.locator=void 0,this.updateTags=void 0,this.sentUpdatedWinsData=void 0,this.resourcesUpdateRequest=void 0,this.MAX_ATTEMPTS=4,this.sentNote=t,this.locator=n,this.updateTags=r,this.sentUpdatedWinsData=o,this.resourcesUpdateRequest=a}return function(e,t,n){t&&Qp(e.prototype,t),n&&Qp(e,n)}(e,[{key:"isEligibleForUpdatedWins",value:function(e){var t=this.sentUpdatedWinsData,n=t.updatedWinsAttributes,r=t.updatedWinsFields;return(0!==n.length||0!==r.length)&&(null!=e.updated&&null!=this.sentNote.updated&&e.updated<this.sentNote.updated)}},{key:"retryUpdatedWins",value:function(){var e=$p(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cf(n=tf({},t),Za.a.pick(this.sentNote,this.sentUpdatedWinsData.updatedWinsFields),this.locator,this.updateTags),rf.log("retrying updateNoteIfUsnMatches with fields where updatedTimestamp wins.",n),e.next=5,Zr.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,Br(r,n,new Jr.ResourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - updated wins retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:if(rf.log("publishing to datasource",a),Nn.a.publish("note","updateNote",{note:a,locator:this.locator}),!(this.sentUpdatedWinsData.notUpdatedWinsFields.length>0||this.sentUpdatedWinsData.notUpdatedWinsAttributes.length>0)){e.next=18;break}throw new Error("did not update everything we wanted");case 18:return e.abrupt("return",{updated:!0,serviceNote:a});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isEligibleForContent",value:function(e){if(null==e.contentHash||null==this.sentNote.contentHash)return!1;if(Object(Xp.hashify)(e.contentHash)!==Object(Xp.hashify)(this.sentNote.contentHash||""))return!1;var t=this.sentUpdatedWinsData.changeKeys.filter(function(e){return"guid"!==e});return 1===t.length&&"content"===t[0]}},{key:"retryContent",value:function(){var e=$p(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cf(n=tf({},t),{content:this.sentNote.content},this.locator,this.updateTags),rf.log("Retry content update with",n),e.next=5,Zr.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,Br(r,n,this.resourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - content retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:return u=tf({},a,{content:n.content}),rf.log("publishing note content update to dataSource",u),Nn.a.publish("note","updateNote",{note:u,resultSpec:new On.NoteResultSpec({includeContent:!0}),locator:this.locator}),e.abrupt("return",{updated:!0,serviceNote:u});case 18:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isEligibleForResources",value:function(){var e=this.resourcesUpdateRequest,t=e.activateResourcesWithBodyHashes,n=e.deactivateResourcesWithBodyHashes;return null!=t&&t.length>0||null!=n&&n.length>0}},{key:"retryResources",value:function(){var e=$p(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return cf(n=tf({},t,{resources:null}),{},this.locator,this.updateTags),rf.log("resending resource update request",n,this.resourcesUpdateRequest),e.next=5,Zr.fromLocator(this.locator);case 5:return r=e.sent,e.next=8,Br(r,n,this.resourcesUpdateRequest,this.locator.authenticationToken);case 8:if(null!=(o=e.sent).note){e.next=11;break}throw new Error("updateResult.note is undefined - resource retry");case 11:if(a=o.note,o.updated){e.next=14;break}return e.abrupt("return",{updated:!1,serviceNote:a});case 14:return rf.log("publishing note update to dataSource",a),Nn.a.publish("note","updateNote",{note:a,locator:this.locator}),e.abrupt("return",{updated:!0,serviceNote:a});case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getRetryStrategies",value:function(e){var t=this;return[{isEligible:function(){return t.isEligibleForUpdatedWins(e)},retryUpdate:function(){return t.retryUpdatedWins(e)}},{isEligible:function(){return t.isEligibleForContent(e)},retryUpdate:function(){return t.retryContent(e)}},{isEligible:function(){return t.isEligibleForResources()},retryUpdate:function(){return t.retryResources(e)}}]}},{key:"redactContent",value:function(e){return tf({},e,{content:null!=e.content?"REDACTED FOR PRIVACY":null})}},{key:"logErrorWithState",value:function(e,t){rf.error(e,"lastServiceNote:",this.redactContent(t),"sentNote:",this.redactContent(this.sentNote),"locator:",this.locator,"updateTags:",this.updateTags,"sentUpdatedWinsData:",this.sentUpdatedWinsData,"resourcesUpdateRequest:",this.resourcesUpdateRequest)}},{key:"retryInternal",value:function(){var e=$p(regeneratorRuntime.mark(function e(t,n){var r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>=this.MAX_ATTEMPTS)){e.next=3;break}throw this.logErrorWithState("Exceeded retry limit - this should never happen.",t),new Error("Got USN errors for ".concat(n," update retries in a row"));case 3:r=this.getRetryStrategies(t),o=0;case 5:if(!(o<r.length)){e.next=17;break}if(!(a=r[o]).isEligible()){e.next=14;break}return e.next=10,a.retryUpdate();case 10:if((u=e.sent).updated){e.next=13;break}return e.abrupt("return",this.retryInternal(u.serviceNote,n+1));case 13:return e.abrupt("return",u.serviceNote);case 14:o++,e.next=5;break;case 17:throw this.logErrorWithState("Unable to retry update for an unknown reason.",t),new Error("note is ineligible for update retry");case 19:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"retry",value:function(e){return this.retryInternal(e,0)}}]),e}();function df(e){return bf.apply(this,arguments)}function bf(){return(bf=$p(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,b,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.noteChanges,r=t.resourcesUpdateRequest,e.prev=1,null!=(o=n.guid)){e.next=5;break}throw new Error("guid is required when updating note");case 5:return a=Object.keys(n).filter(function(e){return null!=n[e]}),u=Object.keys(n.attributes||{}),i={changeKeys:a,updatedWinsFields:Za.a.intersection(a,of),updatedWinsAttributes:Za.a.intersection(u,af),notUpdatedWinsFields:Za.a.difference(a,[].concat(of,["guid"])),notUpdatedWinsAttributes:Za.a.difference(u,af)},e.next=10,Nn.a.call("note.datasource.getnote",o);case 10:return c=e.sent,e.next=13,pf(o);case 13:return s=e.sent,e.next=16,An.a.getLocationForNote(c);case 16:return p=e.sent,e.next=19,Zr.fromLocator(p);case 19:return f=e.sent,cf(l=tf({},c),n,p,s),l.updated=Date.now(),c.stale&&null!=l.content&&(rf.warn("Skipping content update because note is stale"),delete l.content),rf.log("updateNoteIfUsnMatches with",l,r),e.next=27,Br(f,l,r,p.authenticationToken);case 27:if(null!=(h=e.sent).note){e.next=30;break}throw new Error("note is undefined - after initial update");case 30:if(v=h.note,h.updated){e.next=36;break}return d=new vf(l,p,s,i,r),e.next=35,d.retry(v);case 35:return e.abrupt("return",e.sent);case 36:return b=tf({},v,{content:n.content||null}),m=new On.NoteResultSpec({includeContent:null!=n.content}),rf.log("publishing note update",b,m),Nn.a.publish("note","updateNote",{note:b,resultSpec:m,locator:p}),e.abrupt("return",b);case 43:throw e.prev=43,e.t0=e.catch(1),rf.error("error in performUpdate:",e.t0),e.t0;case 47:case"end":return e.stop()}},e,this,[[1,43]])}))).apply(this,arguments)}var mf=lf;function yf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gf(e){return wf.apply(this,arguments)}function wf(){return(wf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yf(a,r,o,u,i,"next",e)}function i(e){yf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.guid,r=t.lockState,e.prev=1,Nn.a.publish("note","updateLock",{guid:n,lockState:r}),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),e.t0;case 8:case"end":return e.stop()}},e,this,[[1,5]])}))).apply(this,arguments)}Nn.a.register("note.actions.update",lf);var kf=gf;function xf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pf(){return Rf.apply(this,arguments)}function Rf(){return(Rf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xf(a,r,o,u,i,"next",e)}function i(e){xf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,Dn.fromLocator(t);case 6:return n=e.sent,e.next=9,Dt(n,t.authenticationToken);case 9:return r=e.sent,Nn.a.publish("tag","updateTags",r),e.abrupt("return",r);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("note.actions.lock.update",gf);var Nf=Pf;function Of(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sf(e){return jf.apply(this,arguments)}function jf(){return(jf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Of(a,r,o,u,i,"next",e)}function i(e){Of(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.filter,r=t.notebookGuid,e.prev=1,!r){e.next=8;break}return e.next=5,An.a.getLocationForNotebookGuid(r);case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,An.a.getDefaultLocator();case 10:e.t0=e.sent;case 11:return o=e.t0,e.next=14,Dn.fromLocator(o);case 14:return a=e.sent,e.next=17,ce(a,n,o.authenticationToken);case 17:return u=e.sent,o.globalId?Nn.a.publish("tag","countSharedTags",{noteCollection:u,notebookGuid:r}):Nn.a.publish("tag","countTag",u),e.abrupt("return",u);case 22:throw e.prev=22,e.t1=e.catch(1),e.t1;case 25:case"end":return e.stop()}},e,this,[[1,22]])}))).apply(this,arguments)}Nn.a.register("tag.actions.list",Pf);var Lf=Sf;function Tf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Ef(){return If.apply(this,arguments)}function If(){return(If=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Tf(a,r,o,u,i,"next",e)}function i(e){Tf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nf();case 3:return t=e.sent,e.next=6,Lf({filter:new On.NoteFilter({tagGuids:t.map(function(e){return e.guid||""})})});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}},e,this,[[0,8]])}))).apply(this,arguments)}Nn.a.register("tag.actions.count",Sf);var Uf=Ef;function Cf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Gf(e){return _f.apply(this,arguments)}function _f(){return(_f=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Cf(a,r,o,u,i,"next",e)}function i(e){Cf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,I(r,t,n.authenticationToken);case 9:return o=e.sent,Nn.a.publish("tag","updateTag",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("tag.actions.bootstrap",Ef);var Wf=Gf;function Df(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Af(e){return Mf.apply(this,arguments)}function Mf(){return(Mf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Df(a,r,o,u,i,"next",e)}function i(e){Df(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,Dn.fromLocator(n);case 5:return r=e.sent,e.next=8,X(r,t,n.authenticationToken);case 8:return o=e.sent,Io.a.isUpSyncDisabled()&&Nn.a.publish("tag","deleteTag",t),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("tag.actions.create",Gf);var Ff=Af;function qf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Bf(e){return Vf.apply(this,arguments)}function Vf(){return(Vf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){qf(a,r,o,u,i,"next",e)}function i(e){qf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getLocationForNotebookGuid(t);case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,Ft(r,t,n.authenticationToken);case 9:return o=e.sent,Nn.a.publish("tag","updateSharedTags",{tags:o,guid:t}),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("tag.actions.deleteService",Af);var Hf=Bf;function Yf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Jf(e){return Kf.apply(this,arguments)}function Kf(){return(Kf=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yf(a,r,o,u,i,"next",e)}function i(e){Yf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,Rn(r,t,n.authenticationToken);case 9:if(null==e.sent){e.next=13;break}return e.next=13,Nn.a.publish("tag","updateTag",t);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(0),e.t0;case 18:case"end":return e.stop()}},e,this,[[0,15]])}))).apply(this,arguments)}Nn.a.register("tag.actions.listTagsByNotebook",Bf);var zf=Jf;Nn.a.register("tag.actions.update",Jf);var Xf=n(397);function Qf(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}var Zf={includeInvitations:!1,includeIdentityByInvitationsGuid:!1,includeMemberships:!1,includeWorkspaceRestrictions:!1,includeNotebookGuids:!0,includeAccessInfo:!1,includeNotebookRestrictions:!1,includeDiscoverableWorkspaces:!1,includeAggregations:!1};function $f(e){return el.apply(this,arguments)}function el(){return(el=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Qf(a,r,o,u,i,"next",e)}function i(e){Qf(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.guid,r=t.responseSpec,null!=n){e.next=3;break}throw new Error("#getWorkspace workspace guid is required");case 3:return e.prev=3,e.next=6,An.a.getLocationForWorkspaceGuid();case 6:return o=e.sent,e.next=9,Zr.fromLocator(o);case 9:return a=e.sent,u=new Xf.WorkspaceResponseSpec(r||Zf),e.next=13,hr(a,n,u,o.authenticationToken);case 13:return i=e.sent,i.workspace&&Nn.a.publish("workspace","updateWorkspace",i),e.abrupt("return",i);case 19:throw e.prev=19,e.t0=e.catch(3),e.t0;case 22:case"end":return e.stop()}},e,this,[[3,19]])}))).apply(this,arguments)}var tl=$f;function nl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function rl(e){return ol.apply(this,arguments)}function ol(){return(ol=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){nl(a,r,o,u,i,"next",e)}function i(e){nl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.membershipsToUpdate,o=t.invitationsToCreateOrUpdate,a=t.membershipsToRemove,null!=n){e.next=3;break}throw new Error("workspaceGuid is required to #manageWorkspaceSharing calls.");case 3:return e.next=5,An.a.getLocationForWorkspaceGuid();case 5:return u=e.sent,e.next=8,Zr.fromLocator(u);case 8:return i=e.sent,e.next=11,Nr(i,new Xf.ManageWorkspaceSharingRequest({workspaceGuid:n,membershipsToUpdate:r,invitationsToCreateOrUpdate:o,membershipsToRemove:a}),u.authenticationToken);case 11:if(!1!==e.sent.containsNoErrors){e.next=14;break}throw new Error("Workspace sharing was not updated");case 14:return e.next=16,tl({guid:n,responseSpec:{includeInvitations:!0,includeMemberships:!0}});case 16:c=e.sent,Nn.a.publish("workspace","updateWorkspace",c);case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("workspace.actions.get",$f);var al=rl;function ul(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function il(e){return cl.apply(this,arguments)}function cl(){return(cl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ul(a,r,o,u,i,"next",e)}function i(e){ul(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.userIds,o=t.privilegeLevel,null!=n){e.next=3;break}throw new Error("workspaceGuid is required for #addUsersToWorkspace");case 3:if(null!=o){e.next=5;break}throw new Error("privilegeLevel is required for #addUsersToWorkspace");case 5:return e.next=7,Nn.a.call("identity.actions.getidentitiesforusers",r);case 7:return a=e.sent,u=a.map(function(e){return new Xf.WorkspaceInvitation({workspaceGuid:n,privilege:o,contact:e.contact})}),e.next=11,al({workspaceGuid:n,invitationsToCreateOrUpdate:u});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("workspace.actions.managesharing",rl);var sl=il;function pl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function fl(e){return ll.apply(this,arguments)}function ll(){return(ll=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){pl(a,r,o,u,i,"next",e)}function i(e){pl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceResponse,e.prev=1,!n.notebookGuids){e.next=12;break}if(!(r=n.workspace)||!r.guid){e.next=12;break}return o=r.guid,e.next=9,An.a.getLocationForWorkspaceGuid();case 9:return a=e.sent,e.next=12,ti({locator:a,workspaceGuids:[o]});case 12:return e.abrupt("return",null);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.addusers",il);var hl=fl;function vl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function dl(e){return bl.apply(this,arguments)}function bl(){return(bl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){vl(a,r,o,u,i,"next",e)}function i(e){vl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#bootstrapWorkspace Guid is required");case 2:return e.prev=2,e.next=5,tl({guid:t,responseSpec:{includeInvitations:!1,includeIdentityByInvitationsGuid:!1,includeMemberships:!0,includeWorkspaceRestrictions:!1,includeNotebookGuids:!0,includeAccessInfo:!0,includeNotebookRestrictions:!0,includeDiscoverableWorkspaces:!1,includeAggregations:!1}});case 5:return n=e.sent,e.next=8,hl({workspaceResponse:n});case 8:return e.abrupt("return",n);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,this,[[2,11]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.getcontent",fl);var ml=dl;function yl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gl(){return wl.apply(this,arguments)}function wl(){return(wl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yl(a,r,o,u,i,"next",e)}function i(e){yl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return t=e.sent,e.next=6,Zr.fromLocator(t);case 6:return n=e.sent,r=new Xf.WorkspaceResponseSpec({includeAccessInfo:!0,includeMemberships:!0,includeNotebookGuids:!0,includeWorkspaceRestrictions:!0}),e.next=10,xr(n,r,new Xf.WorkspaceFilter,t.authenticationToken);case 10:o=e.sent,Nn.a.publish("workspace","updateWorkspaces",o),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.bootstrap",dl);var kl=gl;function xl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pl(e){return Rl.apply(this,arguments)}function Rl(){return(Rl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xl(a,r,o,u,i,"next",e)}function i(e){xl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return n=e.sent,e.next=5,Zr.fromLocator(n);case 5:return r=e.sent,e.next=8,zn(r,t,n.authenticationToken);case 8:if(o=e.sent,a=o.guid,u=o.backingNotebookGuid,!a||!u){e.next=18;break}return e.next=13,tl({guid:a,responseSpec:{includeMemberships:!0,includeWorkspaceRestrictions:!0,includeAccessInfo:!0}});case 13:return i=e.sent,Nn.a.publish("workspace","updateWorkspace",i),e.next=17,qo(u);case 17:return e.abrupt("return",a);case 18:throw new Error("malformed workspace returned from createWorkspace");case 19:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("workspace.actions.bootstrapWorkspaces",gl);var Nl=Pl;function Ol(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("workspace.actions.create",Pl);var Sl=Object(oa.default)("ion:actions:leaveWorkspace");function jl(e){return Ll.apply(this,arguments)}function Ll(){return(Ll=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ol(a,r,o,u,i,"next",e)}function i(e){Ol(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#leaveWorkspace requires a workspaceGuid");case 2:return Sl.log("#leaveWorkspace called w/ guid",t),e.next=5,An.a.getLocationForWorkspaceGuid();case 5:return n=e.sent,e.next=8,Zr.fromLocator(n);case 8:return r=e.sent,e.next=11,Nn.a.call("notebook.actions.getWorkspaceToNotebookGuids");case 11:return o=e.sent,e.next=14,Promise.all((o.getValuesAsArray(t)||[]).map(function(e){return Nn.a.call("notebook.actions.getnotebook",e)}));case 14:return a=e.sent,u=a.filter(function(e){return null==e.sharedNotebooks}).map(function(e){return e.guid}),Sl.log("notebooks to be expunged:",u),e.next=19,br(r,t,n.authenticationToken);case 19:Nn.a.publish("notebook","expungeNotebooks",u),Nn.a.publish("workspace","expungeWorkspace",t);case 21:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Tl=jl;function El(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Il(e){return Ul.apply(this,arguments)}function Ul(){return(Ul=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){El(a,r,o,u,i,"next",e)}function i(e){El(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.workspaceGuid,r=t.userIds,null!=n){e.next=3;break}throw new Error("workspaceGuid is required for #removeUsersFromWorkspace");case 3:return e.next=5,Nn.a.call("workspace.actions.getworkspaceresponse",n);case 5:if(o=e.sent,!(a=o.memberships)){e.next=11;break}return u=a.filter(function(e){return null!=e.common&&null!=e.common.recipientId&&r.includes(e.common.recipientId)}).map(function(e){return e.common&&e.common.guid}).filter(function(e){return null!=e}),e.next=11,al({workspaceGuid:n,membershipsToRemove:u});case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("workspace.actions.leaveservice",jl);var Cl=Il;Nn.a.register("workspace.actions.removeusers",Il);var Gl=n(658);function _l(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Wl(e){return Dl.apply(this,arguments)}function Dl(){return(Dl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){_l(a,r,o,u,i,"next",e)}function i(e){_l(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("workspace.actions.getworkspaceresponse",t);case 2:if(n=e.sent,!Object(Gl.isSeen)(n.accessInfo)){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,An.a.getLocationForWorkspaceGuid();case 7:return r=e.sent,e.next=10,Zr.fromLocator(r);case 10:return o=e.sent,e.next=13,Wr(o,t,r.authenticationToken);case 13:return Nn.a.publish("workspace","updateWorkspace",{workspaceGuid:t,accessInfo:new Xf.AccessInfo({viewed:!0})}),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Al=Wl;function Ml(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Fl(e){return ql.apply(this,arguments)}function ql(){return(ql=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ml(a,r,o,u,i,"next",e)}function i(e){Ml(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t.guid){e.next=3;break}throw new Error("workspace guid is required for #updateWorkspace");case 3:return e.next=5,An.a.getLocationForWorkspaceGuid();case 5:return n=e.sent,e.next=8,Zr.fromLocator(n);case 8:return r=e.sent,e.next=11,Yr(r,new Xf.Workspace(t),n.authenticationToken);case 11:return o=e.sent,Nn.a.publish("workspace","updateWorkspace",{workspace:o}),e.abrupt("return",o.updateSequenceNum||null);case 14:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("workspace.actions.see",Wl);var Bl=Fl;function Vl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Hl(e){return Yl.apply(this,arguments)}function Yl(){return(Yl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Vl(a,r,o,u,i,"next",e)}function i(e){Vl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.updateVersion,o=t.shouldUpdateLocalState,e.prev=1,e.next=4,An.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,ct(u,new On.GetWorkspaceUserInterfacePropertiesRequest({workspaceGuid:n,updateVersion:r}),a.authenticationToken);case 10:return i=e.sent,!1!==o&&i&&i.updateVersion&&r<i.updateVersion&&Nn.a.publish("workspace","setWorkspaceUserInterfaceProperties",{guid:n,workspaceUserInterfaceProperties:i}),e.abrupt("return",i);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.updateService",Fl);var Jl=Hl;function Kl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function zl(e){return Xl.apply(this,arguments)}function Xl(){return(Xl=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Kl(a,r,o,u,i,"next",e)}function i(e){Kl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.layoutStyle,o=t.updateVersion,e.prev=1,e.next=4,An.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,ft(u,n,r,a.authenticationToken);case 10:ws.a.getWorkspaceUserInterfaceProperties(n,o),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.getWorkspaceUserInterfaceProperties",Hl);var Ql=zl;function Zl(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function $l(e){return eh.apply(this,arguments)}function eh(){return(eh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Zl(a,r,o,u,i,"next",e)}function i(e){Zl(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.noteDisplayOrder,o=t.updateVersion,e.prev=1,e.next=4,An.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,vt(u,n,r,a.authenticationToken);case 10:ws.a.getWorkspaceUserInterfaceProperties(n,o),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.setWorkspaceUserInterfaceLayoutStyle",zl);var th=$l;function nh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function rh(e){return oh.apply(this,arguments)}function oh(){return(oh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){nh(a,r,o,u,i,"next",e)}function i(e){nh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.notebookDisplayOrder,o=t.updateVersion,e.prev=1,e.next=4,An.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,bt(u,n,r,a.authenticationToken);case 10:return e.next=12,Jl({workspaceGuid:n,updateVersion:o});case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(1),e.t0;case 17:case"end":return e.stop()}},e,this,[[1,14]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.setNoteUserInterfaceDisplayOrder",$l);var ah=rh;function uh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ih(e){return ch.apply(this,arguments)}function ch(){return(ch=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){uh(a,r,o,u,i,"next",e)}function i(e){uh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.workspaceGuid,r=t.updatedColors,o=t.updateVersion,e.prev=1,e.next=4,An.a.getLocationForWorkspaceGuid();case 4:return a=e.sent,e.next=7,Dn.fromLocator(a);case 7:return u=e.sent,e.next=10,wt(u,n,r,a.authenticationToken);case 10:Jl({workspaceGuid:n,updateVersion:o}),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}Nn.a.register("workspace.actions.setNotebookUserInterfaceDisplayOrder",rh);var sh=ih;function ph(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function fh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("workspace.actions.setNotebookUserInterfaceColors",ih);var lh=Object(oa.default)("ion:actions:catchupStragglers");function hh(){return vh.apply(this,arguments)}function vh(){return(vh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){fh(a,r,o,u,i,"next",e)}function i(e){fh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(){var t,n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("notebook.actions.getCatchupNotebooks");case 2:return t=e.sent,e.next=5,Nn.a.call("workspace.actions.getCatchupGuids");case 5:return n=e.sent,e.next=8,An.a.getDefaultLocator();case 8:if(r=e.sent,!n.length){e.next=18;break}return e.prev=10,e.next=13,ti({locator:r,workspaceGuids:n});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),lh.error("catchup failed for workspaces",e.t0);case 18:return o=t.map(function(e){return[e.guid,new An.a(e.personal,e.sharedToMe,e.shard)]}).reduce(function(e,t){var n=ph(t,2),r=n[0],o=n[1],a="".concat(o.shard||"","_").concat(o.personal?"P":"B");return null==e[a]&&(e[a]={nbs:[],locator:o}),e[a].nbs.push(r),e},{}),e.prev=19,e.next=22,Promise.all(Object.keys(o).map(function(e){var t=o[e],n=t.nbs,r=t.locator;return ti({locator:r,notebookGuids:n})}));case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(19),lh.error("catchup failed for notebooks",e.t1);case 27:case"end":return e.stop()}},e,this,[[10,15],[19,24]])}))).apply(this,arguments)}var dh=hh;function bh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function mh(e){return yh.apply(this,arguments)}function yh(){return(yh=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bh(a,r,o,u,i,"next",e)}function i(e){bh(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,at(r,t);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}Nn.a.register("sync.actions.catchupstragglers",hh);var gh=mh;Nn.a.register("sync.actions.getWithMetrics",mh);var wh=n(448),kh=n(386),xh=Symbol("The application needs to restart sync");function Ph(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Rh(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ph(a,r,o,u,i,"next",e)}function i(e){Ph(a,r,o,u,i,"throw",e)}u(void 0)})}}var Nh=Object(oa.default)("ion:sugar:upsync");function Oh(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!(n&&n<=0||t.sharedToMe)){var o=t.personal?"PERSONAL_USN":"BUSINESS_USN";if(n===e[o]+r)e[o]=n;else if(n&&n>e[o])throw xh}}function Sh(e){return jh.apply(this,arguments)}function jh(){return(jh=Rh(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lh(t);case 2:return e.next=4,Uh(t);case 4:return e.next=6,Bh(t);case 6:return e.next=8,Wh(t);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Lh(e){return Th.apply(this,arguments)}function Th(){return(Th=Rh(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("tag.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,Eh(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,An.a.getDefaultLocator();case 13:i=e.sent,Oh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Eh(e,t){return Ih.apply(this,arguments)}function Ih(){return(Ih=Rh(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,!n.isDeleted){e.next=8;break}return e.next=5,Nn.a.call("tag.actions.deleteService",t);case 5:r=e.sent,e.next=9;break;case 8:Nh.error("trying to upsync edited tag ".concat(t,", but editing tags is not supported in Ion"));case 9:return e.next=11,Nn.a.call("tag.actions.cleardirty",t);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),Nh.error("could not upsync tag ".concat(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}},e,this,[[1,13]])}))).apply(this,arguments)}function Uh(e){return Ch.apply(this,arguments)}function Ch(){return(Ch=Rh(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("notebook.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,Gh(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,An.a.getLocationForNotebookGuid(a);case 13:i=e.sent,Oh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Gh(e,t){return _h.apply(this,arguments)}function _h(){return(_h=Rh(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,!n.isDeleted){e.next=8;break}return e.next=5,Nn.a.call("notebook.actions.expungeNotebookService",t);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,Nn.a.call("notebook.actions.updateservice",n);case 10:r=e.sent;case 11:return e.next=13,Nn.a.call("notebook.actions.cleardirty",t);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),Nh.error("could not upsync notebook ".concat(t));case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},e,this,[[1,15]])}))).apply(this,arguments)}function Wh(e){return Dh.apply(this,arguments)}function Dh(){return(Dh=Rh(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("note.actions.getdirty");case 2:n=e.sent,r=[],o=[],Object.keys(n).forEach(function(e){var t=n[e];t.isDeleted?r.push(e):o.push(t)}),a=0;case 7:if(!(a<o.length)){e.next=14;break}return u=o[a],e.next=11,Ah(u);case 11:a++,e.next=7;break;case 14:if(!(r.length>0)){e.next=25;break}return e.next=17,Fh(r);case 17:if(i=e.sent,c=i.lastServerUsn,s=i.completedServiceCalls,!c){e.next=25;break}return e.next=23,An.a.getDefaultLocator();case 23:p=e.sent,Oh(t,p,c,s);case 25:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ah(e){return Mh.apply(this,arguments)}function Mh(){return(Mh=Rh(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Nn.a.call("note.actions.update",{noteChanges:t,resourcesUpdateRequest:{}});case 3:return e.next=5,Nn.a.call("note.actions.cleardirty",[t.guid]);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Nh.error("could not upsync note ".concat(t.guid));case 10:case"end":return e.stop()}},e,this,[[0,7]])}))).apply(this,arguments)}function Fh(e){return qh.apply(this,arguments)}function qh(){return(qh=Rh(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={completedServiceCalls:0},e.prev=1,e.next=4,Nn.a.call("note.actions.expungeNotesService",t);case 4:return n=e.sent,e.next=7,Nn.a.call("note.actions.cleardirty",t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Nh.error("could not batch up-sync locally deleted guids");case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,this,[[1,9]])}))).apply(this,arguments)}function Bh(e){return Vh.apply(this,arguments)}function Vh(){return(Vh=Rh(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("workspace.actions.getdirty");case 2:n=e.sent,r=Object.keys(n),o=0;case 5:if(!(o<r.length)){e.next=18;break}return a=r[o],e.next=9,Hh(a,n[a]);case 9:if(!(u=e.sent)){e.next=15;break}return e.next=13,An.a.getLocationForWorkspaceGuid();case 13:i=e.sent,Oh(t,i,u);case 15:o++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Hh(e,t){return Yh.apply(this,arguments)}function Yh(){return(Yh=Rh(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,e.prev=1,n.isDeleted){e.next=8;break}return e.next=5,Nn.a.call("workspace.actions.updateService",n);case 5:r=e.sent,e.next=10;break;case 8:return e.next=10,Nn.a.call("workspace.actions.leaveservice",t);case 10:return e.next=12,Nn.a.call("workspace.actions.cleardirty",t);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),Nh.error("could not upsync workspace ".concat(t));case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}},e,this,[[1,14]])}))).apply(this,arguments)}var Jh=1e3,Kh=25e3,zh=n(388);function Xh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Qh(e,t,n[t])})}return e}function Qh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zh(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function $h(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Zh(a,r,o,u,i,"next",e)}function i(e){Zh(a,r,o,u,i,"throw",e)}u(void 0)})}}var ev=Object(oa.default)("ion:actions:runNoteSyncCycle"),tv="NOTE_SYNC_ACTION/PERSONAL_SYNC_CYCLE",nv="NOTE_SYNC_ACTION/BUSINESS_SYNC_CYCLE";function rv(e){return ov.apply(this,arguments)}function ov(){return(ov=$h(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i,c,s,p,f,l,h,v,d,b,m,y,g,w,k,x,P,R,N,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R=function(){return(R=$h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(),e.next=3,w();case 3:a=setInterval(w,Kh);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},P=function(){return R.apply(this,arguments)},x=function(){a&&clearInterval(a)},k=function(){return(k=$h(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return o=!0,e.abrupt("return");case 3:if(r=!0,o=!1,ev.info("sync cycle started"),e.prev=6,t=function(){var e=n?g():y();return!Io.a.isBootstrappingEnabled()||kh.a.isFullySynced()?v(e):b(e)}(),!n){e.next=13;break}return e.next=11,Promise.all([l(),t]);case 11:e.next=15;break;case 13:return e.next=15,t;case 15:if(Io.a.isUpSyncDisabled()){e.next=20;break}return e.next=18,Sh(c);case 18:return e.next=20,p();case 20:e.next=29;break;case 22:if(e.prev=22,e.t0=e.catch(6),e.t0!==xh){e.next=28;break}o=!0,e.next=29;break;case 28:throw e.t0;case 29:return e.prev=29,r=!1,o&&Nn.a.publish("sync.notes"),ev.info("sync cycle complete"),e.finish(29);case 34:case"end":return e.stop()}},e,this,[[6,22,29,34]])}))).apply(this,arguments)},w=function(){return k.apply(this,arguments)},g=function(){return new On.SyncChunkFilter({includeNotebooks:!0,includeNotes:!0,includeNotesSharedWithMe:!0,includePreferences:!0,includeSharedNotes:!0,includeTags:!0,includeWorkspaces:!0,includeWorkspacesContent:!0,includeExpunged:!0,includeLinkedNotebooks:!0})},y=function(){return new On.SyncChunkFilter({includeLinkedNotebooks:!0,includeSharedNotes:!0,includePreferences:!0,includeExpunged:!0,includeNotebooks:!0,includeNotes:!0,includeTags:!0})},m=function(){return(m=$h(regeneratorRuntime.mark(function e(t){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:r=e.sent,a=n?c.PERSONAL_USN:c.BUSINESS_USN,i||(ev.log("Bootstrap: Initializing syncChunkGenerator with afterUSN ".concat(a)),i=Fu({locator:r,syncChunkFilter:t,afterUSN:a}),o=function(){i.next().then(function(e){var t=e.value,o=e.done;if(t&&!o){var a=t.chunk,i=t.firstUpdateCount,s=a.chunkHighUSN;ev.log("Bootstrap: Syncing down USN: ".concat(s)),n?c.BUSINESS_USN=s:c.PERSONAL_USN=s,p(),la({chunk:a,firstUpdateCount:i,shouldCatchup:0===a.updateCount,locator:r}),Nn.a.publish("app.progress","chunk",s)}else ev.log("Bootstrap: setting fully synced because generator is done"),Nn.a.publish("app","synced",!0),u&&(ev.log("Bootstrap: clearing bootstrap sync interval"),clearInterval(u))})}),u||(u=setInterval(function(){o()},Jh));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},b=function(e){return m.apply(this,arguments)},d=function(){return(d=$h(regeneratorRuntime.mark(function e(r){var o,a,u,i,s,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getDefaultLocator();case 2:return o=e.sent,e.prev=3,a=n?c.BUSINESS_USN:c.PERSONAL_USN,zh.a.startDownSync(a),ev.log("Syncing data starting from afterUSN:",a),e.next=9,Ku({locator:o,syncChunkFilter:r,afterUSN:a});case 9:return u=e.sent,i=u.updateCount,s=u.notebookGuids,f=u.workspaceGuids,e.next=15,ti({locator:o,notebookGuids:s,workspaceGuids:f});case 15:return n?c.BUSINESS_USN=i:c.PERSONAL_USN=i,e.next=18,p();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t.syncErrorHandler(e.t0);case 23:case"end":return e.stop()}},e,this,[[3,20]])}))).apply(this,arguments)},v=function(e){return d.apply(this,arguments)},h=function(){return(h=$h(regeneratorRuntime.mark(function e(){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getPersonalLocator();case 2:return n=e.sent,e.prev=3,ev.log("Syncing personal data starting from afterUSN:",c.PERSONAL_USN),e.next=7,Ku({locator:n,syncChunkFilter:new On.SyncChunkFilter({includeLinkedNotebooks:!0,includeSharedNotes:!0,includePreferences:!0,includeExpunged:!0,includeTags:!0}),afterUSN:c.PERSONAL_USN});case 7:return r=e.sent,o=r.updateCount,a=r.notebookGuids,u=r.workspaceGuids,e.next=13,ti({locator:n,notebookGuids:a,workspaceGuids:u});case 13:return e.next=15,Nn.a.call("sync.persist");case 15:return c.PERSONAL_USN=o,e.next=18,p();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),t.syncErrorHandler(e.t0);case 23:case"end":return e.stop()}},e,this,[[3,20]])}))).apply(this,arguments)},l=function(){return h.apply(this,arguments)},f=function(){return(f=$h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("cupboard.set",{namespace:Object(wh.a)("".concat(t.userId)),key:s,value:c});case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},p=function(){return f.apply(this,arguments)},n=t.isBusiness,r=!1,o=!1,a=null,u=null,c={PERSONAL_USN:0,BUSINESS_USN:0},s=n?nv:tv,e.next=24,Nn.a.call("cupboard.get",{namespace:Object(wh.a)("".concat(t.userId)),key:s});case 24:return N=e.sent,c=Xh({},c,N),O=Nn.a.subscribe("sync.notes",function(){P()}),Nn.a.register("sync.actions.syncbusinessnotes",$h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:case"end":return e.stop()}},e,this)}))),e.next=30,P();case 30:if(!Object($r.e)()){e.next=33;break}return e.next=33,Nn.a.call("notebook.actions.getUserNotebook");case 33:return e.next=35,av();case 35:return e.abrupt("return",function(){O(),x()});case 36:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function av(){return uv.apply(this,arguments)}function uv(){return(uv=$h(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Io.a.isBootstrappingEnabled()){e.next=5;break}return e.next=3,dh();case 3:e.next=6;break;case 5:dh();case 6:Nn.a.publish("app.progress","catchupfinished"),Io.a.isBootstrappingEnabled()||Nn.a.publish("app","synced",!0);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function iv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function cv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){iv(a,r,o,u,i,"next",e)}function i(e){iv(a,r,o,u,i,"throw",e)}u(void 0)})}}var sv=Object(oa.default)("ion:action:processMessageSyncChunk");function pv(e){return fv.apply(this,arguments)}function fv(){return(fv=cv(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("user.actions.getvaultuserid");case 2:return n=e.sent,e.next=5,vv(t,function(e){return e===n});case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function lv(e){return hv.apply(this,arguments)}function hv(){return(hv=cv(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("user.actions.getactiveuser");case 2:if(n=e.sent){e.next=5;break}throw new Error("no user???");case 5:return e.next=7,vv(t,function(e){return e===n.id});case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function vv(e,t){return dv.apply(this,arguments)}function dv(){return(dv=cv(regeneratorRuntime.mark(function e(t,n){var r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nn.a.call("user.actions.getactiveuser");case 2:if(r=e.sent){e.next=5;break}throw new Error("no user???");case 5:return e.next=7,Nn.a.call("attachments.actions.getattachments");case 7:o=e.sent,null!=t.messages&&t.messages.length>0&&(a=t.messages.reduce(function(e,t){return(t.attachments||[]).reduce(function(e,a){if(null==a.guid)return sv.warn("Unexpected Thrift change! Detecting attachments with no GUID!"),e;var u=o[a.guid],i=u&&u.senderId===r.id;if(u&&!i)return e;if(e[a.guid]&&e[a.guid].senderId!==r.id)return e;if(null!=a.guid){var c=a.guid,s=a.title,p=a.type,f=a.shardId,l=a.userId,h=t.senderId,v=t.sentAt,d=n(a.userId)?l:r.id;e[c]={guid:c,title:s,type:p,createdAt:v,senderId:h,shardId:f,userId:d,attachmentUserId:a.userId,external:!n(a.userId)}}return e},e)},{}),Nn.a.publish("attachments","update",a)),null!=t.threads&&t.threads.length>0&&Nn.a.publish("service.threads","update",t.threads),null!=t.identities&&t.identities.length>0&&Nn.a.publish("identity","set",t.identities);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function bv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function mv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){bv(a,r,o,u,i,"next",e)}function i(e){bv(a,r,o,u,i,"throw",e)}u(void 0)})}}function yv(e){return gv.apply(this,arguments)}function gv(){return(gv=mv(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,e.next=3,xv({eventId:n,locator:r,processMessageSyncChunk:pv});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function wv(e){return kv.apply(this,arguments)}function kv(){return(kv=mv(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,e.next=3,xv({eventId:n,locator:r,processMessageSyncChunk:lv});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function xv(e){return Pv.apply(this,arguments)}function Pv(){return(Pv=mv(regeneratorRuntime.mark(function e(t){var n,r,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventId,r=t.locator,o=t.processMessageSyncChunk,e.prev=1,e.next=4,Nc.fromLocator(r);case 4:return a=e.sent,e.next=7,hc(a,new wc.MessageSyncFilter({afterEventId:n}),r.authenticationToken);case 7:return(u=e.sent).chunkMaxEventId&&n<u.chunkMaxEventId&&setTimeout(function(){u.chunkMaxEventId&&n<u.chunkMaxEventId&&o(u)},0),e.abrupt("return",{newEventId:u.chunkMaxEventId,userEventId:u.userMaxEventId||0});case 12:throw e.prev=12,e.t0=e.catch(1),e.t0;case 15:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}function Rv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Nv(e,t,n[t])})}return e}function Nv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ov(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sv(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Ov(a,r,o,u,i,"next",e)}function i(e){Ov(a,r,o,u,i,"throw",e)}u(void 0)})}}var jv="MSG_SYNC_ACTION/PERSONAL_SYNC_CYCLE",Lv="MSG_SYNC_ACTION/BUSINESS_SYNC_CYCLE";function Tv(e){return Ev.apply(this,arguments)}function Ev(){return(Ev=Sv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_v(t,{namespace:jv,getMessageSyncChunk:wv}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Iv(){return(Iv=Sv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Tv(t);case 2:(0,e.sent)();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Uv(e){return Cv.apply(this,arguments)}function Cv(){return(Cv=Sv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_v(t,{namespace:Lv,getMessageSyncChunk:yv}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Gv(){return(Gv=Sv(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uv(t);case 2:(0,e.sent)();case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _v(e,t){return Wv.apply(this,arguments)}function Wv(){return(Wv=Sv(regeneratorRuntime.mark(function e(t,n){var r,o,a,u,i,c,s,p,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){r&&clearInterval(r)},c=function(){return(c=Sv(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(),e.next=3,a();case 3:r=setInterval(a,Kh);case 4:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},i=function(){return c.apply(this,arguments)},u=function(){return(u=Sv(regeneratorRuntime.mark(function e(){var r,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=o.MESSAGE_EVENT_ID,u=r;case 2:return e.next=4,n.getMessageSyncChunk({eventId:u,locator:t.locator});case 4:i=e.sent,u=i.newEventId,a=i.userEventId;case 7:if(u!==a&&null!=u){e.next=2;break}case 8:return e.next=10,Nn.a.call("sync.persist");case 10:return o.MESSAGE_EVENT_ID=a,e.next=13,Nn.a.call("cupboard.set",{namespace:Object(wh.a)("".concat(t.userId)),key:n.namespace,value:o});case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)},a=function(){return u.apply(this,arguments)},r=null,o={MESSAGE_EVENT_ID:0},e.next=9,Nn.a.call("cupboard.get",{namespace:Object(wh.a)("".concat(t.userId)),key:n.namespace});case 9:return p=e.sent,o=Rv({},o,p),f=Nn.a.subscribe("sync.actions.syncworkchat",function(){i()}),e.next=14,i();case 14:return e.abrupt("return",function(){f(),s()});case 15:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Dv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Av(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Dv(a,r,o,u,i,"next",e)}function i(e){Dv(a,r,o,u,i,"throw",e)}u(void 0)})}}Nn.a.register("sync.actions.runPersonalMessageSyncCycleOnce",function(e){return Iv.apply(this,arguments)}),Nn.a.register("sync.actions.runBusinessMessageSyncCycleOnce",function(e){return Gv.apply(this,arguments)});var Mv={badAuthHandler:o.e,permissionDeniedHandler:o.e};function Fv(e){return qv.apply(this,arguments)}function qv(){return(qv=Av(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getPersonalLocator();case 2:return n=e.sent,r={syncErrorHandler:Ra(Mv),userId:t.userId,isBusiness:!0},o={locator:n,userId:t.userId},e.next=7,Promise.all([rv(r),Uv(o)]);case 7:a=e.sent,zh.a.endDownSync(),Nn.a.register("sync.actions.stopbusinesssynccycle",function(){return a.forEach(function(e){e()}),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Bv(e){return Vv.apply(this,arguments)}function Vv(){return(Vv=Av(regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,An.a.getPersonalLocator();case 2:return n=e.sent,r={syncErrorHandler:Ra(Mv),userId:t.userId,isBusiness:!1},o={locator:n,userId:t.userId},e.next=7,Promise.all([rv(r),Tv(o)]);case 7:a=e.sent,zh.a.endDownSync(),Nn.a.register("sync.actions.stoppersonalsynccycle",function(){return a.forEach(function(e){e()}),Promise.resolve()});case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Hv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Yv(e){return Jv.apply(this,arguments)}function Jv(){return(Jv=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Hv(a,r,o,u,i,"next",e)}function i(e){Hv(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Zr.fromLocator(n);case 6:return r=e.sent,e.next=9,Zn(r,t,n.authenticationToken);case 9:return o=e.sent,Nn.a.publish("submitfeedback","fileSupportTicket",o),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}},e,this,[[0,14]])}))).apply(this,arguments)}Nn.a.register("sync.actions.runpersonalsynccycle",Bv),Nn.a.register("sync.actions.runbusinesssynccycle",Fv);var Kv=Yv;function zv(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Xv(e){return Qv.apply(this,arguments)}function Qv(){return(Qv=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){zv(a,r,o,u,i,"next",e)}function i(e){zv(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getDefaultLocator();case 3:return n=e.sent,e.next=6,Dn.fromLocator(n);case 6:return r=e.sent,e.next=9,nn(r,t,n.authenticationToken);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}Nn.a.register("submitfeedback.actions.filesupportticket",Yv);var Zv=Xv;function $v(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function ed(e){return td.apply(this,arguments)}function td(){return(td=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){$v(a,r,o,u,i,"next",e)}function i(e){$v(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("#findSearchSuggestionsV2 request is required");case 2:return e.prev=2,e.next=5,An.a.getDefaultLocator();case 5:return n=e.sent,e.next=8,Dn.fromLocator(n);case 8:return r=e.sent,e.next=11,ae(r,t,n.authenticationToken);case 11:return e.abrupt("return",e.sent);case 14:throw e.prev=14,e.t0=e.catch(2),e.t0;case 17:case"end":return e.stop()}},e,this,[[2,14]])}))).apply(this,arguments)}Nn.a.register("logrequest.actions.send",Xv);var nd=ed;Nn.a.register("search.actions.findSearchSuggestionsV2",ed);function rd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function od(){return(od=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){rd(a,r,o,u,i,"next",e)}function i(e){rd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("experimentsService","getProps2",function(e){return t.getProps2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ad=function(e,t,n){return od.apply(this,arguments)};function ud(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function id(){return(id=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){ud(a,r,o,u,i,"next",e)}function i(e){ud(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("experimentsService","getServiceState2",function(e){return t.getServiceState2(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var cd=function(e,t,n){return id.apply(this,arguments)},sd=n(656);function pd(e){return(pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fd(e,t){return!t||"object"!==pd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ld(e){return(ld=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hd(e,t){return(hd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vd=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=fd(this,(e=ld(t)).call.apply(e,[this].concat(o)))).endpoint="experiments",n.InterfaceConstructor=function(e){return new sd.ExperimentsService.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hd(e,t)}(t,Un),t}()),dd=n(655),bd=n.n(dd);function md(e){return(md="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function gd(e){return wd.apply(this,arguments)}function wd(){return(wd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){yd(a,r,o,u,i,"next",e)}function i(e){yd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("request is null");case 2:return e.prev=2,e.next=5,An.a.getPersonalLocator();case 5:return n=e.sent,e.next=8,vd.fromLocator(n);case 8:return r=e.sent,e.next=11,ad(r,t,n.authenticationToken);case 11:if(null!=(o=e.sent)&&null!=o.jsonResponse){e.next=14;break}throw new Error("getProps response is null");case 14:return a=JSON.parse(o.jsonResponse),u=a.props.ion_props.copy_props,i=bd()(a),u&&i&&i.props&&i.props.ionProps&&"object"===md(i.props.ionProps)&&(i.props.ionProps.copyProps=u),e.abrupt("return",i);case 21:throw e.prev=21,e.t0=e.catch(2),e.t0;case 24:case"end":return e.stop()}},e,this,[[2,21]])}))).apply(this,arguments)}var kd=gd;function xd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Pd(e){return Rd.apply(this,arguments)}function Rd(){return(Rd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){xd(a,r,o,u,i,"next",e)}function i(e){xd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}throw new Error("request is null");case 2:return e.prev=2,e.next=5,An.a.getPersonalLocator();case 5:return n=e.sent,e.next=8,vd.fromLocator(n);case 8:return r=e.sent,e.next=11,cd(r,t,n.authenticationToken);case 11:if(null!=(o=e.sent)&&null!=o.jsonResponse){e.next=14;break}throw new Error("getservicestate response is null");case 14:return e.abrupt("return",bd()(JSON.parse(o.jsonResponse)));case 17:throw e.prev=17,e.t0=e.catch(2),e.t0;case 20:case"end":return e.stop()}},e,this,[[2,17]])}))).apply(this,arguments)}Nn.a.register("experiments.actions.getprops",gd);var Nd=Pd;function Od(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function Sd(){return(Sd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Od(a,r,o,u,i,"next",e)}function i(e){Od(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(a.a)("communicationengine","syncMessages",function(e){return t.syncMessages(r||Object(o.a)(),n,e)}));case 1:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}Nn.a.register("experiments.actions.getservicestate",Pd);var jd=function(e,t,n){return Sd.apply(this,arguments)},Ld=n(811);function Td(e){return(Td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ed(e,t){return!t||"object"!==Td(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Id(e){return(Id=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ud(e,t){return(Ud=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cd=new(function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Ed(this,(e=Id(t)).call.apply(e,[this].concat(o)))).endpoint="communicationengine",n.InterfaceConstructor=function(e){return new Ld.CommunicationEngine.Client(e)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ud(e,t)}(t,Un),t}());function Gd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function _d(e){return Wd.apply(this,arguments)}function Wd(){return(Wd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Gd(a,r,o,u,i,"next",e)}function i(e){Gd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,An.a.getPersonalLocator();case 3:return n=e.sent,e.next=6,Cd.fromLocator(n);case 6:return r=e.sent,e.next=9,jd(r,t,n.authenticationToken);case 9:return o=e.sent,e.abrupt("return",o);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}},e,this,[[0,13]])}))).apply(this,arguments)}var Dd=_d;function Ad(e){return Nn.a.publish("commengine","set",e),Promise.resolve()}Nn.a.register("commengine.actions.syncmessages",_d);var Md=Ad;function Fd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("commengine.actions.updatecommengine",Ad);var qd=Object(oa.default)("ion:actions:createMessageThread");function Bd(e){return Vd.apply(this,arguments)}function Vd(){return(Vd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Fd(a,r,o,u,i,"next",e)}function i(e){Fd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.threadSpec,e.prev=1,e.next=4,An.a.getPersonalLocator();case 4:return r=e.sent,e.next=7,Nc.fromLocator(r);case 7:return o=e.sent,e.next=10,pc(o,n,r.authenticationToken||"");case 10:e.next=18;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0.errorCode!==ta.EDAMErrorCode.TOO_MANY||"thread"!==e.t0.parameter){e.next=16;break}return e.abrupt("return");case 16:throw qd.log(e.t0),e.t0;case 18:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var Hd=Bd;function Yd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}Nn.a.register("workchat.actions.createMessageThread",Bd);var Jd=Object(oa.default)("ion:actions:sendMessageToThread");function Kd(e){return zd.apply(this,arguments)}function zd(){return(zd=function(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Yd(a,r,o,u,i,"next",e)}function i(e){Yd(a,r,o,u,i,"throw",e)}u(void 0)})}}(regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.message,e.prev=1,e.next=4,An.a.getPersonalLocator();case 4:return r=e.sent,e.next=7,Nc.fromLocator(r);case 7:return o=e.sent,e.next=10,gc(o,n,r.authenticationToken);case 10:e.next=16;break;case 12:throw e.prev=12,e.t0=e.catch(1),Jd.log(e.t0),e.t0;case 16:case"end":return e.stop()}},e,this,[[1,12]])}))).apply(this,arguments)}var Xd=Kd;function Qd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(r=(u=i.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Zd(e,t,n,r,o,a,u){try{var i=e[a](u),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,o)}function $d(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function u(e){Zd(a,r,o,u,i,"next",e)}function i(e){Zd(a,r,o,u,i,"throw",e)}u(void 0)})}}Nn.a.register("workchat.actions.sendMessageToThread",Kd);var eb=Object(oa.default)("ion:actions:bootstrapShortcuts");function tb(){return nb.apply(this,arguments)}function nb(){return(nb=$d(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fc(["evernote.shortcuts"]);case 3:return t=e.sent,n=t.preferences?t.preferences["evernote.shortcuts"]:[],r=n.map(function(e){return JSON.parse(e)}).filter(function(e){return null==e.updated}).reduce(function(e,t){var n=Qd(t,2),r=n[0],o=n[1];return null==e[r]&&(e[r]=[]),e[r].push(o),e},{}),e.next=8,Promise.all(Object.keys(r).map(function(e){var t=r[e];switch(e){case"Note":return Promise.all(t.map(function(){var e=$d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ys({guid:t});case 3:e.next=10;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.errorCode===ta.EDAMErrorCode.PERMISSION_DENIED){e.next=10;break}throw eb.error(e.t0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()));case"Notebook":return Promise.all(t.map(function(){var e=$d(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qo(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),eb.error(e.t0);case 8:case"end":return e.stop()}},e,this,[[0,5]])}));return function(t){return e.apply(this,arguments)}}()));default:return Promise.resolve()}}));case 8:e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(0),eb.error(e.t0),e.t0;case 14:case"end":return e.stop()}},e,this,[[0,10]])}))).apply(this,arguments)}var rb=tb;Nn.a.register("shortcuts.actions.bootstrap",tb),n.d(t,"authenticateToSharedNotebook",function(){return Bn}),n.d(t,"bootstrapAllNotebooks",function(){return vo}),n.d(t,"createNotebookInWorkspace",function(){return ko}),n.d(t,"createNotebook",function(){return So}),n.d(t,"expungeLinkedNotebook",function(){return Eo}),n.d(t,"expungeNotebookService",function(){return _o}),n.d(t,"getNotebook",function(){return qo}),n.d(t,"getNotebookShares",function(){return Yo}),n.d(t,"getDefaultNotebook",function(){return Xo}),n.d(t,"getUserNotebook",function(){return ea}),n.d(t,"getLinkedNotebook",function(){return _a}),n.d(t,"createLinkedNotebook",function(){return Ma}),n.d(t,"getOrCreateLinkedNotebook",function(){return Va}),n.d(t,"joinLinkedNotebook",function(){return za}),n.d(t,"joinNotebook",function(){return ii}),n.d(t,"leaveNotebook",function(){return fi}),n.d(t,"listNotebooks",function(){return po}),n.d(t,"listLinkedNotebooks",function(){return bi}),n.d(t,"listSharedNotebooks",function(){return ro}),n.d(t,"manageNotebookShares",function(){return Li}),n.d(t,"moveNotebookToAccount",function(){return Ui}),n.d(t,"setNotebookRecipientSettings",function(){return Ai}),n.d(t,"shareNotebook",function(){return Bi}),n.d(t,"shareNotebookToSelf",function(){return Ji}),n.d(t,"updateNotebookService",function(){return $i}),n.d(t,"authenticateToBusiness",function(){return rc}),n.d(t,"getTsdEligibility",function(){return ic}),n.d(t,"getThreadsAndIdentities",function(){return Lc}),n.d(t,"getUser",function(){return Tu}),n.d(t,"getUserRestrictions",function(){return Uc}),n.d(t,"listBusinessUsers",function(){return mu}),n.d(t,"sendVerificationEmail",function(){return Wc}),n.d(t,"updateBusinessUsersIfNecessary",function(){return wu}),n.d(t,"getPreferences",function(){return Fc}),n.d(t,"updatePreferences",function(){return Hc}),n.d(t,"getPromotionStatus",function(){return zc}),n.d(t,"promotionOptOut",function(){return $c}),n.d(t,"showPromotion",function(){return rs}),n.d(t,"getCrossPromotionInfo",function(){return is}),n.d(t,"acquireNoteLock",function(){return fs}),n.d(t,"addResourceToNote",function(){return ms}),n.d(t,"copyNote",function(){return Ns}),n.d(t,"createNote",function(){return Es}),n.d(t,"findNotesMetadata",function(){return Ds}),n.d(t,"createNoteShare",function(){return Zs}),n.d(t,"expungeNotesService",function(){return rp}),n.d(t,"getNote",function(){return Ys}),n.d(t,"getNoteLockStatus",function(){return ip}),n.d(t,"getNoteResourceMap",function(){return lp}),n.d(t,"getNoteShares",function(){return bp}),n.d(t,"getNoteSnippets",function(){return Np}),n.d(t,"manageNoteShares",function(){return Ep}),n.d(t,"releaseNoteLock",function(){return Gp}),n.d(t,"selectNote",function(){return Fp}),n.d(t,"shareNote",function(){return Hp}),n.d(t,"stopSharingNote",function(){return zp}),n.d(t,"updateNote",function(){return mf}),n.d(t,"updateNoteLock",function(){return kf}),n.d(t,"bootstrapTags",function(){return Uf}),n.d(t,"createTag",function(){return Wf}),n.d(t,"deleteTagService",function(){return Ff}),n.d(t,"findNoteCounts",function(){return Lf}),n.d(t,"listTags",function(){return Nf}),n.d(t,"listTagsByNotebook",function(){return Hf}),n.d(t,"updateTag",function(){return zf}),n.d(t,"addUsersToWorkspace",function(){return sl}),n.d(t,"bootstrapWorkspace",function(){return ml}),n.d(t,"bootstrapWorkspaces",function(){return kl}),n.d(t,"createWorkspace",function(){return Nl}),n.d(t,"getWorkspace",function(){return tl}),n.d(t,"getWorkspaceContent",function(){return hl}),n.d(t,"leaveWorkspaceService",function(){return Tl}),n.d(t,"manageWorkspaceSharing",function(){return al}),n.d(t,"removeUsersFromWorkspace",function(){return Cl}),n.d(t,"seeWorkspace",function(){return Al}),n.d(t,"updateWorkspaceService",function(){return Bl}),n.d(t,"getWorkspaceUserInterfaceProperties",function(){return Jl}),n.d(t,"setWorkspaceUserInterfaceLayoutStyle",function(){return Ql}),n.d(t,"setNoteUserInterfaceDisplayOrder",function(){return th}),n.d(t,"setNotebookUserInterfaceDisplayOrder",function(){return ah}),n.d(t,"setNotebookUserInterfaceColors",function(){return sh}),n.d(t,"catchupStragglers",function(){return dh}),n.d(t,"catchupSync",function(){return ti}),n.d(t,"getFilteredSyncChunk",function(){return Ku}),n.d(t,"filteredSyncChunkGenerator",function(){return Fu}),n.d(t,"getSyncState",function(){return Gu}),n.d(t,"getSyncStateWithMetrics",function(){return gh}),n.d(t,"processSyncChunk",function(){return la}),n.d(t,"runBusinessSyncCycle",function(){return Fv}),n.d(t,"runPersonalSyncCycle",function(){return Bv}),n.d(t,"fileSupportTicket",function(){return Kv}),n.d(t,"sendLogRequest",function(){return Zv}),n.d(t,"findSearchSuggestionsV2",function(){return nd}),n.d(t,"getProps",function(){return kd}),n.d(t,"getServiceState",function(){return Nd}),n.d(t,"syncMessages",function(){return Dd}),n.d(t,"updateCommEngine",function(){return Md}),n.d(t,"createMessageThread",function(){return Hd}),n.d(t,"sendMessageToThread",function(){return Xd}),n.d(t,"bootstrapShortcuts",function(){return rb})}}]);